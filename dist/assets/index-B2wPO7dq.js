(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function zp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ot={},No=[],$r=()=>{},sb=()=>!1,cd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Gp=t=>t.startsWith("onUpdate:"),nn=Object.assign,qp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xS=Object.prototype.hasOwnProperty,rt=(t,e)=>xS.call(t,e),Oe=Array.isArray,Mo=t=>Bc(t)==="[object Map]",ld=t=>Bc(t)==="[object Set]",_0=t=>Bc(t)==="[object Date]",Me=t=>typeof t=="function",Tt=t=>typeof t=="string",jr=t=>typeof t=="symbol",at=t=>t!==null&&typeof t=="object",ob=t=>(at(t)||Me(t))&&Me(t.then)&&Me(t.catch),ab=Object.prototype.toString,Bc=t=>ab.call(t),kS=t=>Bc(t).slice(8,-1),cb=t=>Bc(t)==="[object Object]",Wp=t=>Tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fa=zp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ud=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},TS=/-\w/g,nr=ud(t=>t.replace(TS,e=>e.slice(1).toUpperCase())),PS=/\B([A-Z])/g,Ys=ud(t=>t.replace(PS,"-$1").toLowerCase()),dd=ud(t=>t.charAt(0).toUpperCase()+t.slice(1)),Zd=ud(t=>t?`on${dd(t)}`:""),ns=(t,e)=>!Object.is(t,e),Fl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},lb=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Sh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let S0;const fd=()=>S0||(S0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rs(t){if(Oe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Tt(r)?NS(r):rs(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Tt(t)||at(t))return t}const IS=/;(?![^(]*\))/g,RS=/:([^]+)/,OS=/\/\*[^]*?\*\//g;function NS(t){const e={};return t.replace(OS,"").split(IS).forEach(n=>{if(n){const r=n.split(RS);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function fa(t){let e="";if(Tt(t))e=t;else if(Oe(t))for(let n=0;n<t.length;n++){const r=fa(t[n]);r&&(e+=r+" ")}else if(at(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const MS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LS=zp(MS);function ub(t){return!!t||t===""}function BS(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=hd(t[r],e[r]);return n}function hd(t,e){if(t===e)return!0;let n=_0(t),r=_0(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=jr(t),r=jr(e),n||r)return t===e;if(n=Oe(t),r=Oe(e),n||r)return n&&r?BS(t,e):!1;if(n=at(t),r=at(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!hd(t[o],e[o]))return!1}}return String(t)===String(e)}function db(t,e){return t.findIndex(n=>hd(n,e))}const fb=t=>!!(t&&t.__v_isRef===!0),Te=t=>Tt(t)?t:t==null?"":Oe(t)||at(t)&&(t.toString===ab||!Me(t.toString))?fb(t)?Te(t.value):JSON.stringify(t,hb,2):String(t),hb=(t,e)=>fb(e)?hb(t,e.value):Mo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Xd(r,s)+" =>"]=i,n),{})}:ld(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Xd(n))}:jr(e)?Xd(e):at(e)&&!Oe(e)&&!cb(e)?String(e):e,Xd=(t,e="")=>{var n;return jr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let An;class pb{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=An,!e&&An&&(this.index=(An.scopes||(An.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=An;try{return An=this,e()}finally{An=n}}}on(){++this._on===1&&(this.prevScope=An,An=this)}off(){this._on>0&&--this._on===0&&(An=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function DS(t){return new pb(t)}function US(){return An}let ct;const ef=new WeakSet;class gb{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,An&&An.active&&An.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ef.has(this)&&(ef.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||yb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,C0(this),vb(this);const e=ct,n=mr;ct=this,mr=!0;try{return this.fn()}finally{wb(this),ct=e,mr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Yp(e);this.deps=this.depsTail=void 0,C0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ef.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ch(this)&&this.run()}get dirty(){return Ch(this)}}let mb=0,Ha,Ka;function yb(t,e=!1){if(t.flags|=8,e){t.next=Ka,Ka=t;return}t.next=Ha,Ha=t}function Qp(){mb++}function Jp(){if(--mb>0)return;if(Ka){let e=Ka;for(Ka=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ha;){let e=Ha;for(Ha=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function vb(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function wb(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Yp(r),$S(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Ch(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(bb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function bb(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===sc)||(t.globalVersion=sc,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Ch(t))))return;t.flags|=2;const e=t.dep,n=ct,r=mr;ct=t,mr=!0;try{vb(t);const i=t.fn(t._value);(e.version===0||ns(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{ct=n,mr=r,wb(t),t.flags&=-3}}function Yp(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Yp(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $S(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let mr=!0;const Eb=[];function yi(){Eb.push(mr),mr=!1}function vi(){const t=Eb.pop();mr=t===void 0?!0:t}function C0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ct;ct=void 0;try{e()}finally{ct=n}}}let sc=0;class FS{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Zp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ct||!mr||ct===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ct)n=this.activeLink=new FS(ct,this),ct.deps?(n.prevDep=ct.depsTail,ct.depsTail.nextDep=n,ct.depsTail=n):ct.deps=ct.depsTail=n,Ab(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ct.depsTail,n.nextDep=void 0,ct.depsTail.nextDep=n,ct.depsTail=n,ct.deps===n&&(ct.deps=r)}return n}trigger(e){this.version++,sc++,this.notify(e)}notify(e){Qp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Jp()}}}function Ab(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ab(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const xh=new WeakMap,Hs=Symbol(""),kh=Symbol(""),oc=Symbol("");function Qt(t,e,n){if(mr&&ct){let r=xh.get(t);r||xh.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new Zp),i.map=r,i.key=n),i.track()}}function ii(t,e,n,r,i,s){const o=xh.get(t);if(!o){sc++;return}const a=c=>{c&&c.trigger()};if(Qp(),e==="clear")o.forEach(a);else{const c=Oe(t),l=c&&Wp(n);if(c&&n==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===oc||!jr(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(oc)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Hs)),Mo(t)&&a(o.get(kh)));break;case"delete":c||(a(o.get(Hs)),Mo(t)&&a(o.get(kh)));break;case"set":Mo(t)&&a(o.get(Hs));break}}Jp()}function oo(t){const e=nt(t);return e===t?e:(Qt(e,"iterate",oc),tr(t)?e:e.map(Ht))}function pd(t){return Qt(t=nt(t),"iterate",oc),t}const HS={__proto__:null,[Symbol.iterator](){return tf(this,Symbol.iterator,Ht)},concat(...t){return oo(this).concat(...t.map(e=>Oe(e)?oo(e):e))},entries(){return tf(this,"entries",t=>(t[1]=Ht(t[1]),t))},every(t,e){return qr(this,"every",t,e,void 0,arguments)},filter(t,e){return qr(this,"filter",t,e,n=>n.map(Ht),arguments)},find(t,e){return qr(this,"find",t,e,Ht,arguments)},findIndex(t,e){return qr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qr(this,"findLast",t,e,Ht,arguments)},findLastIndex(t,e){return qr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qr(this,"forEach",t,e,void 0,arguments)},includes(...t){return nf(this,"includes",t)},indexOf(...t){return nf(this,"indexOf",t)},join(t){return oo(this).join(t)},lastIndexOf(...t){return nf(this,"lastIndexOf",t)},map(t,e){return qr(this,"map",t,e,void 0,arguments)},pop(){return va(this,"pop")},push(...t){return va(this,"push",t)},reduce(t,...e){return x0(this,"reduce",t,e)},reduceRight(t,...e){return x0(this,"reduceRight",t,e)},shift(){return va(this,"shift")},some(t,e){return qr(this,"some",t,e,void 0,arguments)},splice(...t){return va(this,"splice",t)},toReversed(){return oo(this).toReversed()},toSorted(t){return oo(this).toSorted(t)},toSpliced(...t){return oo(this).toSpliced(...t)},unshift(...t){return va(this,"unshift",t)},values(){return tf(this,"values",Ht)}};function tf(t,e,n){const r=pd(t),i=r[e]();return r!==t&&!tr(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const KS=Array.prototype;function qr(t,e,n,r,i,s){const o=pd(t),a=o!==t&&!tr(t),c=o[e];if(c!==KS[e]){const d=c.apply(t,s);return a?Ht(d):d}let l=n;o!==t&&(a?l=function(d,f){return n.call(this,Ht(d),f,t)}:n.length>2&&(l=function(d,f){return n.call(this,d,f,t)}));const u=c.call(o,l,r);return a&&i?i(u):u}function x0(t,e,n,r){const i=pd(t);let s=n;return i!==t&&(tr(t)?n.length>3&&(s=function(o,a,c){return n.call(this,o,a,c,t)}):s=function(o,a,c){return n.call(this,o,Ht(a),c,t)}),i[e](s,...r)}function nf(t,e,n){const r=nt(t);Qt(r,"iterate",oc);const i=r[e](...n);return(i===-1||i===!1)&&tg(n[0])?(n[0]=nt(n[0]),r[e](...n)):i}function va(t,e,n=[]){yi(),Qp();const r=nt(t)[e].apply(t,n);return Jp(),vi(),r}const jS=zp("__proto__,__v_isRef,__isVue"),_b=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(jr));function VS(t){jr(t)||(t=String(t));const e=nt(this);return Qt(e,"has",t),e.hasOwnProperty(t)}class Sb{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?eC:Tb:s?kb:xb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Oe(e);if(!i){let c;if(o&&(c=HS[n]))return c;if(n==="hasOwnProperty")return VS}const a=Reflect.get(e,n,tn(e)?e:r);if((jr(n)?_b.has(n):jS(n))||(i||Qt(e,"get",n),s))return a;if(tn(a)){const c=o&&Wp(n)?a:a.value;return i&&at(c)?Ph(c):c}return at(a)?i?Ph(a):Jo(a):a}}class Cb extends Sb{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const c=cs(s);if(!tr(r)&&!cs(r)&&(s=nt(s),r=nt(r)),!Oe(e)&&tn(s)&&!tn(r))return c||(s.value=r),!0}const o=Oe(e)&&Wp(n)?Number(n)<e.length:rt(e,n),a=Reflect.set(e,n,r,tn(e)?e:i);return e===nt(i)&&(o?ns(r,s)&&ii(e,"set",n,r):ii(e,"add",n,r)),a}deleteProperty(e,n){const r=rt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&ii(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!jr(n)||!_b.has(n))&&Qt(e,"has",n),r}ownKeys(e){return Qt(e,"iterate",Oe(e)?"length":Hs),Reflect.ownKeys(e)}}class zS extends Sb{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const GS=new Cb,qS=new zS,WS=new Cb(!0);const Th=t=>t,el=t=>Reflect.getPrototypeOf(t);function QS(t,e,n){return function(...r){const i=this.__v_raw,s=nt(i),o=Mo(s),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=i[t](...r),u=n?Th:e?pu:Ht;return!e&&Qt(s,"iterate",c?kh:Hs),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function tl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function JS(t,e){const n={get(i){const s=this.__v_raw,o=nt(s),a=nt(i);t||(ns(i,a)&&Qt(o,"get",i),Qt(o,"get",a));const{has:c}=el(o),l=e?Th:t?pu:Ht;if(c.call(o,i))return l(s.get(i));if(c.call(o,a))return l(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Qt(nt(i),"iterate",Hs),i.size},has(i){const s=this.__v_raw,o=nt(s),a=nt(i);return t||(ns(i,a)&&Qt(o,"has",i),Qt(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,c=nt(a),l=e?Th:t?pu:Ht;return!t&&Qt(c,"iterate",Hs),a.forEach((u,d)=>i.call(s,l(u),l(d),o))}};return nn(n,t?{add:tl("add"),set:tl("set"),delete:tl("delete"),clear:tl("clear")}:{add(i){!e&&!tr(i)&&!cs(i)&&(i=nt(i));const s=nt(this);return el(s).has.call(s,i)||(s.add(i),ii(s,"add",i,i)),this},set(i,s){!e&&!tr(s)&&!cs(s)&&(s=nt(s));const o=nt(this),{has:a,get:c}=el(o);let l=a.call(o,i);l||(i=nt(i),l=a.call(o,i));const u=c.call(o,i);return o.set(i,s),l?ns(s,u)&&ii(o,"set",i,s):ii(o,"add",i,s),this},delete(i){const s=nt(this),{has:o,get:a}=el(s);let c=o.call(s,i);c||(i=nt(i),c=o.call(s,i)),a&&a.call(s,i);const l=s.delete(i);return c&&ii(s,"delete",i,void 0),l},clear(){const i=nt(this),s=i.size!==0,o=i.clear();return s&&ii(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=QS(i,t,e)}),n}function Xp(t,e){const n=JS(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(rt(n,i)&&i in r?n:r,i,s)}const YS={get:Xp(!1,!1)},ZS={get:Xp(!1,!0)},XS={get:Xp(!0,!1)};const xb=new WeakMap,kb=new WeakMap,Tb=new WeakMap,eC=new WeakMap;function tC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nC(t){return t.__v_skip||!Object.isExtensible(t)?0:tC(kS(t))}function Jo(t){return cs(t)?t:eg(t,!1,GS,YS,xb)}function Pb(t){return eg(t,!1,WS,ZS,kb)}function Ph(t){return eg(t,!0,qS,XS,Tb)}function eg(t,e,n,r,i){if(!at(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=nC(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function Lo(t){return cs(t)?Lo(t.__v_raw):!!(t&&t.__v_isReactive)}function cs(t){return!!(t&&t.__v_isReadonly)}function tr(t){return!!(t&&t.__v_isShallow)}function tg(t){return t?!!t.__v_raw:!1}function nt(t){const e=t&&t.__v_raw;return e?nt(e):t}function Ib(t){return!rt(t,"__v_skip")&&Object.isExtensible(t)&&lb(t,"__v_skip",!0),t}const Ht=t=>at(t)?Jo(t):t,pu=t=>at(t)?Ph(t):t;function tn(t){return t?t.__v_isRef===!0:!1}function _e(t){return Rb(t,!1)}function rC(t){return Rb(t,!0)}function Rb(t,e){return tn(t)?t:new iC(t,e)}class iC{constructor(e,n){this.dep=new Zp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:nt(e),this._value=n?e:Ht(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||tr(e)||cs(e);e=r?e:nt(e),ns(e,n)&&(this._rawValue=e,this._value=r?e:Ht(e),this.dep.trigger())}}function Zt(t){return tn(t)?t.value:t}const sC={get:(t,e,n)=>e==="__v_raw"?t:Zt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return tn(i)&&!tn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Ob(t){return Lo(t)?t:new Proxy(t,sC)}class oC{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Zp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ct!==this)return yb(this,!0),!0}get value(){const e=this.dep.track();return bb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function aC(t,e,n=!1){let r,i;return Me(t)?r=t:(r=t.get,i=t.set),new oC(r,i,n)}const nl={},gu=new WeakMap;let Ss;function cC(t,e=!1,n=Ss){if(n){let r=gu.get(n);r||gu.set(n,r=[]),r.push(t)}}function lC(t,e,n=ot){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:c}=n,l=P=>i?P:tr(P)||i===!1||i===0?si(P,1):si(P);let u,d,f,h,g=!1,p=!1;if(tn(t)?(d=()=>t.value,g=tr(t)):Lo(t)?(d=()=>l(t),g=!0):Oe(t)?(p=!0,g=t.some(P=>Lo(P)||tr(P)),d=()=>t.map(P=>{if(tn(P))return P.value;if(Lo(P))return l(P);if(Me(P))return c?c(P,2):P()})):Me(t)?e?d=c?()=>c(t,2):t:d=()=>{if(f){yi();try{f()}finally{vi()}}const P=Ss;Ss=u;try{return c?c(t,3,[h]):t(h)}finally{Ss=P}}:d=$r,e&&i){const P=d,O=i===!0?1/0:i;d=()=>si(P(),O)}const y=US(),m=()=>{u.stop(),y&&y.active&&qp(y.effects,u)};if(s&&e){const P=e;e=(...O)=>{P(...O),m()}}let b=p?new Array(t.length).fill(nl):nl;const w=P=>{if(!(!(u.flags&1)||!u.dirty&&!P))if(e){const O=u.run();if(i||g||(p?O.some((H,G)=>ns(H,b[G])):ns(O,b))){f&&f();const H=Ss;Ss=u;try{const G=[O,b===nl?void 0:p&&b[0]===nl?[]:b,h];b=O,c?c(e,3,G):e(...G)}finally{Ss=H}}}else u.run()};return a&&a(w),u=new gb(d),u.scheduler=o?()=>o(w,!1):w,h=P=>cC(P,!1,u),f=u.onStop=()=>{const P=gu.get(u);if(P){if(c)c(P,4);else for(const O of P)O();gu.delete(u)}},e?r?w(!0):b=u.run():o?o(w.bind(null,!0),!0):u.run(),m.pause=u.pause.bind(u),m.resume=u.resume.bind(u),m.stop=m,m}function si(t,e=1/0,n){if(e<=0||!at(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,tn(t))si(t.value,e,n);else if(Oe(t))for(let r=0;r<t.length;r++)si(t[r],e,n);else if(ld(t)||Mo(t))t.forEach(r=>{si(r,e,n)});else if(cb(t)){for(const r in t)si(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&si(t[r],e,n)}return t}function Dc(t,e,n,r){try{return r?t(...r):t()}catch(i){gd(i,e,n)}}function Vr(t,e,n,r){if(Me(t)){const i=Dc(t,e,n,r);return i&&ob(i)&&i.catch(s=>{gd(s,e,n)}),i}if(Oe(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Vr(t[s],e,n,r));return i}}function gd(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ot;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,c,l)===!1)return}a=a.parent}if(s){yi(),Dc(s,null,10,[t,c,l]),vi();return}}uC(t,n,i,r,o)}function uC(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const ln=[];let Tr=-1;const Bo=[];let Hi=null,mo=0;const Nb=Promise.resolve();let mu=null;function yu(t){const e=mu||Nb;return t?e.then(this?t.bind(this):t):e}function dC(t){let e=Tr+1,n=ln.length;for(;e<n;){const r=e+n>>>1,i=ln[r],s=ac(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function ng(t){if(!(t.flags&1)){const e=ac(t),n=ln[ln.length-1];!n||!(t.flags&2)&&e>=ac(n)?ln.push(t):ln.splice(dC(e),0,t),t.flags|=1,Mb()}}function Mb(){mu||(mu=Nb.then(Bb))}function fC(t){Oe(t)?Bo.push(...t):Hi&&t.id===-1?Hi.splice(mo+1,0,t):t.flags&1||(Bo.push(t),t.flags|=1),Mb()}function k0(t,e,n=Tr+1){for(;n<ln.length;n++){const r=ln[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ln.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Lb(t){if(Bo.length){const e=[...new Set(Bo)].sort((n,r)=>ac(n)-ac(r));if(Bo.length=0,Hi){Hi.push(...e);return}for(Hi=e,mo=0;mo<Hi.length;mo++){const n=Hi[mo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hi=null,mo=0}}const ac=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Bb(t){try{for(Tr=0;Tr<ln.length;Tr++){const e=ln[Tr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Dc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Tr<ln.length;Tr++){const e=ln[Tr];e&&(e.flags&=-2)}Tr=-1,ln.length=0,Lb(),mu=null,(ln.length||Bo.length)&&Bb()}}let $n=null,Db=null;function vu(t){const e=$n;return $n=t,Db=t&&t.type.__scopeId||null,e}function Ts(t,e=$n,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Eu(-1);const s=vu(e);let o;try{o=t(...i)}finally{vu(s),r._d&&Eu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function rn(t,e){if($n===null)return t;const n=Ed($n),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,c=ot]=e[i];s&&(Me(s)&&(s={mounted:s,updated:s}),s.deep&&si(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function vs(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(yi(),Vr(c,n,8,[t.el,a,t,e]),vi())}}const hC=Symbol("_vte"),pC=t=>t.__isTeleport,gC=Symbol("_leaveCb");function rg(t,e){t.shapeFlag&6&&t.component?(t.transition=e,rg(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ub(t,e){return Me(t)?nn({name:t.name},e,{setup:t}):t}function $b(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const wu=new WeakMap;function ja(t,e,n,r,i=!1){if(Oe(t)){t.forEach((g,p)=>ja(g,e&&(Oe(e)?e[p]:e),n,r,i));return}if(Va(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ja(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Ed(r.component):r.el,o=i?null:s,{i:a,r:c}=t,l=e&&e.r,u=a.refs===ot?a.refs={}:a.refs,d=a.setupState,f=nt(d),h=d===ot?sb:g=>rt(f,g);if(l!=null&&l!==c){if(T0(e),Tt(l))u[l]=null,h(l)&&(d[l]=null);else if(tn(l)){l.value=null;const g=e;g.k&&(u[g.k]=null)}}if(Me(c))Dc(c,a,12,[o,u]);else{const g=Tt(c),p=tn(c);if(g||p){const y=()=>{if(t.f){const m=g?h(c)?d[c]:u[c]:c.value;if(i)Oe(m)&&qp(m,s);else if(Oe(m))m.includes(s)||m.push(s);else if(g)u[c]=[s],h(c)&&(d[c]=u[c]);else{const b=[s];c.value=b,t.k&&(u[t.k]=b)}}else g?(u[c]=o,h(c)&&(d[c]=o)):p&&(c.value=o,t.k&&(u[t.k]=o))};if(o){const m=()=>{y(),wu.delete(t)};m.id=-1,wu.set(t,m),Rn(m,n)}else T0(t),y()}}}function T0(t){const e=wu.get(t);e&&(e.flags|=8,wu.delete(t))}fd().requestIdleCallback;fd().cancelIdleCallback;const Va=t=>!!t.type.__asyncLoader,Fb=t=>t.type.__isKeepAlive;function mC(t,e){Hb(t,"a",e)}function yC(t,e){Hb(t,"da",e)}function Hb(t,e,n=Xt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(md(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Fb(i.parent.vnode)&&vC(r,e,n,i),i=i.parent}}function vC(t,e,n,r){const i=md(e,t,r,!0);vd(()=>{qp(r[e],i)},n)}function md(t,e,n=Xt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{yi();const a=$c(n),c=Vr(e,n,t,o);return a(),vi(),c});return r?i.unshift(s):i.push(s),s}}const _i=t=>(e,n=Xt)=>{(!lc||t==="sp")&&md(t,(...r)=>e(...r),n)},wC=_i("bm"),gs=_i("m"),bC=_i("bu"),EC=_i("u"),yd=_i("bum"),vd=_i("um"),AC=_i("sp"),_C=_i("rtg"),SC=_i("rtc");function CC(t,e=Xt){md("ec",t,e)}const xC="components";function kC(t,e){return PC(xC,t,!0,e)||t}const TC=Symbol.for("v-ndc");function PC(t,e,n=!0,r=!1){const i=$n||Xt;if(i){const s=i.type;{const a=yx(s,!1);if(a&&(a===e||a===nr(e)||a===dd(nr(e))))return s}const o=P0(i[t]||s[t],e)||P0(i.appContext[t],e);return!o&&r?s:o}}function P0(t,e){return t&&(t[e]||t[nr(e)]||t[dd(nr(e))])}function Uc(t,e,n,r){let i;const s=n,o=Oe(t);if(o||Tt(t)){const a=o&&Lo(t);let c=!1,l=!1;a&&(c=!tr(t),l=cs(t),t=pd(t)),i=new Array(t.length);for(let u=0,d=t.length;u<d;u++)i[u]=e(c?l?pu(Ht(t[u])):Ht(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(at(t))if(t[Symbol.iterator])i=Array.from(t,(a,c)=>e(a,c,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=e(t[u],u,c,s)}}else i=[];return i}const Ih=t=>t?c1(t)?Ed(t):Ih(t.parent):null,za=nn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ih(t.parent),$root:t=>Ih(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>jb(t),$forceUpdate:t=>t.f||(t.f=()=>{ng(t.update)}),$nextTick:t=>t.n||(t.n=yu.bind(t.proxy)),$watch:t=>JC.bind(t)}),rf=(t,e)=>t!==ot&&!t.__isScriptSetup&&rt(t,e),IC={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(rf(r,e))return o[e]=1,r[e];if(i!==ot&&rt(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&rt(l,e))return o[e]=3,s[e];if(n!==ot&&rt(n,e))return o[e]=4,n[e];Rh&&(o[e]=0)}}const u=za[e];let d,f;if(u)return e==="$attrs"&&Qt(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==ot&&rt(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,rt(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return rf(i,e)?(i[e]=n,!0):r!==ot&&rt(r,e)?(r[e]=n,!0):rt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s,type:o}},a){let c,l;return!!(n[a]||t!==ot&&a[0]!=="$"&&rt(t,a)||rf(e,a)||(c=s[0])&&rt(c,a)||rt(r,a)||rt(za,a)||rt(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:rt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function I0(t){return Oe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Rh=!0;function RC(t){const e=jb(t),n=t.proxy,r=t.ctx;Rh=!1,e.beforeCreate&&R0(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:g,activated:p,deactivated:y,beforeDestroy:m,beforeUnmount:b,destroyed:w,unmounted:P,render:O,renderTracked:H,renderTriggered:G,errorCaptured:q,serverPrefetch:j,expose:L,inheritAttrs:V,components:$,directives:D,filters:N}=e;if(l&&OC(l,r,null),o)for(const B in o){const v=o[B];Me(v)&&(r[B]=v.bind(n))}if(i){const B=i.call(n,n);at(B)&&(t.data=Jo(B))}if(Rh=!0,s)for(const B in s){const v=s[B],E=Me(v)?v.bind(n,n):Me(v.get)?v.get.bind(n,n):$r,x=!Me(v)&&Me(v.set)?v.set.bind(n):$r,C=Le({get:E,set:x});Object.defineProperty(r,B,{enumerable:!0,configurable:!0,get:()=>C.value,set:A=>C.value=A})}if(a)for(const B in a)Kb(a[B],r,n,B);if(c){const B=Me(c)?c.call(n):c;Reflect.ownKeys(B).forEach(v=>{Hl(v,B[v])})}u&&R0(u,t,"c");function k(B,v){Oe(v)?v.forEach(E=>B(E.bind(n))):v&&B(v.bind(n))}if(k(wC,d),k(gs,f),k(bC,h),k(EC,g),k(mC,p),k(yC,y),k(CC,q),k(SC,H),k(_C,G),k(yd,b),k(vd,P),k(AC,j),Oe(L))if(L.length){const B=t.exposed||(t.exposed={});L.forEach(v=>{Object.defineProperty(B,v,{get:()=>n[v],set:E=>n[v]=E,enumerable:!0})})}else t.exposed||(t.exposed={});O&&t.render===$r&&(t.render=O),V!=null&&(t.inheritAttrs=V),$&&(t.components=$),D&&(t.directives=D),j&&$b(t)}function OC(t,e,n=$r){Oe(t)&&(t=Oh(t));for(const r in t){const i=t[r];let s;at(i)?"default"in i?s=yr(i.from||r,i.default,!0):s=yr(i.from||r):s=yr(i),tn(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function R0(t,e,n){Vr(Oe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Kb(t,e,n,r){let i=r.includes(".")?n1(n,r):()=>n[r];if(Tt(t)){const s=e[t];Me(s)&&fn(i,s)}else if(Me(t))fn(i,t.bind(n));else if(at(t))if(Oe(t))t.forEach(s=>Kb(s,e,n,r));else{const s=Me(t.handler)?t.handler.bind(n):e[t.handler];Me(s)&&fn(i,s,t)}}function jb(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(l=>bu(c,l,o,!0)),bu(c,e,o)),at(e)&&s.set(e,c),c}function bu(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&bu(t,s,n,!0),i&&i.forEach(o=>bu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=NC[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const NC={data:O0,props:N0,emits:N0,methods:Oa,computed:Oa,beforeCreate:sn,created:sn,beforeMount:sn,mounted:sn,beforeUpdate:sn,updated:sn,beforeDestroy:sn,beforeUnmount:sn,destroyed:sn,unmounted:sn,activated:sn,deactivated:sn,errorCaptured:sn,serverPrefetch:sn,components:Oa,directives:Oa,watch:LC,provide:O0,inject:MC};function O0(t,e){return e?t?function(){return nn(Me(t)?t.call(this,this):t,Me(e)?e.call(this,this):e)}:e:t}function MC(t,e){return Oa(Oh(t),Oh(e))}function Oh(t){if(Oe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function sn(t,e){return t?[...new Set([].concat(t,e))]:e}function Oa(t,e){return t?nn(Object.create(null),t,e):e}function N0(t,e){return t?Oe(t)&&Oe(e)?[...new Set([...t,...e])]:nn(Object.create(null),I0(t),I0(e??{})):e}function LC(t,e){if(!t)return e;if(!e)return t;const n=nn(Object.create(null),t);for(const r in e)n[r]=sn(t[r],e[r]);return n}function Vb(){return{app:null,config:{isNativeTag:sb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BC=0;function DC(t,e){return function(r,i=null){Me(r)||(r=nn({},r)),i!=null&&!at(i)&&(i=null);const s=Vb(),o=new WeakSet,a=[];let c=!1;const l=s.app={_uid:BC++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:wx,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&Me(u.install)?(o.add(u),u.install(l,...d)):Me(u)&&(o.add(u),u(l,...d))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,d){return d?(s.components[u]=d,l):s.components[u]},directive(u,d){return d?(s.directives[u]=d,l):s.directives[u]},mount(u,d,f){if(!c){const h=l._ceVNode||st(r,i);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),t(h,u,f),c=!0,l._container=u,u.__vue_app__=l,Ed(h.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Vr(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,d){return s.provides[u]=d,l},runWithContext(u){const d=Do;Do=l;try{return u()}finally{Do=d}}};return l}}let Do=null;function Hl(t,e){if(Xt){let n=Xt.provides;const r=Xt.parent&&Xt.parent.provides;r===n&&(n=Xt.provides=Object.create(r)),n[t]=e}}function yr(t,e,n=!1){const r=fx();if(r||Do){let i=Do?Do._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Me(e)?e.call(r&&r.proxy):e}}const zb={},Gb=()=>Object.create(zb),qb=t=>Object.getPrototypeOf(t)===zb;function UC(t,e,n,r=!1){const i={},s=Gb();t.propsDefaults=Object.create(null),Wb(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Pb(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function $C(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=nt(i),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(wd(t.emitsOptions,f))continue;const h=e[f];if(c)if(rt(s,f))h!==s[f]&&(s[f]=h,l=!0);else{const g=nr(f);i[g]=Nh(c,a,g,h,t,!1)}else h!==s[f]&&(s[f]=h,l=!0)}}}else{Wb(t,e,i,s)&&(l=!0);let u;for(const d in a)(!e||!rt(e,d)&&((u=Ys(d))===d||!rt(e,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Nh(c,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!rt(e,d))&&(delete s[d],l=!0)}l&&ii(t.attrs,"set","")}function Wb(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Fa(c))continue;const l=e[c];let u;i&&rt(i,u=nr(c))?!s||!s.includes(u)?n[u]=l:(a||(a={}))[u]=l:wd(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=nt(n),l=a||ot;for(let u=0;u<s.length;u++){const d=s[u];n[d]=Nh(i,c,d,l[d],t,!rt(l,d))}}return o}function Nh(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=rt(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Me(c)){const{propsDefaults:l}=i;if(n in l)r=l[n];else{const u=$c(i);r=l[n]=c.call(null,e),u()}}else r=c;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Ys(n))&&(r=!0))}return r}const FC=new WeakMap;function Qb(t,e,n=!1){const r=n?FC:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let c=!1;if(!Me(t)){const u=d=>{c=!0;const[f,h]=Qb(d,e,!0);nn(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!c)return at(t)&&r.set(t,No),No;if(Oe(s))for(let u=0;u<s.length;u++){const d=nr(s[u]);M0(d)&&(o[d]=ot)}else if(s)for(const u in s){const d=nr(u);if(M0(d)){const f=s[u],h=o[d]=Oe(f)||Me(f)?{type:f}:nn({},f),g=h.type;let p=!1,y=!0;if(Oe(g))for(let m=0;m<g.length;++m){const b=g[m],w=Me(b)&&b.name;if(w==="Boolean"){p=!0;break}else w==="String"&&(y=!1)}else p=Me(g)&&g.name==="Boolean";h[0]=p,h[1]=y,(p||rt(h,"default"))&&a.push(d)}}const l=[o,a];return at(t)&&r.set(t,l),l}function M0(t){return t[0]!=="$"&&!Fa(t)}const ig=t=>t==="_"||t==="_ctx"||t==="$stable",sg=t=>Oe(t)?t.map(Pr):[Pr(t)],HC=(t,e,n)=>{if(e._n)return e;const r=Ts((...i)=>sg(e(...i)),n);return r._c=!1,r},Jb=(t,e,n)=>{const r=t._ctx;for(const i in t){if(ig(i))continue;const s=t[i];if(Me(s))e[i]=HC(i,s,r);else if(s!=null){const o=sg(s);e[i]=()=>o}}},Yb=(t,e)=>{const n=sg(e);t.slots.default=()=>n},Zb=(t,e,n)=>{for(const r in e)(n||!ig(r))&&(t[r]=e[r])},KC=(t,e,n)=>{const r=t.slots=Gb();if(t.vnode.shapeFlag&32){const i=e._;i?(Zb(r,e,n),n&&lb(r,"_",i,!0)):Jb(e,r)}else e&&Yb(t,e)},jC=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=ot;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:Zb(i,e,n):(s=!e.$stable,Jb(e,i)),o=e}else e&&(Yb(t,e),o={default:1});if(s)for(const a in i)!ig(a)&&o[a]==null&&delete i[a]},Rn=ix;function VC(t){return zC(t)}function zC(t,e){const n=fd();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=$r,insertStaticContent:g}=t,p=(M,F,Y,ne=null,J=null,Q=null,ie=void 0,re=null,oe=!!F.dynamicChildren)=>{if(M===F)return;M&&!wa(M,F)&&(ne=I(M),A(M,J,Q,!0),M=null),F.patchFlag===-2&&(oe=!1,F.dynamicChildren=null);const{type:te,ref:fe,shapeFlag:le}=F;switch(te){case bd:y(M,F,Y,ne);break;case ls:m(M,F,Y,ne);break;case Kl:M==null&&b(F,Y,ne,ie);break;case Jt:$(M,F,Y,ne,J,Q,ie,re,oe);break;default:le&1?O(M,F,Y,ne,J,Q,ie,re,oe):le&6?D(M,F,Y,ne,J,Q,ie,re,oe):(le&64||le&128)&&te.process(M,F,Y,ne,J,Q,ie,re,oe,Z)}fe!=null&&J?ja(fe,M&&M.ref,Q,F||M,!F):fe==null&&M&&M.ref!=null&&ja(M.ref,null,Q,M,!0)},y=(M,F,Y,ne)=>{if(M==null)r(F.el=a(F.children),Y,ne);else{const J=F.el=M.el;F.children!==M.children&&l(J,F.children)}},m=(M,F,Y,ne)=>{M==null?r(F.el=c(F.children||""),Y,ne):F.el=M.el},b=(M,F,Y,ne)=>{[M.el,M.anchor]=g(M.children,F,Y,ne,M.el,M.anchor)},w=({el:M,anchor:F},Y,ne)=>{let J;for(;M&&M!==F;)J=f(M),r(M,Y,ne),M=J;r(F,Y,ne)},P=({el:M,anchor:F})=>{let Y;for(;M&&M!==F;)Y=f(M),i(M),M=Y;i(F)},O=(M,F,Y,ne,J,Q,ie,re,oe)=>{F.type==="svg"?ie="svg":F.type==="math"&&(ie="mathml"),M==null?H(F,Y,ne,J,Q,ie,re,oe):j(M,F,J,Q,ie,re,oe)},H=(M,F,Y,ne,J,Q,ie,re)=>{let oe,te;const{props:fe,shapeFlag:le,transition:ge,dirs:Ae}=M;if(oe=M.el=o(M.type,Q,fe&&fe.is,fe),le&8?u(oe,M.children):le&16&&q(M.children,oe,null,ne,J,sf(M,Q),ie,re),Ae&&vs(M,null,ne,"created"),G(oe,M,M.scopeId,ie,ne),fe){for(const Ve in fe)Ve!=="value"&&!Fa(Ve)&&s(oe,Ve,null,fe[Ve],Q,ne);"value"in fe&&s(oe,"value",null,fe.value,Q),(te=fe.onVnodeBeforeMount)&&_r(te,ne,M)}Ae&&vs(M,null,ne,"beforeMount");const Pe=GC(J,ge);Pe&&ge.beforeEnter(oe),r(oe,F,Y),((te=fe&&fe.onVnodeMounted)||Pe||Ae)&&Rn(()=>{te&&_r(te,ne,M),Pe&&ge.enter(oe),Ae&&vs(M,null,ne,"mounted")},J)},G=(M,F,Y,ne,J)=>{if(Y&&h(M,Y),ne)for(let Q=0;Q<ne.length;Q++)h(M,ne[Q]);if(J){let Q=J.subTree;if(F===Q||i1(Q.type)&&(Q.ssContent===F||Q.ssFallback===F)){const ie=J.vnode;G(M,ie,ie.scopeId,ie.slotScopeIds,J.parent)}}},q=(M,F,Y,ne,J,Q,ie,re,oe=0)=>{for(let te=oe;te<M.length;te++){const fe=M[te]=re?Ki(M[te]):Pr(M[te]);p(null,fe,F,Y,ne,J,Q,ie,re)}},j=(M,F,Y,ne,J,Q,ie)=>{const re=F.el=M.el;let{patchFlag:oe,dynamicChildren:te,dirs:fe}=F;oe|=M.patchFlag&16;const le=M.props||ot,ge=F.props||ot;let Ae;if(Y&&ws(Y,!1),(Ae=ge.onVnodeBeforeUpdate)&&_r(Ae,Y,F,M),fe&&vs(F,M,Y,"beforeUpdate"),Y&&ws(Y,!0),(le.innerHTML&&ge.innerHTML==null||le.textContent&&ge.textContent==null)&&u(re,""),te?L(M.dynamicChildren,te,re,Y,ne,sf(F,J),Q):ie||v(M,F,re,null,Y,ne,sf(F,J),Q,!1),oe>0){if(oe&16)V(re,le,ge,Y,J);else if(oe&2&&le.class!==ge.class&&s(re,"class",null,ge.class,J),oe&4&&s(re,"style",le.style,ge.style,J),oe&8){const Pe=F.dynamicProps;for(let Ve=0;Ve<Pe.length;Ve++){const he=Pe[Ve],X=le[he],we=ge[he];(we!==X||he==="value")&&s(re,he,X,we,J,Y)}}oe&1&&M.children!==F.children&&u(re,F.children)}else!ie&&te==null&&V(re,le,ge,Y,J);((Ae=ge.onVnodeUpdated)||fe)&&Rn(()=>{Ae&&_r(Ae,Y,F,M),fe&&vs(F,M,Y,"updated")},ne)},L=(M,F,Y,ne,J,Q,ie)=>{for(let re=0;re<F.length;re++){const oe=M[re],te=F[re],fe=oe.el&&(oe.type===Jt||!wa(oe,te)||oe.shapeFlag&198)?d(oe.el):Y;p(oe,te,fe,null,ne,J,Q,ie,!0)}},V=(M,F,Y,ne,J)=>{if(F!==Y){if(F!==ot)for(const Q in F)!Fa(Q)&&!(Q in Y)&&s(M,Q,F[Q],null,J,ne);for(const Q in Y){if(Fa(Q))continue;const ie=Y[Q],re=F[Q];ie!==re&&Q!=="value"&&s(M,Q,re,ie,J,ne)}"value"in Y&&s(M,"value",F.value,Y.value,J)}},$=(M,F,Y,ne,J,Q,ie,re,oe)=>{const te=F.el=M?M.el:a(""),fe=F.anchor=M?M.anchor:a("");let{patchFlag:le,dynamicChildren:ge,slotScopeIds:Ae}=F;Ae&&(re=re?re.concat(Ae):Ae),M==null?(r(te,Y,ne),r(fe,Y,ne),q(F.children||[],Y,fe,J,Q,ie,re,oe)):le>0&&le&64&&ge&&M.dynamicChildren?(L(M.dynamicChildren,ge,Y,J,Q,ie,re),(F.key!=null||J&&F===J.subTree)&&Xb(M,F,!0)):v(M,F,Y,fe,J,Q,ie,re,oe)},D=(M,F,Y,ne,J,Q,ie,re,oe)=>{F.slotScopeIds=re,M==null?F.shapeFlag&512?J.ctx.activate(F,Y,ne,ie,oe):N(F,Y,ne,J,Q,ie,oe):S(M,F,oe)},N=(M,F,Y,ne,J,Q,ie)=>{const re=M.component=dx(M,ne,J);if(Fb(M)&&(re.ctx.renderer=Z),hx(re,!1,ie),re.asyncDep){if(J&&J.registerDep(re,k,ie),!M.el){const oe=re.subTree=st(ls);m(null,oe,F,Y),M.placeholder=oe.el}}else k(re,M,F,Y,J,Q,ie)},S=(M,F,Y)=>{const ne=F.component=M.component;if(nx(M,F,Y))if(ne.asyncDep&&!ne.asyncResolved){B(ne,F,Y);return}else ne.next=F,ne.update();else F.el=M.el,ne.vnode=F},k=(M,F,Y,ne,J,Q,ie)=>{const re=()=>{if(M.isMounted){let{next:le,bu:ge,u:Ae,parent:Pe,vnode:Ve}=M;{const Ct=e1(M);if(Ct){le&&(le.el=Ve.el,B(M,le,ie)),Ct.asyncDep.then(()=>{M.isUnmounted||re()});return}}let he=le,X;ws(M,!1),le?(le.el=Ve.el,B(M,le,ie)):le=Ve,ge&&Fl(ge),(X=le.props&&le.props.onVnodeBeforeUpdate)&&_r(X,Pe,le,Ve),ws(M,!0);const we=B0(M),qe=M.subTree;M.subTree=we,p(qe,we,d(qe.el),I(qe),M,J,Q),le.el=we.el,he===null&&rx(M,we.el),Ae&&Rn(Ae,J),(X=le.props&&le.props.onVnodeUpdated)&&Rn(()=>_r(X,Pe,le,Ve),J)}else{let le;const{el:ge,props:Ae}=F,{bm:Pe,m:Ve,parent:he,root:X,type:we}=M,qe=Va(F);ws(M,!1),Pe&&Fl(Pe),!qe&&(le=Ae&&Ae.onVnodeBeforeMount)&&_r(le,he,F),ws(M,!0);{X.ce&&X.ce._def.shadowRoot!==!1&&X.ce._injectChildStyle(we);const Ct=M.subTree=B0(M);p(null,Ct,Y,ne,M,J,Q),F.el=Ct.el}if(Ve&&Rn(Ve,J),!qe&&(le=Ae&&Ae.onVnodeMounted)){const Ct=F;Rn(()=>_r(le,he,Ct),J)}(F.shapeFlag&256||he&&Va(he.vnode)&&he.vnode.shapeFlag&256)&&M.a&&Rn(M.a,J),M.isMounted=!0,F=Y=ne=null}};M.scope.on();const oe=M.effect=new gb(re);M.scope.off();const te=M.update=oe.run.bind(oe),fe=M.job=oe.runIfDirty.bind(oe);fe.i=M,fe.id=M.uid,oe.scheduler=()=>ng(fe),ws(M,!0),te()},B=(M,F,Y)=>{F.component=M;const ne=M.vnode.props;M.vnode=F,M.next=null,$C(M,F.props,ne,Y),jC(M,F.children,Y),yi(),k0(M),vi()},v=(M,F,Y,ne,J,Q,ie,re,oe=!1)=>{const te=M&&M.children,fe=M?M.shapeFlag:0,le=F.children,{patchFlag:ge,shapeFlag:Ae}=F;if(ge>0){if(ge&128){x(te,le,Y,ne,J,Q,ie,re,oe);return}else if(ge&256){E(te,le,Y,ne,J,Q,ie,re,oe);return}}Ae&8?(fe&16&&U(te,J,Q),le!==te&&u(Y,le)):fe&16?Ae&16?x(te,le,Y,ne,J,Q,ie,re,oe):U(te,J,Q,!0):(fe&8&&u(Y,""),Ae&16&&q(le,Y,ne,J,Q,ie,re,oe))},E=(M,F,Y,ne,J,Q,ie,re,oe)=>{M=M||No,F=F||No;const te=M.length,fe=F.length,le=Math.min(te,fe);let ge;for(ge=0;ge<le;ge++){const Ae=F[ge]=oe?Ki(F[ge]):Pr(F[ge]);p(M[ge],Ae,Y,null,J,Q,ie,re,oe)}te>fe?U(M,J,Q,!0,!1,le):q(F,Y,ne,J,Q,ie,re,oe,le)},x=(M,F,Y,ne,J,Q,ie,re,oe)=>{let te=0;const fe=F.length;let le=M.length-1,ge=fe-1;for(;te<=le&&te<=ge;){const Ae=M[te],Pe=F[te]=oe?Ki(F[te]):Pr(F[te]);if(wa(Ae,Pe))p(Ae,Pe,Y,null,J,Q,ie,re,oe);else break;te++}for(;te<=le&&te<=ge;){const Ae=M[le],Pe=F[ge]=oe?Ki(F[ge]):Pr(F[ge]);if(wa(Ae,Pe))p(Ae,Pe,Y,null,J,Q,ie,re,oe);else break;le--,ge--}if(te>le){if(te<=ge){const Ae=ge+1,Pe=Ae<fe?F[Ae].el:ne;for(;te<=ge;)p(null,F[te]=oe?Ki(F[te]):Pr(F[te]),Y,Pe,J,Q,ie,re,oe),te++}}else if(te>ge)for(;te<=le;)A(M[te],J,Q,!0),te++;else{const Ae=te,Pe=te,Ve=new Map;for(te=Pe;te<=ge;te++){const It=F[te]=oe?Ki(F[te]):Pr(F[te]);It.key!=null&&Ve.set(It.key,te)}let he,X=0;const we=ge-Pe+1;let qe=!1,Ct=0;const vn=new Array(we);for(te=0;te<we;te++)vn[te]=0;for(te=Ae;te<=le;te++){const It=M[te];if(X>=we){A(It,J,Q,!0);continue}let Dt;if(It.key!=null)Dt=Ve.get(It.key);else for(he=Pe;he<=ge;he++)if(vn[he-Pe]===0&&wa(It,F[he])){Dt=he;break}Dt===void 0?A(It,J,Q,!0):(vn[Dt-Pe]=te+1,Dt>=Ct?Ct=Dt:qe=!0,p(It,F[Dt],Y,null,J,Q,ie,re,oe),X++)}const jn=qe?qC(vn):No;for(he=jn.length-1,te=we-1;te>=0;te--){const It=Pe+te,Dt=F[It],ya=F[It+1],ir=It+1<fe?ya.el||ya.placeholder:ne;vn[te]===0?p(null,Dt,Y,ir,J,Q,ie,re,oe):qe&&(he<0||te!==jn[he]?C(Dt,Y,ir,2):he--)}}},C=(M,F,Y,ne,J=null)=>{const{el:Q,type:ie,transition:re,children:oe,shapeFlag:te}=M;if(te&6){C(M.component.subTree,F,Y,ne);return}if(te&128){M.suspense.move(F,Y,ne);return}if(te&64){ie.move(M,F,Y,Z);return}if(ie===Jt){r(Q,F,Y);for(let le=0;le<oe.length;le++)C(oe[le],F,Y,ne);r(M.anchor,F,Y);return}if(ie===Kl){w(M,F,Y);return}if(ne!==2&&te&1&&re)if(ne===0)re.beforeEnter(Q),r(Q,F,Y),Rn(()=>re.enter(Q),J);else{const{leave:le,delayLeave:ge,afterLeave:Ae}=re,Pe=()=>{M.ctx.isUnmounted?i(Q):r(Q,F,Y)},Ve=()=>{Q._isLeaving&&Q[gC](!0),le(Q,()=>{Pe(),Ae&&Ae()})};ge?ge(Q,Pe,Ve):Ve()}else r(Q,F,Y)},A=(M,F,Y,ne=!1,J=!1)=>{const{type:Q,props:ie,ref:re,children:oe,dynamicChildren:te,shapeFlag:fe,patchFlag:le,dirs:ge,cacheIndex:Ae}=M;if(le===-2&&(J=!1),re!=null&&(yi(),ja(re,null,Y,M,!0),vi()),Ae!=null&&(F.renderCache[Ae]=void 0),fe&256){F.ctx.deactivate(M);return}const Pe=fe&1&&ge,Ve=!Va(M);let he;if(Ve&&(he=ie&&ie.onVnodeBeforeUnmount)&&_r(he,F,M),fe&6)R(M.component,Y,ne);else{if(fe&128){M.suspense.unmount(Y,ne);return}Pe&&vs(M,null,F,"beforeUnmount"),fe&64?M.type.remove(M,F,Y,Z,ne):te&&!te.hasOnce&&(Q!==Jt||le>0&&le&64)?U(te,F,Y,!1,!0):(Q===Jt&&le&384||!J&&fe&16)&&U(oe,F,Y),ne&&_(M)}(Ve&&(he=ie&&ie.onVnodeUnmounted)||Pe)&&Rn(()=>{he&&_r(he,F,M),Pe&&vs(M,null,F,"unmounted")},Y)},_=M=>{const{type:F,el:Y,anchor:ne,transition:J}=M;if(F===Jt){T(Y,ne);return}if(F===Kl){P(M);return}const Q=()=>{i(Y),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(M.shapeFlag&1&&J&&!J.persisted){const{leave:ie,delayLeave:re}=J,oe=()=>ie(Y,Q);re?re(M.el,Q,oe):oe()}else Q()},T=(M,F)=>{let Y;for(;M!==F;)Y=f(M),i(M),M=Y;i(F)},R=(M,F,Y)=>{const{bum:ne,scope:J,job:Q,subTree:ie,um:re,m:oe,a:te}=M;L0(oe),L0(te),ne&&Fl(ne),J.stop(),Q&&(Q.flags|=8,A(ie,M,F,Y)),re&&Rn(re,F),Rn(()=>{M.isUnmounted=!0},F)},U=(M,F,Y,ne=!1,J=!1,Q=0)=>{for(let ie=Q;ie<M.length;ie++)A(M[ie],F,Y,ne,J)},I=M=>{if(M.shapeFlag&6)return I(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const F=f(M.anchor||M.el),Y=F&&F[hC];return Y?f(Y):F};let K=!1;const W=(M,F,Y)=>{M==null?F._vnode&&A(F._vnode,null,null,!0):p(F._vnode||null,M,F,null,null,null,Y),F._vnode=M,K||(K=!0,k0(),Lb(),K=!1)},Z={p,um:A,m:C,r:_,mt:N,mc:q,pc:v,pbc:L,n:I,o:t};return{render:W,hydrate:void 0,createApp:DC(W)}}function sf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ws({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function GC(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Xb(t,e,n=!1){const r=t.children,i=e.children;if(Oe(r)&&Oe(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ki(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Xb(o,a)),a.type===bd&&a.patchFlag!==-1&&(a.el=o.el),a.type===ls&&!a.el&&(a.el=o.el)}}function qC(t){const e=t.slice(),n=[0];let r,i,s,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<l?s=a+1:o=a;l<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function e1(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:e1(e)}function L0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const WC=Symbol.for("v-scx"),QC=()=>yr(WC);function fn(t,e,n){return t1(t,e,n)}function t1(t,e,n=ot){const{immediate:r,deep:i,flush:s,once:o}=n,a=nn({},n),c=e&&r||!e&&s!=="post";let l;if(lc){if(s==="sync"){const h=QC();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=$r,h.resume=$r,h.pause=$r,h}}const u=Xt;a.call=(h,g,p)=>Vr(h,u,g,p);let d=!1;s==="post"?a.scheduler=h=>{Rn(h,u&&u.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(h,g)=>{g?h():ng(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=lC(t,e,a);return lc&&(l?l.push(f):c&&f()),f}function JC(t,e,n){const r=this.proxy,i=Tt(t)?t.includes(".")?n1(r,t):()=>r[t]:t.bind(r,r);let s;Me(e)?s=e:(s=e.handler,n=e);const o=$c(this),a=t1(i,s.bind(r),n);return o(),a}function n1(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const YC=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${nr(e)}Modifiers`]||t[`${Ys(e)}Modifiers`];function ZC(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ot;let i=n;const s=e.startsWith("update:"),o=s&&YC(r,e.slice(7));o&&(o.trim&&(i=n.map(u=>Tt(u)?u.trim():u)),o.number&&(i=n.map(Sh)));let a,c=r[a=Zd(e)]||r[a=Zd(nr(e))];!c&&s&&(c=r[a=Zd(Ys(e))]),c&&Vr(c,t,6,i);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vr(l,t,6,i)}}const XC=new WeakMap;function r1(t,e,n=!1){const r=n?XC:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Me(t)){const c=l=>{const u=r1(l,e,!0);u&&(a=!0,nn(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!a?(at(t)&&r.set(t,null),null):(Oe(s)?s.forEach(c=>o[c]=null):nn(o,s),at(t)&&r.set(t,o),o)}function wd(t,e){return!t||!cd(e)?!1:(e=e.slice(2).replace(/Once$/,""),rt(t,e[0].toLowerCase()+e.slice(1))||rt(t,Ys(e))||rt(t,e))}function B0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:d,data:f,setupState:h,ctx:g,inheritAttrs:p}=t,y=vu(t);let m,b;try{if(n.shapeFlag&4){const P=i||r,O=P;m=Pr(l.call(O,P,u,d,h,f,g)),b=a}else{const P=e;m=Pr(P.length>1?P(d,{attrs:a,slots:o,emit:c}):P(d,null)),b=e.props?a:ex(a)}}catch(P){Ga.length=0,gd(P,t,1),m=st(ls)}let w=m;if(b&&p!==!1){const P=Object.keys(b),{shapeFlag:O}=w;P.length&&O&7&&(s&&P.some(Gp)&&(b=tx(b,s)),w=Yo(w,b,!1,!0))}return n.dirs&&(w=Yo(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&rg(w,n.transition),m=w,vu(y),m}const ex=t=>{let e;for(const n in t)(n==="class"||n==="style"||cd(n))&&((e||(e={}))[n]=t[n]);return e},tx=(t,e)=>{const n={};for(const r in t)(!Gp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function nx(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?D0(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!wd(l,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?D0(r,o,l):!0:!!o;return!1}function D0(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!wd(n,s))return!0}return!1}function rx({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const i1=t=>t.__isSuspense;function ix(t,e){e&&e.pendingBranch?Oe(t)?e.effects.push(...t):e.effects.push(t):fC(t)}const Jt=Symbol.for("v-fgt"),bd=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),Kl=Symbol.for("v-stc"),Ga=[];let Fn=null;function be(t=!1){Ga.push(Fn=t?null:[])}function sx(){Ga.pop(),Fn=Ga[Ga.length-1]||null}let cc=1;function Eu(t,e=!1){cc+=t,t<0&&Fn&&e&&(Fn.hasOnce=!0)}function s1(t){return t.dynamicChildren=cc>0?Fn||No:null,sx(),cc>0&&Fn&&Fn.push(t),t}function Ee(t,e,n,r,i,s){return s1(z(t,e,n,r,i,s,!0))}function Mh(t,e,n,r,i){return s1(st(t,e,n,r,i,!0))}function Au(t){return t?t.__v_isVNode===!0:!1}function wa(t,e){return t.type===e.type&&t.key===e.key}const o1=({key:t})=>t??null,jl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Tt(t)||tn(t)||Me(t)?{i:$n,r:t,k:e,f:!!n}:t:null);function z(t,e=null,n=null,r=0,i=null,s=t===Jt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&o1(e),ref:e&&jl(e),scopeId:Db,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:$n};return a?(og(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=Tt(n)?8:16),cc>0&&!o&&Fn&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Fn.push(c),c}const st=ox;function ox(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===TC)&&(t=ls),Au(t)){const a=Yo(t,e,!0);return n&&og(a,n),cc>0&&!s&&Fn&&(a.shapeFlag&6?Fn[Fn.indexOf(t)]=a:Fn.push(a)),a.patchFlag=-2,a}if(vx(t)&&(t=t.__vccOpts),e){e=ax(e);let{class:a,style:c}=e;a&&!Tt(a)&&(e.class=fa(a)),at(c)&&(tg(c)&&!Oe(c)&&(c=nn({},c)),e.style=rs(c))}const o=Tt(t)?1:i1(t)?128:pC(t)?64:at(t)?4:Me(t)?2:0;return z(t,e,n,r,i,o,s,!0)}function ax(t){return t?tg(t)||qb(t)?nn({},t):t:null}function Yo(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:c}=t,l=e?cx(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&o1(l),ref:e&&e.ref?n&&s?Oe(s)?s.concat(jl(e)):[s,jl(e)]:jl(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Jt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Yo(t.ssContent),ssFallback:t.ssFallback&&Yo(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&rg(u,c.clone(u)),u}function Qe(t=" ",e=0){return st(bd,null,t,e)}function a1(t,e){const n=st(Kl,null,t);return n.staticCount=e,n}function Je(t="",e=!1){return e?(be(),Mh(ls,null,t)):st(ls,null,t)}function Pr(t){return t==null||typeof t=="boolean"?st(ls):Oe(t)?st(Jt,null,t.slice()):Au(t)?Ki(t):st(bd,null,String(t))}function Ki(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Yo(t)}function og(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Oe(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),og(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!qb(e)?e._ctx=$n:i===3&&$n&&($n.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:$n},n=32):(e=String(e),r&64?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function cx(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=fa([e.class,r.class]));else if(i==="style")e.style=rs([e.style,r.style]);else if(cd(i)){const s=e[i],o=r[i];o&&s!==o&&!(Oe(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function _r(t,e,n,r=null){Vr(t,e,7,[n,r])}const lx=Vb();let ux=0;function dx(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||lx,s={uid:ux++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Qb(r,i),emitsOptions:r1(r,i),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:r.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ZC.bind(null,s),t.ce&&t.ce(s),s}let Xt=null;const fx=()=>Xt||$n;let _u,Lh;{const t=fd(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};_u=e("__VUE_INSTANCE_SETTERS__",n=>Xt=n),Lh=e("__VUE_SSR_SETTERS__",n=>lc=n)}const $c=t=>{const e=Xt;return _u(t),t.scope.on(),()=>{t.scope.off(),_u(e)}},U0=()=>{Xt&&Xt.scope.off(),_u(null)};function c1(t){return t.vnode.shapeFlag&4}let lc=!1;function hx(t,e=!1,n=!1){e&&Lh(e);const{props:r,children:i}=t.vnode,s=c1(t);UC(t,r,s,e),KC(t,i,n||e);const o=s?px(t,e):void 0;return e&&Lh(!1),o}function px(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,IC);const{setup:r}=n;if(r){yi();const i=t.setupContext=r.length>1?mx(t):null,s=$c(t),o=Dc(r,t,0,[t.props,i]),a=ob(o);if(vi(),s(),(a||t.sp)&&!Va(t)&&$b(t),a){if(o.then(U0,U0),e)return o.then(c=>{$0(t,c)}).catch(c=>{gd(c,t,0)});t.asyncDep=o}else $0(t,o)}else l1(t)}function $0(t,e,n){Me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:at(e)&&(t.setupState=Ob(e)),l1(t)}function l1(t,e,n){const r=t.type;t.render||(t.render=r.render||$r);{const i=$c(t);yi();try{RC(t)}finally{vi(),i()}}}const gx={get(t,e){return Qt(t,"get",""),t[e]}};function mx(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,gx),slots:t.slots,emit:t.emit,expose:e}}function Ed(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ob(Ib(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in za)return za[n](t)},has(e,n){return n in e||n in za}})):t.proxy}function yx(t,e=!0){return Me(t)?t.displayName||t.name:t.name||e&&t.__name}function vx(t){return Me(t)&&"__vccOpts"in t}const Le=(t,e)=>aC(t,e,lc);function u1(t,e,n){try{Eu(-1);const r=arguments.length;return r===2?at(e)&&!Oe(e)?Au(e)?st(t,null,[e]):st(t,e):st(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Au(n)&&(n=[n]),st(t,e,n))}finally{Eu(1)}}const wx="3.5.22";let Bh;const F0=typeof window<"u"&&window.trustedTypes;if(F0)try{Bh=F0.createPolicy("vue",{createHTML:t=>t})}catch{}const d1=Bh?t=>Bh.createHTML(t):t=>t,bx="http://www.w3.org/2000/svg",Ex="http://www.w3.org/1998/Math/MathML",Yr=typeof document<"u"?document:null,H0=Yr&&Yr.createElement("template"),Ax={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Yr.createElementNS(bx,t):e==="mathml"?Yr.createElementNS(Ex,t):n?Yr.createElement(t,{is:n}):Yr.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Yr.createTextNode(t),createComment:t=>Yr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{H0.innerHTML=d1(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=H0.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_x=Symbol("_vtc");function Sx(t,e,n){const r=t[_x];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const K0=Symbol("_vod"),Cx=Symbol("_vsh"),xx=Symbol(""),kx=/(?:^|;)\s*display\s*:/;function Tx(t,e,n){const r=t.style,i=Tt(n);let s=!1;if(n&&!i){if(e)if(Tt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Vl(r,a,"")}else for(const o in e)n[o]==null&&Vl(r,o,"");for(const o in n)o==="display"&&(s=!0),Vl(r,o,n[o])}else if(i){if(e!==n){const o=r[xx];o&&(n+=";"+o),r.cssText=n,s=kx.test(n)}}else e&&t.removeAttribute("style");K0 in t&&(t[K0]=s?r.display:"",t[Cx]&&(r.display="none"))}const j0=/\s*!important$/;function Vl(t,e,n){if(Oe(n))n.forEach(r=>Vl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Px(t,e);j0.test(n)?t.setProperty(Ys(r),n.replace(j0,""),"important"):t[r]=n}}const V0=["Webkit","Moz","ms"],of={};function Px(t,e){const n=of[e];if(n)return n;let r=nr(e);if(r!=="filter"&&r in t)return of[e]=r;r=dd(r);for(let i=0;i<V0.length;i++){const s=V0[i]+r;if(s in t)return of[e]=s}return e}const z0="http://www.w3.org/1999/xlink";function G0(t,e,n,r,i,s=LS(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(z0,e.slice(6,e.length)):t.setAttributeNS(z0,e,n):n==null||s&&!ub(n)?t.removeAttribute(e):t.setAttribute(e,s?"":jr(n)?String(n):n)}function q0(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?d1(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=ub(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Ps(t,e,n,r){t.addEventListener(e,n,r)}function Ix(t,e,n,r){t.removeEventListener(e,n,r)}const W0=Symbol("_vei");function Rx(t,e,n,r,i=null){const s=t[W0]||(t[W0]={}),o=s[e];if(r&&o)o.value=r;else{const[a,c]=Ox(e);if(r){const l=s[e]=Lx(r,i);Ps(t,a,l,c)}else o&&(Ix(t,a,o,c),s[e]=void 0)}}const Q0=/(?:Once|Passive|Capture)$/;function Ox(t){let e;if(Q0.test(t)){e={};let r;for(;r=t.match(Q0);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ys(t.slice(2)),e]}let af=0;const Nx=Promise.resolve(),Mx=()=>af||(Nx.then(()=>af=0),af=Date.now());function Lx(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Vr(Bx(r,n.value),e,5,[r])};return n.value=t,n.attached=Mx(),n}function Bx(t,e){if(Oe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const J0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Dx=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?Sx(t,r,o):e==="style"?Tx(t,n,r):cd(e)?Gp(e)||Rx(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ux(t,e,r,o))?(q0(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&G0(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Tt(r))?q0(t,nr(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),G0(t,e,r,o))};function Ux(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&J0(e)&&Me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return J0(e)&&Tt(n)?!1:e in t}const Su=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Oe(e)?n=>Fl(e,n):e};function $x(t){t.target.composing=!0}function Y0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Uo=Symbol("_assign"),Tn={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Uo]=Su(i);const s=r||i.props&&i.props.type==="number";Ps(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Sh(a)),t[Uo](a)}),n&&Ps(t,"change",()=>{t.value=t.value.trim()}),e||(Ps(t,"compositionstart",$x),Ps(t,"compositionend",Y0),Ps(t,"change",Y0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Uo]=Su(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Sh(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===c)||(t.value=c))}},Z0={deep:!0,created(t,e,n){t[Uo]=Su(n),Ps(t,"change",()=>{const r=t._modelValue,i=Fx(t),s=t.checked,o=t[Uo];if(Oe(r)){const a=db(r,i),c=a!==-1;if(s&&!c)o(r.concat(i));else if(!s&&c){const l=[...r];l.splice(a,1),o(l)}}else if(ld(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(f1(t,s))})},mounted:X0,beforeUpdate(t,e,n){t[Uo]=Su(n),X0(t,e,n)}};function X0(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Oe(e))i=db(e,r.props.value)>-1;else if(ld(e))i=e.has(r.props.value);else{if(e===n)return;i=hd(e,f1(t,!0))}t.checked!==i&&(t.checked=i)}function Fx(t){return"_value"in t?t._value:t.value}function f1(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Hx=["ctrl","shift","alt","meta"],Kx={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Hx.some(n=>t[`${n}Key`]&&!e.includes(n))},ji=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=Kx[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},jx=nn({patchProp:Dx},Ax);let em;function Vx(){return em||(em=VC(jx))}const zx=((...t)=>{const e=Vx().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=qx(r);if(!i)return;const s=e._component;!Me(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Gx(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function Gx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function qx(t){return Tt(t)?document.querySelector(t):t}const Wx=Symbol();var tm;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(tm||(tm={}));function Qx(){const t=DS(!0),e=t.run(()=>_e({}));let n=[],r=[];const i=Ib({install(s){i._a=s,s.provide(Wx,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const yo=typeof document<"u";function h1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Jx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&h1(t.default)}const tt=Object.assign;function cf(t,e){const n={};for(const r in e){const i=e[r];n[r]=wr(i)?i.map(t):t(i)}return n}const qa=()=>{},wr=Array.isArray,p1=/#/g,Yx=/&/g,Zx=/\//g,Xx=/=/g,ek=/\?/g,g1=/\+/g,tk=/%5B/g,nk=/%5D/g,m1=/%5E/g,rk=/%60/g,y1=/%7B/g,ik=/%7C/g,v1=/%7D/g,sk=/%20/g;function ag(t){return encodeURI(""+t).replace(ik,"|").replace(tk,"[").replace(nk,"]")}function ok(t){return ag(t).replace(y1,"{").replace(v1,"}").replace(m1,"^")}function Dh(t){return ag(t).replace(g1,"%2B").replace(sk,"+").replace(p1,"%23").replace(Yx,"%26").replace(rk,"`").replace(y1,"{").replace(v1,"}").replace(m1,"^")}function ak(t){return Dh(t).replace(Xx,"%3D")}function ck(t){return ag(t).replace(p1,"%23").replace(ek,"%3F")}function lk(t){return t==null?"":ck(t).replace(Zx,"%2F")}function uc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const uk=/\/$/,dk=t=>t.replace(uk,"");function lf(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=gk(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:uc(o)}}function fk(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function nm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function hk(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Zo(e.matched[r],n.matched[i])&&w1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Zo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function w1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pk(t[n],e[n]))return!1;return!0}function pk(t,e){return wr(t)?rm(t,e):wr(e)?rm(e,t):t===e}function rm(t,e){return wr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function gk(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const xi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var dc;(function(t){t.pop="pop",t.push="push"})(dc||(dc={}));var Wa;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Wa||(Wa={}));function mk(t){if(!t)if(yo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),dk(t)}const yk=/^[^#]+#/;function vk(t,e){return t.replace(yk,"#")+e}function wk(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Ad=()=>({left:window.scrollX,top:window.scrollY});function bk(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=wk(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function im(t,e){return(history.state?history.state.position-e:-1)+t}const Uh=new Map;function Ek(t,e){Uh.set(t,e)}function Ak(t){const e=Uh.get(t);return Uh.delete(t),e}let _k=()=>location.protocol+"//"+location.host;function b1(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),nm(c,"")}return nm(n,t)+r+i}function Sk(t,e,n,r){let i=[],s=[],o=null;const a=({state:f})=>{const h=b1(t,location),g=n.value,p=e.value;let y=0;if(f){if(n.value=h,e.value=f,o&&o===g){o=null;return}y=p?f.position-p.position:0}else r(h);i.forEach(m=>{m(n.value,g,{delta:y,type:dc.pop,direction:y?y>0?Wa.forward:Wa.back:Wa.unknown})})};function c(){o=n.value}function l(f){i.push(f);const h=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return s.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(tt({},f.state,{scroll:Ad()}),"")}function d(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:d}}function sm(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Ad():null}}function Ck(t){const{history:e,location:n}=window,r={value:b1(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,l,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:_k()+t+c;try{e[u?"replaceState":"pushState"](l,"",f),i.value=l}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(c,l){const u=tt({},e.state,sm(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});s(c,u,!0),r.value=c}function a(c,l){const u=tt({},i.value,e.state,{forward:c,scroll:Ad()});s(u.current,u,!0);const d=tt({},sm(r.value,c,null),{position:u.position+1},l);s(c,d,!1),r.value=c}return{location:r,state:i,push:a,replace:o}}function xk(t){t=mk(t);const e=Ck(t),n=Sk(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=tt({location:"",base:t,go:r,createHref:vk.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function kk(t){return typeof t=="string"||t&&typeof t=="object"}function E1(t){return typeof t=="string"||typeof t=="symbol"}const A1=Symbol("");var om;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(om||(om={}));function Xo(t,e){return tt(new Error,{type:t,[A1]:!0},e)}function Wr(t,e){return t instanceof Error&&A1 in t&&(e==null||!!(t.type&e))}const am="[^/]+?",Tk={sensitive:!1,strict:!1,start:!0,end:!0},Pk=/[.+*?^${}()[\]/\\]/g;function Ik(t,e){const n=tt({},Tk,e),r=[];let i=n.start?"^":"";const s=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let d=0;d<l.length;d++){const f=l[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(Pk,"\\$&"),h+=40;else if(f.type===1){const{value:g,repeatable:p,optional:y,regexp:m}=f;s.push({name:g,repeatable:p,optional:y});const b=m||am;if(b!==am){h+=10;try{new RegExp(`(${b})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+P.message)}}let w=p?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(w=y&&l.length<2?`(?:/${w})`:"/"+w),y&&(w+="?"),i+=w,h+=20,y&&(h+=-8),p&&(h+=-20),b===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",g=s[f-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function c(l){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:g,repeatable:p,optional:y}=h,m=g in l?l[g]:"";if(wr(m)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=wr(m)?m.join("/"):m;if(!b)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);u+=b}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:c}}function Rk(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function _1(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=Rk(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(cm(r))return 1;if(cm(i))return-1}return i.length-r.length}function cm(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Ok={type:0,value:""},Nk=/[a-zA-Z0-9_]/;function Mk(t){if(!t)return[[]];if(t==="/")return[[Ok]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,c,l="",u="";function d(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&d(),o()):c===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:c==="("?n=2:Nk.test(c)?f():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),o(),i}function Lk(t,e,n){const r=Ik(Mk(t.path),n),i=tt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Bk(t,e){const n=[],r=new Map;e=fm({strict:!1,end:!0,sensitive:!1},e);function i(d){return r.get(d)}function s(d,f,h){const g=!h,p=um(d);p.aliasOf=h&&h.record;const y=fm(e,d),m=[p];if("alias"in d){const P=typeof d.alias=="string"?[d.alias]:d.alias;for(const O of P)m.push(um(tt({},p,{components:h?h.record.components:p.components,path:O,aliasOf:h?h.record:p})))}let b,w;for(const P of m){const{path:O}=P;if(f&&O[0]!=="/"){const H=f.record.path,G=H[H.length-1]==="/"?"":"/";P.path=f.record.path+(O&&G+O)}if(b=Lk(P,f,y),h?h.alias.push(b):(w=w||b,w!==b&&w.alias.push(b),g&&d.name&&!dm(b)&&o(d.name)),S1(b)&&c(b),p.children){const H=p.children;for(let G=0;G<H.length;G++)s(H[G],b,h&&h.children[G])}h=h||b}return w?()=>{o(w)}:qa}function o(d){if(E1(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function c(d){const f=$k(d,n);n.splice(f,0,d),d.record.name&&!dm(d)&&r.set(d.record.name,d)}function l(d,f){let h,g={},p,y;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw Xo(1,{location:d});y=h.record.name,g=tt(lm(f.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&lm(d.params,h.keys.map(w=>w.name))),p=h.stringify(g)}else if(d.path!=null)p=d.path,h=n.find(w=>w.re.test(p)),h&&(g=h.parse(p),y=h.record.name);else{if(h=f.name?r.get(f.name):n.find(w=>w.re.test(f.path)),!h)throw Xo(1,{location:d,currentLocation:f});y=h.record.name,g=tt({},f.params,d.params),p=h.stringify(g)}const m=[];let b=h;for(;b;)m.unshift(b.record),b=b.parent;return{name:y,path:p,params:g,matched:m,meta:Uk(m)}}t.forEach(d=>s(d));function u(){n.length=0,r.clear()}return{addRoute:s,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function lm(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function um(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Dk(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Dk(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function dm(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Uk(t){return t.reduce((e,n)=>tt(e,n.meta),{})}function fm(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function $k(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;_1(t,e[s])<0?r=s:n=s+1}const i=Fk(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function Fk(t){let e=t;for(;e=e.parent;)if(S1(e)&&_1(t,e)===0)return e}function S1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Hk(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(g1," "),o=s.indexOf("="),a=uc(o<0?s:s.slice(0,o)),c=o<0?null:uc(s.slice(o+1));if(a in e){let l=e[a];wr(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function hm(t){let e="";for(let n in t){const r=t[n];if(n=ak(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(wr(r)?r.map(s=>s&&Dh(s)):[r&&Dh(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function Kk(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=wr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const jk=Symbol(""),pm=Symbol(""),_d=Symbol(""),cg=Symbol(""),$h=Symbol("");function ba(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vi(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=f=>{f===!1?c(Xo(4,{from:n,to:e})):f instanceof Error?c(f):kk(f)?c(Xo(2,{from:e,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=s(()=>t.call(r&&r.instances[i],e,n,l));let d=Promise.resolve(u);t.length<3&&(d=d.then(l)),d.catch(f=>c(f))})}function uf(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(h1(c)){const u=(c.__vccOpts||c)[e];u&&s.push(Vi(u,n,r,o,a,i))}else{let l=c();s.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Jx(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&Vi(h,n,r,o,a,i)()}))}}return s}function gm(t){const e=yr(_d),n=yr(cg),r=Le(()=>{const c=Zt(t.to);return e.resolve(c)}),i=Le(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Zo.bind(null,u));if(f>-1)return f;const h=mm(c[l-2]);return l>1&&mm(u)===h&&d[d.length-1].path!==h?d.findIndex(Zo.bind(null,c[l-2])):f}),s=Le(()=>i.value>-1&&qk(n.params,r.value.params)),o=Le(()=>i.value>-1&&i.value===n.matched.length-1&&w1(n.params,r.value.params));function a(c={}){if(Gk(c)){const l=e[Zt(t.replace)?"replace":"push"](Zt(t.to)).catch(qa);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:Le(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function Vk(t){return t.length===1?t[0]:t}const zk=Ub({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:gm,setup(t,{slots:e}){const n=Jo(gm(t)),{options:r}=yr(_d),i=Le(()=>({[ym(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ym(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&Vk(e.default(n));return t.custom?s:u1("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),vo=zk;function Gk(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qk(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!wr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function mm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ym=(t,e,n)=>t??e??n,Wk=Ub({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=yr($h),i=Le(()=>t.route||r.value),s=yr(pm,0),o=Le(()=>{let l=Zt(s);const{matched:u}=i.value;let d;for(;(d=u[l])&&!d.components;)l++;return l}),a=Le(()=>i.value.matched[o.value]);Hl(pm,Le(()=>o.value+1)),Hl(jk,a),Hl($h,i);const c=_e();return fn(()=>[c.value,a.value,t.name],([l,u,d],[f,h,g])=>{u&&(u.instances[d]=l,h&&h!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!Zo(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return vm(n.default,{Component:f,route:l});const h=d.props[u],g=h?h===!0?l.params:typeof h=="function"?h(l):h:null,y=u1(f,tt({},g,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return vm(n.default,{Component:y,route:l})||y}}});function vm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const C1=Wk;function Qk(t){const e=Bk(t.routes,t),n=t.parseQuery||Hk,r=t.stringifyQuery||hm,i=t.history,s=ba(),o=ba(),a=ba(),c=rC(xi);let l=xi;yo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=cf.bind(null,I=>""+I),d=cf.bind(null,lk),f=cf.bind(null,uc);function h(I,K){let W,Z;return E1(I)?(W=e.getRecordMatcher(I),Z=K):Z=I,e.addRoute(Z,W)}function g(I){const K=e.getRecordMatcher(I);K&&e.removeRoute(K)}function p(){return e.getRoutes().map(I=>I.record)}function y(I){return!!e.getRecordMatcher(I)}function m(I,K){if(K=tt({},K||c.value),typeof I=="string"){const Y=lf(n,I,K.path),ne=e.resolve({path:Y.path},K),J=i.createHref(Y.fullPath);return tt(Y,ne,{params:f(ne.params),hash:uc(Y.hash),redirectedFrom:void 0,href:J})}let W;if(I.path!=null)W=tt({},I,{path:lf(n,I.path,K.path).path});else{const Y=tt({},I.params);for(const ne in Y)Y[ne]==null&&delete Y[ne];W=tt({},I,{params:d(Y)}),K.params=d(K.params)}const Z=e.resolve(W,K),se=I.hash||"";Z.params=u(f(Z.params));const M=fk(r,tt({},I,{hash:ok(se),path:Z.path})),F=i.createHref(M);return tt({fullPath:M,hash:se,query:r===hm?Kk(I.query):I.query||{}},Z,{redirectedFrom:void 0,href:F})}function b(I){return typeof I=="string"?lf(n,I,c.value.path):tt({},I)}function w(I,K){if(l!==I)return Xo(8,{from:K,to:I})}function P(I){return G(I)}function O(I){return P(tt(b(I),{replace:!0}))}function H(I){const K=I.matched[I.matched.length-1];if(K&&K.redirect){const{redirect:W}=K;let Z=typeof W=="function"?W(I):W;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=b(Z):{path:Z},Z.params={}),tt({query:I.query,hash:I.hash,params:Z.path!=null?{}:I.params},Z)}}function G(I,K){const W=l=m(I),Z=c.value,se=I.state,M=I.force,F=I.replace===!0,Y=H(W);if(Y)return G(tt(b(Y),{state:typeof Y=="object"?tt({},se,Y.state):se,force:M,replace:F}),K||W);const ne=W;ne.redirectedFrom=K;let J;return!M&&hk(r,Z,W)&&(J=Xo(16,{to:ne,from:Z}),C(Z,Z,!0,!1)),(J?Promise.resolve(J):L(ne,Z)).catch(Q=>Wr(Q)?Wr(Q,2)?Q:x(Q):v(Q,ne,Z)).then(Q=>{if(Q){if(Wr(Q,2))return G(tt({replace:F},b(Q.to),{state:typeof Q.to=="object"?tt({},se,Q.to.state):se,force:M}),K||ne)}else Q=$(ne,Z,!0,F,se);return V(ne,Z,Q),Q})}function q(I,K){const W=w(I,K);return W?Promise.reject(W):Promise.resolve()}function j(I){const K=T.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(I):I()}function L(I,K){let W;const[Z,se,M]=Jk(I,K);W=uf(Z.reverse(),"beforeRouteLeave",I,K);for(const Y of Z)Y.leaveGuards.forEach(ne=>{W.push(Vi(ne,I,K))});const F=q.bind(null,I,K);return W.push(F),U(W).then(()=>{W=[];for(const Y of s.list())W.push(Vi(Y,I,K));return W.push(F),U(W)}).then(()=>{W=uf(se,"beforeRouteUpdate",I,K);for(const Y of se)Y.updateGuards.forEach(ne=>{W.push(Vi(ne,I,K))});return W.push(F),U(W)}).then(()=>{W=[];for(const Y of M)if(Y.beforeEnter)if(wr(Y.beforeEnter))for(const ne of Y.beforeEnter)W.push(Vi(ne,I,K));else W.push(Vi(Y.beforeEnter,I,K));return W.push(F),U(W)}).then(()=>(I.matched.forEach(Y=>Y.enterCallbacks={}),W=uf(M,"beforeRouteEnter",I,K,j),W.push(F),U(W))).then(()=>{W=[];for(const Y of o.list())W.push(Vi(Y,I,K));return W.push(F),U(W)}).catch(Y=>Wr(Y,8)?Y:Promise.reject(Y))}function V(I,K,W){a.list().forEach(Z=>j(()=>Z(I,K,W)))}function $(I,K,W,Z,se){const M=w(I,K);if(M)return M;const F=K===xi,Y=yo?history.state:{};W&&(Z||F?i.replace(I.fullPath,tt({scroll:F&&Y&&Y.scroll},se)):i.push(I.fullPath,se)),c.value=I,C(I,K,W,F),x()}let D;function N(){D||(D=i.listen((I,K,W)=>{if(!R.listening)return;const Z=m(I),se=H(Z);if(se){G(tt(se,{replace:!0,force:!0}),Z).catch(qa);return}l=Z;const M=c.value;yo&&Ek(im(M.fullPath,W.delta),Ad()),L(Z,M).catch(F=>Wr(F,12)?F:Wr(F,2)?(G(tt(b(F.to),{force:!0}),Z).then(Y=>{Wr(Y,20)&&!W.delta&&W.type===dc.pop&&i.go(-1,!1)}).catch(qa),Promise.reject()):(W.delta&&i.go(-W.delta,!1),v(F,Z,M))).then(F=>{F=F||$(Z,M,!1),F&&(W.delta&&!Wr(F,8)?i.go(-W.delta,!1):W.type===dc.pop&&Wr(F,20)&&i.go(-1,!1)),V(Z,M,F)}).catch(qa)}))}let S=ba(),k=ba(),B;function v(I,K,W){x(I);const Z=k.list();return Z.length?Z.forEach(se=>se(I,K,W)):console.error(I),Promise.reject(I)}function E(){return B&&c.value!==xi?Promise.resolve():new Promise((I,K)=>{S.add([I,K])})}function x(I){return B||(B=!I,N(),S.list().forEach(([K,W])=>I?W(I):K()),S.reset()),I}function C(I,K,W,Z){const{scrollBehavior:se}=t;if(!yo||!se)return Promise.resolve();const M=!W&&Ak(im(I.fullPath,0))||(Z||!W)&&history.state&&history.state.scroll||null;return yu().then(()=>se(I,K,M)).then(F=>F&&bk(F)).catch(F=>v(F,I,K))}const A=I=>i.go(I);let _;const T=new Set,R={currentRoute:c,listening:!0,addRoute:h,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:p,resolve:m,options:t,push:P,replace:O,go:A,back:()=>A(-1),forward:()=>A(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:k.add,isReady:E,install(I){const K=this;I.component("RouterLink",vo),I.component("RouterView",C1),I.config.globalProperties.$router=K,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>Zt(c)}),yo&&!_&&c.value===xi&&(_=!0,P(i.location).catch(se=>{}));const W={};for(const se in xi)Object.defineProperty(W,se,{get:()=>c.value[se],enumerable:!0});I.provide(_d,K),I.provide(cg,Pb(W)),I.provide($h,c);const Z=I.unmount;T.add(I),I.unmount=function(){T.delete(I),T.size<1&&(l=xi,D&&D(),D=null,c.value=xi,_=!1,B=!1),Z()}}};function U(I){return I.reduce((K,W)=>K.then(()=>j(W)),Promise.resolve())}return R}function Jk(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(l=>Zo(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Zo(l,c))||i.push(c))}return[n,r,i]}function Sd(){return yr(_d)}function Zs(t){return yr(cg)}const Yk={key:0,class:"site-footer",role:"contentinfo"},Zk={class:"footer-inner"},Xk={class:"brand-cell"},e3={class:"copy"},t3={class:"city"},n3=["href"],r3=["href"],i3={class:"addr"},s3={key:0},o3="AsiqIt",a3={__name:"AppFooter",setup(t){const e=Zs(),n=Le(()=>e.name==="login"||e.path==="/login"),r=new Date().getFullYear(),i=[{city:"BALIKPAPAN",email:"asiqtix.bpn@gmail.com",tel:"087879127524",telHref:"+6287879127524",addr1:"Jl. Jendral Sudirman No. 88,",addr2:"Klandasan Ilir, Balikpapan",addr3:"Kota 76113"}];return(s,o)=>n.value?Je("",!0):(be(),Ee("footer",Yk,[z("div",Zk,[z("section",Xk,[o[0]||(o[0]=a1('<h2 class="footer-title">Contact us</h2><nav class="socials" aria-label="social links"><a href="https://www.instagram.com/bagas.y0/" aria-label="Instagram" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2.2c3.2 0 3.6 0 4.9.1 1.2.1 1.9.2 2.4.4.6.2 1 .4 1.5.8.4.3.7.8.8 1.5.2.5.3 1.2.4 2.4.1 1.3.1 1.7.1 4.9s0 3.6-.1 4.9c-.1 1.2-.2 1.9-.4 2.4-.2.6-.4 1-.8 1.5-.3.4-.8.7-1.5.8-.5.2-1.2.3-2.4.4-1.3.1-1.7.1-4.9.1s-3.6 0-4.9-.1c-1.2-.1-1.9-.2-2.4-.4-.6-.2-1-.4-1.5-.8-.4-.3-.7-.8-.8-1.5-.2-.5-.3-1.2-.4-2.4C2.2 15.6 2.2 15.2 2.2 12s0-3.6.1-4.9c.1-1.2.2-1.9.4-2.4.2-.6.4-1 .8-1.5.3-.4.8-.7 1.5-.8.5-.2 1.2-.3 2.4-.4C8.4 2.2 8.8 2.2 12 2.2Zm0 1.8c-3.1 0-3.5 0-4.7.1-1.1.1-1.7.2-2.1.4-.5.2-.8.4-1.1.7-.3.3-.5.6-.7 1.1-.2.4-.3 1-.4 2.1-.1 1.2-.1 1.6-.1 4.7s0 3.5.1 4.7c.1 1.1.2 1.7.4 2.1.2.5.4.8.7 1.1.3.3.6.5 1.1.7.4.2 1 .3 2.1.4 1.2.1 1.6.1 4.7.1s3.5 0 4.7-.1c1.1-.1 1.7-.2 2.1-.4.5-.2.8-.4 1.1-.7.3-.3.5-.6.7-1.1.2-.4.3-1 .4-2.1.1-1.2.1-1.6.1-4.7s0-3.5-.1-4.7c-.1-1.1-.2-1.7-.4-2.1-.2-.5-.4-.8-.7-1.1-.3-.3-.6-.5-1.1-.7-.4-.2-1-.3-2.1-.4-1.2-.1-1.6-.1-4.7-.1Zm0 3.4a6.6 6.6 0 1 1 0 13.2 6.6 6.6 0 0 1 0-13.2Zm0 2a4.6 4.6 0 1 0 0 9.2 4.6 4.6 0 0 0 0-9.2Zm5-2.2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"></path></svg></a><a href="https://web.facebook.com/profile.php?id=100010487190698" aria-label="Facebook" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13.5 22v-8h2.7l.4-3h-3.1V8.6c0-.9.2-1.6 1.6-1.6h1.7V4.3c-.3 0-1.3-.1-2.5-.1-2.5 0-4.1 1.5-4.1 4.2V11H8.3v3h2.9v8h2.3Z"></path></svg></a><a href="https://www.tiktok.com/@bagaspp253" aria-label="Tiktok" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12.67 2h2.53c.12 1.1.44 2.02 1.09 2.89.63.84 1.47 1.35 2.53 1.55v2.56c-.96-.02-1.86-.23-2.71-.65-.42-.2-.82-.45-1.22-.72l-.01 6.7c0 1.15-.23 2.22-.83 3.2a6.08 6.08 0 0 1-4.18 2.94c-.77.14-1.52.14-2.27-.05-1.65-.42-2.9-1.36-3.72-2.85-1.26-2.31-.98-5.2.69-7.22 1.28-1.52 2.93-2.24 4.93-2.21v2.66c-.52.02-1 .1-1.45.32-1.03.48-1.62 1.3-1.75 2.42-.18 1.5.67 2.86 2.03 3.3 1.72.56 3.59-.48 3.93-2.26.05-.26.07-.54.07-.81l.02-11.52Z"></path></svg></a></nav>',2)),z("small",e3," "+Te(Zt(r))+" "+Te(o3)+". All rights reserved.",1)]),(be(),Ee(Jt,null,Uc(i,(a,c)=>z("section",{key:c,class:"office-cell"},[z("h3",t3,Te(a.city),1),z("a",{class:"email",href:`mailto:${a.email}`},Te(a.email),9,n3),z("a",{class:"tel",href:`tel:${a.telHref}`},Te(a.tel),9,r3),z("address",i3,[z("span",null,Te(a.addr1),1),z("span",null,Te(a.addr2),1),a.addr3?(be(),Ee("span",s3,Te(a.addr3),1)):Je("",!0)])])),64))])]))}},c3={id:"app",class:"app-shell"},l3={class:"app-main"},u3={__name:"App",setup(t){return(e,n)=>(be(),Ee("div",c3,[z("main",l3,[st(Zt(C1))]),st(a3)]))}},Fc="/assets/logo_with_text-CUi1xsHR.png",ms=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},d3={class:"mini-nav","aria-label":"Main"},f3={__name:"DrawerNav",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=Zs(),s=Le({get:()=>n.modelValue,set:c=>r("update:modelValue",c)});function o(){s.value=!1}function a(c){c.key==="Escape"&&o()}return gs(()=>window.addEventListener("keydown",a)),yd(()=>window.removeEventListener("keydown",a)),fn(()=>i.fullPath,o),(c,l)=>(be(),Ee("div",{class:fa(["drawer",{"is-open":s.value}]),"aria-hidden":"true"},[z("div",{class:"drawer-backdrop",onClick:o}),z("div",{class:"drawer-panel",role:"dialog","aria-modal":"true",onClick:l[0]||(l[0]=ji(()=>{},["stop"]))},[z("nav",d3,[st(Zt(vo),{class:"link","active-class":"active",to:"/home",onClick:o},{default:Ts(()=>[...l[1]||(l[1]=[Qe("Home",-1)])]),_:1}),st(Zt(vo),{class:"link","active-class":"active",to:"/profile",onClick:o},{default:Ts(()=>[...l[2]||(l[2]=[Qe("Profile",-1)])]),_:1}),st(Zt(vo),{class:"link","active-class":"active",to:"/wallet",onClick:o},{default:Ts(()=>[...l[3]||(l[3]=[Qe("Wallet",-1)])]),_:1}),st(Zt(vo),{class:"link","active-class":"active",to:"/history",onClick:o},{default:Ts(()=>[...l[4]||(l[4]=[Qe("History",-1)])]),_:1}),st(Zt(vo),{class:"link-btn",to:"/logout",onClick:o},{default:Ts(()=>[...l[5]||(l[5]=[Qe("Log out",-1)])]),_:1})])])],2))}},Hc=ms(f3,[["__scopeId","data-v-7818c483"]]),h3="6.15.0";function p3(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function an(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Re(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&p3(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function _o(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>_o(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return _o(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${_o(r,e)}: ${_o(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function jt(t,e){return t&&t.code===e}function lg(t){return jt(t,"CALL_EXCEPTION")}function ft(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${_o(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+_o(a))}}s.push(`code=${e}`),s.push(`version=${h3}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Re(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Re(i,{shortMessage:r}),i}function me(t,e,n,r){if(!t)throw ft(e,n,r)}function ee(t,e,n,r){me(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function x1(t,e,n){n==null&&(n=""),n&&(n=": "+n),me(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),me(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Kc(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function k1(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}ee(!1,"invalid BytesLike value",e||"value",t)}function Fe(t,e){return k1(t,e,!1)}function dn(t,e){return k1(t,e,!0)}function dt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function ug(t){return dt(t,!0)||t instanceof Uint8Array}const wm="0123456789abcdef";function Se(t){const e=Fe(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=wm[(i&240)>>4]+wm[i&15]}return n}function bt(t){return"0x"+t.map(e=>Se(e).substring(2)).join("")}function $o(t){return dt(t,!0)?(t.length-2)/2:Fe(t).length}function mt(t,e,n){const r=Fe(t);return n!=null&&n>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Se(r.slice(e??0,n??r.length))}function T1(t,e,n){const r=Fe(t);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),Se(i)}function wi(t,e){return T1(t,e,!0)}function g3(t,e){return T1(t,e,!1)}const Cd=BigInt(0),hr=BigInt(1),So=9007199254740991;function Cu(t,e){const n=xd(t,"value"),r=BigInt(Ue(e,"width"));if(me(n>>r===Cd,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-hr){const i=(hr<<r)-hr;return-((~n&i)+hr)}return n}function P1(t,e){let n=ke(t,"value");const r=BigInt(Ue(e,"width")),i=hr<<r-hr;if(n<Cd){n=-n,me(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(hr<<r)-hr;return(~n&s)+hr}else me(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Ns(t,e){const n=xd(t,"value"),r=BigInt(Ue(e,"bits"));return n&(hr<<r)-hr}function ke(t,e){switch(typeof t){case"bigint":return t;case"number":return ee(Number.isInteger(t),"underflow",e||"value",t),ee(t>=-So&&t<=So,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){ee(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}ee(!1,"invalid BigNumberish value",e||"value",t)}function xd(t,e){const n=ke(t,e);return me(n>=Cd,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const bm="0123456789abcdef";function kd(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=bm[n>>4],e+=bm[n&15];return BigInt(e)}return ke(t)}function Ue(t,e){switch(typeof t){case"bigint":return ee(t>=-So&&t<=So,"overflow",e||"value",t),Number(t);case"number":return ee(Number.isInteger(t),"underflow",e||"value",t),ee(t>=-So&&t<=So,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Ue(BigInt(t),e)}catch(n){ee(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}ee(!1,"invalid numeric value",e||"value",t)}function m3(t){return Ue(kd(t))}function us(t,e){let r=xd(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Ue(e,"width");for(me(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function Pt(t){const e=xd(t,"value");if(e===Cd)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function dr(t){let e=Se(ug(t)?t:Pt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Em="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Am=BigInt(58);function y3(t){const e=Fe(t);let n=kd(e),r="";for(;n;)r=Em[Number(n%Am)]+r,n/=Am;for(let i=0;i<e.length&&!e[i];i++)r=Em[0]+r;return r}function v3(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Fe(e)}function w3(t){const e=Fe(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}class I1{filter;emitter;#e;constructor(e,n,r){this.#e=n,Re(this,{emitter:e,filter:r})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function b3(t,e,n,r,i){ee(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function R1(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function E3(t,e,n,r,i){return t==="OVERLONG"?(ee(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),R1(t,e,n))}const A3=Object.freeze({error:b3,ignore:R1,replace:E3});function _3(t,e){e==null&&(e=A3.error);const n=Fe(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let c=s&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,c);continue}if(c<=a){i+=e("OVERLONG",i-1-o,n,r,c);continue}r.push(c)}}return r}function pi(t,e){ee(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);ee(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function S3(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function xu(t,e){return S3(_3(t,e))}function O1(t){async function e(n,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();me(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),me(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=ft("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=ft("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const u={};l.headers.forEach((h,g)=>{u[g.toLowerCase()]=h});const d=await l.arrayBuffer(),f=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:f}}return e}const C3=12,x3=250;let _m=O1();const k3=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),T3=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let df=!1;async function N1(t,e){try{const n=t.match(k3);if(!n)throw new Error("invalid data");return new is(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?v3(n[3]):I3(n[3]))}catch{return new is(599,"BAD REQUEST (invalid data: URI)",{},null,new bi(t))}}function M1(t){async function e(n,r){try{const i=n.match(T3);if(!i)throw new Error("invalid link");return new bi(`${t}${i[2]}`)}catch{return new is(599,"BAD REQUEST (invalid IPFS URI)",{},null,new bi(n))}}return e}const rl={data:N1,ipfs:M1("https://gateway.ipfs.io/ipfs/")},L1=new WeakMap;class P3{#e;#t;constructor(e){this.#e=[],this.#t=!1,L1.set(e,()=>{if(!this.#t){this.#t=!0;for(const n of this.#e)setTimeout(()=>{n()},0);this.#e=[]}})}addListener(e){me(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}function il(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class bi{#e;#t;#n;#r;#i;#o;#s;#a;#d;#l;#p;#g;#c;#u;#f;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#s==null?null:new Uint8Array(this.#s)}set body(e){if(e==null)this.#s=void 0,this.#a=void 0;else if(typeof e=="string")this.#s=pi(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#s=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#s=pi(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#s!=null}get method(){return this.#r?this.#r:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#r=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#d&&(e.authorization=`Basic ${w3(pi(this.#d))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){this.#n[String(e).toLowerCase()]=String(n)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#d||null}setCredentials(e,n){ee(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#d=`${e}:${n}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#i}set timeout(e){ee(e>=0,"timeout must be non-zero","timeout",e),this.#i=e}get preflightFunc(){return this.#l||null}set preflightFunc(e){this.#l=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#f||_m}set getUrlFunc(e){this.#f=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#r="",this.#i=3e5,this.#u={slotInterval:x3,maxAttempts:C3},this.#f=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#s?Se(this.#s):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#h(e,n,r,i,s){if(e>=this.#u.maxAttempts)return s.makeServerError("exceeded maximum retry limit");me(Sm()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await R3(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in rl){const u=await rl[a](o.url,il(i.#c));if(u instanceof is){let d=u;if(this.processFunc){il(i.#c);try{d=await this.processFunc(o,d)}catch(f){(f.throttle==null||typeof f.stall!="number")&&d.makeServerError("error in post-processing function",f).assertOk()}}return d}o=u}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,il(i.#c));let l=new is(c.statusCode,c.statusMessage,c.headers,c.body,i);if(l.statusCode===301||l.statusCode===302){try{const u=l.headers.location||"";return o.redirect(u).#h(e+1,n,0,i,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const u=l.headers["retry-after"];let d=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof u=="string"&&u.match(/^[1-9][0-9]*$/)&&(d=parseInt(u)),o.clone().#h(e+1,n,d,i,l)}if(this.processFunc){il(i.#c);try{l=await this.processFunc(o,l)}catch(u){(u.throttle==null||typeof u.stall!="number")&&l.makeServerError("error in post-processing function",u).assertOk();let d=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return u.stall>=0&&(d=u.stall),o.clone().#h(e+1,n,d,i,l)}}return l}send(){return me(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new P3(this),this.#h(0,Sm()+this.timeout,0,this,new is(0,"",{},null,this))}cancel(){me(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=L1.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new bi(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#n=Object.assign({},this.#n),this.#s&&(i.#s=new Uint8Array(this.#s)),i.#a=this.#a,i}clone(){const e=new bi(this.url);return e.#r=this.#r,this.#s&&(e.#s=this.#s),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#d=this.#d,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#l=this.#l,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#f=this.#f,e}static lockConfig(){df=!0}static getGateway(e){return rl[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(df)throw new Error("gateways locked");rl[e]=n}static registerGetUrl(e){if(df)throw new Error("gateways locked");_m=e}static createGetUrlFunc(e){return O1(e)}static createDataGateway(){return N1}static createIpfsGatewayFunc(e){return M1(e)}}class is{#e;#t;#n;#r;#i;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#r?Se(this.#r):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#r==null?null:new Uint8Array(this.#r)}get bodyText(){try{return this.#r==null?"":xu(this.#r)}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,n,r,i,s){this.#e=e,this.#t=n,this.#n=Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{}),this.#r=i==null?null:new Uint8Array(i),this.#i=s||null,this.#o={message:""}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new is(599,r,this.headers,this.body,this.#i||void 0);return i.#o={message:e,error:n},i}throwThrottleError(e,n){n==null?n=-1:ee(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Re(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#r!=null}get request(){return this.#i}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{this.#r&&(i=xu(this.#r))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function Sm(){return new Date().getTime()}function I3(t){return pi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function R3(t){return new Promise(e=>setTimeout(e,t))}const O3=BigInt(-1),ar=BigInt(0),Co=BigInt(1),N3=BigInt(5),ao={};let Fo="0000";for(;Fo.length<80;)Fo+=Fo;function bs(t){let e=Fo;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Ea(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Co<<r-Co;me(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>ar?t=Cu(Ns(t,r),r):t=-Cu(Ns(-t,r),r)}else{const i=Co<<r;me(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Co}return t}function ff(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ee(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,c,l)=>s[a]==null?l:(ee(typeof s[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}ee(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),ee(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function M3(t,e){let n="";t<ar&&(n="-",t*=O3);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Fo+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}class zi{format;#e;#t;#n;_value;constructor(e,n,r){Kc(e,ao,"FixedNumber"),this.#t=n,this.#e=r;const i=M3(n,r.decimals);Re(this,{format:r.name,_value:i}),this.#n=bs(r.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#r(e){ee(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#i(e,n){return e=Ea(e,this.#e,n),new zi(ao,e,this.#e)}#o(e,n){return this.#r(e),this.#i(this.#t+e.#t,n)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#s(e,n){return this.#r(e),this.#i(this.#t-e.#t,n)}subUnsafe(e){return this.#s(e)}sub(e){return this.#s(e,"sub")}#a(e,n){return this.#r(e),this.#i(this.#t*e.#t/this.#n,n)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#r(e);const n=this.#t*e.#t;return me(n%this.#n===ar,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#i(n/this.#n,"mulSignal")}#d(e,n){return me(e.#t!==ar,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e),this.#i(this.#t*this.#n/e.#t,n)}divUnsafe(e){return this.#d(e)}div(e){return this.#d(e,"div")}divSignal(e){me(e.#t!==ar,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e);const n=this.#t*this.#n;return me(n%e.#t===ar,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#i(n/e.#t,"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=bs(i):i<0&&(n*=bs(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<ar&&(e-=this.#n-Co),e=this.#t/this.#n*this.#n,this.#i(e,"floor")}ceiling(){let e=this.#t;return this.#t>ar&&(e+=this.#n-Co),e=this.#t/this.#n*this.#n,this.#i(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=N3*bs(n-1);let i=this.value+r;const s=bs(n);return i=i/s*s,Ea(i,this.#e,"round"),new zi(ao,i,this.#e)}isZero(){return this.#t===ar}isNegative(){return this.#t<ar}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return zi.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:Ue(n),s=ff(r);let o=ke(e,"value");const a=i-s.decimals;if(a>0){const c=bs(a);me(o%c===ar,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=bs(-a));return Ea(o,s,"fromValue"),new zi(ao,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ee(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=ff(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=Fo;me(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return Ea(a,i,"fromString"),new zi(ao,a,i)}static fromBytes(e,n){let r=kd(Fe(e,"value"));const i=ff(n);return i.signed&&(r=Cu(r,i.width)),Ea(r,i,"fromBytes"),new zi(ao,r,i)}}function L3(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Cm(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function xm(t,e,n,r){const i=[];for(;n<e+1+r;){const s=B1(t,n);i.push(s.result),n+=s.consumed,me(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function B1(t,e){me(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{me(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=Cm(t,e+1,r);return n(e+1+r+i),xm(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),xm(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=Cm(t,e+1,r);n(e+1+r+i);const s=Se(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=Se(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:L3(t[e])}}function jc(t){const e=Fe(t,"data"),n=B1(e,0);return ee(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function km(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function D1(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(D1(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=km(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Fe(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=km(e.length);return n.unshift(183+n.length),n.concat(e)}const Tm="0123456789abcdef";function ds(t){let e="0x";for(const n of D1(t))e+=Tm[n>>4],e+=Tm[n&15];return e}function B3(t,e){let n=18;return n=Ue(e,"unit"),zi.fromValue(t,n,{decimals:n,width:512}).toString()}function co(t){return B3(t,18)}const hn=32,Fh=new Uint8Array(hn),D3=["then"],sl={},U1=new WeakMap;function Is(t){return U1.get(t)}function Pm(t,e){U1.set(t,e)}function Aa(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function Hh(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof ci?Hh(Is(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof ci&&(o=Hh(Is(o),o,n)),r[i]=o),r},{})}class ci extends Array{#e;constructor(...e){const n=e[0];let r=e[1],i=(e[2]||[]).slice(),s=!0;n!==sl&&(r=e,i=[],s=!1),super(r.length),r.forEach((c,l)=>{this[l]=c});const o=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(Pm(this,Object.freeze(r.map((c,l)=>{const u=i[l];return u!=null&&o.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!s)return;Object.freeze(this);const a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const f=Ue(l,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const h=c[f];return h instanceof Error&&Aa(`index ${f}`,h),h}if(D3.indexOf(l)>=0)return Reflect.get(c,l,u);const d=c[l];if(d instanceof Function)return function(...f){return d.apply(this===u?c:this,f)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return Pm(a,Is(this)),a}toArray(e){const n=[];return this.forEach((r,i)=>{r instanceof Error&&Aa(`index ${i}`,r),e&&r instanceof ci&&(r=r.toArray(e)),n.push(r)}),n}toObject(e){const n=Is(this);return n.reduce((r,i,s)=>(me(i!=null,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Hh(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const r=Is(this),i=[],s=[];for(let o=e;o<n;o++)i.push(this[o]),s.push(r[o]);return new ci(sl,i,s)}filter(e,n){const r=Is(this),i=[],s=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&Aa(`index ${o}`,a),e.call(n,a,o,this)&&(i.push(a),s.push(r[o]))}return new ci(sl,i,s)}map(e,n){const r=[];for(let i=0;i<this.length;i++){const s=this[i];s instanceof Error&&Aa(`index ${i}`,s),r.push(e.call(n,s,i,this))}return r}getValue(e){const n=Is(this).indexOf(e);if(n===-1)return;const r=this[n];return r instanceof Error&&Aa(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,n){return new ci(sl,e,n)}}function Im(t){let e=Pt(t);return me(e.length<=hn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:hn,offset:e.length}),e.length!==hn&&(e=dn(bt([Fh.slice(e.length%hn),e]))),e}class Si{name;type;localName;dynamic;constructor(e,n,r,i){Re(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){ee(!1,e,this.localName,n)}}class Kh{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return bt(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(dn(e.data))}writeBytes(e){let n=dn(e);const r=n.length%hn;return r&&(n=dn(bt([n,Fh.slice(r)]))),this.#n(n)}writeValue(e){return this.#n(Im(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Fh),this.#t+=hn,n=>{this.#e[e]=Im(n)}}}class dg{allowLoose;#e;#t;#n;#r;#i;constructor(e,n,r){Re(this,{allowLoose:!!n}),this.#e=dn(e),this.#n=0,this.#r=null,this.#i=r??1024,this.#t=0}get data(){return Se(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#r)return this.#r.#o(e);this.#n+=e,me(this.#i<1||this.#n<=this.#i*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#i} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:dn(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#s(e,n,r){let i=Math.ceil(n/hn)*hn;return this.#t+i>this.#e.length&&(this.allowLoose&&r&&this.#t+n<=this.#e.length?i=n:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:dn(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){const n=new dg(this.#e.slice(this.#t+e),this.allowLoose,this.#i);return n.#r=this,n}readBytes(e,n){let r=this.#s(0,e,!!n);return this.#o(e),this.#t+=r.length,r.slice(0,e)}readValue(){return kd(this.readBytes(hn))}readIndex(){return m3(this.readBytes(hn))}}function ku(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function fg(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function U3(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ku(t.outputLen),ku(t.blockLen)}function ea(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $1(t,e){fg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const hf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const F1=t=>t instanceof Uint8Array,$3=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),pf=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Sr=(t,e)=>t<<32-e|t>>>e,F3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!F3)throw new Error("Non little-endian hardware is not supported");function H3(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Td(t){if(typeof t=="string"&&(t=H3(t)),!F1(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function K3(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!F1(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class hg{clone(){return this._cloneInto()}}function pg(t){const e=r=>t().update(Td(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function j3(t=32){if(hf&&typeof hf.getRandomValues=="function")return hf.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class H1 extends hg{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,U3(e);const r=Td(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return ea(this),this.iHash.update(e),this}digestInto(e){ea(this),fg(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const K1=(t,e,n)=>new H1(t,e).update(n).digest();K1.create=(t,e)=>new H1(t,e);function V3(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class j1 extends hg{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pf(this.buffer)}update(e){ea(this);const{view:n,buffer:r,blockLen:i}=this;e=Td(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=pf(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ea(this),$1(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;V3(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=pf(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const z3=(t,e,n)=>t&e^~t&n,G3=(t,e,n)=>t&e^t&n^e&n,q3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ki=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ti=new Uint32Array(64);class W3 extends j1{constructor(){super(64,32,8,!1),this.A=ki[0]|0,this.B=ki[1]|0,this.C=ki[2]|0,this.D=ki[3]|0,this.E=ki[4]|0,this.F=ki[5]|0,this.G=ki[6]|0,this.H=ki[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ti[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ti[d-15],h=Ti[d-2],g=Sr(f,7)^Sr(f,18)^f>>>3,p=Sr(h,17)^Sr(h,19)^h>>>10;Ti[d]=p+Ti[d-7]+g+Ti[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Sr(a,6)^Sr(a,11)^Sr(a,25),h=u+f+z3(a,c,l)+q3[d]+Ti[d]|0,p=(Sr(r,2)^Sr(r,13)^Sr(r,22))+G3(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ti.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const V1=pg(()=>new W3),ol=BigInt(2**32-1),jh=BigInt(32);function z1(t,e=!1){return e?{h:Number(t&ol),l:Number(t>>jh&ol)}:{h:Number(t>>jh&ol)|0,l:Number(t&ol)|0}}function G1(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=z1(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const Q3=(t,e)=>BigInt(t>>>0)<<jh|BigInt(e>>>0),J3=(t,e,n)=>t>>>n,Y3=(t,e,n)=>t<<32-n|e>>>n,Z3=(t,e,n)=>t>>>n|e<<32-n,X3=(t,e,n)=>t<<32-n|e>>>n,eT=(t,e,n)=>t<<64-n|e>>>n-32,tT=(t,e,n)=>t>>>n-32|e<<64-n,nT=(t,e)=>e,rT=(t,e)=>t,q1=(t,e,n)=>t<<n|e>>>32-n,W1=(t,e,n)=>e<<n|t>>>32-n,Q1=(t,e,n)=>e<<n-32|t>>>64-n,J1=(t,e,n)=>t<<n-32|e>>>64-n;function iT(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const sT=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),oT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,aT=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),cT=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,lT=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),uT=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Be={fromBig:z1,split:G1,toBig:Q3,shrSH:J3,shrSL:Y3,rotrSH:Z3,rotrSL:X3,rotrBH:eT,rotrBL:tT,rotr32H:nT,rotr32L:rT,rotlSH:q1,rotlSL:W1,rotlBH:Q1,rotlBL:J1,add:iT,add3L:sT,add3H:oT,add4L:aT,add4H:cT,add5H:uT,add5L:lT},[dT,fT]=Be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Pi=new Uint32Array(80),Ii=new Uint32Array(80);class hT extends j1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:g,Hh:p,Hl:y}=this;return[e,n,r,i,s,o,a,c,l,u,d,f,h,g,p,y]}set(e,n,r,i,s,o,a,c,l,u,d,f,h,g,p,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=y|0}process(e,n){for(let w=0;w<16;w++,n+=4)Pi[w]=e.getUint32(n),Ii[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const P=Pi[w-15]|0,O=Ii[w-15]|0,H=Be.rotrSH(P,O,1)^Be.rotrSH(P,O,8)^Be.shrSH(P,O,7),G=Be.rotrSL(P,O,1)^Be.rotrSL(P,O,8)^Be.shrSL(P,O,7),q=Pi[w-2]|0,j=Ii[w-2]|0,L=Be.rotrSH(q,j,19)^Be.rotrBH(q,j,61)^Be.shrSH(q,j,6),V=Be.rotrSL(q,j,19)^Be.rotrBL(q,j,61)^Be.shrSL(q,j,6),$=Be.add4L(G,V,Ii[w-7],Ii[w-16]),D=Be.add4H($,H,L,Pi[w-7],Pi[w-16]);Pi[w]=D|0,Ii[w]=$|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:g,Gh:p,Gl:y,Hh:m,Hl:b}=this;for(let w=0;w<80;w++){const P=Be.rotrSH(d,f,14)^Be.rotrSH(d,f,18)^Be.rotrBH(d,f,41),O=Be.rotrSL(d,f,14)^Be.rotrSL(d,f,18)^Be.rotrBL(d,f,41),H=d&h^~d&p,G=f&g^~f&y,q=Be.add5L(b,O,G,fT[w],Ii[w]),j=Be.add5H(q,m,P,H,dT[w],Pi[w]),L=q|0,V=Be.rotrSH(r,i,28)^Be.rotrBH(r,i,34)^Be.rotrBH(r,i,39),$=Be.rotrSL(r,i,28)^Be.rotrBL(r,i,34)^Be.rotrBL(r,i,39),D=r&s^r&a^s&a,N=i&o^i&c^o&c;m=p|0,b=y|0,p=h|0,y=g|0,h=d|0,g=f|0,{h:d,l:f}=Be.add(l|0,u|0,j|0,L|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const S=Be.add3L(L,$,N);r=Be.add3H(S,j,V,D),i=S|0}({h:r,l:i}=Be.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Be.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Be.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Be.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=Be.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:g}=Be.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:y}=Be.add(this.Gh|0,this.Gl|0,p|0,y|0),{h:m,l:b}=Be.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,i,s,o,a,c,l,u,d,f,h,g,p,y,m,b)}roundClean(){Pi.fill(0),Ii.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const pT=pg(()=>new hT);function gT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Rm=gT();Rm.crypto||Rm.msCrypto;function mT(t){switch(t){case"sha256":return V1.create();case"sha512":return pT.create()}ee(!1,"invalid hashing algorithm name","algorithm",t)}const[Y1,Z1,X1]=[[],[],[]],yT=BigInt(0),_a=BigInt(1),vT=BigInt(2),wT=BigInt(7),bT=BigInt(256),ET=BigInt(113);for(let t=0,e=_a,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Y1.push(2*(5*r+n)),Z1.push((t+1)*(t+2)/2%64);let i=yT;for(let s=0;s<7;s++)e=(e<<_a^(e>>wT)*ET)%bT,e&vT&&(i^=_a<<(_a<<BigInt(s))-_a);X1.push(i)}const[AT,_T]=G1(X1,!0),Om=(t,e,n)=>n>32?Q1(t,e,n):q1(t,e,n),Nm=(t,e,n)=>n>32?J1(t,e,n):W1(t,e,n);function ST(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Om(l,u,1)^n[a],f=Nm(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=Z1[o],c=Om(i,s,a),l=Nm(i,s,a),u=Y1[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=AT[r],t[1]^=_T[r]}n.fill(0)}class gg extends hg{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ku(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=$3(this.state)}keccak(){ST(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ea(this);const{blockLen:n,state:r}=this;e=Td(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ea(this,!1),fg(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ku(e),this.xofInto(new Uint8Array(e))}digestInto(e){if($1(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new gg(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const CT=(t,e,n)=>pg(()=>new gg(e,t,n)),xT=CT(1,136,256/8);let eE=!1;const tE=function(t){return xT(t)};let nE=tE;function xt(t){const e=Fe(t,"data");return Se(nE(e))}xt._=tE;xt.lock=function(){eE=!0};xt.register=function(t){if(eE)throw new TypeError("keccak256 is locked");nE=t};Object.freeze(xt);const rE=function(t){return mT("sha256").update(t).digest()};let iE=rE,sE=!1;function ha(t){const e=Fe(t,"data");return Se(iE(e))}ha._=rE;ha.lock=function(){sE=!0};ha.register=function(t){if(sE)throw new Error("sha256 is locked");iE=t};Object.freeze(ha);Object.freeze(ha);const oE=BigInt(0),Pd=BigInt(1),kT=BigInt(2),Id=t=>t instanceof Uint8Array,TT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ta(t){if(!Id(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=TT[t[n]];return e}function aE(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function mg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function na(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Ks(t){return mg(ta(t))}function yg(t){if(!Id(t))throw new Error("Uint8Array expected");return mg(ta(Uint8Array.from(t).reverse()))}function ra(t,e){return na(t.toString(16).padStart(e*2,"0"))}function vg(t,e){return ra(t,e).reverse()}function PT(t){return na(aE(t))}function cr(t,e,n){let r;if(typeof e=="string")try{r=na(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Id(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function fc(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Id(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function IT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function RT(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function OT(t){let e;for(e=0;t>oE;t>>=Pd,e+=1);return e}function NT(t,e){return t>>BigInt(e)&Pd}const MT=(t,e,n)=>t|(n?Pd:oE)<<BigInt(e),wg=t=>(kT<<BigInt(t-1))-Pd,gf=t=>new Uint8Array(t),Mm=t=>Uint8Array.from(t);function cE(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=gf(t),i=gf(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=gf())=>{i=a(Mm([0]),d),r=a(),d.length!==0&&(i=a(Mm([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return fc(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(l()));)c();return o(),h}}const LT={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Vc(t,e,n={}){const r=(i,s,o)=>{const a=LT[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const BT=Object.freeze(Object.defineProperty({__proto__:null,bitGet:NT,bitLen:OT,bitMask:wg,bitSet:MT,bytesToHex:ta,bytesToNumberBE:Ks,bytesToNumberLE:yg,concatBytes:fc,createHmacDrbg:cE,ensureBytes:cr,equalBytes:IT,hexToBytes:na,hexToNumber:mg,numberToBytesBE:ra,numberToBytesLE:vg,numberToHexUnpadded:aE,numberToVarBytesBE:PT,utf8ToBytes:RT,validateObject:Vc},Symbol.toStringTag,{value:"Module"}));const Bt=BigInt(0),_t=BigInt(1),Rs=BigInt(2),DT=BigInt(3),Vh=BigInt(4),Lm=BigInt(5),Bm=BigInt(8);BigInt(9);BigInt(16);function _n(t,e){const n=t%e;return n>=Bt?n:e+n}function UT(t,e,n){if(n<=Bt||e<Bt)throw new Error("Expected power/modulo > 0");if(n===_t)return Bt;let r=_t;for(;e>Bt;)e&_t&&(r=r*t%n),t=t*t%n,e>>=_t;return r}function Vn(t,e,n){let r=t;for(;e-- >Bt;)r*=r,r%=n;return r}function zh(t,e){if(t===Bt||e<=Bt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=_n(t,e),r=e,i=Bt,s=_t;for(;n!==Bt;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==_t)throw new Error("invert: does not exist");return _n(i,e)}function $T(t){const e=(t-_t)/Rs;let n,r,i;for(n=t-_t,r=0;n%Rs===Bt;n/=Rs,r++);for(i=Rs;i<t&&UT(i,e,t)!==t-_t;i++);if(r===1){const o=(t+_t)/Vh;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+_t)/Rs;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),d=a.pow(c,s),f=a.pow(c,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let h=1;for(let p=a.sqr(f);h<l&&!a.eql(p,a.ONE);h++)p=a.sqr(p);const g=a.pow(u,_t<<BigInt(l-h-1));u=a.sqr(g),d=a.mul(d,g),f=a.mul(f,u),l=h}return d}}function FT(t){if(t%Vh===DT){const e=(t+_t)/Vh;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Bm===Lm){const e=(t-Lm)/Bm;return function(r,i){const s=r.mul(i,Rs),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,Rs),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return $T(t)}const HT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function KT(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=HT.reduce((r,i)=>(r[i]="function",r),e);return Vc(t,n)}function jT(t,e,n){if(n<Bt)throw new Error("Expected power > 0");if(n===Bt)return t.ONE;if(n===_t)return e;let r=t.ONE,i=e;for(;n>Bt;)n&_t&&(r=t.mul(r,i)),i=t.sqr(i),n>>=_t;return r}function VT(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function lE(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function zT(t,e,n=!1,r={}){if(t<=Bt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=lE(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=FT(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:wg(i),ZERO:Bt,ONE:_t,create:c=>_n(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Bt<=c&&c<t},is0:c=>c===Bt,isOdd:c=>(c&_t)===_t,neg:c=>_n(-c,t),eql:(c,l)=>c===l,sqr:c=>_n(c*c,t),add:(c,l)=>_n(c+l,t),sub:(c,l)=>_n(c-l,t),mul:(c,l)=>_n(c*l,t),pow:(c,l)=>jT(a,c,l),div:(c,l)=>_n(c*zh(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>zh(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>VT(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?vg(c,s):ra(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?yg(c):Ks(c)}});return Object.freeze(a)}function uE(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function dE(t){const e=uE(t);return e+Math.ceil(e/2)}function GT(t,e,n=!1){const r=t.length,i=uE(e),s=dE(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Ks(t):yg(t),a=_n(o,e-_t)+_t;return n?vg(a,i):ra(a,i)}const qT=BigInt(0),mf=BigInt(1);function WT(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>qT;)s&mf&&(o=o.add(a)),a=a.double(),s>>=mf;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let l=i,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let f=1;f<a;f++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let l=t.ZERO,u=t.BASE;const d=BigInt(2**i-1),f=2**i,h=BigInt(i);for(let g=0;g<a;g++){const p=g*c;let y=Number(o&d);o>>=h,y>c&&(y-=f,o+=mf);const m=p,b=p+Math.abs(y)-1,w=g%2!==0,P=y<0;y===0?u=u.add(n(w,s[m])):l=l.add(n(P,s[b]))}return{p:l,f:u}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let l=s.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&s.set(i,a(l))),this.wNAF(c,l,o)}}}function fE(t){return KT(t.Fp),Vc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...lE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function QT(t){const e=fE(t);Vc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:JT,hexToBytes:YT}=BT,Ms={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Ms;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:JT(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Ms,n=typeof t=="string"?YT(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Ms._parseInt(n.subarray(2)),{d:o,l:a}=Ms._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},oi=BigInt(0),Jn=BigInt(1);BigInt(2);const Dm=BigInt(3);BigInt(4);function ZT(t){const e=QT(t),{Fp:n}=e,r=e.toBytes||((g,p,y)=>{const m=p.toAffine();return fc(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),i=e.fromBytes||(g=>{const p=g.subarray(1),y=n.fromBytes(p.subarray(0,n.BYTES)),m=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function s(g){const{a:p,b:y}=e,m=n.sqr(g),b=n.mul(m,g);return n.add(n.add(b,n.mul(g,p)),y)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&oi<g&&g<e.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:p,nByteLength:y,wrapPrivateKey:m,n:b}=e;if(p&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=ta(g)),typeof g!="string"||!p.includes(g.length))throw new Error("Invalid key");g=g.padStart(y*2,"0")}let w;try{w=typeof g=="bigint"?g:Ks(cr("private key",g,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`)}return m&&(w=_n(w,b)),a(w),w}const l=new Map;function u(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(p,y,m){if(this.px=p,this.py=y,this.pz=m,p==null||!n.isValid(p))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(p){const{x:y,y:m}=p||{};if(!p||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(p instanceof d)throw new Error("projective point not allowed");const b=w=>n.eql(w,n.ZERO);return b(y)&&b(m)?d.ZERO:new d(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const y=n.invertBatch(p.map(m=>m.pz));return p.map((m,b)=>m.toAffine(y[b])).map(d.fromAffine)}static fromHex(p){const y=d.fromAffine(i(cr("pointHex",p)));return y.assertValidity(),y}static fromPrivateKey(p){return d.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:p,y}=this.toAffine();if(!n.isValid(p)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),b=s(p);if(!n.eql(m,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:y,py:m,pz:b}=this,{px:w,py:P,pz:O}=p,H=n.eql(n.mul(y,O),n.mul(w,b)),G=n.eql(n.mul(m,O),n.mul(P,b));return H&&G}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:y}=e,m=n.mul(y,Dm),{px:b,py:w,pz:P}=this;let O=n.ZERO,H=n.ZERO,G=n.ZERO,q=n.mul(b,b),j=n.mul(w,w),L=n.mul(P,P),V=n.mul(b,w);return V=n.add(V,V),G=n.mul(b,P),G=n.add(G,G),O=n.mul(p,G),H=n.mul(m,L),H=n.add(O,H),O=n.sub(j,H),H=n.add(j,H),H=n.mul(O,H),O=n.mul(V,O),G=n.mul(m,G),L=n.mul(p,L),V=n.sub(q,L),V=n.mul(p,V),V=n.add(V,G),G=n.add(q,q),q=n.add(G,q),q=n.add(q,L),q=n.mul(q,V),H=n.add(H,q),L=n.mul(w,P),L=n.add(L,L),q=n.mul(L,V),O=n.sub(O,q),G=n.mul(L,j),G=n.add(G,G),G=n.add(G,G),new d(O,H,G)}add(p){u(p);const{px:y,py:m,pz:b}=this,{px:w,py:P,pz:O}=p;let H=n.ZERO,G=n.ZERO,q=n.ZERO;const j=e.a,L=n.mul(e.b,Dm);let V=n.mul(y,w),$=n.mul(m,P),D=n.mul(b,O),N=n.add(y,m),S=n.add(w,P);N=n.mul(N,S),S=n.add(V,$),N=n.sub(N,S),S=n.add(y,b);let k=n.add(w,O);return S=n.mul(S,k),k=n.add(V,D),S=n.sub(S,k),k=n.add(m,b),H=n.add(P,O),k=n.mul(k,H),H=n.add($,D),k=n.sub(k,H),q=n.mul(j,S),H=n.mul(L,D),q=n.add(H,q),H=n.sub($,q),q=n.add($,q),G=n.mul(H,q),$=n.add(V,V),$=n.add($,V),D=n.mul(j,D),S=n.mul(L,S),$=n.add($,D),D=n.sub(V,D),D=n.mul(j,D),S=n.add(S,D),V=n.mul($,S),G=n.add(G,V),V=n.mul(k,S),H=n.mul(N,H),H=n.sub(H,V),V=n.mul(N,$),q=n.mul(k,q),q=n.add(q,V),new d(H,G,q)}subtract(p){return this.add(p.negate())}is0(){return this.equals(d.ZERO)}wNAF(p){return h.wNAFCached(this,l,p,y=>{const m=n.invertBatch(y.map(b=>b.pz));return y.map((b,w)=>b.toAffine(m[w])).map(d.fromAffine)})}multiplyUnsafe(p){const y=d.ZERO;if(p===oi)return y;if(a(p),p===Jn)return this;const{endo:m}=e;if(!m)return h.unsafeLadder(this,p);let{k1neg:b,k1:w,k2neg:P,k2:O}=m.splitScalar(p),H=y,G=y,q=this;for(;w>oi||O>oi;)w&Jn&&(H=H.add(q)),O&Jn&&(G=G.add(q)),q=q.double(),w>>=Jn,O>>=Jn;return b&&(H=H.negate()),P&&(G=G.negate()),G=new d(n.mul(G.px,m.beta),G.py,G.pz),H.add(G)}multiply(p){a(p);let y=p,m,b;const{endo:w}=e;if(w){const{k1neg:P,k1:O,k2neg:H,k2:G}=w.splitScalar(y);let{p:q,f:j}=this.wNAF(O),{p:L,f:V}=this.wNAF(G);q=h.constTimeNegate(P,q),L=h.constTimeNegate(H,L),L=new d(n.mul(L.px,w.beta),L.py,L.pz),m=q.add(L),b=j.add(V)}else{const{p:P,f:O}=this.wNAF(y);m=P,b=O}return d.normalizeZ([m,b])[0]}multiplyAndAddUnsafe(p,y,m){const b=d.BASE,w=(O,H)=>H===oi||H===Jn||!O.equals(b)?O.multiplyUnsafe(H):O.multiply(H),P=w(this,y).add(w(p,m));return P.is0()?void 0:P}toAffine(p){const{px:y,py:m,pz:b}=this,w=this.is0();p==null&&(p=w?n.ONE:n.inv(b));const P=n.mul(y,p),O=n.mul(m,p),H=n.mul(b,p);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(H,n.ONE))throw new Error("invZ was invalid");return{x:P,y:O}}isTorsionFree(){const{h:p,isTorsionFree:y}=e;if(p===Jn)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:y}=e;return p===Jn?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),r(d,this,p)}toHex(p=!0){return ta(this.toRawBytes(p))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,h=WT(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function XT(t){const e=fE(t);return Vc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function eP(t){const e=XT(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(S){return oi<S&&S<n.ORDER}function a(S){return _n(S,r)}function c(S){return zh(S,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=ZT({...e,toBytes(S,k,B){const v=k.toAffine(),E=n.toBytes(v.x),x=fc;return B?x(Uint8Array.from([k.hasEvenY()?2:3]),E):x(Uint8Array.from([4]),E,n.toBytes(v.y))},fromBytes(S){const k=S.length,B=S[0],v=S.subarray(1);if(k===i&&(B===2||B===3)){const E=Ks(v);if(!o(E))throw new Error("Point is not on curve");const x=d(E);let C=n.sqrt(x);const A=(C&Jn)===Jn;return(B&1)===1!==A&&(C=n.neg(C)),{x:E,y:C}}else if(k===s&&B===4){const E=n.fromBytes(v.subarray(0,n.BYTES)),x=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:E,y:x}}else throw new Error(`Point of length ${k} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=S=>ta(ra(S,e.nByteLength));function g(S){const k=r>>Jn;return S>k}function p(S){return g(S)?a(-S):S}const y=(S,k,B)=>Ks(S.slice(k,B));class m{constructor(k,B,v){this.r=k,this.s=B,this.recovery=v,this.assertValidity()}static fromCompact(k){const B=e.nByteLength;return k=cr("compactSignature",k,B*2),new m(y(k,0,B),y(k,B,2*B))}static fromDER(k){const{r:B,s:v}=Ms.toSig(cr("DER",k));return new m(B,v)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new m(this.r,this.s,k)}recoverPublicKey(k){const{r:B,s:v,recovery:E}=this,x=G(cr("msgHash",k));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const C=E===2||E===3?B+e.n:B;if(C>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const A=(E&1)===0?"02":"03",_=l.fromHex(A+h(C)),T=c(C),R=a(-x*T),U=a(v*T),I=l.BASE.multiplyAndAddUnsafe(_,R,U);if(!I)throw new Error("point at infinify");return I.assertValidity(),I}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return na(this.toDERHex())}toDERHex(){return Ms.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return na(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const b={isValidPrivateKey(S){try{return u(S),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const S=dE(e.n);return GT(e.randomBytes(S),e.n)},precompute(S=8,k=l.BASE){return k._setWindowSize(S),k.multiply(BigInt(3)),k}};function w(S,k=!0){return l.fromPrivateKey(S).toRawBytes(k)}function P(S){const k=S instanceof Uint8Array,B=typeof S=="string",v=(k||B)&&S.length;return k?v===i||v===s:B?v===2*i||v===2*s:S instanceof l}function O(S,k,B=!0){if(P(S))throw new Error("first arg must be private key");if(!P(k))throw new Error("second arg must be public key");return l.fromHex(k).multiply(u(S)).toRawBytes(B)}const H=e.bits2int||function(S){const k=Ks(S),B=S.length*8-e.nBitLength;return B>0?k>>BigInt(B):k},G=e.bits2int_modN||function(S){return a(H(S))},q=wg(e.nBitLength);function j(S){if(typeof S!="bigint")throw new Error("bigint expected");if(!(oi<=S&&S<q))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ra(S,e.nByteLength)}function L(S,k,B=V){if(["recovered","canonical"].some(W=>W in B))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:E}=e;let{lowS:x,prehash:C,extraEntropy:A}=B;x==null&&(x=!0),S=cr("msgHash",S),C&&(S=cr("prehashed msgHash",v(S)));const _=G(S),T=u(k),R=[j(T),j(_)];if(A!=null){const W=A===!0?E(n.BYTES):A;R.push(cr("extraEntropy",W))}const U=fc(...R),I=_;function K(W){const Z=H(W);if(!f(Z))return;const se=c(Z),M=l.BASE.multiply(Z).toAffine(),F=a(M.x);if(F===oi)return;const Y=a(se*a(I+F*T));if(Y===oi)return;let ne=(M.x===F?0:2)|Number(M.y&Jn),J=Y;return x&&g(Y)&&(J=p(Y),ne^=1),new m(F,J,ne)}return{seed:U,k2sig:K}}const V={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function D(S,k,B=V){const{seed:v,k2sig:E}=L(S,k,B),x=e;return cE(x.hash.outputLen,x.nByteLength,x.hmac)(v,E)}l.BASE._setWindowSize(8);function N(S,k,B,v=$){const E=S;if(k=cr("msgHash",k),B=cr("publicKey",B),"strict"in v)throw new Error("options.strict was renamed to lowS");const{lowS:x,prehash:C}=v;let A,_;try{if(typeof E=="string"||E instanceof Uint8Array)try{A=m.fromDER(E)}catch(M){if(!(M instanceof Ms.Err))throw M;A=m.fromCompact(E)}else if(typeof E=="object"&&typeof E.r=="bigint"&&typeof E.s=="bigint"){const{r:M,s:F}=E;A=new m(M,F)}else throw new Error("PARSE");_=l.fromHex(B)}catch(M){if(M.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(x&&A.hasHighS())return!1;C&&(k=e.hash(k));const{r:T,s:R}=A,U=G(k),I=c(R),K=a(U*I),W=a(T*I),Z=l.BASE.multiplyAndAddUnsafe(_,K,W)?.toAffine();return Z?a(Z.x)===T:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:O,sign:D,verify:N,ProjectivePoint:l,Signature:m,utils:b}}function tP(t){return{hash:t,hmac:(e,...n)=>K1(t,e,K3(...n)),randomBytes:j3}}function nP(t,e){const n=r=>eP({...t,...tP(r)});return Object.freeze({...n(e),create:n})}const hE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Um=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rP=BigInt(1),Gh=BigInt(2),$m=(t,e)=>(t+e/Gh)/e;function iP(t){const e=hE,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Vn(u,n,e)*u%e,f=Vn(d,n,e)*u%e,h=Vn(f,Gh,e)*l%e,g=Vn(h,i,e)*h%e,p=Vn(g,s,e)*g%e,y=Vn(p,a,e)*p%e,m=Vn(y,c,e)*y%e,b=Vn(m,a,e)*p%e,w=Vn(b,n,e)*u%e,P=Vn(w,o,e)*g%e,O=Vn(P,r,e)*l%e,H=Vn(O,Gh,e);if(!qh.eql(qh.sqr(H),t))throw new Error("Cannot find square root");return H}const qh=zT(hE,void 0,void 0,{sqrt:iP}),Bi=nP({a:BigInt(0),b:BigInt(7),Fp:qh,n:Um,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Um,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-rP*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=$m(s*t,e),c=$m(-r*t,e);let l=_n(t-a*n-c*i,e),u=_n(-a*r-c*s,e);const d=l>o,f=u>o;if(d&&(l=e-l),f&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:f,k2:u}}}},V1);BigInt(0);Bi.ProjectivePoint;const hc="0x0000000000000000000000000000000000000000",Fm="0x0000000000000000000000000000000000000000000000000000000000000000",Hm=BigInt(0),Km=BigInt(1),jm=BigInt(2),Vm=BigInt(27),zm=BigInt(28),al=BigInt(35),lo={};function Gm(t){return wi(Pt(t),32)}class yt{#e;#t;#n;#r;get r(){return this.#e}set r(e){ee($o(e)===32,"invalid r","value",e),this.#e=Se(e)}get s(){return ee(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){ee($o(e)===32,"invalid s","value",e),this.#t=Se(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const n=Ue(e,"value");ee(n===27||n===28,"invalid v","v",e),this.#n=n}get networkV(){return this.#r}get legacyChainId(){const e=this.networkV;return e==null?null:yt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Fe(this.s);return this.yParity&&(e[0]|=128),Se(e)}get compactSerialized(){return bt([this.r,this.yParityAndS])}get serialized(){return bt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,n,r,i){Kc(e,lo,"Signature"),this.#e=n,this.#t=r,this.#n=i,this.#r=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new yt(lo,this.r,this._s,this.v);return this.networkV&&(e.#r=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=ke(e,"v");return n==Vm||n==zm?Hm:(ee(n>=al,"invalid EIP-155 v","v",e),(n-al)/jm)}static getChainIdV(e,n){return ke(e)*jm+BigInt(35+n-27)}static getNormalizedV(e){const n=ke(e);return n===Hm||n===Vm?27:n===Km||n===zm?28:(ee(n>=al,"invalid v","v",e),n&Km?27:28)}static from(e){function n(l,u){ee(l,u,"signature",e)}if(e==null)return new yt(lo,Fm,Fm,27);if(typeof e=="string"){const l=Fe(e,"signature");if(l.length===64){const u=Se(l.slice(0,32)),d=l.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new yt(lo,u,Se(d),f)}if(l.length===65){const u=Se(l.slice(0,32)),d=Se(l.slice(32,64)),f=yt.getNormalizedV(l[64]);return new yt(lo,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof yt)return e.clone();const r=e.r;n(r!=null,"missing r");const i=Gm(r),s=(function(l,u){if(l!=null)return Gm(l);if(u!=null){n(dt(u,32),"invalid yParityAndS");const d=Fe(u);return d[0]&=127,Se(d)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(l,u,d){if(l!=null){const f=ke(l);return{networkV:f>=al?f:void 0,v:yt.getNormalizedV(f)}}if(u!=null)return n(dt(u,32),"invalid yParityAndS"),{v:Fe(u)[0]&128?28:27};if(d!=null){switch(Ue(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new yt(lo,i,s,a);return o&&(c.#r=o),n(e.yParity==null||Ue(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class ai{#e;constructor(e){ee($o(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=Se(e)}get privateKey(){return this.#e}get publicKey(){return ai.computePublicKey(this.#e)}get compressedPublicKey(){return ai.computePublicKey(this.#e,!0)}sign(e){ee($o(e)===32,"invalid digest length","digest",e);const n=Bi.sign(dn(e),dn(this.#e),{lowS:!0});return yt.from({r:us(n.r,32),s:us(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=ai.computePublicKey(e);return Se(Bi.getSharedSecret(dn(this.#e),Fe(n),!1))}static computePublicKey(e,n){let r=Fe(e,"key");if(r.length===32){const s=Bi.getPublicKey(r,!!n);return Se(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Bi.ProjectivePoint.fromHex(r);return Se(i.toRawBytes(n))}static recoverPublicKey(e,n){ee($o(e)===32,"invalid digest length","digest",e);const r=yt.from(n);let i=Bi.Signature.fromCompact(dn(bt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(dn(e));return ee(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=Bi.ProjectivePoint.fromHex(ai.computePublicKey(e).substring(2)),s=Bi.ProjectivePoint.fromHex(ai.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}}const sP=BigInt(0),oP=BigInt(36);function qm(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=Fe(xt(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const bg={};for(let t=0;t<10;t++)bg[String(t)]=String(t);for(let t=0;t<26;t++)bg[String.fromCharCode(65+t)]=String(10+t);const Wm=15;function aP(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>bg[r]).join("");for(;e.length>=Wm;){let r=e.substring(0,Wm);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const cP=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function lP(t){t=t.toLowerCase();let e=sP;for(let n=0;n<t.length;n++)e=e*oP+cP[t[n]];return e}function Ye(t){if(ee(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=qm(t);return ee(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ee(t.substring(2,4)===aP(t),"bad icap checksum","address",t);let e=lP(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return qm("0x"+e)}ee(!1,"invalid address","address",t)}function uP(t){const e=Ye(t.from);let r=ke(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Ye(mt(xt(ds([e,r])),12))}function pE(t){return t&&typeof t.getAddress=="function"}async function yf(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(me(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),ee(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Ye(n)}function pn(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Ye(t):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),yf(t,e.resolveName(t)));if(pE(t))return yf(t,t.getAddress());if(t&&typeof t.then=="function")return yf(t,t);ee(!1,"unsupported addressable value","target",t)}const Zr={};function xe(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new wt(Zr,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function We(t,e){return new wt(Zr,`bytes${e||""}`,t,{size:e})}const Qm=Symbol.for("_ethers_typed");class wt{type;value;#e;_typedSymbol;constructor(e,n,r,i){i==null&&(i=null),Kc(Zr,e,"Typed"),Re(this,{_typedSymbol:Qm,type:n,value:r}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,n){return new wt(Zr,e,n)}static uint8(e){return xe(e,8)}static uint16(e){return xe(e,16)}static uint24(e){return xe(e,24)}static uint32(e){return xe(e,32)}static uint40(e){return xe(e,40)}static uint48(e){return xe(e,48)}static uint56(e){return xe(e,56)}static uint64(e){return xe(e,64)}static uint72(e){return xe(e,72)}static uint80(e){return xe(e,80)}static uint88(e){return xe(e,88)}static uint96(e){return xe(e,96)}static uint104(e){return xe(e,104)}static uint112(e){return xe(e,112)}static uint120(e){return xe(e,120)}static uint128(e){return xe(e,128)}static uint136(e){return xe(e,136)}static uint144(e){return xe(e,144)}static uint152(e){return xe(e,152)}static uint160(e){return xe(e,160)}static uint168(e){return xe(e,168)}static uint176(e){return xe(e,176)}static uint184(e){return xe(e,184)}static uint192(e){return xe(e,192)}static uint200(e){return xe(e,200)}static uint208(e){return xe(e,208)}static uint216(e){return xe(e,216)}static uint224(e){return xe(e,224)}static uint232(e){return xe(e,232)}static uint240(e){return xe(e,240)}static uint248(e){return xe(e,248)}static uint256(e){return xe(e,256)}static uint(e){return xe(e,256)}static int8(e){return xe(e,-8)}static int16(e){return xe(e,-16)}static int24(e){return xe(e,-24)}static int32(e){return xe(e,-32)}static int40(e){return xe(e,-40)}static int48(e){return xe(e,-48)}static int56(e){return xe(e,-56)}static int64(e){return xe(e,-64)}static int72(e){return xe(e,-72)}static int80(e){return xe(e,-80)}static int88(e){return xe(e,-88)}static int96(e){return xe(e,-96)}static int104(e){return xe(e,-104)}static int112(e){return xe(e,-112)}static int120(e){return xe(e,-120)}static int128(e){return xe(e,-128)}static int136(e){return xe(e,-136)}static int144(e){return xe(e,-144)}static int152(e){return xe(e,-152)}static int160(e){return xe(e,-160)}static int168(e){return xe(e,-168)}static int176(e){return xe(e,-176)}static int184(e){return xe(e,-184)}static int192(e){return xe(e,-192)}static int200(e){return xe(e,-200)}static int208(e){return xe(e,-208)}static int216(e){return xe(e,-216)}static int224(e){return xe(e,-224)}static int232(e){return xe(e,-232)}static int240(e){return xe(e,-240)}static int248(e){return xe(e,-248)}static int256(e){return xe(e,-256)}static int(e){return xe(e,-256)}static bytes1(e){return We(e,1)}static bytes2(e){return We(e,2)}static bytes3(e){return We(e,3)}static bytes4(e){return We(e,4)}static bytes5(e){return We(e,5)}static bytes6(e){return We(e,6)}static bytes7(e){return We(e,7)}static bytes8(e){return We(e,8)}static bytes9(e){return We(e,9)}static bytes10(e){return We(e,10)}static bytes11(e){return We(e,11)}static bytes12(e){return We(e,12)}static bytes13(e){return We(e,13)}static bytes14(e){return We(e,14)}static bytes15(e){return We(e,15)}static bytes16(e){return We(e,16)}static bytes17(e){return We(e,17)}static bytes18(e){return We(e,18)}static bytes19(e){return We(e,19)}static bytes20(e){return We(e,20)}static bytes21(e){return We(e,21)}static bytes22(e){return We(e,22)}static bytes23(e){return We(e,23)}static bytes24(e){return We(e,24)}static bytes25(e){return We(e,25)}static bytes26(e){return We(e,26)}static bytes27(e){return We(e,27)}static bytes28(e){return We(e,28)}static bytes29(e){return We(e,29)}static bytes30(e){return We(e,30)}static bytes31(e){return We(e,31)}static bytes32(e){return We(e,32)}static address(e){return new wt(Zr,"address",e)}static bool(e){return new wt(Zr,"bool",!!e)}static bytes(e){return new wt(Zr,"bytes",e)}static string(e){return new wt(Zr,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new wt(Zr,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Qm}static dereference(e,n){if(wt.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}}class dP extends Si{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=wt.dereference(n,"string");try{r=Ye(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return Ye(us(e.readValue(),20))}}class fP extends Si{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function gE(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return me(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),me(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else ee(!1,"invalid tuple value","tuple",n);ee(e.length===r.length,"types/value length mismatch","tuple",n);let i=new Kh,s=new Kh,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=s.length;c.encode(s,u);let f=i.writeUpdatableValue();o.push(h=>{f(h+d)})}else c.encode(i,u)}),o.forEach(c=>{c(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function mE(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),c=i.subReader(a);try{o=s.decode(c)}catch(l){if(jt(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(jt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),ci.fromItems(n,r)}class hP extends Si{coder;length;constructor(e,n,r){const i=e.type+"["+(n>=0?n:"")+"]",s=n===-1||e.dynamic;super("array",i,r,s),Re(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){const r=wt.dereference(n,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),x1(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let o=0;o<r.length;o++)s.push(this.coder);return gE(e,s,r)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),me(n*hn<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*hn,length:e.dataLength}));let r=[];for(let i=0;i<n;i++)r.push(new fP(this.coder));return mE(e,r)}}class pP extends Si{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=wt.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class yE extends Si{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=dn(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class gP extends yE{constructor(e){super("bytes",e)}decode(e){return Se(super.decode(e))}}class mP extends Si{size;constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1),Re(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=dn(wt.dereference(n,this.type));return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return Se(e.readBytes(this.size))}}const yP=new Uint8Array([]);class vP extends Si{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(yP)}decode(e){return e.readBytes(0),null}}const wP=BigInt(0),bP=BigInt(1),EP=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class AP extends Si{size;signed;constructor(e,n,r){const i=(n?"int":"uint")+e*8;super(i,i,r,!1),Re(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let r=ke(wt.dereference(n,this.type)),i=Ns(EP,hn*8);if(this.signed){let s=Ns(i,this.size*8-1);(r>s||r<-(s+bP))&&this._throwError("value out-of-bounds",n),r=P1(r,8*hn)}else(r<wP||r>Ns(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(r)}decode(e){let n=Ns(e.readValue(),this.size*8);return this.signed&&(n=Cu(n,this.size*8)),n}}class _P extends yE{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,pi(wt.dereference(n,"string")))}decode(e){return xu(super.decode(e))}}class cl extends Si{coders;constructor(e,n){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,n,r),Re(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||n[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,n){const r=wt.dereference(n,"tuple");return gE(e,this.coders,r)}decode(e){return mE(e,this.coders)}}function vf(t,e){return{address:Ye(t),storageKeys:e.map((n,r)=>(ee(dt(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Xs(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(ee(n.length===2,"invalid slot set",`value[${r}]`,n),vf(n[0],n[1])):(ee(n!=null&&typeof n=="object","invalid address-slot set","value",t),vf(n.address,n.storageKeys)));ee(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return vf(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function vE(t){return{address:Ye(t.address),nonce:ke(t.nonce!=null?t.nonce:0),chainId:ke(t.chainId!=null?t.chainId:0),signature:yt.from(t.signature)}}function SP(t){let e;return typeof t=="string"?e=ai.computePublicKey(t,!1):e=t.publicKey,Ye(xt("0x"+e.substring(4)).substring(26))}function CP(t,e){return SP(ai.recoverPublicKey(t,e))}const Mt=BigInt(0),xP=BigInt(2),kP=BigInt(27),TP=BigInt(28),PP=BigInt(35),IP=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),wf=4096*32;function RP(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Fe(t.blobToKzgCommitment(Se(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Fe(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Fe(t.blobToKZGCommitment(Se(r)));ee(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Fe(t.computeBlobProof(Se(r),Se(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Fe(t.computeBlobKZGProof(Se(r),Se(i)));ee(!1,"unsupported KZG library","kzg",t)}}}function Jm(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=ha(e).substring(4),"0x"+n}function pa(t){return t==="0x"?null:Ye(t)}function Rd(t,e){try{return Xs(t)}catch(n){ee(!1,n.message,e,t)}}function OP(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:pa(i[1]),nonce:it(i[2],"nonce"),chainId:it(i[0],"chainId"),signature:yt.from({yParity:eo(i[3],"yParity"),r:wi(i[4],32),s:wi(i[5],32)})})}return n}catch(n){ee(!1,n.message,e,t)}}function eo(t,e){return t==="0x"?0:Ue(t,e)}function it(t,e){if(t==="0x")return Mt;const n=ke(t,e);return ee(n<=IP,"value exceeds uint size",e,n),n}function je(t,e){const n=ke(t,"value"),r=Pt(n);return ee(r.length<=32,"value too large",`tx.${e}`,n),r}function Od(t){return Xs(t).map(e=>[e.address,e.storageKeys])}function NP(t){return t.map(e=>[je(e.chainId,"chainId"),e.address,je(e.nonce,"nonce"),je(e.signature.yParity,"yParity"),Pt(e.signature.r),Pt(e.signature.s)])}function MP(t,e){ee(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)ee(dt(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function LP(t){const e=jc(t);ee(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:eo(e[0],"nonce"),gasPrice:it(e[1],"gasPrice"),gasLimit:it(e[2],"gasLimit"),to:pa(e[3]),value:it(e[4],"value"),data:Se(e[5]),chainId:Mt};if(e.length===6)return n;const r=it(e[6],"v"),i=it(e[7],"r"),s=it(e[8],"s");if(i===Mt&&s===Mt)n.chainId=r;else{let o=(r-PP)/xP;o<Mt&&(o=Mt),n.chainId=o,ee(o!==Mt||r===kP||r===TP,"non-canonical legacy v","v",e[6]),n.signature=yt.from({r:wi(e[7],32),s:wi(e[8],32),v:r})}return n}function BP(t,e){const n=[je(t.nonce,"nonce"),je(t.gasPrice||0,"gasPrice"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data];let r=Mt;if(t.chainId!=Mt)r=ke(t.chainId,"tx.chainId"),ee(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Mt&&(n.push(Pt(r)),n.push("0x"),n.push("0x")),ds(n);let i=BigInt(27+e.yParity);return r!==Mt?i=yt.getChainIdV(r,e.v):BigInt(e.v)!==i&&ee(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Pt(i)),n.push(Pt(e.r)),n.push(Pt(e.s)),ds(n)}function Nd(t,e){let n;try{if(n=eo(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ee(!1,"invalid yParity","yParity",e[0])}const r=wi(e[1],32),i=wi(e[2],32),s=yt.from({r,s:i,yParity:n});t.signature=s}function DP(t){const e=jc(Fe(t).slice(1));ee(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Se(t));const n={type:2,chainId:it(e[0],"chainId"),nonce:eo(e[1],"nonce"),maxPriorityFeePerGas:it(e[2],"maxPriorityFeePerGas"),maxFeePerGas:it(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(e[4],"gasLimit"),to:pa(e[5]),value:it(e[6],"value"),data:Se(e[7]),accessList:Rd(e[8],"accessList")};return e.length===9||Nd(n,e.slice(9)),n}function UP(t,e){const n=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(t.maxFeePerGas||0,"maxFeePerGas"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data,Od(t.accessList||[])];return e&&(n.push(je(e.yParity,"yParity")),n.push(Pt(e.r)),n.push(Pt(e.s))),bt(["0x02",ds(n)])}function $P(t){const e=jc(Fe(t).slice(1));ee(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Se(t));const n={type:1,chainId:it(e[0],"chainId"),nonce:eo(e[1],"nonce"),gasPrice:it(e[2],"gasPrice"),gasLimit:it(e[3],"gasLimit"),to:pa(e[4]),value:it(e[5],"value"),data:Se(e[6]),accessList:Rd(e[7],"accessList")};return e.length===8||Nd(n,e.slice(8)),n}function FP(t,e){const n=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.gasPrice||0,"gasPrice"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data,Od(t.accessList||[])];return e&&(n.push(je(e.yParity,"recoveryParam")),n.push(Pt(e.r)),n.push(Pt(e.s))),bt(["0x01",ds(n)])}function HP(t){let e=jc(Fe(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const s=e[1],o=e[2],a=e[3];ee(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),ee(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),ee(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),ee(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),ee(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:s[c],commitment:o[c],proof:a[c]});e=e[0]}ee(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Se(t));const i={type:3,chainId:it(e[0],"chainId"),nonce:eo(e[1],"nonce"),maxPriorityFeePerGas:it(e[2],"maxPriorityFeePerGas"),maxFeePerGas:it(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(e[4],"gasLimit"),to:pa(e[5]),value:it(e[6],"value"),data:Se(e[7]),accessList:Rd(e[8],"accessList"),maxFeePerBlobGas:it(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),ee(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),ee(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let s=0;s<i.blobVersionedHashes.length;s++)ee(dt(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",t);return e.length===11||Nd(i,e.slice(11)),i}function KP(t,e,n){const r=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(t.maxFeePerGas||0,"maxFeePerGas"),je(t.gasLimit,"gasLimit"),t.to||hc,je(t.value,"value"),t.data,Od(t.accessList||[]),je(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),MP(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(je(e.yParity,"yParity")),r.push(Pt(e.r)),r.push(Pt(e.s)),n)?bt(["0x03",ds([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):bt(["0x03",ds(r)])}function jP(t){const e=jc(Fe(t).slice(1));ee(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Se(t));const n={type:4,chainId:it(e[0],"chainId"),nonce:eo(e[1],"nonce"),maxPriorityFeePerGas:it(e[2],"maxPriorityFeePerGas"),maxFeePerGas:it(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(e[4],"gasLimit"),to:pa(e[5]),value:it(e[6],"value"),data:Se(e[7]),accessList:Rd(e[8],"accessList"),authorizationList:OP(e[9],"authorizationList")};return e.length===10||Nd(n,e.slice(10)),n}function VP(t,e){const n=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(t.maxFeePerGas||0,"maxFeePerGas"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data,Od(t.accessList||[]),NP(t.authorizationList||[])];return e&&(n.push(je(e.yParity,"yParity")),n.push(Pt(e.r)),n.push(Pt(e.s))),bt(["0x04",ds(n)])}class lr{#e;#t;#n;#r;#i;#o;#s;#a;#d;#l;#p;#g;#c;#u;#f;#h;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:ee(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?hc:e}set to(e){this.#t=e==null?null:Ye(e)}get nonce(){return this.#r}set nonce(e){this.#r=Ue(e,"value")}get gasLimit(){return this.#i}set gasLimit(e){this.#i=ke(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?Mt:e}set gasPrice(e){this.#o=e==null?null:ke(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#s;return e??(this.type===2||this.type===3?Mt:null)}set maxPriorityFeePerGas(e){this.#s=e==null?null:ke(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?Mt:null)}set maxFeePerGas(e){this.#a=e==null?null:ke(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=Se(e)}get value(){return this.#d}set value(e){this.#d=ke(e,"value")}get chainId(){return this.#l}set chainId(e){this.#l=ke(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:yt.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:Xs(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(n=>vE(n))}get maxFeePerBlobGas(){const e=this.#c;return e==null&&this.type===3?Mt:e}set maxFeePerBlobGas(e){this.#c=e==null?null:ke(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ee(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)ee(dt(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}this.#u=e}get blobs(){return this.#h==null?null:this.#h.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#h=null;return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(ug(s)){me(this.#f,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Fe(s);if(ee(o.length<=wf,"blob is too large",`blobs[${i}]`,s),o.length!==wf){const l=new Uint8Array(wf);l.set(o),o=l}const a=this.#f.blobToKzgCommitment(o),c=Se(this.#f.computeBlobKzgProof(o,a));n.push({data:Se(o),commitment:Se(a),proof:c}),r.push(Jm(1,a))}else{const o=Se(s.commitment);n.push({data:Se(s.data),commitment:o,proof:Se(s.proof)}),r.push(Jm(1,o))}}this.#h=n,this.#u=r}get kzg(){return this.#f}set kzg(e){e==null?this.#f=null:this.#f=RP(e)}constructor(){this.#e=null,this.#t=null,this.#r=0,this.#i=Mt,this.#o=null,this.#s=null,this.#a=null,this.#n="0x",this.#d=Mt,this.#l=Mt,this.#p=null,this.#g=null,this.#c=null,this.#u=null,this.#f=null,this.#h=null,this.#y=null}get hash(){return this.signature==null?null:xt(this.#m(!0,!1))}get unsignedHash(){return xt(this.unsignedSerialized)}get from(){return this.signature==null?null:CP(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:ai.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#m(e,n){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return BP(this,r);case 1:return FP(this,r);case 2:return UP(this,r);case 3:return KP(this,r,n?this.blobs:null);case 4:return VP(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=this.#c!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return lr.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new lr;if(typeof e=="string"){const r=Fe(e);if(r[0]>=127)return lr.from(LP(r));switch(r[0]){case 1:return lr.from($P(r));case 2:return lr.from(DP(r));case 3:return lr.from(HP(r));case 4:return lr.from(jP(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new lr;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=yt.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(ee(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ee(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ee(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ee(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}}function zs(t){return xt(pi(t))}var zP="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const Ym=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Zm=4;function GP(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let O=1;O<r;O++)s.push(i+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,f=2**d,h=f>>>1,g=h>>1,p=f-1;let y=0;for(let O=0;O<d;O++)y=y<<1|u();let m=[],b=0,w=f;for(;;){let O=Math.floor(((y-b+1)*i-1)/w),H=0,G=r;for(;G-H>1;){let L=H+G>>>1;O<s[L]?G=L:H=L}if(H==0)break;m.push(H);let q=b+Math.floor(w*s[H]/i),j=b+Math.floor(w*s[H+1]/i)-1;for(;((q^j)&h)==0;)y=y<<1&p|u(),q=q<<1&p,j=j<<1&p|1;for(;q&~j&g;)y=y&h|y<<1&p>>>1|u(),q=q<<1^h,j=(j^h)<<1|h|1;b=q,w=1+j-q}let P=r-4;return m.map(O=>{switch(O-P){case 3:return P+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return P+256+(t[a++]<<8|t[a++]);case 1:return P+t[a++];default:return O-1}})}function qP(t){let e=0;return()=>t[e++]}function wE(t){return qP(GP(WP(t)))}function WP(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function QP(t){return t&1?~t>>1:t>>1}function JP(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=QP(e());return n}function pc(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function bE(t){return gc(()=>{let e=pc(t);if(e.length)return e})}function EE(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(YP(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(ZP(n,t))}return e.flat()}function gc(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function AE(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)JP(t,n).forEach((s,o)=>r[o].push(s));return r}function YP(t,e){let n=1+e(),r=e(),i=gc(e);return AE(i.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(i[a]).fill().map((u,d)=>{let f=d*r;return[c+d*n,l.map(h=>h+f)]})})}function ZP(t,e){let n=1+e();return AE(n,1+t,e).map(i=>[i[0],i.slice(1)])}function XP(t){let e=[],n=pc(t);return i(r([]),[]),e;function r(s){let o=t(),a=gc(()=>{let c=pc(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&e.push(a);for(let l of o)for(let u of l.Q)i(l,[...a,u],c)}}}function eI(t){return t.toString(16).toUpperCase().padStart(2,"0")}function _E(t){return`{${eI(t)}}`}function tI(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function ia(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function nI(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var rI="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const mc=44032,Tu=4352,Pu=4449,Iu=4519,SE=19,CE=21,sa=28,Ru=CE*sa,iI=SE*Ru,sI=mc+iI,oI=Tu+SE,aI=Pu+CE,cI=Iu+sa;function Na(t){return t>>24&255}function xE(t){return t&16777215}let Wh,Xm,Qh,zl;function lI(){let t=wE(rI);Wh=new Map(bE(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),Xm=new Set(pc(t)),Qh=new Map,zl=new Map;for(let[e,n]of EE(t)){if(!Xm.has(e)&&n.length==2){let[r,i]=n,s=zl.get(r);s||(s=new Map,zl.set(r,s)),s.set(i,e)}Qh.set(e,n.reverse())}}function kE(t){return t>=mc&&t<sI}function uI(t,e){if(t>=Tu&&t<oI&&e>=Pu&&e<aI)return mc+(t-Tu)*Ru+(e-Pu)*sa;if(kE(t)&&e>Iu&&e<cI&&(t-mc)%sa==0)return t+(e-Iu);{let n=zl.get(t);return n&&(n=n.get(e),n)?n:-1}}function TE(t){Wh||lI();let e=[],n=[],r=!1;function i(s){let o=Wh.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(kE(s)){let o=s-mc,a=o/Ru|0,c=o%Ru/sa|0,l=o%sa;i(Tu+a),i(Pu+c),l>0&&i(Iu+l)}else{let o=Qh.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=Na(e[0]);for(let o=1;o<e.length;o++){let a=Na(e[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(s=Na(e[--c]),s<=a))break}s=Na(e[o])}}return e}function dI(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=Na(s),a=xE(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let c=uI(r,a);c>=0?r=c:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function PE(t){return TE(t).map(xE)}function fI(t){return dI(TE(t))}const ey=45,IE=".",RE=65039,OE=1,Ou=t=>Array.from(t);function yc(t,e){return t.P.has(e)||t.Q.has(e)}class hI extends Array{get is_emoji(){return!0}}let Jh,NE,Ls,Yh,ME,Ho,bf,wo,Cs,ty,Zh;function Eg(){if(Jh)return;let t=wE(zP);const e=()=>pc(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(f=>u.add(f));Jh=new Map(EE(t)),NE=n(),Ls=e(),Yh=new Set(e().map(u=>Ls[u])),Ls=new Set(Ls),ME=n(),n();let i=bE(t),s=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,i[d])),r(u,e()),u};Ho=gc(u=>{let d=gc(t).map(f=>f+96);if(d.length){let f=u>=s;d[0]-=32,d=ia(d),f&&(d=`Restricted[${d}]`);let h=o(),g=o(),p=!t();return{N:d,P:h,Q:g,M:p,R:f}}}),bf=n(),wo=new Map;let a=e().concat(Ou(bf)).sort((u,d)=>u-d);a.forEach((u,d)=>{let f=t(),h=a[d]=f?a[d-f]:{V:[],M:new Map};h.V.push(u),bf.has(u)||wo.set(u,h)});for(let{V:u,M:d}of new Set(wo.values())){let f=[];for(let g of u){let p=Ho.filter(m=>yc(m,g)),y=f.find(({G:m})=>p.some(b=>m.has(b)));y||(y={G:new Set,V:[]},f.push(y)),y.V.push(g),r(y.G,p)}let h=f.flatMap(g=>Ou(g.G));for(let{G:g,V:p}of f){let y=new Set(h.filter(m=>!g.has(m)));for(let m of p)d.set(m,y)}}Cs=new Set;let c=new Set;const l=u=>Cs.has(u)?c.add(u):Cs.add(u);for(let u of Ho){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Cs)!wo.has(u)&&!c.has(u)&&wo.set(u,OE);r(Cs,PE(Cs)),ty=XP(t).map(u=>hI.from(u)).sort(nI),Zh=new Map;for(let u of ty){let d=[Zh];for(let f of u){let h=d.map(g=>{let p=g.get(f);return p||(p=new Map,g.set(f,p)),p});f===RE?d.push(...h):d=h}for(let f of d)f.V=u}}function Ag(t){return(LE(t)?"":`${_g(Md([t]))} `)+_E(t)}function _g(t){return`"${t}"`}function pI(t){if(t.length>=4&&t[2]==ey&&t[3]==ey)throw new Error(`invalid label extension: "${ia(t.slice(0,4))}"`)}function gI(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function mI(t){let e=t[0],n=Ym.get(e);if(n)throw Qa(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=Ym.get(e);if(o){if(i==s)throw Qa(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw Qa(`trailing ${n}`)}function Md(t,e=1/0,n=_E){let r=[];yI(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];LE(a)&&(r.push(ia(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(ia(t.slice(i,s))),r.join("")}function yI(t){return Eg(),Ls.has(t)}function LE(t){return Eg(),ME.has(t)}function vI(t){return AI(wI(t,fI,CI))}function wI(t,e,n){if(!t)return[];Eg();let r=0;return t.split(IE).map(i=>{let s=tI(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=SI(s,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(gI(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(f=>f<128))pI(u),l="ASCII";else{let f=a.flatMap(h=>h.is_emoji?[]:h);if(!f.length)l="Emoji";else{if(Ls.has(u[0]))throw Qa("leading combining mark");for(let p=1;p<c;p++){let y=a[p];if(!y.is_emoji&&Ls.has(y[0]))throw Qa(`emoji + combining mark: "${ia(a[p-1])} + ${Md([y[0]])}"`)}mI(u);let h=Ou(new Set(f)),[g]=EI(h);_I(g,f),bI(g,h),l=g.N}}o.type=l}catch(a){o.error=a}return o})}function bI(t,e){let n,r=[];for(let i of e){let s=wo.get(i);if(s===OE)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):Ou(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>yc(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function EI(t){let e=Ho;for(let n of t){let r=e.filter(i=>yc(i,n));if(!r.length)throw Ho.some(i=>yc(i,n))?DE(e[0],n):BE(n);if(e=r,r.length==1)break}return e}function AI(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${_g(Md(e,63))}: ${i}`)}return ia(r)}).join(IE)}function BE(t){return new Error(`disallowed character: ${Ag(t)}`)}function DE(t,e){let n=Ag(e),r=Ho.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Qa(t){return new Error(`illegal placement: ${t}`)}function _I(t,e){for(let n of e)if(!yc(t,n))throw DE(t,n);if(t.M){let n=PE(e);for(let r=1,i=n.length;r<i;r++)if(Yh.has(n[r])){let s=r+1;for(let o;s<i&&Yh.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${Ag(o)}`);if(s-r>Zm)throw new Error(`excessive non-spacing marks: ${_g(Md(n.slice(r-1,s)))} (${s-r}/${Zm})`);r=s}}}function SI(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=xI(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(Cs.has(o))i.push(o);else{let a=Jh.get(o);if(a)i.push(...a);else if(!NE.has(o))throw BE(o)}}}return i.length&&r.push(e(i)),r}function CI(t){return t.filter(e=>e!=RE)}function xI(t,e){let n=Zh,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const UE=new Uint8Array(32);UE.fill(0);function ny(t){return ee(t.length!==0,"invalid ENS name; empty component","comp",t),t}function $E(t){const e=pi(kI(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(ny(e.slice(r,i))),r=i+1);return ee(r<e.length,"invalid ENS name; empty component","name",t),n.push(ny(e.slice(r))),n}function kI(t){try{if(t.length===0)throw new Error("empty label");return vI(t)}catch(e){ee(!1,`invalid ENS name (${e.message})`,"name",t)}}function Xh(t){ee(typeof t=="string","invalid ENS name; not a string","name",t),ee(t.length,"invalid ENS name (empty label)","name",t);let e=UE;const n=$E(t);for(;n.length;)e=xt(bt([e,xt(n.pop())]));return Se(e)}function TI(t,e){const n=e;return ee(n<=255,"DNS encoded label cannot exceed 255","length",n),Se(bt($E(t).map(r=>{ee(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const FE=new Uint8Array(32);FE.fill(0);const PI=BigInt(-1),HE=BigInt(0),KE=BigInt(1),II=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function RI(t){const e=Fe(t),n=e.length%32;return n?bt([e,FE.slice(n)]):Se(e)}const OI=us(KE,32),NI=us(HE,32),ry={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ef=["name","version","chainId","verifyingContract","salt"];function iy(t){return function(e){return ee(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const MI={name:iy("name"),version:iy("version"),chainId:function(t){const e=ke(t,"domain.chainId");return ee(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):dr(e)},verifyingContract:function(t){try{return Ye(t).toLowerCase()}catch{}ee(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Fe(t,"domain.salt");return ee(e.length===32,'invalid domain value "salt"',"domain.salt",t),Se(e)}};function Af(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);ee(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Ns(II,n?r-1:r),s=n?(i+KE)*PI:HE;return function(o){const a=ke(o,"value");return ee(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),us(n?P1(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return ee(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=Fe(r);return ee(i.length===n,`invalid length for ${t}`,"value",r),RI(r)}}}switch(t){case"address":return function(e){return wi(Ye(e),32)};case"bool":return function(e){return e?OI:NI};case"bytes":return function(e){return xt(e)};case"string":return function(e){return zs(e)}}return null}function sy(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function ll(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class On{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(c=>{s[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:f}=ll(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(f||"")}}),n.set(c,new Set),r.set(c,[]),i.set(c,new Set)}),this.#e=JSON.stringify(s);for(const c in s){const l=new Set;for(const u of s[c]){ee(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=ll(u.type).base;ee(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!Af(d)&&(ee(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);ee(o.length!==0,"missing primary type","types",e),ee(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Re(this,{primaryType:o[0]});function a(c,l){ee(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)i.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of i){const u=Array.from(l);u.sort(),this.#t.set(c,sy(c,s[c])+u.map(d=>sy(d,s[d])).join(""))}}getEncoder(e){let n=this.#n.get(e);return n||(n=this.#r(e),this.#n.set(e,n)),n}#r(e){{const i=Af(e);if(i)return i}const n=ll(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{ee(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return this.#t.has(i)&&(a=a.map(xt)),xt(bt(a))}}const r=this.types[e];if(r){const i=zs(this.#t.get(e));return s=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(s[a]);return this.#t.has(c)?xt(l):l});return o.unshift(i),bt(o)}}ee(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const n=this.#t.get(e);return ee(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return xt(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(Af(e))return r(e,n);const i=ll(e).array;if(i)return ee(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});ee(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new On(e)}static getPrimaryType(e){return On.from(e).primaryType}static hashStruct(e,n,r){return On.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=ry[r];ee(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>Ef.indexOf(r.name)-Ef.indexOf(i.name)),On.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return bt(["0x1901",On.hashDomain(e),On.from(n).hash(r)])}static hash(e,n,r){return xt(On.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!dt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=On.from(n);o.visit(r,(a,c)=>(a==="address"&&!dt(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:r}}static getPayload(e,n,r){On.hashDomain(e);const i={},s=[];Ef.forEach(c=>{const l=e[c];l!=null&&(i[c]=MI[c](l),s.push({name:c,type:ry[c]}))});const o=On.from(n);n=o.types;const a=Object.assign({},n);return ee(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Se(Fe(l));if(c.match(/^u?int/))return ke(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return ee(typeof l=="string","invalid string","value",l),l}ee(!1,"unsupported type","type",c)})}}}function gn(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const LI="external public payable override",BI=gn(LI.split(" ")),jE="constant external internal payable private public pure view override",DI=gn(jE.split(" ")),VE="constructor error event fallback function receive struct",zE=gn(VE.split(" ")),GE="calldata memory storage payable indexed",UI=gn(GE.split(" ")),$I="tuple returns",FI=[VE,GE,$I,jE].join(" "),HI=gn(FI.split(" ")),KI={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},jI=new RegExp("^(\\s*)"),VI=new RegExp("^([0-9]+)"),zI=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),qE=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),WE=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class rr{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new rr(this.#t)}reset(){this.#e=0}#n(e=0,n=0){return new rr(this.#t.slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;this.#e<e.match-1;){const r=this.peek().linkNext;n.push(this.#n(this.#e+1,r)),this.#e=r}return this.#e=e.match+1,n}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let n=this.#e;n<this.#t.length;n++){const r=this.#t[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function ys(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(jI);a&&(s+=a[1].length,o=t.substring(s));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let l=KI[o[0]]||"";if(l){if(c.type=l,c.text=o[0],s++,l==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Ue(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(zI),a){if(c.text=a[1],s+=c.text.length,HI.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(WE)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(VI),a){c.text=a[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new rr(e.map(o=>Object.freeze(o)))}function oy(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function Ld(t,e){if(e.peekKeyword(zE)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Ei(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function QE(t){let e=Ei(t,DI);return oy(e,gn("constant payable nonpayable".split(" "))),oy(e,gn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function gi(t,e){return t.popParams().map(n=>lt.from(n,e))}function JE(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return ke(t.pop().text);throw new Error("invalid gas")}return null}function Gs(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const GI=new RegExp(/^(.*)\[([0-9]*)\]$/);function ay(t){const e=t.match(WE);if(ee(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);ee(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);ee(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const pt={},kn=Symbol.for("_ethers_internal"),cy="_ParamTypeInternal",ly="_ErrorInternal",uy="_EventInternal",dy="_ConstructorInternal",fy="_FallbackInternal",hy="_FunctionInternal",py="_StructInternal";class lt{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,n,r,i,s,o,a,c){if(Kc(e,pt,"ParamType"),Object.defineProperty(this,kn,{value:cy}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Re(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}#e(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{o.#e(e,c,r,u=>{a[l]=u})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{o[l].#e(e,c,r,u=>{a[l]=u})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)}async walkAsync(e,n){const r=[],i=[e];return this.#e(r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(lt.isParamType(e))return e;if(typeof e=="string")try{return lt.from(ys(e),n)}catch{ee(!1,"invalid param type","obj",e)}else if(e instanceof rr){let a="",c="",l=null;Ei(e,gn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(p=>lt.from(p)),a=`tuple(${l.map(p=>p.format()).join(",")})`):(a=ay(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const p=e.pop();u=new lt(pt,"",a,c,null,l,d,u),d=p.value,a+=p.text,c="array",l=null}let f=null;if(Ei(e,UI).has("indexed")){if(!n)throw new Error("");f=!0}const g=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new lt(pt,g,a,c,f,l,d,u)}const r=e.name;ee(!r||typeof r=="string"&&r.match(qE),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(ee(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(GI);if(o){const a=parseInt(o[2]||"-1"),c=lt.from({type:o[1],components:e.components});return new lt(pt,r||"",s,"array",i,null,a,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(l=>lt.from(l)):null;return new lt(pt,r||"",s,"tuple",i,a,null,null)}return s=ay(e.type),new lt(pt,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[kn]===cy}}class qs{type;inputs;constructor(e,n,r){Kc(e,pt,"Fragment"),r=Object.freeze(r.slice()),Re(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{qs.from(JSON.parse(e))}catch{}return qs.from(ys(e))}if(e instanceof rr)switch(e.peekKeyword(zE)){case"constructor":return li.from(e);case"error":return Sn.from(e);case"event":return Ir.from(e);case"fallback":case"receive":return Xr.from(e);case"function":return Rr.from(e);case"struct":return js.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return li.from(e);case"error":return Sn.from(e);case"event":return Ir.from(e);case"fallback":case"receive":return Xr.from(e);case"function":return Rr.from(e);case"struct":return js.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ee(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return li.isFragment(e)}static isError(e){return Sn.isFragment(e)}static isEvent(e){return Ir.isFragment(e)}static isFunction(e){return Rr.isFragment(e)}static isStruct(e){return js.isFragment(e)}}class Bd extends qs{name;constructor(e,n,r,i){super(e,n,i),ee(typeof r=="string"&&r.match(qE),"invalid identifier","name",r),i=Object.freeze(i.slice()),Re(this,{name:r})}}function vc(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Sn extends Bd{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,kn,{value:ly})}get selector(){return zs(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+vc(e,this.inputs)),n.join(" ")}static from(e){if(Sn.isFragment(e))return e;if(typeof e=="string")return Sn.from(ys(e));if(e instanceof rr){const n=Ld("error",e),r=gi(e);return Gs(e),new Sn(pt,n,r)}return new Sn(pt,e.name,e.inputs?e.inputs.map(lt.from):[])}static isFragment(e){return e&&e[kn]===ly}}class Ir extends Bd{anonymous;constructor(e,n,r,i){super(e,"event",n,r),Object.defineProperty(this,kn,{value:uy}),Re(this,{anonymous:i})}get topicHash(){return zs(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+vc(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>lt.from(i)),new Ir(pt,e,n,!1).topicHash}static from(e){if(Ir.isFragment(e))return e;if(typeof e=="string")try{return Ir.from(ys(e))}catch{ee(!1,"invalid event fragment","obj",e)}else if(e instanceof rr){const n=Ld("event",e),r=gi(e,!0),i=!!Ei(e,gn(["anonymous"])).has("anonymous");return Gs(e),new Ir(pt,n,r,i)}return new Ir(pt,e.name,e.inputs?e.inputs.map(n=>lt.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[kn]===uy}}class li extends qs{payable;gas;constructor(e,n,r,i,s){super(e,n,r),Object.defineProperty(this,kn,{value:dy}),Re(this,{payable:i,gas:s})}format(e){if(me(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[`constructor${vc(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(li.isFragment(e))return e;if(typeof e=="string")try{return li.from(ys(e))}catch{ee(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof rr){Ei(e,gn(["constructor"]));const n=gi(e),r=!!Ei(e,BI).has("payable"),i=JE(e);return Gs(e),new li(pt,"constructor",n,r,i)}return new li(pt,"constructor",e.inputs?e.inputs.map(lt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[kn]===dy}}class Xr extends qs{payable;constructor(e,n,r){super(e,"fallback",n),Object.defineProperty(this,kn,{value:fy}),Re(this,{payable:r})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:r})}return`${n}()${this.payable?" payable":""}`}static from(e){if(Xr.isFragment(e))return e;if(typeof e=="string")try{return Xr.from(ys(e))}catch{ee(!1,"invalid fallback fragment","obj",e)}else if(e instanceof rr){const n=e.toString(),r=e.peekKeyword(gn(["fallback","receive"]));if(ee(r,"type must be fallback or receive","obj",n),e.popKeyword(gn(["fallback","receive"]))==="receive"){const a=gi(e);return ee(a.length===0,"receive cannot have arguments","obj.inputs",a),Ei(e,gn(["payable"])),Gs(e),new Xr(pt,[],!0)}let s=gi(e);s.length?ee(s.length===1&&s[0].type==="bytes","invalid fallback inputs","obj.inputs",s.map(a=>a.format("minimal")).join(", ")):s=[lt.from("bytes")];const o=QE(e);if(ee(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),Ei(e,gn(["returns"])).has("returns")){const a=gi(e);ee(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return Gs(e),new Xr(pt,s,o==="payable")}if(e.type==="receive")return new Xr(pt,[],!0);if(e.type==="fallback"){const n=[lt.from("bytes")],r=e.stateMutability==="payable";return new Xr(pt,n,r)}ee(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[kn]===fy}}class Rr extends Bd{constant;outputs;stateMutability;payable;gas;constructor(e,n,r,i,s,o){super(e,"function",n,i),Object.defineProperty(this,kn,{value:hy}),s=Object.freeze(s.slice()),Re(this,{constant:r==="view"||r==="pure",gas:o,outputs:s,payable:r==="payable",stateMutability:r})}get selector(){return zs(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+vc(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(vc(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>lt.from(i)),new Rr(pt,e,"view",n,[],null).selector}static from(e){if(Rr.isFragment(e))return e;if(typeof e=="string")try{return Rr.from(ys(e))}catch{ee(!1,"invalid function fragment","obj",e)}else if(e instanceof rr){const r=Ld("function",e),i=gi(e),s=QE(e);let o=[];Ei(e,gn(["returns"])).has("returns")&&(o=gi(e));const a=JE(e);return Gs(e),new Rr(pt,r,s,i,o,a)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new Rr(pt,e.name,n,e.inputs?e.inputs.map(lt.from):[],e.outputs?e.outputs.map(lt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[kn]===hy}}class js extends Bd{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,kn,{value:py})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return js.from(ys(e))}catch{ee(!1,"invalid struct fragment","obj",e)}else if(e instanceof rr){const n=Ld("struct",e),r=gi(e);return Gs(e),new js(pt,n,r)}return new js(pt,e.name,e.inputs?e.inputs.map(lt.from):[])}static isFragment(e){return e&&e[kn]===py}}const br=new Map;br.set(0,"GENERIC_PANIC");br.set(1,"ASSERT_FALSE");br.set(17,"OVERFLOW");br.set(18,"DIVIDE_BY_ZERO");br.set(33,"ENUM_RANGE_ERROR");br.set(34,"BAD_STORAGE_DATA");br.set(49,"STACK_UNDERFLOW");br.set(50,"ARRAY_RANGE_ERROR");br.set(65,"OUT_OF_MEMORY");br.set(81,"UNINITIALIZED_FUNCTION_CALL");const qI=new RegExp(/^bytes([0-9]*)$/),WI=new RegExp(/^(u?int)([0-9]*)$/);let _f=null,gy=1024;function QI(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const l=Fe(n);if(n=Se(n),l.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Se(l.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Se(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${br.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?Ye(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Ye(e.from)),ft(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:c,invocation:o,revert:a})}class oa{#e(e){if(e.isArray())return new hP(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new cl(e.components.map(r=>this.#e(r)),e.name);switch(e.baseType){case"address":return new dP(e.name);case"bool":return new pP(e.name);case"string":return new _P(e.name);case"bytes":return new gP(e.name);case"":return new vP(e.name)}let n=e.type.match(WI);if(n){let r=parseInt(n[2]||"256");return ee(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new AP(r/8,n[1]==="int",e.name)}if(n=e.type.match(qI),n){let r=parseInt(n[1]);return ee(r!==0&&r<=32,"invalid bytes length","param",e),new mP(r,e.name)}ee(!1,"invalid type","type",e.type)}getDefaultValue(e){const n=e.map(i=>this.#e(lt.from(i)));return new cl(n,"_").defaultValue()}encode(e,n){x1(n.length,e.length,"types/values length mismatch");const r=e.map(o=>this.#e(lt.from(o))),i=new cl(r,"_"),s=new Kh;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>this.#e(lt.from(o)));return new cl(i,"_").decode(new dg(n,r,gy))}static _setDefaultMaxInflation(e){ee(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),gy=e}static defaultAbiCoder(){return _f==null&&(_f=new oa),_f}static getBuiltinCallException(e,n,r){return QI(e,n,r,oa.defaultAbiCoder())}}class JI{fragment;name;signature;topic;args;constructor(e,n,r){const i=e.name,s=e.format();Re(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class YI{fragment;name;args;signature;selector;value;constructor(e,n,r,i){const s=e.name,o=e.format();Re(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class ZI{fragment;name;args;signature;selector;constructor(e,n,r){const i=e.name,s=e.format();Re(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class my{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Re(this,{hash:e,_isIndexed:!0})}}const yy={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},vy={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&yy[t.toString()]&&(e=yy[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class Os{fragments;deploy;fallback;receive;#e;#t;#n;#r;constructor(e){let n=[];typeof e=="string"?n=JSON.parse(e):n=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const r=[];for(const o of n)try{r.push(qs.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Re(this,{fragments:Object.freeze(r)});let i=null,s=!1;this.#r=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Re(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(ee(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":c=this.#n;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Re(this,{deploy:li.from("constructor()")}),Re(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return oa.defaultAbiCoder()}#i(e,n,r){if(dt(e)){const s=e.toLowerCase();for(const o of this.#n.values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#n)o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;wt.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=s.length-1;l>=0;l--){const u=s[l].inputs.length;u!==a&&(!c||u!==a-1)&&s.splice(l,1)}for(let l=s.length-1;l>=0;l--){const u=s[l].inputs;for(let d=0;d<n.length;d++)if(wt.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;s.splice(l,1);break}if(n[d].type!==u[d].baseType){s.splice(l,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ee(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#n.get(Rr.from(e).format());return i||null}getFunctionName(e){const n=this.#i(e,null,!1);return ee(n,"no matching function","key",e),n.name}hasFunction(e){return!!this.#i(e,null,!1)}getFunction(e,n){return this.#i(e,n||null,!0)}forEachFunction(e){const n=Array.from(this.#n.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#n.get(i),r)}}#o(e,n,r){if(dt(e)){const s=e.toLowerCase();for(const o of this.#t.values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let c=0;c<n.length;c++)if(wt.isTyped(n[c])&&n[c].type!==a[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ee(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#t.get(Ir.from(e).format());return i||null}getEventName(e){const n=this.#o(e,null,!1);return ee(n,"no matching event","key",e),n.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,n){return this.#o(e,n||null,!0)}forEachEvent(e){const n=Array.from(this.#t.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#t.get(i),r)}}getError(e,n){if(dt(e)){const i=e.toLowerCase();if(vy[i])return Sn.from(vy[i].signature);for(const s of this.#e.values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of this.#e)s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Sn.from("error Error(string)"):e==="Panic"?Sn.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");ee(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Sn.from(e).format(),e==="Error(string)")return Sn.from("error Error(string)");if(e==="Panic(uint256)")return Sn.from("error Panic(uint256)");const r=this.#e.get(e);return r||null}forEachError(e){const n=Array.from(this.#e.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#e.get(i),r)}}_decodeParams(e,n){return this.#r.decode(e,n)}_encodeParams(e,n){return this.#r.encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ee(r,"unknown error","fragment",e),e=r}return ee(mt(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,mt(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ee(r,"unknown error","fragment",e),e=r}return bt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return ee(mt(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,mt(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return bt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);ee(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=dn(n);if(i.length%32===0)try{return this.#r.decode(e.outputs,i)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:Se(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Fe(e,"data"),i=oa.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=Se(r.slice(0,4)),c=this.getError(a);if(c)try{const l=this.#r.decode(c.inputs,r.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return Se(this.#r.encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);ee(s,"unknown event","eventFragment",e),e=s}me(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?zs(o):s.type==="bytes"?xt(Se(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=us(o):s.type.match(/^bytes/)?o=g3(o,32):s.type==="address"&&this.#r.encode(["address"],[o]),wi(Se(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){ee(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?ee(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(c=>i(a,c))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);ee(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),ee(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(zs(c));else if(o.type==="bytes")r.push(xt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this.#r.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this.#r.encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const h=this.getEvent(e);ee(h,"unknown event","eventFragment",e),e=h}if(r!=null&&!e.anonymous){const h=e.topicHash;ee(dt(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(lt.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?this.#r.decode(i,bt(r)):null,c=this.#r.decode(s,n,!0),l=[],u=[];let d=0,f=0;return e.inputs.forEach((h,g)=>{let p=null;if(h.indexed)if(a==null)p=new my(null);else if(o[g])p=new my(a[f++]);else try{p=a[f++]}catch(y){p=y}else try{p=c[d++]}catch(y){p=y}l.push(p),u.push(h.name||null)}),ci.fromItems(l,u)}parseTransaction(e){const n=Fe(e.data,"tx.data"),r=ke(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Se(n.slice(0,4)));if(!i)return null;const s=this.#r.decode(i.inputs,n.slice(4));return new YI(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new JI(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Se(e),r=this.getError(mt(n,0,4));if(!r)return null;const i=this.#r.decode(r.inputs,mt(n,4));return new ZI(r,r.selector,i)}static from(e){return e instanceof Os?e:typeof e=="string"?new Os(JSON.parse(e)):typeof e.formatJson=="function"?new Os(e.formatJson()):typeof e.format=="function"?new Os(e.format("json")):new Os(e)}}const YE=BigInt(0);function Ko(t){return t??null}function Et(t){return t==null?null:t.toString()}class wy{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,n,r){Re(this,{gasPrice:Ko(e),maxFeePerGas:Ko(n),maxPriorityFeePerGas:Ko(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Et(e),maxFeePerGas:Et(n),maxPriorityFeePerGas:Et(r)}}}function Nu(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Se(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=ke(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=Ue(t[i],`request.${i}`));return t.accessList&&(e.accessList=Xs(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>ug(i)?Se(i):Object.assign({},i))),e}class XI{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,n){this.#e=e.transactions.map(r=>typeof r!="string"?new Gc(r,n):r),Re(this,{provider:n,hash:Ko(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ko(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ko(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:f,stateRoot:h,receiptsRoot:g,timestamp:p,transactions:y}=this;return{_type:"Block",baseFeePerGas:Et(e),difficulty:Et(n),extraData:r,gasLimit:Et(i),gasUsed:Et(s),blobGasUsed:Et(this.blobGasUsed),excessBlobGas:Et(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:p,parentBeaconBlockRoot:f,stateRoot:h,receiptsRoot:g,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=this.#e[e];else{const r=e.toLowerCase();for(const i of this.#e)if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;ee(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return eR(this)}}class zc{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,n){this.provider=n;const r=Object.freeze(e.topics.slice());Re(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return tR(this)}}class ZE{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,n){this.#e=Object.freeze(e.logs.map(i=>new zc(i,n)));let r=YE;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Re(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Et(this.cumulativeGasUsed),from:n,gasPrice:Et(this.gasPrice),blobGasUsed:Et(this.blobGasUsed),blobGasPrice:Et(this.blobGasPrice),gasUsed:Et(this.gasUsed),hash:i,index:s,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return e2(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),XE(this,e)}}class Gc{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,n){this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:f}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:f,chainId:Et(this.chainId),data:l,from:a,gasLimit:Et(this.gasLimit),gasPrice:Et(this.gasPrice),hash:i,maxFeePerGas:Et(this.maxFeePerGas),maxPriorityFeePerGas:Et(this.maxPriorityFeePerGas),maxFeePerBlobGas:Et(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:s,value:Et(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await an({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=this.#e,o=-1,a=s===-1;const c=async()=>{if(a)return null;const{blockNumber:f,nonce:h}=await an({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=f;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=s-3,o<this.#e&&(o=this.#e));o<=f;){if(a)return null;const p=await this.provider.getBlock(o,!0);if(p==null)return;for(const y of p)if(y===this.hash)return;for(let y=0;y<p.length;y++){const m=await p.getTransaction(y);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(m.hash);if(b==null||f-b.blockNumber+1<r)return;let w="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?w="repriced":m.data==="0x"&&m.from===m.to&&m.value===YE&&(w="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:w==="replaced"||w==="cancelled",reason:w,replacement:m.replaceableTransaction(s),hash:m.hash,receipt:b})}}o++}},l=f=>{if(f==null||f.status!==0)return f;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:f.to,from:f.from,data:""},receipt:f})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((f,h)=>{const g=[],p=()=>{g.forEach(m=>m())};if(g.push(()=>{a=!0}),i>0){const m=setTimeout(()=>{p(),h(ft("wait for transaction timeout","TIMEOUT"))},i);g.push(()=>{clearTimeout(m)})}const y=async m=>{if(await m.confirmations()>=r){p();try{f(l(m))}catch(b){h(b)}}};if(g.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),s>=0){const m=async()=>{try{await c()}catch(b){if(jt(b,"TRANSACTION_REPLACED")){p(),h(b);return}}a||this.provider.once("block",m)};g.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),e2(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),XE(this,e)}replaceableTransaction(e){ee(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new Gc(this,this.provider);return n.#e=e,n}}function eR(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function XE(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function e2(t){return{orphan:"drop-transaction",tx:t}}function tR(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Sg extends zc{interface;fragment;args;constructor(e,n,r){super(e,e.provider);const i=n.decodeEventLog(r,e.data,e.topics);Re(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class t2 extends zc{error;constructor(e,n){super(e,e.provider),Re(this,{error:n})}}class nR extends ZE{#e;constructor(e,n,r){super(r,n),this.#e=e}get logs(){return super.logs.map(e=>{const n=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(n)try{return new Sg(e,this.#e,n)}catch(r){return new t2(e,r)}return e})}}class Cg extends Gc{#e;constructor(e,n,r){super(r,n),this.#e=e}async wait(e,n){const r=await super.wait(e,n);return r==null?null:new nR(this.#e,this.provider,r)}}class n2 extends I1{log;constructor(e,n,r,i){super(e,n,r),Re(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class rR extends n2{constructor(e,n,r,i,s){super(e,n,r,new Sg(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Re(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const by=BigInt(0);function r2(t){return t&&typeof t.call=="function"}function i2(t){return t&&typeof t.estimateGas=="function"}function Dd(t){return t&&typeof t.resolveName=="function"}function s2(t){return t&&typeof t.sendTransaction=="function"}function o2(t){if(t!=null){if(Dd(t))return t;if(t.provider)return t.provider}}class iR{#e;fragment;constructor(e,n,r){if(Re(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Ws(e.runner,"resolveName"),s=Dd(i)?i:null;this.#e=(async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(f=>pn(f,s))):pn(d,s):d)));return e.interface.encodeFilterTopics(n,o)})()}getTopicFilter(){return this.#e}}function Ws(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Bs(t){return t==null?null:t.provider||null}async function a2(t,e){const n=wt.dereference(t,"overrides");ee(typeof n=="object","invalid overrides parameter","overrides",t);const r=Nu(n);return ee(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ee(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function sR(t,e,n){const r=Ws(t,"resolveName"),i=Dd(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,c)=>(c=wt.dereference(c,a),a==="address"?pn(c,i):c))))}function oR(t){const e=async function(o){const a=await a2(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await pn(a.from,o2(t.runner)));const c=t.interface,l=ke(a.value||by,"overrides.value")===by,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&ee(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ee(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return ee(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),ee(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Ws(t.runner,"call");me(r2(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw lg(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;me(s2(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Bs(t.runner);return new Cg(t.interface,l,c)},i=async function(o){const a=Ws(t.runner,"estimateGas");return me(i2(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Re(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function aR(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return me(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await a2(l.pop()),d.from&&(d.from=await pn(d.from,o2(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const f=await sR(t.runner,u.inputs,l);return Object.assign({},d,await an({to:t.getAddress(),data:t.interface.encodeFunctionData(u,f)}))},i=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},s=async function(...l){const u=t.runner;me(s2(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),f=Bs(t.runner);return new Cg(t.interface,f,d)},o=async function(...l){const u=Ws(t.runner,"estimateGas");return me(i2(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Ws(t.runner,"call");me(r2(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let f="0x";try{f=await u.call(d)}catch(g){throw lg(g)&&g.data?t.interface.makeError(g.data,d):g}const h=n(...l);return t.interface.decodeFunctionResult(h,f)},c=async(...l)=>n(...l).constant?await i(...l):await s(...l);return Re(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return me(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function cR(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new iR(t,n(...i),i)};return Re(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const Mu=Symbol.for("_ethersInternal_contract"),c2=new WeakMap;function lR(t,e){c2.set(t[Mu],e)}function Nn(t){return c2.get(t[Mu])}function uR(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function xg(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(dt(o,32))return o;const a=t.interface.getEvent(o);return ee(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?dt(e,32)?n=[e]:(r=t.interface.getEvent(e),ee(r,"unknown fragment","event",e),n=[r.topicHash]):uR(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):ee(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Ma(t,e){const{subs:n}=Nn(t);return n.get((await xg(t,e)).tag)||null}async function Ey(t,e,n){const r=Bs(t.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await xg(t,n),{addr:a,subs:c}=Nn(t);let l=c.get(s);if(!l){const d={address:a||t,topics:o},f=y=>{let m=i;if(m==null)try{m=t.interface.getEvent(y.topics[0])}catch{}if(m){const b=m,w=i?t.interface.decodeEventLog(i,y.data,y.topics):[];tp(t,n,w,P=>new rR(t,P,n,b,y))}else tp(t,n,[],b=>new n2(t,b,n,y))};let h=[];l={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(d,f))},stop:async()=>{if(h.length==0)return;let y=h;h=[],await Promise.all(y),r.off(d,f)}},c.set(s,l)}return l}let ep=Promise.resolve();async function dR(t,e,n,r){await ep;const i=await Ma(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Nn(t).subs.delete(i.tag)),s>0}async function tp(t,e,n,r){try{await ep}catch{}const i=dR(t,e,n,r);return ep=i,await i}const ul=["then"];class Ja{target;interface;runner;filters;[Mu];fallback;constructor(e,n,r,i){ee(typeof e=="string"||pE(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=Os.from(n);Re(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,Mu,{value:{}});let o,a=null,c=null;if(i){const d=Bs(r);c=new Cg(this.interface,d,i)}let l=new Map;if(typeof e=="string")if(dt(e))a=e,o=Promise.resolve(e);else{const d=Ws(r,"resolveName");if(!Dd(d))throw ft("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(f=>{if(f==null)throw ft("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Nn(this).addr=f,f})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Nn(this).addr=d,d});lR(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,f,h)=>{if(typeof f=="symbol"||ul.indexOf(f)>=0)return Reflect.get(d,f,h);try{return this.getEvent(f)}catch(g){if(!jt(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,f)=>ul.indexOf(f)>=0?Reflect.has(d,f):Reflect.has(d,f)||this.interface.hasEvent(String(f))});return Re(this,{filters:u}),Re(this,{fallback:s.receive||s.fallback?oR(this):null}),new Proxy(this,{get:(d,f,h)=>{if(typeof f=="symbol"||f in d||ul.indexOf(f)>=0)return Reflect.get(d,f,h);try{return d.getFunction(f)}catch(g){if(!jt(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,f)=>typeof f=="symbol"||f in d||ul.indexOf(f)>=0?Reflect.has(d,f):d.interface.hasFunction(f)})}connect(e){return new Ja(this.target,this.interface,e)}attach(e){return new Ja(e,this.interface,this.runner)}async getAddress(){return await Nn(this).addrPromise}async getDeployedCode(){const e=Bs(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Bs(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Nn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),aR(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),cR(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Nn(this),o=i||await s,{fragment:a,topics:c}=await xg(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Bs(this.runner);return me(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let f=a;if(f==null)try{f=this.interface.getEvent(d.topics[0])}catch{}if(f)try{return new Sg(d,this.interface,f)}catch(h){return new t2(d,h)}return new zc(d,u)})}async on(e,n){const r=await Ey(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await Ey(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await tp(this,e,n,null)}async listenerCount(e){if(e){const i=await Ma(this,e);return i?i.listeners.length:0}const{subs:n}=Nn(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Ma(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Nn(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Ma(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Nn(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Ma(this,e);if(!n)return this;n.stop(),Nn(this).subs.delete(n.tag)}else{const{subs:n}=Nn(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Ja{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}}function fR(){return Ja}class pr extends fR(){}function Sf(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):ee(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class hR{name;constructor(e){Re(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const l2=new RegExp("^(ipfs)://(.*)$","i"),Ay=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),l2,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class jo{provider;address;name;#e;#t;constructor(e,n,r){Re(this,{provider:e,address:n,name:r}),this.#e=null,this.#t=new pr(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(jt(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,n){n=(n||[]).slice();const r=this.#t.interface;n.unshift(Xh(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),me(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[TI(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await this.#t[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!jt(s,"CALL_EXCEPTION"))throw s}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await this.#n("addr(bytes32)");return s==null||s===hc?null:s}catch(s){if(jt(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await this.#n("addr(bytes32,uint)",[s]);if(dt(o,20))return Ye(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof hR&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await this.#n("addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await this.#n("text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${y3("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<Ay.length;r++){const i=n.match(Ay[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=Sf(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const l=c[1],u=new pr(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const p=await u.ownerOf(l);if(a!==p)return e.push({type:"!owner",value:p}),{url:null,linkage:e};e.push({type:"owner",value:p})}else if(s==="erc1155"){const p=await u.balanceOf(a,l);if(!p)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:p.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",us(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=Sf(d)),e.push({type:"metadata-url",value:d});let f={};const h=await new bi(d).send();h.assertOk();try{f=h.bodyJson}catch{try{e.push({type:"!metadata",value:h.bodyText})}catch{const m=h.body;return m&&e.push({type:"!metadata",value:Se(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!f)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(f)});let g=f.image;if(typeof g!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(l2)==null)return e.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:g}),g=Sf(g)}return e.push({type:"url",value:g}),{linkage:e,url:g}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async#r(e,n){const r=await jo.getEnsAddress(e);try{const s=await new pr(r,["function resolver(bytes32) view returns (address)"],e).resolver(Xh(n),{enableCcipRead:!0});return s===hc?null:s}catch(i){throw i}return null}static async fromName(e,n){let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await jo.#r(e,r);if(i!=null){const s=new jo(e,i,n);return r!==n&&!await s.supportsWildcard()?null:s}r=r.split(".").slice(1).join(".")}}}const _y=BigInt(0);function He(t,e){return(function(n){return n==null?e:t(n)})}function wc(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function qc(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function pR(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}ee(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function aa(t){return ee(dt(t,!0),"invalid data","value",t),t}function Kt(t){return ee(dt(t,32),"invalid hash","value",t),t}const gR=qc({address:Ye,blockHash:Kt,blockNumber:Ue,data:aa,index:Ue,removed:He(pR,!1),topics:wc(Kt),transactionHash:Kt,transactionIndex:Ue},{index:["logIndex"]});function mR(t){return gR(t)}const yR=qc({hash:He(Kt),parentHash:Kt,parentBeaconBlockRoot:He(Kt,null),number:Ue,timestamp:Ue,nonce:He(aa),difficulty:ke,gasLimit:ke,gasUsed:ke,stateRoot:He(Kt,null),receiptsRoot:He(Kt,null),blobGasUsed:He(ke,null),excessBlobGas:He(ke,null),miner:He(Ye),prevRandao:He(Kt,null),extraData:aa,baseFeePerGas:He(ke)},{prevRandao:["mixHash"]});function vR(t){const e=yR(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:u2(n)),e}const wR=qc({transactionIndex:Ue,blockNumber:Ue,transactionHash:Kt,address:Ye,topics:wc(Kt),data:aa,index:Ue,blockHash:Kt},{index:["logIndex"]});function bR(t){return wR(t)}const ER=qc({to:He(Ye,null),from:He(Ye,null),contractAddress:He(Ye,null),index:Ue,root:He(Se),gasUsed:ke,blobGasUsed:He(ke,null),logsBloom:He(aa),blockHash:Kt,hash:Kt,logs:wc(bR),blockNumber:Ue,cumulativeGasUsed:ke,effectiveGasPrice:He(ke),blobGasPrice:He(ke,null),status:He(Ue),type:He(Ue,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function AR(t){return ER(t)}function u2(t){t.to&&ke(t.to)===_y&&(t.to="0x0000000000000000000000000000000000000000");const e=qc({hash:Kt,index:He(Ue,void 0),type:n=>n==="0x"||n==null?0:Ue(n),accessList:He(Xs,null),blobVersionedHashes:He(wc(Kt,!0),null),authorizationList:He(wc(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:Ye(n.address),chainId:ke(n.chainId),nonce:ke(n.nonce),signature:yt.from(r)}},!1),null),blockHash:He(Kt,null),blockNumber:He(Ue,null),transactionIndex:He(Ue,null),from:Ye,gasPrice:He(ke),maxPriorityFeePerGas:He(ke),maxFeePerGas:He(ke),maxFeePerBlobGas:He(ke,null),gasLimit:ke,to:He(Ye,null),value:ke,nonce:Ue,data:aa,creates:He(Ye,null),chainId:He(ke,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=uP(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=yt.from(t.signature):e.signature=yt.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&ke(e.blockHash)===_y&&(e.blockHash=null),e}const _R="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Wc{name;constructor(e){Re(this,{name:e})}clone(){return new Wc(this.name)}}class Ud extends Wc{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,n){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function i(s,o){let a=(n||{})[s];a==null&&(a=o),ee(typeof a=="number",`invalud value for ${s}`,"costs",n),r[s]=a}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Re(this,r)}clone(){return new Ud(this.effectiveBlock,this)}}class $d extends Wc{address;targetNetwork;constructor(e,n){super("org.ethers.plugins.network.Ens"),Re(this,{address:e||_R,targetNetwork:n??1})}clone(){return new $d(this.address,this.targetNetwork)}}class SR extends Wc{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=n}clone(){return this}}const Cf=new Map;class Hn{#e;#t;#n;constructor(e,n){this.#e=e,this.#t=ke(n),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=ke(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===ke(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===ke(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===ke(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Hn(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new Ud;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=Xs(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(CR(),e==null)return Hn.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=Cf.get(e);if(n)return n();if(typeof e=="bigint")return new Hn("unknown",e);ee(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ee(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Hn(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new $d(e.ensAddress,e.ensNetwork)),n}ee(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=Cf.get(e);r&&ee(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Cf.set(e,n)}}function Sy(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function Cy(t){return new SR(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Sy(a.maxFee,9),maxPriorityFeePerGas:Sy(a.maxPriorityFee,9)}}catch(s){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let xy=!1;function CR(){if(xy)return;xy=!0;function t(e,n,r){const i=function(){const s=new Hn(e,n);return r.ensNetwork!=null&&s.attachPlugin(new $d(null,r.ensNetwork)),s.attachPlugin(new Ud),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Hn.register(e,i),Hn.register(n,i),r.altNames&&r.altNames.forEach(s=>{Hn.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[Cy("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Cy("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function np(t){return JSON.parse(JSON.stringify(t))}class xR{#e;#t;#n;#r;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#r=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#i(){try{const e=await this.#e.getBlockNumber();if(this.#r===-2){this.#r=e;return}if(e!==this.#r){for(let n=this.#r+1;n<=e;n++){if(this.#t==null)return;await this.#e.emit("block",n)}this.#r=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n),this.#i())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}class kg{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=n=>{this._poll(n,this.#e)}}async _poll(e,n){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class kR extends kg{#e;#t;constructor(e,n){super(e),this.#e=n,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,n){const r=await n.getBlock(this.#e);r!=null&&(this.#t===-2?this.#t=r.number:r.number>this.#t&&(n.emit(this.#e,r.number),this.#t=r.number))}}class TR extends kg{#e;constructor(e,n){super(e),this.#e=np(n)}async _poll(e,n){throw new Error("@TODO")}}class PR extends kg{#e;constructor(e,n){super(e),this.#e=n}async _poll(e,n){const r=await n.getTransactionReceipt(this.#e);r&&n.emit(this.#e,r)}}class Tg{#e;#t;#n;#r;#i;constructor(e,n){this.#e=e,this.#t=np(n),this.#n=this.#o.bind(this),this.#r=!1,this.#i=-2}async#o(e){if(this.#i===-2)return;const n=np(this.#t);n.fromBlock=this.#i+1,n.toBlock=e;const r=await this.#e.getLogs(n);if(r.length===0){this.#i<e-60&&(this.#i=e-60);return}for(const i of r)this.#e.emit(this.#t,i),this.#i=i.blockNumber}start(){this.#r||(this.#r=!0,this.#i===-2&&this.#e.getBlockNumber().then(e=>{this.#i=e}),this.#e.on("block",this.#n))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#i=-2)}resume(){this.start()}}const IR=BigInt(2),RR=10;function dl(t){return t&&typeof t.then=="function"}function Gl(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class d2{name;constructor(e){Re(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function OR(t){return JSON.parse(JSON.stringify(t))}function rp(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function xf(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(dt(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:Gl("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:Gl("orphan",n),filter:OR(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?rp(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{dt(a)?i.push(a):s.push((async()=>{i.push(await pn(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=rp(i.map(a=>a.toLowerCase()))}return{filter:r,tag:Gl("event",r),type:"event"}}ee(!1,"unknown ProviderEvent","event",t)}function kf(){return new Date().getTime()}const NR={cacheTimeout:250,pollingInterval:4e3};class MR{#e;#t;#n;#r;#i;#o;#s;#a;#d;#l;#p;#g;constructor(e,n){if(this.#g=Object.assign({},NR,n||{}),e==="any")this.#o=!0,this.#i=null;else if(e){const r=Hn.from(e);this.#o=!1,this.#i=Promise.resolve(r),setTimeout(()=>{this.emit("network",r,null)},0)}else this.#o=!1,this.#i=null;this.#a=-1,this.#s=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#r=!1,this.#d=1,this.#l=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#c(e){const n=this.#g.cacheTimeout;if(n<0)return await this._perform(e);const r=Gl(e.method,e);let i=this.#s.get(r);return i||(i=this._perform(e),this.#s.set(r,i),setTimeout(()=>{this.#s.get(r)===i&&this.#s.delete(r)},n)),await i}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",i).replace("{data}",s),u=new bi(l);c.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",f;try{f=await u.send()}catch(h){o.push(h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:h}});continue}try{const h=f.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:h}),h.data;h.message&&(d=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:h})}catch{}me(f.statusCode<400||f.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}me(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new XI(vR(e),this)}_wrapLog(e,n){return new zc(mR(e),this)}_wrapTransactionReceipt(e,n){return new ZE(AR(e),this)}_wrapTransactionResponse(e,n){return new Gc(u2(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ue(await this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return pn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(dt(e))return dt(e,32)?e:dr(e);if(typeof e=="bigint"&&(e=Ue(e,"blockTag")),typeof e=="number")return e>=0?dr(e):this.#a>=0?dr(this.#a+e):this.getBlockNumber().then(n=>dr(n+e));ee(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?rp(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const f={};return d&&(f.address=d),n.length&&(f.topics=n),l&&(f.fromBlock=l),u&&(f.toBlock=u),r&&(f.blockHash=r),f};let s=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)s.push(this._getAddress(c));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(c=>i(c[0],c[1],c[2])):i(s,o,a)}_getTransactionRequest(e){const n=Nu(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=pn(n[i],this);dl(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);dl(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(this.#i==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw this.#i===i&&(this.#i=null),s}})();return this.#i=i,(await i).clone()}const e=this.#i,[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(this.#o?(this.emit("network",r,n),this.#i===e&&(this.#i=Promise.resolve(r))):me(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await an({_block:this.#y("latest",!1),gasPrice:(async()=>{try{const u=await this.#c({method:"getGasPrice"});return ke(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await this.#c({method:"getPriorityFee"});return ke(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(i,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*IR+c),new wy(s,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new bi(r.url),s=await r.processFunc(n,this,i);return new wy(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return dl(n)&&(n=await n),ke(await this.#c({method:"estimateGas",transaction:n}),"%response")}async#u(e,n,r){me(r<RR,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=Nu(e);try{return Se(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&lg(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&mt(s.data,0,4)==="0x556f1830"){const o=s.data,a=await pn(i.to,this);let c;try{c=$R(mt(s.data,4))}catch(d){me(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}me(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(i,c.calldata,c.urls);me(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});const u={to:a,data:bt([c.selector,UR([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await this.#u(u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw s}}async#f(e){const{value:n}=await an({network:this.getNetwork(),value:e});return n}async call(e){const{tx:n,blockTag:r}=await an({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#f(this.#u(n,r,e.enableCcipRead?0:-1))}async#h(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await this.#f(this.#c(Object.assign(e,{address:i,blockTag:s})))}async getBalance(e,n){return ke(await this.#h({method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Ue(await this.#h({method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Se(await this.#h({method:"getCode"},e,n))}async getStorage(e,n,r){const i=ke(n,"position");return Se(await this.#h({method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await an({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=lr.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async#y(e,n){if(dt(e,32))return await this.#c({method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await this.#c({method:"getBlock",blockTag:r,includeTransactions:n})}async getBlock(e,n){const{network:r,params:i}=await an({network:this.getNetwork(),params:this.#y(e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await an({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await an({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await this.#c({method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await an({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:e})});return n==null?null:Se(n)}async getLogs(e){let n=this._getFilter(e);dl(n)&&(n=await n);const{network:r,params:i}=await an({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await jo.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Ye(e);const n=Xh(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await jo.getEnsAddress(this),s=await new pr(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===hc)return null;const a=await new pr(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(jt(r,"BAD_DATA")&&r.value==="0x"||jt(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const c=(async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(ft("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=this.#l.get(e);n&&(n.timer&&clearTimeout(n.timer),this.#l.delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=this.#d++,i=()=>{this.#l.delete(r),e()};if(this.paused)this.#l.set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);this.#l.set(r,{timer:s,func:i,time:kf()})}return r}_forEachSubscriber(e){for(const n of this.#e.values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new d2(e.type);case"block":{const n=new xR(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new kR(this,e.type);case"event":return new Tg(this,e.filter);case"transaction":return new PR(this,e.hash);case"orphan":return new TR(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of this.#e.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),this.#n!=null&&n.pause(this.#n);break}}async#m(e,n){let r=await xf(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await xf({orphan:"drop-log",log:n[0]},this)),this.#e.get(r.tag)||null}async#v(e){const n=await xf(e,this),r=n.tag;let i=this.#e.get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(r,i)),i}async on(e,n){const r=await this.#v(e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async once(e,n){const r=await this.#v(e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async emit(e,...n){const r=await this.#m(e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new I1(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await this.#m(e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of this.#e.values())n+=r.length;return n}async listeners(e){if(e){const r=await this.#m(e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of this.#e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await this.#m(e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await this.#v(e);r&&i.stop(),this.#e.delete(n)}else for(const[n,{started:r,subscriber:i}]of this.#e)r&&i.stop(),this.#e.delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return this.#r}destroy(){this.removeAllListeners();for(const e of this.#l.keys())this._clearTimeout(e);this.#r=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),this.#n=!!e;for(const n of this.#l.values())n.timer&&clearTimeout(n.timer),n.time=kf()-n.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#l.values()){let n=e.time;n<0&&(n=0),e.time=kf(),setTimeout(e.func,n)}}}}function LR(t,e){try{const n=ip(t,e);if(n)return xu(n)}catch{}return null}function ip(t,e){if(t==="0x")return null;try{const n=Ue(mt(t,e,e+32)),r=Ue(mt(t,n,n+32));return mt(t,n+32,n+32+r)}catch{}return null}function ky(t){const e=Pt(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function BR(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const DR=new Uint8Array([]);function UR(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(DR),n+=32;for(let r=0;r<t.length;r++){const i=Fe(t[r]);e[r]=ky(n),e.push(ky(i.length)),e.push(BR(i)),n+=32+Math.ceil(i.length/32)*32}return bt(e)}const Ty="0x0000000000000000000000000000000000000000000000000000000000000000";function $R(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me($o(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=mt(t,0,32);me(mt(n,0,12)===mt(Ty,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=mt(n,12);try{const r=[],i=Ue(mt(t,32,64)),s=Ue(mt(t,i,i+32)),o=mt(t,i+32);for(let a=0;a<s;a++){const c=LR(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=ip(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(mt(t,100,128)===mt(Ty,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=mt(t,96,100);try{const r=ip(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Es(t,e){if(t.provider)return t.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Py(t,e){let n=Nu(e);if(n.to!=null&&(n.to=pn(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),pn(r,t)]).then(([i,s])=>(ee(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await an(n)}class FR{provider;constructor(e){Re(this,{provider:e||null})}async getNonce(e){return Es(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Py(this,e)}async populateTransaction(e){const n=Es(this,"populateTransaction"),r=await Py(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=ke(r.chainId);ee(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ee(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&ee(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await an(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Es(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Es(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Es(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Es(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Es(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=lr.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function HR(t){return JSON.parse(JSON.stringify(t))}class f2{#e;#t;#n;#r;#i;#o;constructor(e){this.#e=e,this.#t=null,this.#n=this.#s.bind(this),this.#r=!1,this.#i=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#s(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let n=null;try{n=await this.#t}catch(s){if(!jt(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const r=await this.#e.getNetwork();if(this.#i||(this.#i=r),this.#i.chainId!==r.chainId)throw new Error("chaid changed");if(this.#o)return;const i=await this.#e.send("eth_getFilterChanges",[n]);await this._emitResults(this.#e,i)}catch(n){console.log("@TODO",n)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(n=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[n])}))}start(){this.#r||(this.#r=!0,this.#s(-2))}stop(){this.#r&&(this.#r=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class KR extends f2{#e;constructor(e,n){super(e),this.#e=HR(n)}_recover(e){return new Tg(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,n){for(const r of n)e.emit(this.#e,e._wrapLog(r,e._network))}}class jR extends f2{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const VR="bigint,boolean,function,number,string,symbol".split(/,/g);function ql(t){if(t==null||VR.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(ql);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function zR(t){return new Promise(e=>{setTimeout(e,t)})}function uo(t){return t&&t.toLowerCase()}function Iy(t){return t&&typeof t.pollingInterval=="number"}const h2={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Tf extends FR{address;constructor(e,n){super(e),n=Ye(n),Re(this,{address:n})}connect(e){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=ql(e),r=[];if(n.from){const s=n.from;r.push((async()=>{const o=await pn(s,this.provider);ee(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=o})())}else n.from=this.address;if(n.gasLimit==null&&r.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const s=n.to;r.push((async()=>{n.to=await pn(s,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,s)=>{const o=[1e3,100];let a=0;const c=async()=>{try{const l=await this.provider.getTransaction(r);if(l!=null){i(l.replaceableTransaction(n));return}}catch(l){if(jt(l,"CANCELLED")||jt(l,"BAD_DATA")||jt(l,"NETWORK_ERROR")||jt(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=r,s(l);return}if(jt(l,"INVALID_ARGUMENT")&&(a++,l.info==null&&(l.info={}),l.info.sendTransactionHash=r,a>10)){s(l);return}this.provider.emit("error",ft("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{c()},o.pop()||4e3)};c()})}async signTransaction(e){const n=ql(e);if(n.from){const i=await pn(n.from,this.provider);ee(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const r=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const n=typeof e=="string"?pi(e):e;return await this.provider.send("personal_sign",[Se(n),this.address.toLowerCase()])}async signTypedData(e,n,r){const i=ql(r),s=await On.resolveNames(e,n,i,async o=>{const a=await pn(o);return ee(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(On.getPayload(s.domain,n,s.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?pi(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Se(n)])}}class GR extends MR{#e;#t;#n;#r;#i;#o;#s;#a(){if(this.#r)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#r=setTimeout(()=>{this.#r=null;const n=this.#n;for(this.#n=[];n.length;){const r=[n.shift()];for(;n.length&&r.length!==this.#e.batchMaxCount;)if(r.push(n.shift()),JSON.stringify(r.map(s=>s.payload)).length>this.#e.batchMaxSize){n.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(s=>s.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const s=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:s});for(const{resolve:o,reject:a,payload:c}of r){if(this.destroyed){a(ft("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const l=s.filter(u=>u.id===c.id)[0];if(l==null){const u=ft("missing response for request","BAD_DATA",{value:s,info:{payload:c}});this.emit("error",u),a(u);continue}if("error"in l){a(this.getRpcError(c,l));continue}o(l.result)}}catch(s){this.emit("debug",{action:"receiveRpcError",error:s});for(const{reject:o}of r)o(s)}})()}},e)}constructor(e,n){super(e,n),this.#t=1,this.#e=Object.assign({},h2,n||{}),this.#n=[],this.#r=null,this.#o=null,this.#s=null;{let i=null;const s=new Promise(o=>{i=o});this.#i={promise:s,resolve:i}}const r=this._getOption("staticNetwork");typeof r=="boolean"?(ee(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),r&&e!=null&&(this.#o=Hn.from(e))):r&&(ee(e==null||r.matches(e),"staticNetwork MUST match network object","options",n),this.#o=r)}_getOption(e){return this.#e[e]}get _network(){return me(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&ke(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#s?await this.#s:this.ready?(this.#s=(async()=>{try{const n=Hn.from(ke(await this.send("eth_chainId",[])));return this.#s=null,n}catch(n){throw this.#s=null,n}})(),await this.#s):(this.#s=(async()=>{const n={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let r;try{r=(await this._send(n))[0],this.#s=null}catch(i){throw this.#s=null,this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return Hn.from(ke(r.result));throw this.getRpcError(n,r)})(),await this.#s)}_start(){this.#i==null||this.#i.resolve==null||(this.#i.resolve(),this.#i=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ft("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await zR(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#i!=null)return await this.#i.promise}_getSubscriber(e){return e.type==="pending"?new jR(this):e.type==="event"?this._getOption("polling")?new Tg(this,e.filter):new KR(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new d2("orphan"):super._getSubscriber(e)}get ready(){return this.#i==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),n[i]=dr(ke(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(n[r]=Se(e[r]))}),e.accessList&&(n.accessList=Xs(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(r=>r.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(r=>{const i=vE(r);return{address:i.address,nonce:dr(i.nonce),chainId:dr(i.chainId),yParity:dr(i.signature.yParity),r:dr(i.signature.r),s:dr(i.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[uo(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[uo(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[uo(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[uo(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(uo):e.filter.address=uo(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:r}=e,{error:i}=n;if(r==="eth_estimateGas"&&i.message){const a=i.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return ft("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return ft("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const a=sp(i),c=oa.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:i,payload:e},c}const s=JSON.stringify(WR(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return ft("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const a=e.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return ft("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:i}});if(s.match(/nonce/i)&&s.match(/too low/i))return ft("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:i}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return ft("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:i}});if(s.match(/only replay-protected/i))return ft("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:a,info:{error:i}}})}let o=!!s.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?ft("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):ft("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(ft("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=this.#t++,i=new Promise((s,o)=>{this.#n.push({resolve:s,reject:o,payload:{method:e,params:n,id:r,jsonrpc:"2.0"}})});return this.#a(),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new Tf(this,i[e])}const{accounts:r}=await an({network:this.getNetwork(),accounts:n});e=Ye(e);for(const i of r)if(Ye(i)===e)return new Tf(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Tf(this,n))}destroy(){this.#r&&(clearTimeout(this.#r),this.#r=null);for(const{payload:e,reject:n}of this.#n)n(ft("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class qR extends GR{#e;constructor(e,n){super(e,n);let r=this._getOption("pollingInterval");r==null&&(r=h2.pollingInterval),this.#e=r}_getSubscriber(e){const n=super._getSubscriber(e);return Iy(n)&&(n.pollingInterval=this.#e),n}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(n=>{Iy(n)&&(n.pollingInterval=this.#e)})}}function sp(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&dt(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=sp(t[e]);if(n)return n}return null}if(typeof t=="string")try{return sp(JSON.parse(t))}catch{}return null}function op(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)op(t[n],e);if(typeof t=="string")try{return op(JSON.parse(t),e)}catch{}}}function WR(t){const e=[];return op(t,e),e}class Un extends qR{#e;#t;constructor(e,n,r){const i=Object.assign({},r??{},{batchMaxCount:1});ee(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(n,i),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(s,o)=>{const a={method:s,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const c=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const l=new Error(c.message);throw l.code=c.code,l.data=c.data,l.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}}}get providerInfo(){return this.#t}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){ee(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await this.#e(e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(n){const r=n.payload;throw this.getRpcError(r,{id:r.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Un(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const r=e.anyProvider;if(r&&n.ethereum)return new Un(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((s,o)=>{let a=[];const c=d=>{a.push(d.detail),r&&l()},l=()=>{if(clearTimeout(u),a.length)if(e&&e.filter){const d=e.filter(a.map(f=>Object.assign({},f.info)));if(d==null)s(null);else if(d instanceof Un)s(d);else{let f=null;if(d.uuid&&(f=a.filter(g=>d.uuid===g.info.uuid)[0]),f){const{provider:h,info:g}=f;s(new Un(h,void 0,{providerInfo:g}))}else o(ft("filter returned unknown info","UNSUPPORTED_OPERATION",{value:d}))}}else{const{provider:d,info:f}=a[0];s(new Un(d,void 0,{providerInfo:f}))}else s(null);n.removeEventListener("eip6963:announceProvider",c)},u=setTimeout(()=>{l()},i);n.addEventListener("eip6963:announceProvider",c),n.dispatchEvent(new Event("eip6963:requestProvider"))})}}const QR="modulepreload",JR=function(t){return"/"+t},Ry={},YR=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};var o=l;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=l(n.map(u=>{if(u=JR(u),u in Ry)return;Ry[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":QR,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((g,p)=>{h.addEventListener("load",g),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};var fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hl={exports:{}},Oy;function ZR(){return Oy||(Oy=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof fl<"u"&&fl,r=(function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s})();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof fl<"u"&&fl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(S){return S&&DataView.prototype.isPrototypeOf(S)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(S){return S&&u.indexOf(Object.prototype.toString.call(S))>-1};function f(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function h(S){return typeof S!="string"&&(S=String(S)),S}function g(S){var k={next:function(){var B=S.shift();return{done:B===void 0,value:B}}};return c.iterable&&(k[Symbol.iterator]=function(){return k}),k}function p(S){this.map={},S instanceof p?S.forEach(function(k,B){this.append(B,k)},this):Array.isArray(S)?S.forEach(function(k){if(k.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+k.length);this.append(k[0],k[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(k){this.append(k,S[k])},this)}p.prototype.append=function(S,k){S=f(S),k=h(k);var B=this.map[S];this.map[S]=B?B+", "+k:k},p.prototype.delete=function(S){delete this.map[f(S)]},p.prototype.get=function(S){return S=f(S),this.has(S)?this.map[S]:null},p.prototype.has=function(S){return this.map.hasOwnProperty(f(S))},p.prototype.set=function(S,k){this.map[f(S)]=h(k)},p.prototype.forEach=function(S,k){for(var B in this.map)this.map.hasOwnProperty(B)&&S.call(k,this.map[B],B,this)},p.prototype.keys=function(){var S=[];return this.forEach(function(k,B){S.push(B)}),g(S)},p.prototype.values=function(){var S=[];return this.forEach(function(k){S.push(k)}),g(S)},p.prototype.entries=function(){var S=[];return this.forEach(function(k,B){S.push([B,k])}),g(S)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function y(S){if(!S._noBody){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}}function m(S){return new Promise(function(k,B){S.onload=function(){k(S.result)},S.onerror=function(){B(S.error)}})}function b(S){var k=new FileReader,B=m(k);return k.readAsArrayBuffer(S),B}function w(S){var k=new FileReader,B=m(k),v=/charset=([A-Za-z0-9_-]+)/.exec(S.type),E=v?v[1]:"utf-8";return k.readAsText(S,E),B}function P(S){for(var k=new Uint8Array(S),B=new Array(k.length),v=0;v<k.length;v++)B[v]=String.fromCharCode(k[v]);return B.join("")}function O(S){if(S.slice)return S.slice(0);var k=new Uint8Array(S.byteLength);return k.set(new Uint8Array(S)),k.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:c.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:c.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():c.arrayBuffer&&c.blob&&l(S)?(this._bodyArrayBuffer=O(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||d(S))?this._bodyArrayBuffer=O(S):this._bodyText=S=Object.prototype.toString.call(S):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var S=y(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=y(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var S=y(this);if(S)return S;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(P(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var G=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function q(S){var k=S.toUpperCase();return G.indexOf(k)>-1?k:S}function j(S,k){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');k=k||{};var B=k.body;if(S instanceof j){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,k.headers||(this.headers=new p(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!B&&S._bodyInit!=null&&(B=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=k.credentials||this.credentials||"same-origin",(k.headers||!this.headers)&&(this.headers=new p(k.headers)),this.method=q(k.method||this.method||"GET"),this.mode=k.mode||this.mode||null,this.signal=k.signal||this.signal||(function(){if("AbortController"in a){var x=new AbortController;return x.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(k.cache==="no-store"||k.cache==="no-cache")){var v=/([?&])_=[^&]*/;if(v.test(this.url))this.url=this.url.replace(v,"$1_="+new Date().getTime());else{var E=/\?/;this.url+=(E.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}j.prototype.clone=function(){return new j(this,{body:this._bodyInit})};function L(S){var k=new FormData;return S.trim().split("&").forEach(function(B){if(B){var v=B.split("="),E=v.shift().replace(/\+/g," "),x=v.join("=").replace(/\+/g," ");k.append(decodeURIComponent(E),decodeURIComponent(x))}}),k}function V(S){var k=new p,B=S.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(v){return v.indexOf(`
`)===0?v.substr(1,v.length):v}).forEach(function(v){var E=v.split(":"),x=E.shift().trim();if(x){var C=E.join(":").trim();try{k.append(x,C)}catch(A){console.warn("Response "+A.message)}}}),k}H.call(j.prototype);function $(S,k){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(k||(k={}),this.type="default",this.status=k.status===void 0?200:k.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=k.statusText===void 0?"":""+k.statusText,this.headers=new p(k.headers),this.url=k.url||"",this._initBody(S)}H.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},$.error=function(){var S=new $(null,{status:200,statusText:""});return S.ok=!1,S.status=0,S.type="error",S};var D=[301,302,303,307,308];$.redirect=function(S,k){if(D.indexOf(k)===-1)throw new RangeError("Invalid status code");return new $(null,{status:k,headers:{location:S}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(k,B){this.message=k,this.name=B;var v=Error(k);this.stack=v.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function N(S,k){return new Promise(function(B,v){var E=new j(S,k);if(E.signal&&E.signal.aborted)return v(new o.DOMException("Aborted","AbortError"));var x=new XMLHttpRequest;function C(){x.abort()}x.onload=function(){var T={statusText:x.statusText,headers:V(x.getAllResponseHeaders()||"")};E.url.indexOf("file://")===0&&(x.status<200||x.status>599)?T.status=200:T.status=x.status,T.url="responseURL"in x?x.responseURL:T.headers.get("X-Request-URL");var R="response"in x?x.response:x.responseText;setTimeout(function(){B(new $(R,T))},0)},x.onerror=function(){setTimeout(function(){v(new TypeError("Network request failed"))},0)},x.ontimeout=function(){setTimeout(function(){v(new TypeError("Network request timed out"))},0)},x.onabort=function(){setTimeout(function(){v(new o.DOMException("Aborted","AbortError"))},0)};function A(T){try{return T===""&&a.location.href?a.location.href:T}catch{return T}}if(x.open(E.method,A(E.url),!0),E.credentials==="include"?x.withCredentials=!0:E.credentials==="omit"&&(x.withCredentials=!1),"responseType"in x&&(c.blob?x.responseType="blob":c.arrayBuffer&&(x.responseType="arraybuffer")),k&&typeof k.headers=="object"&&!(k.headers instanceof p||a.Headers&&k.headers instanceof a.Headers)){var _=[];Object.getOwnPropertyNames(k.headers).forEach(function(T){_.push(f(T)),x.setRequestHeader(T,h(k.headers[T]))}),E.headers.forEach(function(T,R){_.indexOf(R)===-1&&x.setRequestHeader(R,T)})}else E.headers.forEach(function(T,R){x.setRequestHeader(R,T)});E.signal&&(E.signal.addEventListener("abort",C),x.onreadystatechange=function(){x.readyState===4&&E.signal.removeEventListener("abort",C)}),x.send(typeof E._bodyInit>"u"?null:E._bodyInit)})}return N.polyfill=!0,a.fetch||(a.fetch=N,a.Headers=p,a.Request=j,a.Response=$),o.Headers=p,o.Request=j,o.Response=$,o.fetch=N,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(hl,hl.exports)),hl.exports}var XR=ZR();const p2=Pg(XR);var pl={exports:{}},Pf,Ny;function eO(){if(Ny)return Pf;Ny=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;Pf=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return o(u);if(f==="number"&&isFinite(u))return d.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function a(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=e?l(u,d,e,"minute"):d>=t?l(u,d,t,"second"):u+" ms"}function l(u,d,f,h){var g=d>=f*1.5;return Math.round(u/f)+" "+h+(g?"s":"")}return Pf}var If,My;function tO(){if(My)return If;My=1;function t(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=s,r.enabled=a,r.humanize=eO(),r.destroy=u,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let h=0;h<d.length;h++)f=(f<<5)-f+d.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,h=null,g,p;function y(...m){if(!y.enabled)return;const b=y,w=Number(new Date),P=w-(f||w);b.diff=P,b.prev=f,b.curr=w,f=w,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let O=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(G,q)=>{if(G==="%%")return"%";O++;const j=r.formatters[q];if(typeof j=="function"){const L=m[O];G=j.call(b,L),m.splice(O,1),O--}return G}),r.formatArgs.call(b,m),(b.log||r.log).apply(b,m)}return y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,p=r.enabled(d)),p),set:m=>{h=m}}),typeof r.init=="function"&&r.init(y),y}function i(d,f){const h=r(this.namespace+(typeof f>"u"?":":f)+d);return h.log=this.log,h}function s(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const h=(typeof d=="string"?d:"").split(/[\s,]+/),g=h.length;for(f=0;f<g;f++)h[f]&&(d=h[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function o(){const d=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),d}function a(d){if(d[d.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(d))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return If=t,If}var Ly;function nO(){return Ly||(Ly=1,(function(t,e){var n={};e.formatArgs=i,e.save=s,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,f=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(d++,h==="%c"&&(f=d))}),l.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function s(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function o(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=n.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=tO()(e);const{formatters:c}=t.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(pl,pl.exports)),pl.exports}var rO=nO();const mn=Pg(rO);var Rf,By;function iO(){if(By)return Rf;By=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(j,L)=>{for(var V in L)t(j,V,{get:L[V],enumerable:!0})},s=(j,L,V,$)=>{if(L&&typeof L=="object"||typeof L=="function")for(let D of n(L))!r.call(j,D)&&D!==V&&t(j,D,{get:()=>L[D],enumerable:!($=e(L,D))||$.enumerable});return j},o=j=>s(t({},"__esModule",{value:!0}),j),a={};i(a,{createFinalURL:()=>H,createPathBasedClient:()=>p,createQuerySerializer:()=>w,default:()=>d,defaultBodySerializer:()=>O,defaultPathSerializer:()=>P,mergeHeaders:()=>G,randomID:()=>u,removeTrailingSlash:()=>q,serializeArrayParam:()=>b,serializeObjectParam:()=>m,serializePrimitiveParam:()=>y,wrapAsPathBasedClient:()=>g}),Rf=o(a);var c=/\{[^{}]+\}/g,l=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function u(){return Math.random().toString(36).slice(2,11)}function d(j){let{baseUrl:L="",Request:V=globalThis.Request,fetch:$=globalThis.fetch,querySerializer:D,bodySerializer:N,headers:S,requestInitExt:k=void 0,...B}={...j};k=l()?k:void 0,L=q(L);const v=[];async function E(x,C){const{baseUrl:A,fetch:_=$,Request:T=V,headers:R,params:U={},parseAs:I="json",querySerializer:K,bodySerializer:W=N??O,body:Z,...se}=C||{};let M=L;A&&(M=q(A)??L);let F=typeof D=="function"?D:w(D);K&&(F=typeof K=="function"?K:w({...typeof D=="object"?D:{},...K}));const Y=Z===void 0?void 0:W(Z,G(S,R,U.header)),ne=G(Y===void 0||Y instanceof FormData?{}:{"Content-Type":"application/json"},S,R,U.header),J={redirect:"follow",...B,...se,body:Y,headers:ne};let Q,ie,re=new V(H(x,{baseUrl:M,params:U,querySerializer:F}),J),oe;for(const fe in se)fe in re||(re[fe]=se[fe]);if(v.length){Q=u(),ie=Object.freeze({baseUrl:M,fetch:_,parseAs:I,querySerializer:F,bodySerializer:W});for(const fe of v)if(fe&&typeof fe=="object"&&typeof fe.onRequest=="function"){const le=await fe.onRequest({request:re,schemaPath:x,params:U,options:ie,id:Q});if(le)if(le instanceof V)re=le;else if(le instanceof Response){oe=le;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!oe){try{oe=await _(re,k)}catch(fe){let le=fe;if(v.length)for(let ge=v.length-1;ge>=0;ge--){const Ae=v[ge];if(Ae&&typeof Ae=="object"&&typeof Ae.onError=="function"){const Pe=await Ae.onError({request:re,error:le,schemaPath:x,params:U,options:ie,id:Q});if(Pe){if(Pe instanceof Response){le=void 0,oe=Pe;break}if(Pe instanceof Error){le=Pe;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(le)throw le}if(v.length)for(let fe=v.length-1;fe>=0;fe--){const le=v[fe];if(le&&typeof le=="object"&&typeof le.onResponse=="function"){const ge=await le.onResponse({request:re,response:oe,schemaPath:x,params:U,options:ie,id:Q});if(ge){if(!(ge instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");oe=ge}}}}if(oe.status===204||re.method==="HEAD"||oe.headers.get("Content-Length")==="0")return oe.ok?{data:void 0,response:oe}:{error:void 0,response:oe};if(oe.ok)return I==="stream"?{data:oe.body,response:oe}:{data:await oe[I](),response:oe};let te=await oe.text();try{te=JSON.parse(te)}catch{}return{error:te,response:oe}}return{request(x,C,A){return E(C,{...A,method:x.toUpperCase()})},GET(x,C){return E(x,{...C,method:"GET"})},PUT(x,C){return E(x,{...C,method:"PUT"})},POST(x,C){return E(x,{...C,method:"POST"})},DELETE(x,C){return E(x,{...C,method:"DELETE"})},OPTIONS(x,C){return E(x,{...C,method:"OPTIONS"})},HEAD(x,C){return E(x,{...C,method:"HEAD"})},PATCH(x,C){return E(x,{...C,method:"PATCH"})},TRACE(x,C){return E(x,{...C,method:"TRACE"})},use(...x){for(const C of x)if(C){if(typeof C!="object"||!("onRequest"in C||"onResponse"in C||"onError"in C))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");v.push(C)}},eject(...x){for(const C of x){const A=v.indexOf(C);A!==-1&&v.splice(A,1)}}}}var f=class{constructor(j,L){this.client=j,this.url=L}GET=j=>this.client.GET(this.url,j);PUT=j=>this.client.PUT(this.url,j);POST=j=>this.client.POST(this.url,j);DELETE=j=>this.client.DELETE(this.url,j);OPTIONS=j=>this.client.OPTIONS(this.url,j);HEAD=j=>this.client.HEAD(this.url,j);PATCH=j=>this.client.PATCH(this.url,j);TRACE=j=>this.client.TRACE(this.url,j)},h=class{constructor(){this.client=null}get(j,L){const V=new f(j,L);return this.client[L]=V,V}};function g(j){const L=new h,V=new Proxy(j,L);function $(){}$.prototype=V;const D=new $;return L.client=D,D}function p(j){return g(d(j))}function y(j,L,V){if(L==null)return"";if(typeof L=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${j}=${V?.allowReserved===!0?L:encodeURIComponent(L)}`}function m(j,L,V){if(!L||typeof L!="object")return"";const $=[],D={simple:",",label:".",matrix:";"}[V.style]||"&";if(V.style!=="deepObject"&&V.explode===!1){for(const k in L)$.push(k,V.allowReserved===!0?L[k]:encodeURIComponent(L[k]));const S=$.join(",");switch(V.style){case"form":return`${j}=${S}`;case"label":return`.${S}`;case"matrix":return`;${j}=${S}`;default:return S}}for(const S in L){const k=V.style==="deepObject"?`${j}[${S}]`:S;$.push(y(k,L[S],V))}const N=$.join(D);return V.style==="label"||V.style==="matrix"?`${D}${N}`:N}function b(j,L,V){if(!Array.isArray(L))return"";if(V.explode===!1){const N={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[V.style]||",",S=(V.allowReserved===!0?L:L.map(k=>encodeURIComponent(k))).join(N);switch(V.style){case"simple":return S;case"label":return`.${S}`;case"matrix":return`;${j}=${S}`;default:return`${j}=${S}`}}const $={simple:",",label:".",matrix:";"}[V.style]||"&",D=[];for(const N of L)V.style==="simple"||V.style==="label"?D.push(V.allowReserved===!0?N:encodeURIComponent(N)):D.push(y(j,N,V));return V.style==="label"||V.style==="matrix"?`${$}${D.join($)}`:D.join($)}function w(j){return function(V){const $=[];if(V&&typeof V=="object")for(const D in V){const N=V[D];if(N!=null){if(Array.isArray(N)){if(N.length===0)continue;$.push(b(D,N,{style:"form",explode:!0,...j?.array,allowReserved:j?.allowReserved||!1}));continue}if(typeof N=="object"){$.push(m(D,N,{style:"deepObject",explode:!0,...j?.object,allowReserved:j?.allowReserved||!1}));continue}$.push(y(D,N,j))}}return $.join("&")}}function P(j,L){let V=j;for(const $ of j.match(c)??[]){let D=$.substring(1,$.length-1),N=!1,S="simple";if(D.endsWith("*")&&(N=!0,D=D.substring(0,D.length-1)),D.startsWith(".")?(S="label",D=D.substring(1)):D.startsWith(";")&&(S="matrix",D=D.substring(1)),!L||L[D]===void 0||L[D]===null)continue;const k=L[D];if(Array.isArray(k)){V=V.replace($,b(D,k,{style:S,explode:N}));continue}if(typeof k=="object"){V=V.replace($,m(D,k,{style:S,explode:N}));continue}if(S==="matrix"){V=V.replace($,`;${y(D,k)}`);continue}V=V.replace($,S==="label"?`.${encodeURIComponent(k)}`:encodeURIComponent(k))}return V}function O(j,L){return j instanceof FormData?j:L&&(L.get instanceof Function?L.get("Content-Type")??L.get("content-type"):L["Content-Type"]??L["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(j).toString():JSON.stringify(j)}function H(j,L){let V=`${L.baseUrl}${j}`;L.params?.path&&(V=P(V,L.params.path));let $=L.querySerializer(L.params.query??{});return $.startsWith("?")&&($=$.substring(1)),$&&(V+=`?${$}`),V}function G(...j){const L=new Headers;for(const V of j){if(!V||typeof V!="object")continue;const $=V instanceof Headers?V.entries():Object.entries(V);for(const[D,N]of $)if(N===null)L.delete(D);else if(Array.isArray(N))for(const S of N)L.append(D,S);else N!==void 0&&L.set(D,N)}return L}function q(j){return j.endsWith("/")?j.substring(0,j.length-1):j}return Rf}var Of,Dy;function sO(){if(Dy)return Of;Dy=1;var t={},e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,a=(H,G)=>{for(var q in G)n(H,q,{get:G[q],enumerable:!0})},c=(H,G,q,j)=>{if(G&&typeof G=="object"||typeof G=="function")for(let L of i(G))!o.call(H,L)&&L!==q&&n(H,L,{get:()=>G[L],enumerable:!(j=r(G,L))||j.enumerable});return H},l=(H,G,q)=>(q=H!=null?e(s(H)):{},c(!H||!H.__esModule?n(q,"default",{value:H,enumerable:!0}):q,H)),u=H=>c(n({},"__esModule",{value:!0}),H),d={};a(d,{analytics:()=>O}),Of=u(d);var f=l(iO()),h=class{constructor(H){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=H.batchSize,this.baseTimeoutMs=H.baseTimeoutMs,this.currentTimeoutMs=H.baseTimeoutMs,this.sendFn=H.sendFn}enqueue(H){this.batch.push(H),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const H=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(H),this.currentTimeoutMs=this.baseTimeoutMs}catch(G){console.error("Sender: Failed to send batch",G),this.batch=[...H,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},g=h,p=class{constructor(H){this.enabled=!1,this.properties={};const G=(0,f.default)({baseUrl:H}),q=async j=>{const L=await G.POST("/v1/events",{body:j});if(L.response.status!==200)throw new Error(L.error)};this.sender=new g({batchSize:100,baseTimeoutMs:200,sendFn:q})}enable(){this.enabled=!0}setGlobalProperty(H,G){this.properties[H]=G}track(H,G){if(!this.enabled)return;const q={name:H,...this.properties,...G};this.sender.enqueue(q)}},y=p,m,b;typeof process<"u"&&t&&(m=(b=t.METAMASK_ANALYTICS_ENDPOINT)!=null?b:t.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var w=m??"https://mm-sdk-analytics.api.cx.metamask.io/",P=new y(w),O=P;return Of}var At=sO(),Nf={exports:{}};var Uy;function oO(){return Uy||(Uy=1,(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(E){return Object.prototype.toString.call(E)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",c=typeof Reflect=="object",l=typeof setImmediate=="function",u=l?setImmediate:setTimeout,d=a?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(v){var E=Object.getOwnPropertyNames(v);return E.push.apply(E,Object.getOwnPropertySymbols(v)),E}:Object.keys;function f(){this._events={},this._conf&&h.call(this,this._conf)}function h(v){v&&(this._conf=v,v.delimiter&&(this.delimiter=v.delimiter),v.maxListeners!==n&&(this._maxListeners=v.maxListeners),v.wildcard&&(this.wildcard=v.wildcard),v.newListener&&(this._newListener=v.newListener),v.removeListener&&(this._removeListener=v.removeListener),v.verboseMemoryLeak&&(this.verboseMemoryLeak=v.verboseMemoryLeak),v.ignoreErrors&&(this.ignoreErrors=v.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(v,E){var x="(node) warning: possible EventEmitter memory leak detected. "+v+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(x+=" Event name: "+E+"."),typeof process<"u"&&process.emitWarning){var C=new Error(x);C.name="MaxListenersExceededWarning",C.emitter=this,C.count=v,process.emitWarning(C)}else console.error(x),console.trace&&console.trace()}var p=function(v,E,x){var C=arguments.length;switch(C){case 0:return[];case 1:return[v];case 2:return[v,E];case 3:return[v,E,x];default:for(var A=new Array(C);C--;)A[C]=arguments[C];return A}};function y(v,E){for(var x={},C,A=v.length,_=0,T=0;T<A;T++)C=v[T],x[C]=T<_?E[T]:n;return x}function m(v,E,x){this._emitter=v,this._target=E,this._listeners={},this._listenersCount=0;var C,A;if((x.on||x.off)&&(C=x.on,A=x.off),E.addEventListener?(C=E.addEventListener,A=E.removeEventListener):E.addListener?(C=E.addListener,A=E.removeListener):E.on&&(C=E.on,A=E.off),!C&&!A)throw Error("target does not implement any known event API");if(typeof C!="function")throw TypeError("on method must be a function");if(typeof A!="function")throw TypeError("off method must be a function");this._on=C,this._off=A;var _=v._observers;_?_.push(this):v._observers=[this]}Object.assign(m.prototype,{subscribe:function(v,E,x){var C=this,A=this._target,_=this._emitter,T=this._listeners,R=function(){var U=p.apply(null,arguments),I={data:U,name:E,original:v};if(x){var K=x.call(A,I);K!==!1&&_.emit.apply(_,[I.name].concat(U));return}_.emit.apply(_,[E].concat(U))};if(T[v])throw Error("Event '"+v+"' is already listening");this._listenersCount++,_._newListener&&_._removeListener&&!C._onNewListener?(this._onNewListener=function(U){U===E&&T[v]===null&&(T[v]=R,C._on.call(A,v,R))},_.on("newListener",this._onNewListener),this._onRemoveListener=function(U){U===E&&!_.hasListeners(U)&&T[v]&&(T[v]=null,C._off.call(A,v,R))},T[v]=null,_.on("removeListener",this._onRemoveListener)):(T[v]=R,C._on.call(A,v,R))},unsubscribe:function(v){var E=this,x=this._listeners,C=this._emitter,A,_,T=this._off,R=this._target,U;if(v&&typeof v!="string")throw TypeError("event must be a string");function I(){E._onNewListener&&(C.off("newListener",E._onNewListener),C.off("removeListener",E._onRemoveListener),E._onNewListener=null,E._onRemoveListener=null);var K=q.call(C,E);C._observers.splice(K,1)}if(v){if(A=x[v],!A)return;T.call(R,v,A),delete x[v],--this._listenersCount||I()}else{for(_=d(x),U=_.length;U-- >0;)v=_[U],T.call(R,v,x[v]);this._listeners={},this._listenersCount=0,I()}}});function b(v,E,x,C){var A=Object.assign({},E);if(!v)return A;if(typeof v!="object")throw TypeError("options must be an object");var _=Object.keys(v),T=_.length,R,U,I;function K(Z){throw Error('Invalid "'+R+'" option value'+(Z?". Reason: "+Z:""))}for(var W=0;W<T;W++){if(R=_[W],!r.call(E,R))throw Error('Unknown "'+R+'" option');U=v[R],U!==n&&(I=x[R],A[R]=I?I(U,K):U)}return A}function w(v,E){return(typeof v!="function"||!v.hasOwnProperty("prototype"))&&E("value must be a constructor"),v}function P(v){var E="value must be type of "+v.join("|"),x=v.length,C=v[0],A=v[1];return x===1?function(_,T){if(typeof _===C)return _;T(E)}:x===2?function(_,T){var R=typeof _;if(R===C||R===A)return _;T(E)}:function(_,T){for(var R=typeof _,U=x;U-- >0;)if(R===v[U])return _;T(E)}}var O=P(["function"]),H=P(["object","function"]);function G(v,E,x){var C,A,_=0,T,R=new v(function(U,I,K){x=b(x,{timeout:0,overload:!1},{timeout:function(M,F){return M*=1,(typeof M!="number"||M<0||!Number.isFinite(M))&&F("timeout must be a positive number"),M}}),C=!x.overload&&typeof v.prototype.cancel=="function"&&typeof K=="function";function W(){A&&(A=null),_&&(clearTimeout(_),_=0)}var Z=function(M){W(),U(M)},se=function(M){W(),I(M)};C?E(Z,se,K):(A=[function(M){se(M||Error("canceled"))}],E(Z,se,function(M){if(T)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof M!="function")throw TypeError("onCancel callback must be a function");A.push(M)}),T=!0),x.timeout>0&&(_=setTimeout(function(){var M=Error("timeout");M.code="ETIMEDOUT",_=0,R.cancel(M),I(M)},x.timeout))});return C||(R.cancel=function(U){if(A){for(var I=A.length,K=1;K<I;K++)A[K](U);A[0](U),A=null}}),R}function q(v){var E=this._observers;if(!E)return-1;for(var x=E.length,C=0;C<x;C++)if(E[C]._target===v)return C;return-1}function j(v,E,x,C,A){if(!x)return null;if(C===0){var _=typeof E;if(_==="string"){var T,R,U=0,I=0,K=this.delimiter,W=K.length;if((R=E.indexOf(K))!==-1){T=new Array(5);do T[U++]=E.slice(I,R),I=R+W;while((R=E.indexOf(K,I))!==-1);T[U++]=E.slice(I),E=T,A=U}else E=[E],A=1}else _==="object"?A=E.length:(E=[E],A=1)}var Z=null,se,M,F,Y,ne,J=E[C],Q=E[C+1],ie,re;if(C===A)x._listeners&&(typeof x._listeners=="function"?(v&&v.push(x._listeners),Z=[x]):(v&&v.push.apply(v,x._listeners),Z=[x]));else if(J==="*"){for(ie=d(x),R=ie.length;R-- >0;)se=ie[R],se!=="_listeners"&&(re=j(v,E,x[se],C+1,A),re&&(Z?Z.push.apply(Z,re):Z=re));return Z}else if(J==="**"){for(ne=C+1===A||C+2===A&&Q==="*",ne&&x._listeners&&(Z=j(v,E,x,A,A)),ie=d(x),R=ie.length;R-- >0;)se=ie[R],se!=="_listeners"&&(se==="*"||se==="**"?(x[se]._listeners&&!ne&&(re=j(v,E,x[se],A,A),re&&(Z?Z.push.apply(Z,re):Z=re)),re=j(v,E,x[se],C,A)):se===Q?re=j(v,E,x[se],C+2,A):re=j(v,E,x[se],C,A),re&&(Z?Z.push.apply(Z,re):Z=re));return Z}else x[J]&&(Z=j(v,E,x[J],C+1,A));if(M=x["*"],M&&j(v,E,M,C+1,A),F=x["**"],F)if(C<A)for(F._listeners&&j(v,E,F,A,A),ie=d(F),R=ie.length;R-- >0;)se=ie[R],se!=="_listeners"&&(se===Q?j(v,E,F[se],C+2,A):se===J?j(v,E,F[se],C+1,A):(Y={},Y[se]=F[se],j(v,E,{"**":Y},C+1,A)));else F._listeners?j(v,E,F,A,A):F["*"]&&F["*"]._listeners&&j(v,E,F["*"],A,A);return Z}function L(v,E,x){var C=0,A=0,_,T=this.delimiter,R=T.length,U;if(typeof v=="string")if((_=v.indexOf(T))!==-1){U=new Array(5);do U[C++]=v.slice(A,_),A=_+R;while((_=v.indexOf(T,A))!==-1);U[C++]=v.slice(A)}else U=[v],C=1;else U=v,C=v.length;if(C>1){for(_=0;_+1<C;_++)if(U[_]==="**"&&U[_+1]==="**")return}var I=this.listenerTree,K;for(_=0;_<C;_++)if(K=U[_],I=I[K]||(I[K]={}),_===C-1)return I._listeners?(typeof I._listeners=="function"&&(I._listeners=[I._listeners]),x?I._listeners.unshift(E):I._listeners.push(E),!I._listeners.warned&&this._maxListeners>0&&I._listeners.length>this._maxListeners&&(I._listeners.warned=!0,g.call(this,I._listeners.length,K))):I._listeners=E,!0;return!0}function V(v,E,x,C){for(var A=d(v),_=A.length,T,R,U,I=v._listeners,K;_-- >0;)R=A[_],T=v[R],R==="_listeners"?U=x:U=x?x.concat(R):[R],K=C||typeof R=="symbol",I&&E.push(K?U:U.join(this.delimiter)),typeof T=="object"&&V.call(this,T,E,U,K);return E}function $(v){for(var E=d(v),x=E.length,C,A,_;x-- >0;)A=E[x],C=v[A],C&&(_=!0,A!=="_listeners"&&!$(C)&&delete v[A]);return _}function D(v,E,x){this.emitter=v,this.event=E,this.listener=x}D.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function N(v,E,x){if(x===!0)A=!0;else if(x===!1)C=!0;else{if(!x||typeof x!="object")throw TypeError("options should be an object or true");var C=x.async,A=x.promisify,_=x.nextTick,T=x.objectify}if(C||_||A){var R=E,U=E._origin||E;if(_&&!o)throw Error("process.nextTick is not supported");A===n&&(A=E.constructor.name==="AsyncFunction"),E=function(){var I=arguments,K=this,W=this.event;return A?_?Promise.resolve():new Promise(function(Z){u(Z)}).then(function(){return K.event=W,R.apply(K,I)}):(_?process.nextTick:u)(function(){K.event=W,R.apply(K,I)})},E._async=!0,E._origin=U}return[E,T?new D(this,v,E):this]}function S(v){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,v)}S.EventEmitter2=S,S.prototype.listenTo=function(v,E,x){if(typeof v!="object")throw TypeError("target musts be an object");var C=this;x=b(x,{on:n,off:n,reducers:n},{on:O,off:O,reducers:H});function A(_){if(typeof _!="object")throw TypeError("events must be an object");var T=x.reducers,R=q.call(C,v),U;R===-1?U=new m(C,v,x):U=C._observers[R];for(var I=d(_),K=I.length,W,Z=typeof T=="function",se=0;se<K;se++)W=I[se],U.subscribe(W,_[W]||W,Z?T:T&&T[W])}return i(E)?A(y(E)):A(typeof E=="string"?y(E.split(/\s+/)):E),this},S.prototype.stopListeningTo=function(v,E){var x=this._observers;if(!x)return!1;var C=x.length,A,_=!1;if(v&&typeof v!="object")throw TypeError("target should be an object");for(;C-- >0;)A=x[C],(!v||A._target===v)&&(A.unsubscribe(E),_=!0);return _},S.prototype.delimiter=".",S.prototype.setMaxListeners=function(v){v!==n&&(this._maxListeners=v,this._conf||(this._conf={}),this._conf.maxListeners=v)},S.prototype.getMaxListeners=function(){return this._maxListeners},S.prototype.event="",S.prototype.once=function(v,E,x){return this._once(v,E,!1,x)},S.prototype.prependOnceListener=function(v,E,x){return this._once(v,E,!0,x)},S.prototype._once=function(v,E,x,C){return this._many(v,1,E,x,C)},S.prototype.many=function(v,E,x,C){return this._many(v,E,x,!1,C)},S.prototype.prependMany=function(v,E,x,C){return this._many(v,E,x,!0,C)},S.prototype._many=function(v,E,x,C,A){var _=this;if(typeof x!="function")throw new Error("many only accepts instances of Function");function T(){return--E===0&&_.off(v,T),x.apply(this,arguments)}return T._origin=x,this._on(v,T,C,A)},S.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var v=arguments[0],E,x=this.wildcard,C,A,_,T,R;if(v==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(x&&(E=v,v!=="newListener"&&v!=="removeListener"&&typeof v=="object")){if(A=v.length,a){for(_=0;_<A;_++)if(typeof v[_]=="symbol"){R=!0;break}}R||(v=v.join(this.delimiter))}var U=arguments.length,I;if(this._all&&this._all.length)for(I=this._all.slice(),_=0,A=I.length;_<A;_++)switch(this.event=v,U){case 1:I[_].call(this,v);break;case 2:I[_].call(this,v,arguments[1]);break;case 3:I[_].call(this,v,arguments[1],arguments[2]);break;default:I[_].apply(this,arguments)}if(x)I=[],j.call(this,I,E,this.listenerTree,0,A);else if(I=this._events[v],typeof I=="function"){switch(this.event=v,U){case 1:I.call(this);break;case 2:I.call(this,arguments[1]);break;case 3:I.call(this,arguments[1],arguments[2]);break;default:for(C=new Array(U-1),T=1;T<U;T++)C[T-1]=arguments[T];I.apply(this,C)}return!0}else I&&(I=I.slice());if(I&&I.length){if(U>3)for(C=new Array(U-1),T=1;T<U;T++)C[T-1]=arguments[T];for(_=0,A=I.length;_<A;_++)switch(this.event=v,U){case 1:I[_].call(this);break;case 2:I[_].call(this,arguments[1]);break;case 3:I[_].call(this,arguments[1],arguments[2]);break;default:I[_].apply(this,C)}return!0}else if(!this.ignoreErrors&&!this._all&&v==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},S.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var v=arguments[0],E=this.wildcard,x,C,A,_,T,R;if(v==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(E&&(x=v,v!=="newListener"&&v!=="removeListener"&&typeof v=="object")){if(_=v.length,a){for(T=0;T<_;T++)if(typeof v[T]=="symbol"){C=!0;break}}C||(v=v.join(this.delimiter))}var U=[],I=arguments.length,K;if(this._all)for(T=0,_=this._all.length;T<_;T++)switch(this.event=v,I){case 1:U.push(this._all[T].call(this,v));break;case 2:U.push(this._all[T].call(this,v,arguments[1]));break;case 3:U.push(this._all[T].call(this,v,arguments[1],arguments[2]));break;default:U.push(this._all[T].apply(this,arguments))}if(E?(K=[],j.call(this,K,x,this.listenerTree,0)):K=this._events[v],typeof K=="function")switch(this.event=v,I){case 1:U.push(K.call(this));break;case 2:U.push(K.call(this,arguments[1]));break;case 3:U.push(K.call(this,arguments[1],arguments[2]));break;default:for(A=new Array(I-1),R=1;R<I;R++)A[R-1]=arguments[R];U.push(K.apply(this,A))}else if(K&&K.length){if(K=K.slice(),I>3)for(A=new Array(I-1),R=1;R<I;R++)A[R-1]=arguments[R];for(T=0,_=K.length;T<_;T++)switch(this.event=v,I){case 1:U.push(K[T].call(this));break;case 2:U.push(K[T].call(this,arguments[1]));break;case 3:U.push(K[T].call(this,arguments[1],arguments[2]));break;default:U.push(K[T].apply(this,A))}}else if(!this.ignoreErrors&&!this._all&&v==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(U)},S.prototype.on=function(v,E,x){return this._on(v,E,!1,x)},S.prototype.prependListener=function(v,E,x){return this._on(v,E,!0,x)},S.prototype.onAny=function(v){return this._onAny(v,!1)},S.prototype.prependAny=function(v){return this._onAny(v,!0)},S.prototype.addListener=S.prototype.on,S.prototype._onAny=function(v,E){if(typeof v!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),E?this._all.unshift(v):this._all.push(v),this},S.prototype._on=function(v,E,x,C){if(typeof v=="function")return this._onAny(v,E),this;if(typeof E!="function")throw new Error("on only accepts instances of Function");this._events||f.call(this);var A=this,_;return C!==n&&(_=N.call(this,v,E,C),E=_[0],A=_[1]),this._newListener&&this.emit("newListener",v,E),this.wildcard?(L.call(this,v,E,x),A):(this._events[v]?(typeof this._events[v]=="function"&&(this._events[v]=[this._events[v]]),x?this._events[v].unshift(E):this._events[v].push(E),!this._events[v].warned&&this._maxListeners>0&&this._events[v].length>this._maxListeners&&(this._events[v].warned=!0,g.call(this,this._events[v].length,v))):this._events[v]=E,A)},S.prototype.off=function(v,E){if(typeof E!="function")throw new Error("removeListener only takes instances of Function");var x,C=[];if(this.wildcard){var A=typeof v=="string"?v.split(this.delimiter):v.slice();if(C=j.call(this,null,A,this.listenerTree,0),!C)return this}else{if(!this._events[v])return this;x=this._events[v],C.push({_listeners:x})}for(var _=0;_<C.length;_++){var T=C[_];if(x=T._listeners,i(x)){for(var R=-1,U=0,I=x.length;U<I;U++)if(x[U]===E||x[U].listener&&x[U].listener===E||x[U]._origin&&x[U]._origin===E){R=U;break}if(R<0)continue;return this.wildcard?T._listeners.splice(R,1):this._events[v].splice(R,1),x.length===0&&(this.wildcard?delete T._listeners:delete this._events[v]),this._removeListener&&this.emit("removeListener",v,E),this}else(x===E||x.listener&&x.listener===E||x._origin&&x._origin===E)&&(this.wildcard?delete T._listeners:delete this._events[v],this._removeListener&&this.emit("removeListener",v,E))}return this.listenerTree&&$(this.listenerTree),this},S.prototype.offAny=function(v){var E=0,x=0,C;if(v&&this._all&&this._all.length>0){for(C=this._all,E=0,x=C.length;E<x;E++)if(v===C[E])return C.splice(E,1),this._removeListener&&this.emit("removeListenerAny",v),this}else{if(C=this._all,this._removeListener)for(E=0,x=C.length;E<x;E++)this.emit("removeListenerAny",C[E]);this._all=[]}return this},S.prototype.removeListener=S.prototype.off,S.prototype.removeAllListeners=function(v){if(v===n)return!this._events||f.call(this),this;if(this.wildcard){var E=j.call(this,null,v,this.listenerTree,0),x,C;if(!E)return this;for(C=0;C<E.length;C++)x=E[C],x._listeners=null;this.listenerTree&&$(this.listenerTree)}else this._events&&(this._events[v]=null);return this},S.prototype.listeners=function(v){var E=this._events,x,C,A,_,T;if(v===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!E)return[];for(x=d(E),_=x.length,A=[];_-- >0;)C=E[x[_]],typeof C=="function"?A.push(C):A.push.apply(A,C);return A}else{if(this.wildcard){if(T=this.listenerTree,!T)return[];var R=[],U=typeof v=="string"?v.split(this.delimiter):v.slice();return j.call(this,R,U,T,0),R}return E?(C=E[v],C?typeof C=="function"?[C]:C:[]):[]}},S.prototype.eventNames=function(v){var E=this._events;return this.wildcard?V.call(this,this.listenerTree,[],null,v):E?d(E):[]},S.prototype.listenerCount=function(v){return this.listeners(v).length},S.prototype.hasListeners=function(v){if(this.wildcard){var E=[],x=typeof v=="string"?v.split(this.delimiter):v.slice();return j.call(this,E,x,this.listenerTree,0),E.length>0}var C=this._events,A=this._all;return!!(A&&A.length||C&&(v===n?d(C).length:C[v]))},S.prototype.listenersAny=function(){return this._all?this._all:[]},S.prototype.waitFor=function(v,E){var x=this,C=typeof E;return C==="number"?E={timeout:E}:C==="function"&&(E={filter:E}),E=b(E,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:O,Promise:w}),G(E.Promise,function(A,_,T){function R(){var U=E.filter;if(!(U&&!U.apply(x,arguments)))if(x.off(v,R),E.handleError){var I=arguments[0];I?_(I):A(p.apply(null,arguments).slice(1))}else A(p.apply(null,arguments))}T(function(){x.off(v,R)}),x._on(v,R,!1)},{timeout:E.timeout,overload:E.overload})};function k(v,E,x){x=b(x,{Promise,timeout:0,overload:!1},{Promise:w});var C=x.Promise;return G(C,function(A,_,T){var R;if(typeof v.addEventListener=="function"){R=function(){A(p.apply(null,arguments))},T(function(){v.removeEventListener(E,R)}),v.addEventListener(E,R,{once:!0});return}var U=function(){I&&v.removeListener("error",I),A(p.apply(null,arguments))},I;E!=="error"&&(I=function(K){v.removeListener(E,U),_(K)},v.once("error",I)),T(function(){I&&v.removeListener("error",I),v.removeListener(E,U)}),v.once(E,U)},{timeout:x.timeout,overload:x.overload})}var B=S.prototype;Object.defineProperties(S,{defaultMaxListeners:{get:function(){return B._maxListeners},set:function(v){if(typeof v!="number"||v<0||Number.isNaN(v))throw TypeError("n must be a non-negative number");B._maxListeners=v},enumerable:!0},once:{value:k,writable:!0,configurable:!0}}),Object.defineProperties(B,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=S})()})(Nf)),Nf.exports}var Fd=oO();const aO=Pg(Fd);var gl,cO=new Uint8Array(16);function lO(){if(!gl&&(gl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!gl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gl(cO)}const uO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ap(t){return typeof t=="string"&&uO.test(t)}var $t=[];for(var Mf=0;Mf<256;++Mf)$t.push((Mf+256).toString(16).substr(1));function dO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=($t[t[e+0]]+$t[t[e+1]]+$t[t[e+2]]+$t[t[e+3]]+"-"+$t[t[e+4]]+$t[t[e+5]]+"-"+$t[t[e+6]]+$t[t[e+7]]+"-"+$t[t[e+8]]+$t[t[e+9]]+"-"+$t[t[e+10]]+$t[t[e+11]]+$t[t[e+12]]+$t[t[e+13]]+$t[t[e+14]]+$t[t[e+15]]).toLowerCase();if(!ap(n))throw TypeError("Stringified UUID is invalid");return n}function Yi(t,e,n){t=t||{};var r=t.random||(t.rng||lO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,dO(r)}const zr=Object.create(null);zr.open="0";zr.close="1";zr.ping="2";zr.pong="3";zr.message="4";zr.upgrade="5";zr.noop="6";const Wl=Object.create(null);Object.keys(zr).forEach(t=>{Wl[zr[t]]=t});const cp={type:"error",data:"parser error"},g2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",m2=typeof ArrayBuffer=="function",y2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Ig=({type:t,data:e},n,r)=>g2&&e instanceof Blob?n?r(e):$y(e,r):m2&&(e instanceof ArrayBuffer||y2(e))?n?r(e):$y(new Blob([e]),r):r(zr[t]+(e||"")),$y=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Fy(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Lf;function fO(t,e){if(g2&&t.data instanceof Blob)return t.data.arrayBuffer().then(Fy).then(e);if(m2&&(t.data instanceof ArrayBuffer||y2(t.data)))return e(Fy(t.data));Ig(t,!1,n=>{Lf||(Lf=new TextEncoder),e(Lf.encode(n))})}const Hy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",La=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Hy.length;t++)La[Hy.charCodeAt(t)]=t;const hO=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)s=La[t.charCodeAt(r)],o=La[t.charCodeAt(r+1)],a=La[t.charCodeAt(r+2)],c=La[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},pO=typeof ArrayBuffer=="function",Rg=(t,e)=>{if(typeof t!="string")return{type:"message",data:v2(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:gO(t.substring(1),e)}:Wl[n]?t.length>1?{type:Wl[n],data:t.substring(1)}:{type:Wl[n]}:cp},gO=(t,e)=>{if(pO){const n=hO(t);return v2(n,e)}else return{base64:!0,data:t}},v2=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},w2="",mO=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{Ig(s,!1,a=>{r[o]=a,++i===n&&e(r.join(w2))})})},yO=(t,e)=>{const n=t.split(w2),r=[];for(let i=0;i<n.length;i++){const s=Rg(n[i],e);if(r.push(s),s.type==="error")break}return r};function vO(){return new TransformStream({transform(t,e){fO(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Bf;function ml(t){return t.reduce((e,n)=>e+n.length,0)}function yl(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function wO(t,e){Bf||(Bf=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(ml(n)<1)break;const c=yl(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(ml(n)<2)break;const c=yl(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(ml(n)<8)break;const c=yl(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(cp);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(ml(n)<i)break;const c=yl(n,i);a.enqueue(Rg(s?c:Bf.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(cp);break}}}})}const b2=4;function kt(t){if(t)return bO(t)}function bO(t){for(var e in kt.prototype)t[e]=kt.prototype[e];return t}kt.prototype.on=kt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};kt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};kt.prototype.off=kt.prototype.removeListener=kt.prototype.removeAllListeners=kt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};kt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};kt.prototype.emitReserved=kt.prototype.emit;kt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};kt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Hd=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Xn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),EO="arraybuffer";function E2(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const AO=Xn.setTimeout,_O=Xn.clearTimeout;function Kd(t,e){e.useNativeTimers?(t.setTimeoutFn=AO.bind(Xn),t.clearTimeoutFn=_O.bind(Xn)):(t.setTimeoutFn=Xn.setTimeout.bind(Xn),t.clearTimeoutFn=Xn.clearTimeout.bind(Xn))}const SO=1.33;function CO(t){return typeof t=="string"?xO(t):Math.ceil((t.byteLength||t.size)*SO)}function xO(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function A2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function kO(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function TO(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class PO extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Og extends kt{constructor(e){super(),this.writable=!1,Kd(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new PO(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Rg(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=kO(e);return n.length?"?"+n:""}}class IO extends Og{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};yO(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,mO(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=A2()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let _2=!1;try{_2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const RO=_2;function OO(){}class NO extends IO{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Fr extends kt{constructor(e,n,r){super(),this.createRequest=e,Kd(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=E2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Fr.requestsCount++,Fr.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=OO,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Fr.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Fr.requestsCount=0;Fr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ky);else if(typeof addEventListener=="function"){const t="onpagehide"in Xn?"pagehide":"unload";addEventListener(t,Ky,!1)}}function Ky(){for(let t in Fr.requests)Fr.requests.hasOwnProperty(t)&&Fr.requests[t].abort()}const MO=(function(){const t=S2({xdomain:!1});return t&&t.responseType!==null})();class LO extends NO{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=MO&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Fr(S2,this.uri(),e)}}function S2(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||RO))return new XMLHttpRequest}catch{}if(!e)try{return new Xn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const C2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class BO extends Og{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=C2?{}:E2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Ig(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Hd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=A2()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Df=Xn.WebSocket||Xn.MozWebSocket;class DO extends BO{createSocket(e,n,r){return C2?new Df(e,n,r):n?new Df(e,n):new Df(e)}doWrite(e,n){this.ws.send(n)}}class UO extends Og{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=wO(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=vO();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Hd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const $O={websocket:DO,webtransport:UO,polling:LO},FO=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,HO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lp(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=FO.exec(t||""),s={},o=14;for(;o--;)s[HO[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=KO(s,s.path),s.queryKey=jO(s,s.query),s}function KO(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function jO(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const up=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ql=[];up&&addEventListener("offline",()=>{Ql.forEach(t=>t())},!1);class ss extends kt{constructor(e,n){if(super(),this.binaryType=EO,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=lp(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=lp(n.host).host);Kd(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=TO(this.opts.query)),up&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ql.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=b2,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ss.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ss.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=CO(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Hd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ss.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),up&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Ql.indexOf(this._offlineEventListener);r!==-1&&Ql.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ss.protocol=b2;class VO extends ss{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ss.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ss.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function c(){o("socket closed")}function l(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let zO=class extends VO{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>$O[i]).filter(i=>!!i)),super(e,r)}};function GO(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=lp(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const qO=typeof ArrayBuffer=="function",WO=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,x2=Object.prototype.toString,QO=typeof Blob=="function"||typeof Blob<"u"&&x2.call(Blob)==="[object BlobConstructor]",JO=typeof File=="function"||typeof File<"u"&&x2.call(File)==="[object FileConstructor]";function Ng(t){return qO&&(t instanceof ArrayBuffer||WO(t))||QO&&t instanceof Blob||JO&&t instanceof File}function Jl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Jl(t[n]))return!0;return!1}if(Ng(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Jl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Jl(t[n]))return!0;return!1}function YO(t){const e=[],n=t.data,r=t;return r.data=dp(n,e),r.attachments=e.length,{packet:r,buffers:e}}function dp(t,e){if(!t)return t;if(Ng(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=dp(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=dp(t[r],e));return n}return t}function ZO(t,e){return t.data=fp(t.data,e),delete t.attachments,t}function fp(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=fp(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=fp(t[n],e));return t}const XO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],e8=5;var Ke;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ke||(Ke={}));class t8{constructor(e){this.replacer=e}encode(e){return(e.type===Ke.EVENT||e.type===Ke.ACK)&&Jl(e)?this.encodeAsBinary({type:e.type===Ke.EVENT?Ke.BINARY_EVENT:Ke.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Ke.BINARY_EVENT||e.type===Ke.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=YO(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function jy(t){return Object.prototype.toString.call(t)==="[object Object]"}class Mg extends kt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Ke.BINARY_EVENT;r||n.type===Ke.BINARY_ACK?(n.type=r?Ke.EVENT:Ke.ACK,this.reconstructor=new n8(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ng(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Ke[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ke.BINARY_EVENT||r.type===Ke.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(Mg.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Ke.CONNECT:return jy(n);case Ke.DISCONNECT:return n===void 0;case Ke.CONNECT_ERROR:return typeof n=="string"||jy(n);case Ke.EVENT:case Ke.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&XO.indexOf(n[0])===-1);case Ke.ACK:case Ke.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class n8{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=ZO(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const r8=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mg,Encoder:t8,get PacketType(){return Ke},protocol:e8},Symbol.toStringTag,{value:"Module"}));function ur(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const i8=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class k2 extends kt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ur(e,"open",this.onopen.bind(this)),ur(e,"packet",this.onpacket.bind(this)),ur(e,"error",this.onerror.bind(this)),ur(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(i8.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Ke.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ke.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ke.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ke.EVENT:case Ke.BINARY_EVENT:this.onevent(e);break;case Ke.ACK:case Ke.BINARY_ACK:this.onack(e);break;case Ke.DISCONNECT:this.ondisconnect();break;case Ke.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Ke.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ke.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function ga(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ga.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};ga.prototype.reset=function(){this.attempts=0};ga.prototype.setMin=function(t){this.ms=t};ga.prototype.setMax=function(t){this.max=t};ga.prototype.setJitter=function(t){this.jitter=t};class hp extends kt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Kd(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ga({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||r8;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new zO(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=ur(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=ur(n,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ur(e,"ping",this.onping.bind(this)),ur(e,"data",this.ondata.bind(this)),ur(e,"error",this.onerror.bind(this)),ur(e,"close",this.onclose.bind(this)),ur(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Hd(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new k2(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Sa={};function Vo(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=GO(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Sa[i]&&s in Sa[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new hp(r,e):(Sa[i]||(Sa[i]=new hp(r,e)),c=Sa[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Vo,{Manager:hp,Socket:k2,io:Vo,connect:Vo});function de(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(d){d(u)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}var yn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Or=[],Qn=[],s8=typeof Uint8Array<"u"?Uint8Array:Array,Lg=!1;function T2(){Lg=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Or[e]=t[e],Qn[t.charCodeAt(e)]=e;Qn[45]=62,Qn[95]=63}function o8(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(Or[(i=r)>>18&63]+Or[i>>12&63]+Or[i>>6&63]+Or[63&i]);return s.join("")}function Vy(t){var e;Lg||T2();for(var n=t.length,r=n%3,i="",s=[],o=16383,a=0,c=n-r;a<c;a+=o)s.push(o8(t,a,a+o>c?c:a+o));return r===1?(e=t[n-1],i+=Or[e>>2],i+=Or[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Or[e>>10],i+=Or[e>>4&63],i+=Or[e<<2&63],i+="="),s.push(i),s.join("")}function vl(t,e,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+t[e+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+d],d+=f,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),s-=l}return(h?-1:1)*o*Math.pow(2,s-r)}function P2(t,e,n,r,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,g=r?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&a,h+=g,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[n+h]=255&o,h+=g,o/=256,l-=8);t[n+h-g]|=128*p}var a8={}.toString,I2=Array.isArray||function(t){return a8.call(t)=="[object Array]"};pe.TYPED_ARRAY_SUPPORT=yn.TYPED_ARRAY_SUPPORT===void 0||yn.TYPED_ARRAY_SUPPORT;var c8=Lu();function Lu(){return pe.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ui(t,e){if(Lu()<e)throw new RangeError("Invalid typed array length");return pe.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=pe.prototype:(t===null&&(t=new pe(e)),t.length=e),t}function pe(t,e,n){if(!(pe.TYPED_ARRAY_SUPPORT||this instanceof pe))return new pe(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return pp(this,t)}return R2(this,t,e,n)}function R2(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?(function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),pe.TYPED_ARRAY_SUPPORT?(i=s).__proto__=pe.prototype:i=Uf(i,s),i})(t,e,n,r):typeof e=="string"?(function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!pe.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|N2(s,o);i=ui(i,a);var c=i.write(s,o);return c!==a&&(i=i.slice(0,c)),i})(t,e,n):(function(i,s){if(Nr(s)){var o=0|Bg(s.length);return(i=ui(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?ui(i,0):Uf(i,s);if(s.type==="Buffer"&&I2(s.data))return Uf(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")})(t,e)}function O2(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function pp(t,e){if(O2(e),t=ui(t,e<0?0:0|Bg(e)),!pe.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function Uf(t,e){var n=e.length<0?0:0|Bg(e.length);t=ui(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function Bg(t){if(t>=Lu())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Lu().toString(16)+" bytes");return 0|t}function Nr(t){return!(t==null||!t._isBuffer)}function N2(t,e){if(Nr(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Bu(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D2(t).length;default:if(r)return Bu(t).length;e=(""+e).toLowerCase(),r=!0}}function l8(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return v8(this,e,n);case"utf8":case"utf-8":return L2(this,e,n);case"ascii":return m8(this,e,n);case"latin1":case"binary":return y8(this,e,n);case"base64":return g8(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w8(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function As(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function zy(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=pe.from(e,r)),Nr(e))return e.length===0?-1:Gy(t,e,n,r,i);if(typeof e=="number")return e&=255,pe.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Gy(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Gy(t,e,n,r,i){var s,o=1,a=t.length,c=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function l(h,g){return o===1?h[g]:h.readUInt16BE(g*o)}if(i){var u=-1;for(s=n;s<a;s++)if(l(t,s)===l(e,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===c)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var d=!0,f=0;f<c;f++)if(l(t,s+f)!==l(e,f)){d=!1;break}if(d)return s}return-1}function u8(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function d8(t,e,n,r){return jd(Bu(e,t.length-n),t,n,r)}function M2(t,e,n,r){return jd((function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s})(e),t,n,r)}function f8(t,e,n,r){return M2(t,e,n,r)}function h8(t,e,n,r){return jd(D2(e),t,n,r)}function p8(t,e,n,r){return jd((function(i,s){for(var o,a,c,l=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,c=o%256,l.push(c),l.push(a);return l})(e,t.length-n),t,n,r)}function g8(t,e,n){return e===0&&n===t.length?Vy(t):Vy(t.slice(e,n))}function L2(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,c,l=t[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:(192&(s=t[i+1]))==128&&(c=(31&l)<<6|63&s)>127&&(u=c);break;case 3:s=t[i+1],o=t[i+2],(192&s)==128&&(192&o)==128&&(c=(15&l)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}u===null?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return(function(f){var h=f.length;if(h<=qy)return String.fromCharCode.apply(String,f);for(var g="",p=0;p<h;)g+=String.fromCharCode.apply(String,f.slice(p,p+=qy));return g})(r)}pe.poolSize=8192,pe._augment=function(t){return t.__proto__=pe.prototype,t},pe.from=function(t,e,n){return R2(null,t,e,n)},pe.TYPED_ARRAY_SUPPORT&&(pe.prototype.__proto__=Uint8Array.prototype,pe.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&pe[Symbol.species]),pe.alloc=function(t,e,n){return(function(r,i,s,o){return O2(i),i<=0?ui(r,i):s!==void 0?typeof o=="string"?ui(r,i).fill(s,o):ui(r,i).fill(s):ui(r,i)})(null,t,e,n)},pe.allocUnsafe=function(t){return pp(null,t)},pe.allocUnsafeSlow=function(t){return pp(null,t)},pe.isBuffer=U2,pe.compare=function(t,e){if(!Nr(t)||!Nr(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},pe.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},pe.concat=function(t,e){if(!I2(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return pe.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=pe.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!Nr(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},pe.byteLength=N2,pe.prototype._isBuffer=!0,pe.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)As(this,e,e+1);return this},pe.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)As(this,e,e+3),As(this,e+1,e+2);return this},pe.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)As(this,e,e+7),As(this,e+1,e+6),As(this,e+2,e+5),As(this,e+3,e+4);return this},pe.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?L2(this,0,t):l8.apply(this,arguments)},pe.prototype.equals=function(t){if(!Nr(t))throw new TypeError("Argument must be a Buffer");return this===t||pe.compare(this,t)===0},pe.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},pe.prototype.compare=function(t,e,n,r,i){if(!Nr(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),c=this.slice(r,i),l=t.slice(e,n),u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},pe.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},pe.prototype.indexOf=function(t,e,n){return zy(this,t,e,n,!0)},pe.prototype.lastIndexOf=function(t,e,n){return zy(this,t,e,n,!1)},pe.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return u8(this,t,e,n);case"utf8":case"utf-8":return d8(this,t,e,n);case"ascii":return M2(this,t,e,n);case"latin1":case"binary":return f8(this,t,e,n);case"base64":return h8(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p8(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},pe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var qy=4096;function m8(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function y8(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function v8(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=E8(t[s]);return i}function w8(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Rt(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function wn(t,e,n,r,i,s){if(!Nr(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function wl(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function bl(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function B2(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Wy(t,e,n,r,i){return i||B2(t,0,n,4),P2(t,e,n,r,23,4),n+4}function Qy(t,e,n,r,i){return i||B2(t,0,n,8),P2(t,e,n,r,52,8),n+8}pe.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),pe.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=pe.prototype;else{var i=e-t;n=new pe(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},pe.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},pe.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},pe.prototype.readUInt8=function(t,e){return e||Rt(t,1,this.length),this[t]},pe.prototype.readUInt16LE=function(t,e){return e||Rt(t,2,this.length),this[t]|this[t+1]<<8},pe.prototype.readUInt16BE=function(t,e){return e||Rt(t,2,this.length),this[t]<<8|this[t+1]},pe.prototype.readUInt32LE=function(t,e){return e||Rt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},pe.prototype.readUInt32BE=function(t,e){return e||Rt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},pe.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},pe.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},pe.prototype.readInt8=function(t,e){return e||Rt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},pe.prototype.readInt16LE=function(t,e){e||Rt(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},pe.prototype.readInt16BE=function(t,e){e||Rt(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},pe.prototype.readInt32LE=function(t,e){return e||Rt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},pe.prototype.readInt32BE=function(t,e){return e||Rt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},pe.prototype.readFloatLE=function(t,e){return e||Rt(t,4,this.length),vl(this,t,!0,23,4)},pe.prototype.readFloatBE=function(t,e){return e||Rt(t,4,this.length),vl(this,t,!1,23,4)},pe.prototype.readDoubleLE=function(t,e){return e||Rt(t,8,this.length),vl(this,t,!0,52,8)},pe.prototype.readDoubleBE=function(t,e){return e||Rt(t,8,this.length),vl(this,t,!1,52,8)},pe.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||wn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},pe.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||wn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},pe.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,1,255,0),pe.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},pe.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,65535,0),pe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):wl(this,t,e,!0),e+2},pe.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,65535,0),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):wl(this,t,e,!1),e+2},pe.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,4294967295,0),pe.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):bl(this,t,e,!0),e+4},pe.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,4294967295,0),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):bl(this,t,e,!1),e+4},pe.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);wn(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&a===0&&this[e+s-1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},pe.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);wn(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&a===0&&this[e+s+1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},pe.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,1,127,-128),pe.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},pe.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,32767,-32768),pe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):wl(this,t,e,!0),e+2},pe.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,32767,-32768),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):wl(this,t,e,!1),e+2},pe.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,2147483647,-2147483648),pe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):bl(this,t,e,!0),e+4},pe.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):bl(this,t,e,!1),e+4},pe.prototype.writeFloatLE=function(t,e,n){return Wy(this,t,e,!0,n)},pe.prototype.writeFloatBE=function(t,e,n){return Wy(this,t,e,!1,n)},pe.prototype.writeDoubleLE=function(t,e,n){return Qy(this,t,e,!0,n)},pe.prototype.writeDoubleBE=function(t,e,n){return Qy(this,t,e,!1,n)},pe.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!pe.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},pe.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!pe.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(s=e;s<n;++s)this[s]=t;else{var o=Nr(t)?t:Bu(new pe(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var b8=/[^+\/0-9A-Za-z-_]/g;function E8(t){return t<16?"0"+t.toString(16):t.toString(16)}function Bu(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function D2(t){return(function(e){var n,r,i,s,o,a;Lg||T2();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[c-2]==="="?2:e[c-1]==="="?1:0,a=new s8(3*c/4-o),i=o>0?c-4:c;var l=0;for(n=0,r=0;n<i;n+=4,r+=3)s=Qn[e.charCodeAt(n)]<<18|Qn[e.charCodeAt(n+1)]<<12|Qn[e.charCodeAt(n+2)]<<6|Qn[e.charCodeAt(n+3)],a[l++]=s>>16&255,a[l++]=s>>8&255,a[l++]=255&s;return o===2?(s=Qn[e.charCodeAt(n)]<<2|Qn[e.charCodeAt(n+1)]>>4,a[l++]=255&s):o===1&&(s=Qn[e.charCodeAt(n)]<<10|Qn[e.charCodeAt(n+1)]<<4|Qn[e.charCodeAt(n+2)]>>2,a[l++]=s>>8&255,a[l++]=255&s),a})((function(e){if((e=(function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")})(e).replace(b8,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e})(t))}function jd(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function U2(t){return t!=null&&(!!t._isBuffer||Jy(t)||(function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Jy(e.slice(0,0))})(t))}function Jy(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var A8=Object.freeze({__proto__:null,Buffer:pe,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),pe.alloc(+t)},isBuffer:U2,kMaxLength:c8}),er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})})),n}var bo={},Kn={},Wt={};function Du(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function $2(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function F2(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Dg(t,...e){if(!F2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function H2(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");Du(t.outputLen),Du(t.blockLen)}function K2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function j2(t,e){Dg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.isBytes=F2,Wt.number=Du,Wt.bool=$2,Wt.bytes=Dg,Wt.hash=H2,Wt.exists=K2,Wt.output=j2;const _8={number:Du,bool:$2,bytes:Dg,hash:H2,exists:K2,output:j2};Wt.default=_8,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=o,t.hexToNumber=a,t.bytesToNumberBE=function(d){return a(r(d))},t.numberToBytesBE=function(d,f){return o(d.toString(16).padStart(2*f,"0"))},t.asyncLoop=async function(d,f,h){let g=Date.now();for(let p=0;p<d;p++){h(p);const y=Date.now()-g;y>=0&&y<f||(await(0,t.nextTick)(),g+=y)}},t.utf8ToBytes=c,t.bytesToUtf8=function(d){return new TextDecoder().decode(d)},t.toBytes=function(d){if(typeof d=="string")d=c(d);else{if(!(0,e.isBytes)(d))throw new Error("Uint8Array expected, got "+typeof d);d=u(d)}return d},t.concatBytes=function(...d){let f=0;for(let g=0;g<d.length;g++){const p=d[g];(0,e.bytes)(p),f+=p.length}const h=new Uint8Array(f);for(let g=0,p=0;g<d.length;g++){const y=d[g];h.set(y,p),p+=y.length}return h},t.checkOpts=function(d,f){if(f==null||typeof f!="object")throw new Error("options must be defined");return Object.assign(d,f)},t.equalBytes=function(d,f){if(d.length!==f.length)return!1;let h=0;for(let g=0;g<d.length;g++)h|=d[g]^f[g];return h===0},t.setBigUint64=l,t.u64Lengths=function(d,f){const h=new Uint8Array(16),g=(0,t.createView)(h);return l(g,0,BigInt(f?f.length:0),!0),l(g,8,BigInt(d.length),!0),h},t.isAligned32=function(d){return d.byteOffset%4==0},t.copyBytes=u,t.clean=function(...d){for(let f=0;f<d.length;f++)d[f].fill(0)};const e=Wt;if(t.u8=d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength),t.u16=d=>new Uint16Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/2)),t.u32=d=>new Uint32Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/4)),t.createView=d=>new DataView(d.buffer,d.byteOffset,d.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((d,f)=>f.toString(16).padStart(2,"0")));function r(d){(0,e.bytes)(d);let f="";for(let h=0;h<d.length;h++)f+=n[d[h]];return f}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(d){return d>=i._0&&d<=i._9?d-i._0:d>=i._A&&d<=i._F?d-(i._A-10):d>=i._a&&d<=i._f?d-(i._a-10):void 0}function o(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);const f=d.length,h=f/2;if(f%2)throw new Error("padded hex string expected, got unpadded hex of length "+f);const g=new Uint8Array(h);for(let p=0,y=0;p<h;p++,y+=2){const m=s(d.charCodeAt(y)),b=s(d.charCodeAt(y+1));if(m===void 0||b===void 0){const w=d[y]+d[y+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+y)}g[p]=16*m+b}return g}function a(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);return BigInt(d===""?"0":`0x${d}`)}function c(d){if(typeof d!="string")throw new Error("string expected, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))}t.nextTick=async()=>{},t.Hash=class{};function l(d,f,h,g){if(typeof d.setBigUint64=="function")return d.setBigUint64(f,h,g);const p=BigInt(32),y=BigInt(4294967295),m=Number(h>>p&y),b=Number(h&y),w=g?4:0,P=g?0:4;d.setUint32(f+w,m,g),d.setUint32(f+P,b,g)}function u(d){return Uint8Array.from(d)}t.wrapCipher=(d,f)=>(Object.assign(f,d),f)})(Kn);var bc={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.AEAD_TAG_LENGTH=Ot.XCHACHA20_NONCE_LENGTH=Ot.CURVE25519_PUBLIC_KEY_SIZE=Ot.ETH_PUBLIC_KEY_SIZE=Ot.UNCOMPRESSED_PUBLIC_KEY_SIZE=Ot.COMPRESSED_PUBLIC_KEY_SIZE=Ot.SECRET_KEY_LENGTH=void 0,Ot.SECRET_KEY_LENGTH=32,Ot.COMPRESSED_PUBLIC_KEY_SIZE=33,Ot.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,Ot.ETH_PUBLIC_KEY_SIZE=64,Ot.CURVE25519_PUBLIC_KEY_SIZE=32,Ot.XCHACHA20_NONCE_LENGTH=24,Ot.AEAD_TAG_LENGTH=16,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=Ot,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}})(bc);var $f={},Uu={},zd={},V2={},Ug={},El={};Object.defineProperty(El,"__esModule",{value:!0}),El.crypto=void 0,El.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=s,t.managedNonce=function(c){return(0,n.number)(c.nonceLength),(l,...u)=>({encrypt(d,...f){const{nonceLength:h}=c,g=i(h),p=c(l,g,...u).encrypt(d,...f),y=(0,r.concatBytes)(g,p);return p.fill(0),y},decrypt(d,...f){const{nonceLength:h}=c,g=d.subarray(0,h),p=d.subarray(h);return c(l,g,...u).decrypt(p,...f)}})};const e=El,n=Wt,r=Kn;function i(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function s(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(c,l,u,d){const f=s(),h=await f.importKey("raw",c,l,!0,["encrypt"]),g=await f.encrypt(u,h,d);return new Uint8Array(g)},async decrypt(c,l,u,d){const f=s(),h=await f.importKey("raw",c,l,!0,["decrypt"]),g=await f.decrypt(u,h,d);return new Uint8Array(g)}};const o={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(c){return(l,u,d)=>{(0,n.bytes)(l),(0,n.bytes)(u);const f={name:c,length:8*l.length},h=(function(g,p,y){if(g===o.CBC)return{name:o.CBC,iv:p};if(g===o.CTR)return{name:o.CTR,counter:p,length:64};if(g===o.GCM)return y?{name:o.GCM,iv:p,additionalData:y}:{name:o.GCM,iv:p};throw new Error("unknown aes block mode")})(c,u,d);return{encrypt:g=>((0,n.bytes)(g),t.utils.encrypt(l,f,h,g)),decrypt:g=>((0,n.bytes)(g),t.utils.decrypt(l,f,h,g))}}}t.cbc=a(o.CBC),t.ctr=a(o.CTR),t.gcm=a(o.GCM)})(Ug);var z2={},Nt={},di={},Bn={};function $u(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function G2(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function q2(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function $g(t,...e){if(!q2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function W2(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");$u(t.outputLen),$u(t.blockLen)}function Q2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function J2(t,e){$g(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.isBytes=q2,Bn.number=$u,Bn.bool=G2,Bn.bytes=$g,Bn.hash=W2,Bn.exists=Q2,Bn.output=J2;const S8={number:$u,bool:G2,bytes:$g,hash:W2,exists:Q2,output:J2};Bn.default=S8;var Ci={},Al={};Object.defineProperty(Al,"__esModule",{value:!0}),Al.crypto=void 0,Al.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"},t.byteSwap32=function(l){for(let u=0;u<l.length;u++)l[u]=(0,t.byteSwap)(l[u])},t.bytesToHex=function(l){(0,n.bytes)(l);let u="";for(let d=0;d<l.length;d++)u+=r[l[d]];return u},t.hexToBytes=function(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);const u=l.length,d=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const f=new Uint8Array(d);for(let h=0,g=0;h<d;h++,g+=2){const p=s(l.charCodeAt(g)),y=s(l.charCodeAt(g+1));if(p===void 0||y===void 0){const m=l[g]+l[g+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+g)}f[h]=16*p+y}return f},t.asyncLoop=async function(l,u,d){let f=Date.now();for(let h=0;h<l;h++){d(h);const g=Date.now()-f;g>=0&&g<u||(await(0,t.nextTick)(),f+=g)}},t.utf8ToBytes=o,t.toBytes=a,t.concatBytes=function(...l){let u=0;for(let f=0;f<l.length;f++){const h=l[f];(0,n.bytes)(h),u+=h.length}const d=new Uint8Array(u);for(let f=0,h=0;f<l.length;f++){const g=l[f];d.set(g,h),h+=g.length}return d},t.checkOpts=function(l,u){if(u!==void 0&&c.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(l,u)},t.wrapConstructor=function(l){const u=f=>l().update(a(f)).digest(),d=l();return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=()=>l(),u},t.wrapConstructorWithOpts=function(l){const u=(f,h)=>l(h).update(a(f)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>l(f),u},t.wrapXOFConstructorWithOpts=function(l){const u=(f,h)=>l(h).update(a(f)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>l(f),u},t.randomBytes=function(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")};const e=Al,n=Bn;t.u8=l=>new Uint8Array(l.buffer,l.byteOffset,l.byteLength),t.u32=l=>new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4)),t.createView=l=>new DataView(l.buffer,l.byteOffset,l.byteLength),t.rotr=(l,u)=>l<<32-u|l>>>u,t.rotl=(l,u)=>l<<u|l>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=l=>l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255,t.byteSwapIfBE=t.isLE?l=>l:l=>(0,t.byteSwap)(l);const r=Array.from({length:256},((l,u)=>u.toString(16).padStart(2,"0"))),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(l){return l>=i._0&&l<=i._9?l-i._0:l>=i._A&&l<=i._F?l-(i._A-10):l>=i._a&&l<=i._f?l-(i._a-10):void 0}function o(l){if(typeof l!="string")throw new Error("utf8ToBytes expected string, got "+typeof l);return new Uint8Array(new TextEncoder().encode(l))}function a(l){return typeof l=="string"&&(l=o(l)),(0,n.bytes)(l),l}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString})(Ci),Object.defineProperty(di,"__esModule",{value:!0}),di.HashMD=di.Maj=di.Chi=void 0;const Ff=Bn,Ca=Ci;di.Chi=(t,e,n)=>t&e^~t&n;di.Maj=(t,e,n)=>t&e^t&n^e&n;di.HashMD=class extends Ca.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Ca.createView)(this.buffer)}update(t){(0,Ff.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,Ca.toBytes)(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,Ca.createView)(t);for(;r<=i-s;s+=r)this.process(a,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,Ff.exists)(this),(0,Ff.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)e[u]=0;(function(u,d,f,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(d,f,h);const g=BigInt(32),p=BigInt(4294967295),y=Number(f>>g&p),m=Number(f&p),b=h?4:0,w=h?0:4;u.setUint32(d+b,y,h),u.setUint32(d+w,m,h)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=(0,Ca.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}};var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.add5L=Ne.add5H=Ne.add4H=Ne.add4L=Ne.add3H=Ne.add3L=Ne.rotlBL=Ne.rotlBH=Ne.rotlSL=Ne.rotlSH=Ne.rotr32L=Ne.rotr32H=Ne.rotrBL=Ne.rotrBH=Ne.rotrSL=Ne.rotrSH=Ne.shrSL=Ne.shrSH=Ne.toBig=void 0,Ne.fromBig=Fg,Ne.split=Y2,Ne.add=dA;const _l=BigInt(2**32-1),gp=BigInt(32);function Fg(t,e=!1){return e?{h:Number(t&_l),l:Number(t>>gp&_l)}:{h:0|Number(t>>gp&_l),l:0|Number(t&_l)}}function Y2(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Fg(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const Z2=(t,e)=>BigInt(t>>>0)<<gp|BigInt(e>>>0);Ne.toBig=Z2;const X2=(t,e,n)=>t>>>n;Ne.shrSH=X2;const eA=(t,e,n)=>t<<32-n|e>>>n;Ne.shrSL=eA;const tA=(t,e,n)=>t>>>n|e<<32-n;Ne.rotrSH=tA;const nA=(t,e,n)=>t<<32-n|e>>>n;Ne.rotrSL=nA;const rA=(t,e,n)=>t<<64-n|e>>>n-32;Ne.rotrBH=rA;const iA=(t,e,n)=>t>>>n-32|e<<64-n;Ne.rotrBL=iA;const sA=(t,e)=>e;Ne.rotr32H=sA;const oA=(t,e)=>t;Ne.rotr32L=oA;const aA=(t,e,n)=>t<<n|e>>>32-n;Ne.rotlSH=aA;const cA=(t,e,n)=>e<<n|t>>>32-n;Ne.rotlSL=cA;const lA=(t,e,n)=>e<<n-32|t>>>64-n;Ne.rotlBH=lA;const uA=(t,e,n)=>t<<n-32|e>>>64-n;function dA(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}Ne.rotlBL=uA;const fA=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Ne.add3L=fA;const hA=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Ne.add3H=hA;const pA=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Ne.add4L=pA;const gA=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Ne.add4H=gA;const mA=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Ne.add5L=mA;const yA=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;Ne.add5H=yA;const C8={fromBig:Fg,split:Y2,toBig:Z2,shrSH:X2,shrSL:eA,rotrSH:tA,rotrSL:nA,rotrBH:rA,rotrBL:iA,rotr32H:sA,rotr32L:oA,rotlSH:aA,rotlSL:cA,rotlBH:lA,rotlBL:uA,add:dA,add3L:fA,add3H:hA,add4L:pA,add4H:gA,add5H:yA,add5L:mA};Ne.default=C8,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.sha384=Nt.sha512_256=Nt.sha512_224=Nt.sha512=Nt.SHA384=Nt.SHA512_256=Nt.SHA512_224=Nt.SHA512=void 0;const x8=di,De=Ne,Sl=Ci,[k8,T8]=De.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),Ri=new Uint32Array(80),Oi=new Uint32Array(80);class Jc extends x8.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:g,Hh:p,Hl:y}=this;return[e,n,r,i,s,o,a,c,l,u,d,f,h,g,p,y]}set(e,n,r,i,s,o,a,c,l,u,d,f,h,g,p,y){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|c,this.Eh=0|l,this.El=0|u,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|g,this.Hh=0|p,this.Hl=0|y}process(e,n){for(let w=0;w<16;w++,n+=4)Ri[w]=e.getUint32(n),Oi[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const P=0|Ri[w-15],O=0|Oi[w-15],H=De.default.rotrSH(P,O,1)^De.default.rotrSH(P,O,8)^De.default.shrSH(P,O,7),G=De.default.rotrSL(P,O,1)^De.default.rotrSL(P,O,8)^De.default.shrSL(P,O,7),q=0|Ri[w-2],j=0|Oi[w-2],L=De.default.rotrSH(q,j,19)^De.default.rotrBH(q,j,61)^De.default.shrSH(q,j,6),V=De.default.rotrSL(q,j,19)^De.default.rotrBL(q,j,61)^De.default.shrSL(q,j,6),$=De.default.add4L(G,V,Oi[w-7],Oi[w-16]),D=De.default.add4H($,H,L,Ri[w-7],Ri[w-16]);Ri[w]=0|D,Oi[w]=0|$}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:g,Gh:p,Gl:y,Hh:m,Hl:b}=this;for(let w=0;w<80;w++){const P=De.default.rotrSH(d,f,14)^De.default.rotrSH(d,f,18)^De.default.rotrBH(d,f,41),O=De.default.rotrSL(d,f,14)^De.default.rotrSL(d,f,18)^De.default.rotrBL(d,f,41),H=d&h^~d&p,G=f&g^~f&y,q=De.default.add5L(b,O,G,T8[w],Oi[w]),j=De.default.add5H(q,m,P,H,k8[w],Ri[w]),L=0|q,V=De.default.rotrSH(r,i,28)^De.default.rotrBH(r,i,34)^De.default.rotrBH(r,i,39),$=De.default.rotrSL(r,i,28)^De.default.rotrBL(r,i,34)^De.default.rotrBL(r,i,39),D=r&s^r&a^s&a,N=i&o^i&c^o&c;m=0|p,b=0|y,p=0|h,y=0|g,h=0|d,g=0|f,{h:d,l:f}=De.default.add(0|l,0|u,0|j,0|L),l=0|a,u=0|c,a=0|s,c=0|o,s=0|r,o=0|i;const S=De.default.add3L(L,$,N);r=De.default.add3H(S,j,V,D),i=0|S}({h:r,l:i}=De.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:s,l:o}=De.default.add(0|this.Bh,0|this.Bl,0|s,0|o),{h:a,l:c}=De.default.add(0|this.Ch,0|this.Cl,0|a,0|c),{h:l,l:u}=De.default.add(0|this.Dh,0|this.Dl,0|l,0|u),{h:d,l:f}=De.default.add(0|this.Eh,0|this.El,0|d,0|f),{h,l:g}=De.default.add(0|this.Fh,0|this.Fl,0|h,0|g),{h:p,l:y}=De.default.add(0|this.Gh,0|this.Gl,0|p,0|y),{h:m,l:b}=De.default.add(0|this.Hh,0|this.Hl,0|m,0|b),this.set(r,i,s,o,a,c,l,u,d,f,h,g,p,y,m,b)}roundClean(){Ri.fill(0),Oi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Nt.SHA512=Jc;class vA extends Jc{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}Nt.SHA512_224=vA;class wA extends Jc{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}Nt.SHA512_256=wA;class Yy extends Jc{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Nt.SHA384=Yy,Nt.sha512=(0,Sl.wrapConstructor)((()=>new Jc)),Nt.sha512_224=(0,Sl.wrapConstructor)((()=>new vA)),Nt.sha512_256=(0,Sl.wrapConstructor)((()=>new wA)),Nt.sha384=(0,Sl.wrapConstructor)((()=>new Yy));var mp={},xo={},et={},$e={};Object.defineProperty($e,"__esModule",{value:!0}),$e.notImplemented=$e.bitMask=void 0,$e.isBytes=Fu,$e.abytes=Hu,$e.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},$e.bytesToHex=Hf,$e.numberToHexUnpadded=Zy,$e.hexToNumber=Kf,$e.hexToBytes=Zl,$e.bytesToNumberBE=function(t){return Kf(Hf(t))},$e.bytesToNumberLE=function(t){return Hu(t),Kf(Hf(Uint8Array.from(t).reverse()))},$e.numberToBytesBE=ev,$e.numberToBytesLE=function(t,e){return ev(t,e).reverse()},$e.numberToVarBytesBE=function(t){return Zl(Zy(t))},$e.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=Zl(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!Fu(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},$e.concatBytes=tv,$e.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},$e.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},$e.inRange=nv,$e.aInRange=function(t,e,n,r){if(!nv(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},$e.bitLen=function(t){let e;for(e=0;t>yp;t>>=Yl,e+=1);return e},$e.bitGet=function(t,e){return t>>BigInt(e)&Yl},$e.bitSet=function(t,e,n){return t|(n?Yl:yp)<<BigInt(e)},$e.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Vf(t),i=Vf(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=Vf())=>{i=a(rv([0]),u),r=a(),u.length!==0&&(i=a(rv([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const f=r.slice();d.push(f),u+=r.length}return tv(...d)};return(u,d)=>{let f;for(o(),c(u);!(f=d(l()));)c();return o(),f}},$e.validateObject=function(t,e,n={}){const r=(i,s,o)=>{const a=R8[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(o&&c===void 0||a(c,t)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t},$e.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}};const yp=BigInt(0),Yl=BigInt(1),P8=BigInt(2);function Fu(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Hu(t){if(!Fu(t))throw new Error("Uint8Array expected")}const I8=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Hf(t){Hu(t);let e="";for(let n=0;n<t.length;n++)e+=I8[t[n]];return e}function Zy(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function Kf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Qr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Xy(t){return t>=Qr._0&&t<=Qr._9?t-Qr._0:t>=Qr._A&&t<=Qr._F?t-(Qr._A-10):t>=Qr._a&&t<=Qr._f?t-(Qr._a-10):void 0}function Zl(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Xy(t.charCodeAt(s)),a=Xy(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=16*o+a}return r}function ev(t,e){return Zl(t.toString(16).padStart(2*e,"0"))}function tv(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Hu(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const jf=t=>typeof t=="bigint"&&yp<=t;function nv(t,e,n){return jf(t)&&jf(e)&&jf(n)&&e<=t&&t<n}$e.bitMask=t=>(P8<<BigInt(t-1))-Yl;const Vf=t=>new Uint8Array(t),rv=t=>Uint8Array.from(t),R8={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Fu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};$e.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(et,"__esModule",{value:!0}),et.isNegativeLE=void 0,et.mod=Mn,et.pow=bA,et.pow2=function(t,e,n){let r=t;for(;e-- >Lt;)r*=r,r%=n;return r},et.invert=Cl,et.tonelliShanks=EA,et.FpSqrt=ov,et.validateField=function(t){const e=N8.reduce(((n,r)=>(n[r]="function",n)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,Pn.validateObject)(t,e)},et.FpPow=av,et.FpInvertBatch=cv,et.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?Cl(n,t.ORDER):t.inv(n))},et.FpLegendre=lv,et.FpIsSquare=function(t){const e=lv(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},et.nLength=zf,et.Field=function(t,e,n=!1,r={}){if(t<=Lt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=zf(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=ov(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,Pn.bitMask)(i),ZERO:Lt,ONE:ut,create:c=>Mn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return Lt<=c&&c<t},is0:c=>c===Lt,isOdd:c=>(c&ut)===ut,neg:c=>Mn(-c,t),eql:(c,l)=>c===l,sqr:c=>Mn(c*c,t),add:(c,l)=>Mn(c+l,t),sub:(c,l)=>Mn(c-l,t),mul:(c,l)=>Mn(c*l,t),pow:(c,l)=>av(a,c,l),div:(c,l)=>Mn(c*Cl(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Cl(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>cv(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?(0,Pn.numberToBytesLE)(c,s):(0,Pn.numberToBytesBE)(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?(0,Pn.bytesToNumberLE)(c):(0,Pn.bytesToNumberBE)(c)}});return Object.freeze(a)},et.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},et.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},et.hashToPrivateScalar=function(t,e,n=!1){t=(0,Pn.ensureBytes)("privateHash",t);const r=t.length,i=zf(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?(0,Pn.bytesToNumberLE)(t):(0,Pn.bytesToNumberBE)(t);return Mn(s,e-ut)+ut},et.getFieldBytesLength=wp,et.getMinHashLength=uv,et.mapHashToField=function(t,e,n=!1){const r=t.length,i=wp(e),s=uv(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=Mn(n?(0,Pn.bytesToNumberBE)(t):(0,Pn.bytesToNumberLE)(t),e-ut)+ut;return n?(0,Pn.numberToBytesLE)(o,i):(0,Pn.numberToBytesBE)(o,i)};const Pn=$e,Lt=BigInt(0),ut=BigInt(1),Zi=BigInt(2),O8=BigInt(3),vp=BigInt(4),iv=BigInt(5),sv=BigInt(8);function Mn(t,e){const n=t%e;return n>=Lt?n:e+n}function bA(t,e,n){if(n<=Lt||e<Lt)throw new Error("Expected power/modulo > 0");if(n===ut)return Lt;let r=ut;for(;e>Lt;)e&ut&&(r=r*t%n),t=t*t%n,e>>=ut;return r}function Cl(t,e){if(t===Lt||e<=Lt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Mn(t,e),r=e,i=Lt,s=ut;for(;n!==Lt;){const o=r%n,a=i-s*(r/n);r=n,n=o,i=s,s=a}if(r!==ut)throw new Error("invert: does not exist");return Mn(i,e)}function EA(t){const e=(t-ut)/Zi;let n,r,i;for(n=t-ut,r=0;n%Zi===Lt;n/=Zi,r++);for(i=Zi;i<t&&bA(i,e,t)!==t-ut;i++);if(r===1){const o=(t+ut)/vp;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+ut)/Zi;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let g=o.sqr(d);f<c&&!o.eql(g,o.ONE);f++)g=o.sqr(g);const h=o.pow(l,ut<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function ov(t){if(t%vp===O8){const e=(t+ut)/vp;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%sv===iv){const e=(t-iv)/sv;return function(n,r){const i=n.mul(r,Zi),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,Zi),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return EA(t)}BigInt(9),BigInt(16);et.isNegativeLE=(t,e)=>(Mn(t,e)&ut)===ut;const N8=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function av(t,e,n){if(n<Lt)throw new Error("Expected power > 0");if(n===Lt)return t.ONE;if(n===ut)return e;let r=t.ONE,i=e;for(;n>Lt;)n&ut&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ut;return r}function cv(t,e){const n=new Array(e.length),r=e.reduce(((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o))),t.ONE),i=t.inv(r);return e.reduceRight(((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o))),i),n}function lv(t){const e=(t-ut)/Zi;return(n,r)=>n.pow(r,e)}function zf(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function wp(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function uv(t){const e=wp(t);return e+Math.ceil(e/2)}Object.defineProperty(xo,"__esModule",{value:!0}),xo.wNAF=function(t,e){const n=(s,o)=>{const a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>(r(s),{windows:Math.ceil(e/s)+1,windowSize:2**(s-1)});return{constTimeNegate:n,unsafeLadder(s,o){let a=t.ZERO,c=s;for(;o>M8;)o&Gf&&(a=a.add(c)),c=c.double(),o>>=Gf;return a},precomputeWindow(s,o){const{windows:a,windowSize:c}=i(o),l=[];let u=s,d=u;for(let f=0;f<a;f++){d=u,l.push(d);for(let h=1;h<c;h++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(s,o,a){const{windows:c,windowSize:l}=i(s);let u=t.ZERO,d=t.BASE;const f=BigInt(2**s-1),h=2**s,g=BigInt(s);for(let p=0;p<c;p++){const y=p*l;let m=Number(a&f);a>>=g,m>l&&(m-=h,a+=Gf);const b=y,w=y+Math.abs(m)-1,P=p%2!=0,O=m<0;m===0?d=d.add(n(P,o[b])):u=u.add(n(O,o[w]))}return{p:u,f:d}},wNAFCached(s,o,a){const c=hv.get(s)||1;let l=qf.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&qf.set(s,a(l))),this.wNAF(c,l,o)},setWindowSize(s,o){r(o),hv.set(s,o),qf.delete(s)}}},xo.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((u,d)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${d}`)})),n.forEach(((u,d)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${d}`)}));const i=(0,fv.bitLen)(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/s)*s;let l=t.ZERO;for(let u=c;u>=0;u-=s){a.fill(t.ZERO);for(let f=0;f<r.length;f++){const h=r[f],g=Number(h>>BigInt(u)&BigInt(o));a[g]=a[g].add(n[f])}let d=t.ZERO;for(let f=a.length-1,h=t.ZERO;f>0;f--)h=h.add(a[f]),d=d.add(h);if(l=l.add(d),u!==0)for(let f=0;f<s;f++)l=l.double()}return l},xo.validateBasic=function(t){return(0,dv.validateField)(t.Fp),(0,fv.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,dv.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const dv=et,fv=$e,M8=BigInt(0),Gf=BigInt(1),qf=new WeakMap,hv=new WeakMap;Object.defineProperty(mp,"__esModule",{value:!0}),mp.twistedEdwards=function(t){const e=(function(D){const N=(0,Wf.validateBasic)(D);return bn.validateObject(D,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...N})})(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=xl<<BigInt(8*a)-En,u=n.create,d=(0,pv.Field)(e.n,e.nBitLength),f=e.uvRatio||((D,N)=>{try{return{isValid:!0,value:n.sqrt(D*n.inv(N))}}catch{return{isValid:!1,value:sr}}}),h=e.adjustScalarBytes||(D=>D),g=e.domain||((D,N,S)=>{if((0,In.abool)("phflag",S),N.length||S)throw new Error("Contexts/pre-hash are not supported");return D});function p(D,N){bn.aInRange("coordinate "+D,N,sr,l)}function y(D){if(!(D instanceof w))throw new Error("ExtendedPoint expected")}const m=(0,In.memoized)(((D,N)=>{const{ex:S,ey:k,ez:B}=D,v=D.is0();N==null&&(N=v?L8:n.inv(B));const E=u(S*N),x=u(k*N),C=u(B*N);if(v)return{x:sr,y:En};if(C!==En)throw new Error("invZ was invalid");return{x:E,y:x}})),b=(0,In.memoized)((D=>{const{a:N,d:S}=e;if(D.is0())throw new Error("bad point: ZERO");const{ex:k,ey:B,ez:v,et:E}=D,x=u(k*k),C=u(B*B),A=u(v*v),_=u(A*A),T=u(x*N);if(u(A*u(T+C))!==u(_+u(S*u(x*C))))throw new Error("bad point: equation left != right (1)");if(u(k*B)!==u(v*E))throw new Error("bad point: equation left != right (2)");return!0}));class w{constructor(N,S,k,B){this.ex=N,this.ey=S,this.ez=k,this.et=B,p("x",N),p("y",S),p("z",k),p("t",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof w)throw new Error("extended point not allowed");const{x:S,y:k}=N||{};return p("x",S),p("y",k),new w(S,k,En,u(S*k))}static normalizeZ(N){const S=n.invertBatch(N.map((k=>k.ez)));return N.map(((k,B)=>k.toAffine(S[B]))).map(w.fromAffine)}static msm(N,S){return(0,Wf.pippenger)(w,d,N,S)}_setWindowSize(N){H.setWindowSize(this,N)}assertValidity(){b(this)}equals(N){y(N);const{ex:S,ey:k,ez:B}=this,{ex:v,ey:E,ez:x}=N,C=u(S*x),A=u(v*B),_=u(k*x),T=u(E*B);return C===A&&_===T}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:S,ey:k,ez:B}=this,v=u(S*S),E=u(k*k),x=u(xl*u(B*B)),C=u(N*v),A=S+k,_=u(u(A*A)-v-E),T=C+E,R=T-x,U=C-E,I=u(_*R),K=u(T*U),W=u(_*U),Z=u(R*T);return new w(I,K,Z,W)}add(N){y(N);const{a:S,d:k}=e,{ex:B,ey:v,ez:E,et:x}=this,{ex:C,ey:A,ez:_,et:T}=N;if(S===BigInt(-1)){const Q=u((v-B)*(A+C)),ie=u((v+B)*(A-C)),re=u(ie-Q);if(re===sr)return this.double();const oe=u(E*xl*T),te=u(x*xl*_),fe=te+oe,le=ie+Q,ge=te-oe,Ae=u(fe*re),Pe=u(le*ge),Ve=u(fe*ge),he=u(re*le);return new w(Ae,Pe,he,Ve)}const R=u(B*C),U=u(v*A),I=u(x*k*T),K=u(E*_),W=u((B+v)*(C+A)-R-U),Z=K-I,se=K+I,M=u(U-S*R),F=u(W*Z),Y=u(se*M),ne=u(W*M),J=u(Z*se);return new w(F,Y,J,ne)}subtract(N){return this.add(N.negate())}wNAF(N){return H.wNAFCached(this,N,w.normalizeZ)}multiply(N){const S=N;bn.aInRange("scalar",S,En,r);const{p:k,f:B}=this.wNAF(S);return w.normalizeZ([k,B])[0]}multiplyUnsafe(N){const S=N;return bn.aInRange("scalar",S,sr,r),S===sr?O:this.equals(O)||S===En?this:this.equals(P)?this.wNAF(S).p:H.unsafeLadder(this,S)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return H.unsafeLadder(this,r).is0()}toAffine(N){return m(this,N)}clearCofactor(){const{h:N}=e;return N===En?this:this.multiplyUnsafe(N)}static fromHex(N,S=!1){const{d:k,a:B}=e,v=n.BYTES;N=(0,In.ensureBytes)("pointHex",N,v),(0,In.abool)("zip215",S);const E=N.slice(),x=N[v-1];E[v-1]=-129&x;const C=bn.bytesToNumberLE(E),A=S?l:n.ORDER;bn.aInRange("pointHex.y",C,sr,A);const _=u(C*C),T=u(_-En),R=u(k*_-B);let{isValid:U,value:I}=f(T,R);if(!U)throw new Error("Point.fromHex: invalid y coordinate");const K=(I&En)===En,W=(128&x)!=0;if(!S&&I===sr&&W)throw new Error("Point.fromHex: x=0 and x_0=1");return W!==K&&(I=u(-I)),w.fromAffine({x:I,y:C})}static fromPrivateKey(N){return j(N).point}toRawBytes(){const{x:N,y:S}=this.toAffine(),k=bn.numberToBytesLE(S,n.BYTES);return k[k.length-1]|=N&En?128:0,k}toHex(){return bn.bytesToHex(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,En,u(e.Gx*e.Gy)),w.ZERO=new w(sr,En,En,sr);const{BASE:P,ZERO:O}=w,H=(0,Wf.wNAF)(w,8*a);function G(D){return(0,pv.mod)(D,r)}function q(D){return G(bn.bytesToNumberLE(D))}function j(D){const N=a;D=(0,In.ensureBytes)("private key",D,N);const S=(0,In.ensureBytes)("hashed private key",s(D),2*N),k=h(S.slice(0,N)),B=S.slice(N,2*N),v=q(k),E=P.multiply(v),x=E.toRawBytes();return{head:k,prefix:B,scalar:v,point:E,pointBytes:x}}function L(D=new Uint8Array,...N){const S=bn.concatBytes(...N);return q(s(g(S,(0,In.ensureBytes)("context",D),!!i)))}const V=B8;return P._setWindowSize(8),{CURVE:e,getPublicKey:function(D){return j(D).pointBytes},sign:function(D,N,S={}){D=(0,In.ensureBytes)("message",D),i&&(D=i(D));const{prefix:k,scalar:B,pointBytes:v}=j(N),E=L(S.context,k,D),x=P.multiply(E).toRawBytes(),C=G(E+L(S.context,x,v,D)*B);bn.aInRange("signature.s",C,sr,r);const A=bn.concatBytes(x,bn.numberToBytesLE(C,n.BYTES));return(0,In.ensureBytes)("result",A,2*a)},verify:function(D,N,S,k=V){const{context:B,zip215:v}=k,E=n.BYTES;D=(0,In.ensureBytes)("signature",D,2*E),N=(0,In.ensureBytes)("message",N),v!==void 0&&(0,In.abool)("zip215",v),i&&(N=i(N));const x=bn.bytesToNumberLE(D.slice(E,2*E));let C,A,_;try{C=w.fromHex(S,v),A=w.fromHex(D.slice(0,E),v),_=P.multiplyUnsafe(x)}catch{return!1}if(!v&&C.isSmallOrder())return!1;const T=L(B,A.toRawBytes(),C.toRawBytes(),N);return A.add(C.multiplyUnsafe(T)).subtract(_).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>o(n.BYTES),precompute:(D=8,N=w.BASE)=>(N._setWindowSize(D),N.multiply(BigInt(3)),N)}}};const Wf=xo,pv=et,bn=$e,In=$e,sr=BigInt(0),En=BigInt(1),xl=BigInt(2),L8=BigInt(8),B8={zip215:!0};var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.expand_message_xmd=AA,Gi.expand_message_xof=_A,Gi.hash_to_field=Qf,Gi.isogenyMap=function(t,e){const n=e.map((r=>Array.from(r).reverse()));return(r,i)=>{const[s,o,a,c]=n.map((l=>l.reduce(((u,d)=>t.add(t.mul(u,r),d)))));return r=t.div(s,o),i=t.mul(i,t.div(a,c)),{x:r,y:i}}},Gi.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=Qf(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=Qf(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const D8=et,qt=$e,U8=qt.bytesToNumberBE;function qi(t,e){if(Ec(t),Ec(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function $8(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Ec(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function AA(t,e,n,r){(0,qt.abytes)(t),(0,qt.abytes)(e),Ec(n),e.length>255&&(e=r((0,qt.concatBytes)((0,qt.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,qt.concatBytes)(e,qi(e.length,1)),c=qi(0,s),l=qi(n,2),u=new Array(o),d=r((0,qt.concatBytes)(c,t,l,qi(0,1),a));u[0]=r((0,qt.concatBytes)(d,qi(1,1),a));for(let f=1;f<=o;f++){const h=[$8(d,u[f-1]),qi(f+1,1),a];u[f]=r((0,qt.concatBytes)(...h))}return(0,qt.concatBytes)(...u).slice(0,n)}function _A(t,e,n,r,i){if((0,qt.abytes)(t),(0,qt.abytes)(e),Ec(n),e.length>255){const s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,qt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(qi(n,2)).update(e).update(qi(e.length,1)).digest()}function Qf(t,e,n){(0,qt.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;(0,qt.abytes)(t),Ec(e);const l=typeof c=="string"?(0,qt.utf8ToBytes)(c):c,u=r.toString(2).length,d=Math.ceil((u+i)/8),f=e*s*d;let h;if(a==="xmd")h=AA(t,l,f,o);else if(a==="xof")h=_A(t,l,f,i,o);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');h=t}const g=new Array(e);for(let p=0;p<e;p++){const y=new Array(s);for(let m=0;m<s;m++){const b=d*(m+p*s),w=h.subarray(b,b+d);y[m]=(0,D8.mod)(U8(w),r)}g[p]=y}return g}var bp={};Object.defineProperty(bp,"__esModule",{value:!0}),bp.montgomery=function(t){const e=(function(p){return(0,Ni.validateObject)(p,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...p})})(t),{P:n}=e,r=p=>(0,gv.mod)(p,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(p=>p),c=e.powPminus2||(p=>(0,gv.pow)(p,n-BigInt(2),n));function l(p,y,m){const b=r(p*(y-m));return[y=r(y-b),m=r(m+b)]}const u=(e.a-BigInt(2))/BigInt(4);function d(p){return(0,Ni.numberToBytesLE)(r(p),s)}function f(p,y){const m=(function(P){const O=(0,Ni.ensureBytes)("u coordinate",P,s);return o===32&&(O[31]&=127),(0,Ni.bytesToNumberLE)(O)})(y),b=(function(P){const O=(0,Ni.ensureBytes)("scalar",P),H=O.length;if(H!==s&&H!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${H}`);return(0,Ni.bytesToNumberLE)(a(O))})(p),w=(function(P,O){(0,Ni.aInRange)("u",P,fo,n),(0,Ni.aInRange)("scalar",O,fo,n);const H=O,G=P;let q,j=Jf,L=fo,V=P,$=Jf,D=fo;for(let S=BigInt(i-1);S>=fo;S--){const k=H>>S&Jf;D^=k,q=l(D,j,V),j=q[0],V=q[1],q=l(D,L,$),L=q[0],$=q[1],D=k;const B=j+L,v=r(B*B),E=j-L,x=r(E*E),C=v-x,A=V+$,_=r((V-$)*B),T=r(A*E),R=_+T,U=_-T;V=r(R*R),$=r(G*r(U*U)),j=r(v*x),L=r(C*(v+r(u*C)))}q=l(D,j,V),j=q[0],V=q[1],q=l(D,L,$),L=q[0],$=q[1];const N=c(L);return r(j*N)})(m,b);if(w===fo)throw new Error("Invalid private or public key received");return d(w)}const h=d(e.Gu);function g(p){return f(p,h)}return{scalarMult:f,scalarMultBase:g,getSharedSecret:(p,y)=>f(p,y),getPublicKey:p=>g(p),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:h}};const gv=et,Ni=$e,fo=BigInt(0),Jf=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=H,t.edwardsToMontgomeryPriv=function(T){const R=P.hash(T.subarray(0,32));return P.adjustScalarBytes(R).subarray(0,32)};const e=Nt,n=Ci,r=mp,i=Gi,s=et,o=bp,a=$e,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),d=BigInt(1),f=BigInt(2),h=BigInt(3),g=BigInt(5),p=BigInt(8);function y(T){const R=BigInt(10),U=BigInt(20),I=BigInt(40),K=BigInt(80),W=c,Z=T*T%W*T%W,se=(0,s.pow2)(Z,f,W)*Z%W,M=(0,s.pow2)(se,d,W)*T%W,F=(0,s.pow2)(M,g,W)*M%W,Y=(0,s.pow2)(F,R,W)*F%W,ne=(0,s.pow2)(Y,U,W)*Y%W,J=(0,s.pow2)(ne,I,W)*ne%W,Q=(0,s.pow2)(J,K,W)*J%W,ie=(0,s.pow2)(Q,K,W)*J%W,re=(0,s.pow2)(ie,R,W)*F%W;return{pow_p_5_8:(0,s.pow2)(re,f,W)*T%W,b2:Z}}function m(T){return T[0]&=248,T[31]&=127,T[31]|=64,T}function b(T,R){const U=c,I=(0,s.mod)(R*R*R,U),K=y(T*(0,s.mod)(I*I*R,U)).pow_p_5_8;let W=(0,s.mod)(T*I*K,U);const Z=(0,s.mod)(R*W*W,U),se=W,M=(0,s.mod)(W*l,U),F=Z===T,Y=Z===(0,s.mod)(-T,U),ne=Z===(0,s.mod)(-T*l,U);return F&&(W=se),(Y||ne)&&(W=M),(0,s.isNegativeLE)(W,U)&&(W=(0,s.mod)(-W,U)),{isValid:F||Y,value:W}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const w=(0,s.Field)(c,void 0,!0),P={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:w,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:p,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:m,uvRatio:b};function O(T,R,U){if(R.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([U?1:0,R.length]),R,T)}function H(T){const{y:R}=t.ed25519.ExtendedPoint.fromHex(T),U=BigInt(1);return w.toBytes(w.create((U+R)*w.inv(U-R)))}t.ed25519=(0,r.twistedEdwards)(P),t.ed25519ctx=(0,r.twistedEdwards)({...P,domain:O}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},P,{domain:O,prehash:e.sha512})),t.x25519=(0,o.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:T=>{const R=c,{pow_p_5_8:U,b2:I}=y(T);return(0,s.mod)((0,s.pow2)(U,h,R)*I,R)},adjustScalarBytes:m,randomBytes:n.randomBytes}),t.edwardsToMontgomery=H;const G=(w.ORDER+h)/p,q=w.pow(f,G),j=w.sqrt(w.neg(w.ONE)),L=(0,s.FpSqrtEven)(w,w.neg(BigInt(486664)));function V(T){const{xMn:R,xMd:U,yMn:I,yMd:K}=(function(J){const Q=(w.ORDER-g)/p,ie=BigInt(486662);let re=w.sqr(J);re=w.mul(re,f);let oe=w.add(re,w.ONE),te=w.neg(ie),fe=w.sqr(oe),le=w.mul(fe,oe),ge=w.mul(re,ie);ge=w.mul(ge,te),ge=w.add(ge,fe),ge=w.mul(ge,te);let Ae=w.sqr(le);fe=w.sqr(Ae),Ae=w.mul(Ae,le),Ae=w.mul(Ae,ge),fe=w.mul(fe,Ae);let Pe=w.pow(fe,Q);Pe=w.mul(Pe,Ae);let Ve=w.mul(Pe,j);fe=w.sqr(Pe),fe=w.mul(fe,le);let he=w.eql(fe,ge),X=w.cmov(Ve,Pe,he),we=w.mul(te,re),qe=w.mul(Pe,J);qe=w.mul(qe,q);let Ct=w.mul(qe,j),vn=w.mul(ge,re);fe=w.sqr(qe),fe=w.mul(fe,le);let jn=w.eql(fe,vn),It=w.cmov(Ct,qe,jn);fe=w.sqr(X),fe=w.mul(fe,le);let Dt=w.eql(fe,ge),ya=w.cmov(we,te,Dt),ir=w.cmov(It,X,Dt),so=w.isOdd(ir);return ir=w.cmov(ir,w.neg(ir),Dt!==so),{xMn:ya,xMd:oe,yMn:ir,yMd:d}})(T);let W=w.mul(R,K);W=w.mul(W,L);let Z=w.mul(U,I),se=w.sub(R,U),M=w.add(R,U),F=w.mul(Z,M),Y=w.eql(F,w.ZERO);W=w.cmov(W,w.ZERO,Y),Z=w.cmov(Z,w.ONE,Y),se=w.cmov(se,w.ONE,Y),M=w.cmov(M,w.ONE,Y);const ne=w.invertBatch([Z,M]);return{x:w.mul(W,ne[0]),y:w.mul(se,ne[1])}}const $=(0,i.createHasher)(t.ed25519.ExtendedPoint,(T=>V(T[0])),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:w.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function D(T){if(!(T instanceof _))throw new Error("RistrettoPoint expected")}t.hashToCurve=$.hashToCurve,t.encodeToCurve=$.encodeToCurve;const N=l,S=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),k=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),B=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),v=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),E=T=>b(d,T),x=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),C=T=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(T)&x);function A(T){const{d:R}=t.ed25519.CURVE,U=t.ed25519.CURVE.Fp.ORDER,I=t.ed25519.CURVE.Fp.create,K=I(N*T*T),W=I((K+d)*B);let Z=BigInt(-1);const se=I((Z-R*K)*I(K+R));let{isValid:M,value:F}=b(W,se),Y=I(F*T);(0,s.isNegativeLE)(Y,U)||(Y=I(-Y)),M||(F=Y),M||(Z=K);const ne=I(Z*(K-d)*v-se),J=F*F,Q=I((F+F)*se),ie=I(ne*S),re=I(d-J),oe=I(d+J);return new t.ed25519.ExtendedPoint(I(Q*oe),I(re*ie),I(ie*oe),I(Q*re))}class _{constructor(R){this.ep=R}static fromAffine(R){return new _(t.ed25519.ExtendedPoint.fromAffine(R))}static hashToCurve(R){R=(0,a.ensureBytes)("ristrettoHash",R,64);const U=A(C(R.slice(0,32))),I=A(C(R.slice(32,64)));return new _(U.add(I))}static fromHex(R){R=(0,a.ensureBytes)("ristrettoHex",R,32);const{a:U,d:I}=t.ed25519.CURVE,K=t.ed25519.CURVE.Fp.ORDER,W=t.ed25519.CURVE.Fp.create,Z="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",se=C(R);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(se,32),R)||(0,s.isNegativeLE)(se,K))throw new Error(Z);const M=W(se*se),F=W(d+U*M),Y=W(d-U*M),ne=W(F*F),J=W(Y*Y),Q=W(U*I*ne-J),{isValid:ie,value:re}=E(W(Q*J)),oe=W(re*Y),te=W(re*oe*Q);let fe=W((se+se)*oe);(0,s.isNegativeLE)(fe,K)&&(fe=W(-fe));const le=W(F*te),ge=W(fe*le);if(!ie||(0,s.isNegativeLE)(ge,K)||le===u)throw new Error(Z);return new _(new t.ed25519.ExtendedPoint(fe,le,d,ge))}toRawBytes(){let{ex:R,ey:U,ez:I,et:K}=this.ep;const W=t.ed25519.CURVE.Fp.ORDER,Z=t.ed25519.CURVE.Fp.create,se=Z(Z(I+U)*Z(I-U)),M=Z(R*U),F=Z(M*M),{value:Y}=E(Z(se*F)),ne=Z(Y*se),J=Z(Y*M),Q=Z(ne*J*K);let ie;if((0,s.isNegativeLE)(K*Q,W)){let oe=Z(U*N),te=Z(R*N);R=oe,U=te,ie=Z(ne*k)}else ie=J;(0,s.isNegativeLE)(R*Q,W)&&(U=Z(-U));let re=Z((I-U)*ie);return(0,s.isNegativeLE)(re,W)&&(re=Z(-re)),(0,a.numberToBytesLE)(re,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(R){D(R);const{ex:U,ey:I}=this.ep,{ex:K,ey:W}=R.ep,Z=t.ed25519.CURVE.Fp.create,se=Z(U*W)===Z(I*K),M=Z(I*W)===Z(U*K);return se||M}add(R){return D(R),new _(this.ep.add(R.ep))}subtract(R){return D(R),new _(this.ep.subtract(R.ep))}multiply(R){return new _(this.ep.multiply(R))}multiplyUnsafe(R){return new _(this.ep.multiplyUnsafe(R))}double(){return new _(this.ep.double())}negate(){return new _(this.ep.negate())}}t.RistrettoPoint=(_.BASE||(_.BASE=new _(t.ed25519.ExtendedPoint.BASE)),_.ZERO||(_.ZERO=new _(t.ed25519.ExtendedPoint.ZERO)),_),t.hashToRistretto255=(T,R)=>{const U=R.DST,I=typeof U=="string"?(0,n.utf8ToBytes)(U):U,K=(0,i.expand_message_xmd)(T,I,64,e.sha512);return _.hashToCurve(K)},t.hash_to_ristretto255=t.hashToRistretto255})(z2);var SA={},fi={};Object.defineProperty(fi,"__esModule",{value:!0}),fi.sha224=fi.sha256=fi.SHA256=void 0;const Yf=di,qn=Ci,F8=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Mi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Li=new Uint32Array(64);class Hg extends Yf.HashMD{constructor(){super(64,32,8,!1),this.A=0|Mi[0],this.B=0|Mi[1],this.C=0|Mi[2],this.D=0|Mi[3],this.E=0|Mi[4],this.F=0|Mi[5],this.G=0|Mi[6],this.H=0|Mi[7]}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|c}process(e,n){for(let d=0;d<16;d++,n+=4)Li[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Li[d-15],h=Li[d-2],g=(0,qn.rotr)(f,7)^(0,qn.rotr)(f,18)^f>>>3,p=(0,qn.rotr)(h,17)^(0,qn.rotr)(h,19)^h>>>10;Li[d]=p+Li[d-7]+g+Li[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=u+((0,qn.rotr)(a,6)^(0,qn.rotr)(a,11)^(0,qn.rotr)(a,25))+(0,Yf.Chi)(a,c,l)+F8[d]+Li[d]|0,h=((0,qn.rotr)(r,2)^(0,qn.rotr)(r,13)^(0,qn.rotr)(r,22))+(0,Yf.Maj)(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Li.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}fi.SHA256=Hg;class H8 extends Hg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}fi.sha256=(0,qn.wrapConstructor)((()=>new Hg)),fi.sha224=(0,qn.wrapConstructor)((()=>new H8));var Xl={},Kg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Bn,n=Ci;class r extends n.Hash{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(s);const a=(0,n.toBytes)(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,l=new Uint8Array(c);l.set(a.length>c?s.create().update(a).digest():a);for(let u=0;u<l.length;u++)l[u]^=54;this.iHash.update(l),this.oHash=s.create();for(let u=0;u<l.length;u++)l[u]^=106;this.oHash.update(l),l.fill(0)}update(s){return(0,e.exists)(this),this.iHash.update(s),this}digestInto(s){(0,e.exists)(this),(0,e.bytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:l,blockLen:u,outputLen:d}=this;return s.finished=c,s.destroyed=l,s.blockLen=u,s.outputLen=d,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,s,o)=>new r(i,s).update(o).digest(),t.hmac.create=(i,s)=>new r(i,s)})(Kg);var jg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=h,t.weierstrass=function(p){const y=(function(T){const R=(0,e.validateBasic)(T);return r.validateObject(R,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...R})})(p),{Fp:m,n:b}=y,w=m.BYTES+1,P=2*m.BYTES+1;function O(T){return n.mod(T,b)}function H(T){return n.invert(T,b)}const{ProjectivePoint:G,normPrivateKeyToScalar:q,weierstrassEquation:j,isWithinCurveOrder:L}=h({...y,toBytes(T,R,U){const I=R.toAffine(),K=m.toBytes(I.x),W=r.concatBytes;return(0,i.abool)("isCompressed",U),U?W(Uint8Array.from([R.hasEvenY()?2:3]),K):W(Uint8Array.from([4]),K,m.toBytes(I.y))},fromBytes(T){const R=T.length,U=T[0],I=T.subarray(1);if(R!==w||U!==2&&U!==3){if(R===P&&U===4)return{x:m.fromBytes(I.subarray(0,m.BYTES)),y:m.fromBytes(I.subarray(m.BYTES,2*m.BYTES))};throw new Error(`Point of length ${R} was invalid. Expected ${w} compressed bytes or ${P} uncompressed bytes`)}{const K=r.bytesToNumberBE(I);if(!r.inRange(K,l,m.ORDER))throw new Error("Point is not on curve");const W=j(K);let Z;try{Z=m.sqrt(W)}catch(se){const M=se instanceof Error?": "+se.message:"";throw new Error("Point is not on curve"+M)}return(1&U)==1!=((Z&l)===l)&&(Z=m.neg(Z)),{x:K,y:Z}}}}),V=T=>r.bytesToHex(r.numberToBytesBE(T,y.nByteLength));function $(T){return T>b>>l}const D=(T,R,U)=>r.bytesToNumberBE(T.slice(R,U));class N{constructor(R,U,I){this.r=R,this.s=U,this.recovery=I,this.assertValidity()}static fromCompact(R){const U=y.nByteLength;return R=(0,i.ensureBytes)("compactSignature",R,2*U),new N(D(R,0,U),D(R,U,2*U))}static fromDER(R){const{r:U,s:I}=t.DER.toSig((0,i.ensureBytes)("DER",R));return new N(U,I)}assertValidity(){r.aInRange("r",this.r,l,b),r.aInRange("s",this.s,l,b)}addRecoveryBit(R){return new N(this.r,this.s,R)}recoverPublicKey(R){const{r:U,s:I,recovery:K}=this,W=v((0,i.ensureBytes)("msgHash",R));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const Z=K===2||K===3?U+y.n:U;if(Z>=m.ORDER)throw new Error("recovery id 2 or 3 invalid");const se=(1&K)==0?"02":"03",M=G.fromHex(se+V(Z)),F=H(Z),Y=O(-W*F),ne=O(I*F),J=G.BASE.multiplyAndAddUnsafe(M,Y,ne);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return $(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,O(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return V(this.r)+V(this.s)}}const S={isValidPrivateKey(T){try{return q(T),!0}catch{return!1}},normPrivateKeyToScalar:q,randomPrivateKey:()=>{const T=n.getMinHashLength(y.n);return n.mapHashToField(y.randomBytes(T),y.n)},precompute:(T=8,R=G.BASE)=>(R._setWindowSize(T),R.multiply(BigInt(3)),R)};function k(T){const R=r.isBytes(T),U=typeof T=="string",I=(R||U)&&T.length;return R?I===w||I===P:U?I===2*w||I===2*P:T instanceof G}const B=y.bits2int||function(T){const R=r.bytesToNumberBE(T),U=8*T.length-y.nBitLength;return U>0?R>>BigInt(U):R},v=y.bits2int_modN||function(T){return O(B(T))},E=r.bitMask(y.nBitLength);function x(T){return r.aInRange(`num < 2^${y.nBitLength}`,T,c,E),r.numberToBytesBE(T,y.nByteLength)}function C(T,R,U=A){if(["recovered","canonical"].some((Q=>Q in U)))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:K}=y;let{lowS:W,prehash:Z,extraEntropy:se}=U;W==null&&(W=!0),T=(0,i.ensureBytes)("msgHash",T),s(U),Z&&(T=(0,i.ensureBytes)("prehashed msgHash",I(T)));const M=v(T),F=q(R),Y=[x(F),x(M)];if(se!=null&&se!==!1){const Q=se===!0?K(m.BYTES):se;Y.push((0,i.ensureBytes)("extraEntropy",Q))}const ne=r.concatBytes(...Y),J=M;return{seed:ne,k2sig:function(Q){const ie=B(Q);if(!L(ie))return;const re=H(ie),oe=G.BASE.multiply(ie).toAffine(),te=O(oe.x);if(te===c)return;const fe=O(re*O(J+te*F));if(fe===c)return;let le=(oe.x===te?0:2)|Number(oe.y&l),ge=fe;return W&&$(fe)&&(ge=(function(Ae){return $(Ae)?O(-Ae):Ae})(fe),le^=1),new N(te,ge,le)}}}const A={lowS:y.lowS,prehash:!1},_={lowS:y.lowS,prehash:!1};return G.BASE._setWindowSize(8),{CURVE:y,getPublicKey:function(T,R=!0){return G.fromPrivateKey(T).toRawBytes(R)},getSharedSecret:function(T,R,U=!0){if(k(T))throw new Error("first arg must be private key");if(!k(R))throw new Error("second arg must be public key");return G.fromHex(R).multiply(q(T)).toRawBytes(U)},sign:function(T,R,U=A){const{seed:I,k2sig:K}=C(T,R,U),W=y;return r.createHmacDrbg(W.hash.outputLen,W.nByteLength,W.hmac)(I,K)},verify:function(T,R,U,I=_){const K=T;if(R=(0,i.ensureBytes)("msgHash",R),U=(0,i.ensureBytes)("publicKey",U),"strict"in I)throw new Error("options.strict was renamed to lowS");s(I);const{lowS:W,prehash:Z}=I;let se,M;try{if(typeof K=="string"||r.isBytes(K))try{se=N.fromDER(K)}catch(te){if(!(te instanceof t.DER.Err))throw te;se=N.fromCompact(K)}else{if(typeof K!="object"||typeof K.r!="bigint"||typeof K.s!="bigint")throw new Error("PARSE");{const{r:te,s:fe}=K;se=new N(te,fe)}}M=G.fromHex(U)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&se.hasHighS())return!1;Z&&(R=y.hash(R));const{r:F,s:Y}=se,ne=v(R),J=H(Y),Q=O(ne*J),ie=O(F*J),re=G.BASE.multiplyAndAddUnsafe(M,Q,ie)?.toAffine();return re?O(re.x)===F:!1},ProjectivePoint:G,Signature:N,utils:S}},t.SWUFpSqrtRatio=g,t.mapToCurveSimpleSWU=function(p,y){if(n.validateField(p),!p.isValid(y.A)||!p.isValid(y.B)||!p.isValid(y.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const m=g(p,y.Z);if(!p.isOdd)throw new Error("Fp.isOdd is not implemented!");return b=>{let w,P,O,H,G,q,j,L;w=p.sqr(b),w=p.mul(w,y.Z),P=p.sqr(w),P=p.add(P,w),O=p.add(P,p.ONE),O=p.mul(O,y.B),H=p.cmov(y.Z,p.neg(P),!p.eql(P,p.ZERO)),H=p.mul(H,y.A),P=p.sqr(O),q=p.sqr(H),G=p.mul(q,y.A),P=p.add(P,G),P=p.mul(P,O),q=p.mul(q,H),G=p.mul(q,y.B),P=p.add(P,G),j=p.mul(w,O);const{isValid:V,value:$}=m(P,q);L=p.mul(w,b),L=p.mul(L,$),j=p.cmov(j,O,V),L=p.cmov(L,$,V);const D=p.isOdd(b)===p.isOdd(L);return L=p.cmov(p.neg(L),L,D),j=p.div(j,H),{x:j,y:L}}};const e=xo,n=et,r=$e,i=$e;function s(p){p.lowS!==void 0&&(0,i.abool)("lowS",p.lowS),p.prehash!==void 0&&(0,i.abool)("prehash",p.prehash)}const{bytesToNumberBE:o,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(p=""){super(p)}},_tlv:{encode:(p,y)=>{const{Err:m}=t.DER;if(p<0||p>256)throw new m("tlv.encode: wrong tag");if(1&y.length)throw new m("tlv.encode: unpadded data");const b=y.length/2,w=r.numberToHexUnpadded(b);if(w.length/2&128)throw new m("tlv.encode: long form length too big");const P=b>127?r.numberToHexUnpadded(w.length/2|128):"";return`${r.numberToHexUnpadded(p)}${P}${w}${y}`},decode(p,y){const{Err:m}=t.DER;let b=0;if(p<0||p>256)throw new m("tlv.encode: wrong tag");if(y.length<2||y[b++]!==p)throw new m("tlv.decode: wrong tlv");const w=y[b++];let P=0;if(128&w){const H=127&w;if(!H)throw new m("tlv.decode(long): indefinite length not supported");if(H>4)throw new m("tlv.decode(long): byte length is too big");const G=y.subarray(b,b+H);if(G.length!==H)throw new m("tlv.decode: length bytes not complete");if(G[0]===0)throw new m("tlv.decode(long): zero leftmost byte");for(const q of G)P=P<<8|q;if(b+=H,P<128)throw new m("tlv.decode(long): not minimal encoding")}else P=w;const O=y.subarray(b,b+P);if(O.length!==P)throw new m("tlv.decode: wrong value length");return{v:O,l:y.subarray(b+P)}}},_int:{encode(p){const{Err:y}=t.DER;if(p<c)throw new y("integer: negative integers are not allowed");let m=r.numberToHexUnpadded(p);if(8&Number.parseInt(m[0],16)&&(m="00"+m),1&m.length)throw new y("unexpected assertion");return m},decode(p){const{Err:y}=t.DER;if(128&p[0])throw new y("Invalid signature integer: negative");if(p[0]===0&&!(128&p[1]))throw new y("Invalid signature integer: unnecessary leading zero");return o(p)}},toSig(p){const{Err:y,_int:m,_tlv:b}=t.DER,w=typeof p=="string"?a(p):p;r.abytes(w);const{v:P,l:O}=b.decode(48,w);if(O.length)throw new y("Invalid signature: left bytes after parsing");const{v:H,l:G}=b.decode(2,P),{v:q,l:j}=b.decode(2,G);if(j.length)throw new y("Invalid signature: left bytes after parsing");return{r:m.decode(H),s:m.decode(q)}},hexFromSig(p){const{_tlv:y,_int:m}=t.DER,b=`${y.encode(2,m.encode(p.r))}${y.encode(2,m.encode(p.s))}`;return y.encode(48,b)}};const c=BigInt(0),l=BigInt(1),u=BigInt(2),d=BigInt(3),f=BigInt(4);function h(p){const y=(function(D){const N=(0,e.validateBasic)(D);r.validateObject(N,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:S,Fp:k,a:B}=N;if(S){if(!k.eql(B,k.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof S!="object"||typeof S.beta!="bigint"||typeof S.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...N})})(p),{Fp:m}=y,b=n.Field(y.n,y.nBitLength),w=y.toBytes||((D,N,S)=>{const k=N.toAffine();return r.concatBytes(Uint8Array.from([4]),m.toBytes(k.x),m.toBytes(k.y))}),P=y.fromBytes||(D=>{const N=D.subarray(1);return{x:m.fromBytes(N.subarray(0,m.BYTES)),y:m.fromBytes(N.subarray(m.BYTES,2*m.BYTES))}});function O(D){const{a:N,b:S}=y,k=m.sqr(D),B=m.mul(k,D);return m.add(m.add(B,m.mul(D,N)),S)}if(!m.eql(m.sqr(y.Gy),O(y.Gx)))throw new Error("bad generator point: equation left != right");function H(D){const{allowedPrivateKeyLengths:N,nByteLength:S,wrapPrivateKey:k,n:B}=y;if(N&&typeof D!="bigint"){if(r.isBytes(D)&&(D=r.bytesToHex(D)),typeof D!="string"||!N.includes(D.length))throw new Error("Invalid key");D=D.padStart(2*S,"0")}let v;try{v=typeof D=="bigint"?D:r.bytesToNumberBE((0,i.ensureBytes)("private key",D,S))}catch{throw new Error(`private key must be ${S} bytes, hex or bigint, not ${typeof D}`)}return k&&(v=n.mod(v,B)),r.aInRange("private key",v,l,B),v}function G(D){if(!(D instanceof L))throw new Error("ProjectivePoint expected")}const q=(0,i.memoized)(((D,N)=>{const{px:S,py:k,pz:B}=D;if(m.eql(B,m.ONE))return{x:S,y:k};const v=D.is0();N==null&&(N=v?m.ONE:m.inv(B));const E=m.mul(S,N),x=m.mul(k,N),C=m.mul(B,N);if(v)return{x:m.ZERO,y:m.ZERO};if(!m.eql(C,m.ONE))throw new Error("invZ was invalid");return{x:E,y:x}})),j=(0,i.memoized)((D=>{if(D.is0()){if(y.allowInfinityPoint&&!m.is0(D.py))return;throw new Error("bad point: ZERO")}const{x:N,y:S}=D.toAffine();if(!m.isValid(N)||!m.isValid(S))throw new Error("bad point: x or y not FE");const k=m.sqr(S),B=O(N);if(!m.eql(k,B))throw new Error("bad point: equation left != right");if(!D.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class L{constructor(N,S,k){if(this.px=N,this.py=S,this.pz=k,N==null||!m.isValid(N))throw new Error("x required");if(S==null||!m.isValid(S))throw new Error("y required");if(k==null||!m.isValid(k))throw new Error("z required");Object.freeze(this)}static fromAffine(N){const{x:S,y:k}=N||{};if(!N||!m.isValid(S)||!m.isValid(k))throw new Error("invalid affine point");if(N instanceof L)throw new Error("projective point not allowed");const B=v=>m.eql(v,m.ZERO);return B(S)&&B(k)?L.ZERO:new L(S,k,m.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const S=m.invertBatch(N.map((k=>k.pz)));return N.map(((k,B)=>k.toAffine(S[B]))).map(L.fromAffine)}static fromHex(N){const S=L.fromAffine(P((0,i.ensureBytes)("pointHex",N)));return S.assertValidity(),S}static fromPrivateKey(N){return L.BASE.multiply(H(N))}static msm(N,S){return(0,e.pippenger)(L,b,N,S)}_setWindowSize(N){$.setWindowSize(this,N)}assertValidity(){j(this)}hasEvenY(){const{y:N}=this.toAffine();if(m.isOdd)return!m.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){G(N);const{px:S,py:k,pz:B}=this,{px:v,py:E,pz:x}=N,C=m.eql(m.mul(S,x),m.mul(v,B)),A=m.eql(m.mul(k,x),m.mul(E,B));return C&&A}negate(){return new L(this.px,m.neg(this.py),this.pz)}double(){const{a:N,b:S}=y,k=m.mul(S,d),{px:B,py:v,pz:E}=this;let x=m.ZERO,C=m.ZERO,A=m.ZERO,_=m.mul(B,B),T=m.mul(v,v),R=m.mul(E,E),U=m.mul(B,v);return U=m.add(U,U),A=m.mul(B,E),A=m.add(A,A),x=m.mul(N,A),C=m.mul(k,R),C=m.add(x,C),x=m.sub(T,C),C=m.add(T,C),C=m.mul(x,C),x=m.mul(U,x),A=m.mul(k,A),R=m.mul(N,R),U=m.sub(_,R),U=m.mul(N,U),U=m.add(U,A),A=m.add(_,_),_=m.add(A,_),_=m.add(_,R),_=m.mul(_,U),C=m.add(C,_),R=m.mul(v,E),R=m.add(R,R),_=m.mul(R,U),x=m.sub(x,_),A=m.mul(R,T),A=m.add(A,A),A=m.add(A,A),new L(x,C,A)}add(N){G(N);const{px:S,py:k,pz:B}=this,{px:v,py:E,pz:x}=N;let C=m.ZERO,A=m.ZERO,_=m.ZERO;const T=y.a,R=m.mul(y.b,d);let U=m.mul(S,v),I=m.mul(k,E),K=m.mul(B,x),W=m.add(S,k),Z=m.add(v,E);W=m.mul(W,Z),Z=m.add(U,I),W=m.sub(W,Z),Z=m.add(S,B);let se=m.add(v,x);return Z=m.mul(Z,se),se=m.add(U,K),Z=m.sub(Z,se),se=m.add(k,B),C=m.add(E,x),se=m.mul(se,C),C=m.add(I,K),se=m.sub(se,C),_=m.mul(T,Z),C=m.mul(R,K),_=m.add(C,_),C=m.sub(I,_),_=m.add(I,_),A=m.mul(C,_),I=m.add(U,U),I=m.add(I,U),K=m.mul(T,K),Z=m.mul(R,Z),I=m.add(I,K),K=m.sub(U,K),K=m.mul(T,K),Z=m.add(Z,K),U=m.mul(I,Z),A=m.add(A,U),U=m.mul(se,Z),C=m.mul(W,C),C=m.sub(C,U),U=m.mul(W,I),_=m.mul(se,_),_=m.add(_,U),new L(C,A,_)}subtract(N){return this.add(N.negate())}is0(){return this.equals(L.ZERO)}wNAF(N){return $.wNAFCached(this,N,L.normalizeZ)}multiplyUnsafe(N){r.aInRange("scalar",N,c,y.n);const S=L.ZERO;if(N===c)return S;if(N===l)return this;const{endo:k}=y;if(!k)return $.unsafeLadder(this,N);let{k1neg:B,k1:v,k2neg:E,k2:x}=k.splitScalar(N),C=S,A=S,_=this;for(;v>c||x>c;)v&l&&(C=C.add(_)),x&l&&(A=A.add(_)),_=_.double(),v>>=l,x>>=l;return B&&(C=C.negate()),E&&(A=A.negate()),A=new L(m.mul(A.px,k.beta),A.py,A.pz),C.add(A)}multiply(N){const{endo:S,n:k}=y;let B,v;if(r.aInRange("scalar",N,l,k),S){const{k1neg:E,k1:x,k2neg:C,k2:A}=S.splitScalar(N);let{p:_,f:T}=this.wNAF(x),{p:R,f:U}=this.wNAF(A);_=$.constTimeNegate(E,_),R=$.constTimeNegate(C,R),R=new L(m.mul(R.px,S.beta),R.py,R.pz),B=_.add(R),v=T.add(U)}else{const{p:E,f:x}=this.wNAF(N);B=E,v=x}return L.normalizeZ([B,v])[0]}multiplyAndAddUnsafe(N,S,k){const B=L.BASE,v=(x,C)=>C!==c&&C!==l&&x.equals(B)?x.multiply(C):x.multiplyUnsafe(C),E=v(this,S).add(v(N,k));return E.is0()?void 0:E}toAffine(N){return q(this,N)}isTorsionFree(){const{h:N,isTorsionFree:S}=y;if(N===l)return!0;if(S)return S(L,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:S}=y;return N===l?this:S?S(L,this):this.multiplyUnsafe(y.h)}toRawBytes(N=!0){return(0,i.abool)("isCompressed",N),this.assertValidity(),w(L,this,N)}toHex(N=!0){return(0,i.abool)("isCompressed",N),r.bytesToHex(this.toRawBytes(N))}}L.BASE=new L(y.Gx,y.Gy,m.ONE),L.ZERO=new L(m.ZERO,m.ONE,m.ZERO);const V=y.nBitLength,$=(0,e.wNAF)(L,y.endo?Math.ceil(V/2):V);return{CURVE:y,ProjectivePoint:L,normPrivateKeyToScalar:H,weierstrassEquation:O,isWithinCurveOrder:function(D){return r.inRange(D,l,y.n)}}}function g(p,y){const m=p.ORDER;let b=c;for(let D=m-l;D%u===c;D/=u)b+=l;const w=b,P=u<<w-l-l,O=P*u,H=(m-l)/O,G=(H-l)/u,q=O-l,j=P,L=p.pow(y,H),V=p.pow(y,(H+l)/u);let $=(D,N)=>{let S=L,k=p.pow(N,q),B=p.sqr(k);B=p.mul(B,N);let v=p.mul(D,B);v=p.pow(v,G),v=p.mul(v,k),k=p.mul(v,N),B=p.mul(v,D);let E=p.mul(B,k);v=p.pow(E,j);let x=p.eql(v,p.ONE);k=p.mul(B,V),v=p.mul(E,S),B=p.cmov(k,B,x),E=p.cmov(v,E,x);for(let C=w;C>l;C--){let A=C-u;A=u<<A-l;let _=p.pow(E,A);const T=p.eql(_,p.ONE);k=p.mul(B,S),S=p.mul(S,S),_=p.mul(E,S),B=p.cmov(k,B,T),E=p.cmov(_,E,T)}return{isValid:x,value:B}};if(p.ORDER%f===d){const D=(p.ORDER-d)/f,N=p.sqrt(p.neg(y));$=(S,k)=>{let B=p.sqr(k);const v=p.mul(S,k);B=p.mul(B,v);let E=p.pow(B,D);E=p.mul(E,v);const x=p.mul(E,N),C=p.mul(p.sqr(E),k),A=p.eql(C,S);return{isValid:A,value:p.cmov(x,E,A)}}}return $}})(jg),Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.getHash=yv,Xl.createCurve=function(t,e){const n=r=>(0,j8.weierstrass)({...t,...yv(r)});return Object.freeze({...n(e),create:n})};const K8=Kg,mv=Ci,j8=jg;function yv(t){return{hash:t,hmac:(e,...n)=>(0,K8.hmac)(t,e,(0,mv.concatBytes)(...n)),randomBytes:mv.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=fi,n=Ci,r=Xl,i=Gi,s=et,o=$e,a=jg,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),f=(v,E)=>(v+E/d)/E;function h(v){const E=c,x=BigInt(3),C=BigInt(6),A=BigInt(11),_=BigInt(22),T=BigInt(23),R=BigInt(44),U=BigInt(88),I=v*v*v%E,K=I*I*v%E,W=(0,s.pow2)(K,x,E)*K%E,Z=(0,s.pow2)(W,x,E)*K%E,se=(0,s.pow2)(Z,d,E)*I%E,M=(0,s.pow2)(se,A,E)*se%E,F=(0,s.pow2)(M,_,E)*M%E,Y=(0,s.pow2)(F,R,E)*F%E,ne=(0,s.pow2)(Y,U,E)*Y%E,J=(0,s.pow2)(ne,R,E)*F%E,Q=(0,s.pow2)(J,x,E)*K%E,ie=(0,s.pow2)(Q,T,E)*M%E,re=(0,s.pow2)(ie,C,E)*I%E,oe=(0,s.pow2)(re,d,E);if(!g.eql(g.sqr(oe),v))throw new Error("Cannot find square root");return oe}const g=(0,s.Field)(c,void 0,void 0,{sqrt:h});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:v=>{const E=l,x=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),C=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),A=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),_=x,T=BigInt("0x100000000000000000000000000000000"),R=f(_*v,E),U=f(-C*v,E);let I=(0,s.mod)(v-R*x-U*A,E),K=(0,s.mod)(-R*C-U*_,E);const W=I>T,Z=K>T;if(W&&(I=E-I),Z&&(K=E-K),I>T||K>T)throw new Error("splitScalar: Endomorphism failed, k="+v);return{k1neg:W,k1:I,k2neg:Z,k2:K}}}},e.sha256);const p=BigInt(0),y={};function m(v,...E){let x=y[v];if(x===void 0){const C=(0,e.sha256)(Uint8Array.from(v,(A=>A.charCodeAt(0))));x=(0,o.concatBytes)(C,C),y[v]=x}return(0,e.sha256)((0,o.concatBytes)(x,...E))}const b=v=>v.toRawBytes(!0).slice(1),w=v=>(0,o.numberToBytesBE)(v,32),P=v=>(0,s.mod)(v,c),O=v=>(0,s.mod)(v,l),H=t.secp256k1.ProjectivePoint,G=(v,E,x)=>H.BASE.multiplyAndAddUnsafe(v,E,x);function q(v){let E=t.secp256k1.utils.normPrivateKeyToScalar(v),x=H.fromPrivateKey(E);return{scalar:x.hasEvenY()?E:O(-E),bytes:b(x)}}function j(v){(0,o.aInRange)("x",v,u,c);const E=P(v*v);let x=h(P(E*v+BigInt(7)));x%d!==p&&(x=P(-x));const C=new H(v,x,u);return C.assertValidity(),C}const L=o.bytesToNumberBE;function V(...v){return O(L(m("BIP0340/challenge",...v)))}function $(v){return q(v).bytes}function D(v,E,x=(0,n.randomBytes)(32)){const C=(0,o.ensureBytes)("message",v),{bytes:A,scalar:_}=q(E),T=(0,o.ensureBytes)("auxRand",x,32),R=w(_^L(m("BIP0340/aux",T))),U=m("BIP0340/nonce",R,A,C),I=O(L(U));if(I===p)throw new Error("sign failed: k is zero");const{bytes:K,scalar:W}=q(I),Z=V(K,A,C),se=new Uint8Array(64);if(se.set(K,0),se.set(w(O(W+Z*_)),32),!N(se,C,A))throw new Error("sign: Invalid signature produced");return se}function N(v,E,x){const C=(0,o.ensureBytes)("signature",v,64),A=(0,o.ensureBytes)("message",E),_=(0,o.ensureBytes)("publicKey",x,32);try{const T=j(L(_)),R=L(C.subarray(0,32));if(!(0,o.inRange)(R,u,c))return!1;const U=L(C.subarray(32,64));if(!(0,o.inRange)(U,u,l))return!1;const I=V(w(R),b(T),A),K=G(T,U,O(-I));return!(!K||!K.hasEvenY()||K.toAffine().x!==R)}catch{return!1}}t.schnorr={getPublicKey:$,sign:D,verify:N,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:j,pointToBytes:b,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:m,mod:s.mod}};const S=(0,i.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((v=>v.map((E=>BigInt(E)))))),k=(0,a.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}),B=(0,i.createHasher)(t.secp256k1.ProjectivePoint,(v=>{const{x:E,y:x}=k(g.create(v[0]));return S(E,x)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=B.hashToCurve,t.encodeToCurve=B.encodeToCurve})(SA);var Ep={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=Kn;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(Ep),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=Ug,n=z2,r=SA,i=bc,s=Ot,o=Ep;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(s.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),(function(d){return d.utils.isValidPrivateKey(u)}),(function(){return!0}),(function(){return!0}))},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),(function(d){return d.getPublicKey(u)}),(function(d){return d.getPublicKey(u)}),(function(d){return d.getPublicKey(u)}))},t.getSharedPoint=function(u,d,f){return a((0,i.ellipticCurve)(),(function(h){return h.getSharedSecret(u,d,f)}),(function(h){return h.getSharedSecret(u,d)}),(function(h){return l(h,u,d)}))},t.convertPublicKeyFormat=function(u,d){return a((0,i.ellipticCurve)(),(function(f){return f.getSharedSecret(BigInt(1),u,d)}),(function(){return u}),(function(){return u}))};function a(u,d,f,h){if(u==="secp256k1")return d(r.secp256k1);if(u==="x25519")return f(n.x25519);if(u==="ed25519")return h(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var d=(0,o.decodeHex)(u);return a((0,i.ellipticCurve)(),(function(){return c(d)}),(function(){return d}),(function(){return d}))};var c=function(u){if(u.length===s.ETH_PUBLIC_KEY_SIZE){var d=new Uint8Array(1+u.length);return d.set([4]),d.set(u,1),d}return u},l=function(u,d,f){var h=u.utils.getExtendedPublicKey(d).scalar;return u.ExtendedPoint.fromHex(f).multiply(h).toRawBytes()}})(V2);var CA={},ko={};Object.defineProperty(ko,"__esModule",{value:!0}),ko.hkdf=void 0,ko.extract=kA,ko.expand=TA;const Ap=Bn,vv=Ci,xA=Kg;function kA(t,e,n){return(0,Ap.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,xA.hmac)(t,(0,vv.toBytes)(n),(0,vv.toBytes)(e))}const Zf=new Uint8Array([0]),wv=new Uint8Array;function TA(t,e,n,r=32){if((0,Ap.hash)(t),(0,Ap.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=wv);const s=new Uint8Array(i*t.outputLen),o=xA.hmac.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)Zf[0]=l+1,a.update(l===0?wv:c).update(n).update(Zf).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Zf.fill(0),s.slice(0,r)}ko.hkdf=(t,e,n,r,i)=>TA(t,kA(t,e,n),r,i),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=Kn,n=ko,r=fi;t.deriveKey=function(i,s,o){return(0,n.hkdf)(r.sha256,i,s,o,32)},t.getSharedKey=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}})(CA);var bv={},zo={},gt={},Ds={};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.polyval=Ds.ghash=void 0,Ds._toGHASHKey=PA;const Us=Wt,cn=Kn,ei=16,Vg=new Uint8Array(16),Mr=(0,cn.u32)(Vg),Yn=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function PA(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}class IA{constructor(e,n){this.blockLen=ei,this.outputLen=ei,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,cn.toBytes)(e),(0,Us.bytes)(e,16);const r=(0,cn.createView)(e);let i=r.getUint32(0,!1),s=r.getUint32(4,!1),o=r.getUint32(8,!1),a=r.getUint32(12,!1);const c=[];for(let m=0;m<128;m++)c.push({s0:Yn(i),s1:Yn(s),s2:Yn(o),s3:Yn(a)}),{s0:i,s1:s,s2:o,s3:a}={s3:(d=o)<<31|(f=a)>>>1,s2:(u=s)<<31|d>>>1,s1:(l=i)<<31|u>>>1,s0:l>>>1^225<<24&-(1&f)};var l,u,d,f;const h=(m=>m>65536?8:m>1024?4:2)(n||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const g=128/h,p=this.windowSize=2**h,y=[];for(let m=0;m<g;m++)for(let b=0;b<p;b++){let w=0,P=0,O=0,H=0;for(let G=0;G<h;G++){if(!(b>>>h-G-1&1))continue;const{s0:q,s1:j,s2:L,s3:V}=c[h*m+G];w^=q,P^=j,O^=L,H^=V}y.push({s0:w,s1:P,s2:O,s3:H})}this.t=y}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:s,t:o,windowSize:a}=this;let c=0,l=0,u=0,d=0;const f=(1<<s)-1;let h=0;for(const g of[e,n,r,i])for(let p=0;p<4;p++){const y=g>>>8*p&255;for(let m=8/s-1;m>=0;m--){const b=y>>>s*m&f,{s0:w,s1:P,s2:O,s3:H}=o[h*a+b];c^=w,l^=P,u^=O,d^=H,h+=1}}this.s0=c,this.s1=l,this.s2=u,this.s3=d}update(e){e=(0,cn.toBytes)(e),(0,Us.exists)(this);const n=(0,cn.u32)(e),r=Math.floor(e.length/ei),i=e.length%ei;for(let s=0;s<r;s++)this._updateBlock(n[4*s+0],n[4*s+1],n[4*s+2],n[4*s+3]);return i&&(Vg.set(e.subarray(r*ei)),this._updateBlock(Mr[0],Mr[1],Mr[2],Mr[3]),(0,cn.clean)(Mr)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,Us.exists)(this),(0,Us.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,cn.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e}digest(){const e=new Uint8Array(ei);return this.digestInto(e),this.destroy(),e}}class V8 extends IA{constructor(e,n){e=(0,cn.toBytes)(e);const r=PA((0,cn.copyBytes)(e));super(r,n),(0,cn.clean)(r)}update(e){e=(0,cn.toBytes)(e),(0,Us.exists)(this);const n=(0,cn.u32)(e),r=e.length%ei,i=Math.floor(e.length/ei);for(let s=0;s<i;s++)this._updateBlock(Yn(n[4*s+3]),Yn(n[4*s+2]),Yn(n[4*s+1]),Yn(n[4*s+0]));return r&&(Vg.set(e.subarray(i*ei)),this._updateBlock(Yn(Mr[3]),Yn(Mr[2]),Yn(Mr[1]),Yn(Mr[0])),(0,cn.clean)(Mr)),this}digestInto(e){(0,Us.exists)(this),(0,Us.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,cn.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e.reverse()}}function Ev(t){const e=(r,i)=>t(i,r.length).update((0,cn.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}Ds.ghash=Ev(((t,e)=>new IA(t,e))),Ds.polyval=Ev(((t,e)=>new V8(t,e))),Object.defineProperty(gt,"__esModule",{value:!0}),gt.unsafe=gt.aeskwp=gt.aeskw=gt.siv=gt.gcm=gt.cfb=gt.cbc=gt.ecb=gt.ctr=void 0,gt.expandKeyLE=gr,gt.expandKeyDecLE=Ac;const ze=Wt,_p=Ds,ye=Kn,xn=16,kl=new Uint8Array(xn),z8=283;function zg(t){return t<<1^z8&-(t>>7)}function To(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=zg(t);return n}const Sp=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=zg(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,ye.clean)(t),e})(),G8=Sp.map(((t,e)=>Sp.indexOf(e))),q8=t=>t<<24|t>>>8,Xf=t=>t<<8|t>>>24,Ku=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function RA(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((l,u)=>e(t[u]))),r=n.map(Xf),i=r.map(Xf),s=i.map(Xf),o=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const d=256*l+u;o[d]=n[l]^r[u],a[d]=i[l]^s[u],c[d]=t[l]<<8|t[u]}return{sbox:t,sbox2:c,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const Gg=RA(Sp,(t=>To(t,3)<<24|t<<16|t<<8|To(t,2))),OA=RA(G8,(t=>To(t,11)<<24|To(t,13)<<16|To(t,9)<<8|To(t,14))),W8=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=zg(n))t[e]=n;return t})();function gr(t){(0,ze.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=Gg,r=[];(0,ye.isAligned32)(t)||r.push(t=(0,ye.copyBytes)(t));const i=(0,ye.u32)(t),s=i.length,o=c=>Br(n,c,c,c,c),a=new Uint32Array(e+28);a.set(i);for(let c=s;c<a.length;c++){let l=a[c-1];c%s==0?l=o(q8(l))^W8[c/s-1]:s>6&&c%s==4&&(l=o(l)),a[c]=a[c-s]^l}return(0,ye.clean)(...r),a}function Ac(t){const e=gr(t),n=e.slice(),r=e.length,{sbox2:i}=Gg,{T0:s,T1:o,T2:a,T3:c}=OA;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=e[r-l-4+u];(0,ye.clean)(e);for(let l=4;l<r-4;l++){const u=n[l],d=Br(i,u,u,u,u);n[l]=s[255&d]^o[d>>>8&255]^a[d>>>16&255]^c[d>>>24]}return n}function es(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function Br(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function un(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=Gg;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const d=t[c++]^es(o,a,e,n,r,i),f=t[c++]^es(o,a,n,r,i,e),h=t[c++]^es(o,a,r,i,e,n),g=t[c++]^es(o,a,i,e,n,r);e=d,n=f,r=h,i=g}return{s0:t[c++]^Br(s,e,n,r,i),s1:t[c++]^Br(s,n,r,i,e),s2:t[c++]^Br(s,r,i,e,n),s3:t[c++]^Br(s,i,e,n,r)}}function _c(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=OA;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const d=t[c++]^es(o,a,e,i,r,n),f=t[c++]^es(o,a,n,e,i,r),h=t[c++]^es(o,a,r,n,e,i),g=t[c++]^es(o,a,i,r,n,e);e=d,n=f,r=h,i=g}return{s0:t[c++]^Br(s,e,i,r,n),s1:t[c++]^Br(s,n,e,i,r),s2:t[c++]^Br(s,r,n,e,i),s3:t[c++]^Br(s,i,r,n,e)}}function Go(t,e){if(e===void 0)return new Uint8Array(t);if((0,ze.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,ye.isAligned32)(e))throw new Error("unaligned dst");return e}function NA(t,e,n,r){(0,ze.bytes)(e,xn),(0,ze.bytes)(n);const i=n.length;r=Go(i,r);const s=e,o=(0,ye.u32)(s);let{s0:a,s1:c,s2:l,s3:u}=un(t,o[0],o[1],o[2],o[3]);const d=(0,ye.u32)(n),f=(0,ye.u32)(r);for(let g=0;g+4<=d.length;g+=4){f[g+0]=d[g+0]^a,f[g+1]=d[g+1]^c,f[g+2]=d[g+2]^l,f[g+3]=d[g+3]^u;let p=1;for(let y=s.length-1;y>=0;y--)p=p+(255&s[y])|0,s[y]=255&p,p>>>=8;({s0:a,s1:c,s2:l,s3:u}=un(t,o[0],o[1],o[2],o[3]))}const h=xn*Math.floor(d.length/4);if(h<i){const g=new Uint32Array([a,c,l,u]),p=(0,ye.u8)(g);for(let y=h,m=0;y<i;y++,m++)r[y]=n[y]^p[m];(0,ye.clean)(g)}return r}function Po(t,e,n,r,i){(0,ze.bytes)(n,xn),(0,ze.bytes)(r),i=Go(r.length,i);const s=n,o=(0,ye.u32)(s),a=(0,ye.createView)(s),c=(0,ye.u32)(r),l=(0,ye.u32)(i),u=e?0:12,d=r.length;let f=a.getUint32(u,e),{s0:h,s1:g,s2:p,s3:y}=un(t,o[0],o[1],o[2],o[3]);for(let b=0;b+4<=c.length;b+=4)l[b+0]=c[b+0]^h,l[b+1]=c[b+1]^g,l[b+2]=c[b+2]^p,l[b+3]=c[b+3]^y,f=f+1>>>0,a.setUint32(u,f,e),{s0:h,s1:g,s2:p,s3:y}=un(t,o[0],o[1],o[2],o[3]);const m=xn*Math.floor(c.length/4);if(m<d){const b=new Uint32Array([h,g,p,y]),w=(0,ye.u8)(b);for(let P=m,O=0;P<d;P++,O++)i[P]=r[P]^w[O];(0,ye.clean)(b)}return i}function Av(t){if((0,ze.bytes)(t),t.length%xn!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function _v(t,e,n){(0,ze.bytes)(t);let r=t.length;const i=r%xn;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,ye.isAligned32)(t)||(t=(0,ye.copyBytes)(t));const s=(0,ye.u32)(t);if(e){let a=xn-i;a||(a=xn),r+=a}const o=Go(r,n);return{b:s,o:(0,ye.u32)(o),out:o}}function Sv(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function Cv(t){const e=new Uint8Array(16),n=(0,ye.u32)(e);e.set(t);const r=xn-t.length;for(let i=xn-r;i<xn;i++)e[i]=r;return n}function MA(t,e,n,r,i){const s=i==null?0:i.length,o=t.create(n,r.length+s);i&&o.update(i),o.update(r);const a=new Uint8Array(16),c=(0,ye.createView)(a);i&&(0,ye.setBigUint64)(c,0,BigInt(8*s),e),(0,ye.setBigUint64)(c,8,BigInt(8*r.length),e),o.update(a);const l=o.digest();return(0,ye.clean)(a),l}gt.ctr=(0,ye.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i){if((0,ze.bytes)(r),i!==void 0&&((0,ze.bytes)(i),!(0,ye.isAligned32)(i)))throw new Error("unaligned destination");const s=gr(t),o=(0,ye.copyBytes)(e),a=[s,o];(0,ye.isAligned32)(r)||a.push(r=(0,ye.copyBytes)(r));const c=NA(s,o,r,i);return(0,ye.clean)(...a),c}return(0,ze.bytes)(t),(0,ze.bytes)(e,xn),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}})),gt.ecb=(0,ye.wrapCipher)({blockSize:16},(function(t,e={}){(0,ze.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:s,o,out:a}=_v(r,n,i),c=gr(t);let l=0;for(;l+4<=s.length;){const{s0:u,s1:d,s2:f,s3:h}=un(c,s[l+0],s[l+1],s[l+2],s[l+3]);o[l++]=u,o[l++]=d,o[l++]=f,o[l++]=h}if(n){const u=Cv(r.subarray(4*l)),{s0:d,s1:f,s2:h,s3:g}=un(c,u[0],u[1],u[2],u[3]);o[l++]=d,o[l++]=f,o[l++]=h,o[l++]=g}return(0,ye.clean)(c),a},decrypt(r,i){Av(r);const s=Ac(t),o=Go(r.length,i),a=[s];(0,ye.isAligned32)(r)||a.push(r=(0,ye.copyBytes)(r));const c=(0,ye.u32)(r),l=(0,ye.u32)(o);for(let u=0;u+4<=c.length;){const{s0:d,s1:f,s2:h,s3:g}=_c(s,c[u+0],c[u+1],c[u+2],c[u+3]);l[u++]=d,l[u++]=f,l[u++]=h,l[u++]=g}return(0,ye.clean)(...a),Sv(o,n)}}})),gt.cbc=(0,ye.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e,n={}){(0,ze.bytes)(t),(0,ze.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,s){const o=gr(t),{b:a,o:c,out:l}=_v(i,r,s);let u=e;const d=[o];(0,ye.isAligned32)(u)||d.push(u=(0,ye.copyBytes)(u));const f=(0,ye.u32)(u);let h=f[0],g=f[1],p=f[2],y=f[3],m=0;for(;m+4<=a.length;)h^=a[m+0],g^=a[m+1],p^=a[m+2],y^=a[m+3],{s0:h,s1:g,s2:p,s3:y}=un(o,h,g,p,y),c[m++]=h,c[m++]=g,c[m++]=p,c[m++]=y;if(r){const b=Cv(i.subarray(4*m));h^=b[0],g^=b[1],p^=b[2],y^=b[3],{s0:h,s1:g,s2:p,s3:y}=un(o,h,g,p,y),c[m++]=h,c[m++]=g,c[m++]=p,c[m++]=y}return(0,ye.clean)(...d),l},decrypt(i,s){Av(i);const o=Ac(t);let a=e;const c=[o];(0,ye.isAligned32)(a)||c.push(a=(0,ye.copyBytes)(a));const l=(0,ye.u32)(a),u=Go(i.length,s);(0,ye.isAligned32)(i)||c.push(i=(0,ye.copyBytes)(i));const d=(0,ye.u32)(i),f=(0,ye.u32)(u);let h=l[0],g=l[1],p=l[2],y=l[3];for(let m=0;m+4<=d.length;){const b=h,w=g,P=p,O=y;h=d[m+0],g=d[m+1],p=d[m+2],y=d[m+3];const{s0:H,s1:G,s2:q,s3:j}=_c(o,h,g,p,y);f[m++]=H^b,f[m++]=G^w,f[m++]=q^P,f[m++]=j^O}return(0,ye.clean)(...c),Sv(u,r)}}})),gt.cfb=(0,ye.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i,s){(0,ze.bytes)(r);const o=r.length;s=Go(o,s);const a=gr(t);let c=e;const l=[a];(0,ye.isAligned32)(c)||l.push(c=(0,ye.copyBytes)(c)),(0,ye.isAligned32)(r)||l.push(r=(0,ye.copyBytes)(r));const u=(0,ye.u32)(r),d=(0,ye.u32)(s),f=i?d:u,h=(0,ye.u32)(c);let g=h[0],p=h[1],y=h[2],m=h[3];for(let w=0;w+4<=u.length;){const{s0:P,s1:O,s2:H,s3:G}=un(a,g,p,y,m);d[w+0]=u[w+0]^P,d[w+1]=u[w+1]^O,d[w+2]=u[w+2]^H,d[w+3]=u[w+3]^G,g=f[w++],p=f[w++],y=f[w++],m=f[w++]}const b=xn*Math.floor(u.length/4);if(b<o){({s0:g,s1:p,s2:y,s3:m}=un(a,g,p,y,m));const w=(0,ye.u8)(new Uint32Array([g,p,y,m]));for(let P=b,O=0;P<o;P++,O++)s[P]=r[P]^w[O];(0,ye.clean)(w)}return(0,ye.clean)(...l),s}return(0,ze.bytes)(t),(0,ze.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}})),gt.gcm=(0,ye.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){if((0,ze.bytes)(t),(0,ze.bytes)(e),n!==void 0&&(0,ze.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(o,a,c){const l=MA(_p.ghash,!1,o,c,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function s(){const o=gr(t),a=kl.slice(),c=kl.slice();if(Po(o,!1,c,c,a),e.length===12)c.set(e);else{const l=kl.slice(),u=(0,ye.createView)(l);(0,ye.setBigUint64)(u,8,BigInt(8*e.length),!1);const d=_p.ghash.create(a).update(e).update(l);d.digestInto(c),d.destroy()}return{xk:o,authKey:a,counter:c,tagMask:Po(o,!1,c,kl)}}return{encrypt(o){(0,ze.bytes)(o);const{xk:a,authKey:c,counter:l,tagMask:u}=s(),d=new Uint8Array(o.length+r),f=[a,c,l,u];(0,ye.isAligned32)(o)||f.push(o=(0,ye.copyBytes)(o)),Po(a,!1,l,o,d);const h=i(c,u,d.subarray(0,d.length-r));return f.push(h),d.set(h,o.length),(0,ye.clean)(...f),d},decrypt(o){if((0,ze.bytes)(o),o.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:c,counter:l,tagMask:u}=s(),d=[a,c,u,l];(0,ye.isAligned32)(o)||d.push(o=(0,ye.copyBytes)(o));const f=o.subarray(0,-16),h=o.subarray(-16),g=i(c,u,f);if(d.push(g),!(0,ye.equalBytes)(g,h))throw new Error("aes/gcm: invalid ghash tag");const p=Po(a,!1,l,f);return(0,ye.clean)(...d),p}}}));const Tl=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function LA(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function BA(t,e){if((0,ze.bytes)(e,16),!LA(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,ye.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=un(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}function DA(t,e){if((0,ze.bytes)(e,16),!LA(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,ye.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=_c(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}gt.siv=(0,ye.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){const r=Tl("AAD",0,68719476736),i=Tl("plaintext",0,2**36),s=Tl("nonce",12,12),o=Tl("ciphertext",16,2**36+16);function a(){const u=gr(t),d=new Uint8Array(t.length),f=new Uint8Array(16),h=[u,d];let g=e;(0,ye.isAligned32)(g)||h.push(g=(0,ye.copyBytes)(g));const p=(0,ye.u32)(g);let y=0,m=p[0],b=p[1],w=p[2],P=0;for(const H of[f,d].map(ye.u32)){const G=(0,ye.u32)(H);for(let q=0;q<G.length;q+=2){const{s0:j,s1:L}=un(u,y,m,b,w);G[q+0]=j,G[q+1]=L,y=++P}}const O={authKey:f,encKey:gr(d)};return(0,ye.clean)(...h),O}function c(u,d,f){const h=MA(_p.polyval,!0,d,f,n);for(let w=0;w<12;w++)h[w]^=e[w];h[15]&=127;const g=(0,ye.u32)(h);let p=g[0],y=g[1],m=g[2],b=g[3];return{s0:p,s1:y,s2:m,s3:b}=un(u,p,y,m,b),g[0]=p,g[1]=y,g[2]=m,g[3]=b,h}function l(u,d,f){let h=(0,ye.copyBytes)(d);h[15]|=128;const g=Po(u,!0,h,f);return(0,ye.clean)(h),g}return(0,ze.bytes)(t,16,24,32),(0,ze.bytes)(e),s(e.length),n!==void 0&&((0,ze.bytes)(n),r(n.length)),{encrypt(u){(0,ze.bytes)(u),i(u.length);const{encKey:d,authKey:f}=a(),h=c(d,f,u),g=[d,f,h];(0,ye.isAligned32)(u)||g.push(u=(0,ye.copyBytes)(u));const p=new Uint8Array(u.length+16);return p.set(h,u.length),p.set(l(d,h,u)),(0,ye.clean)(...g),p},decrypt(u){(0,ze.bytes)(u),o(u.length);const d=u.subarray(-16),{encKey:f,authKey:h}=a(),g=[f,h];(0,ye.isAligned32)(u)||g.push(u=(0,ye.copyBytes)(u));const p=l(f,d,u.subarray(0,-16)),y=c(f,h,p);if(g.push(y),!(0,ye.equalBytes)(d,y))throw(0,ye.clean)(...g),new Error("invalid polyval tag");return(0,ye.clean)(...g),p}}}));const ju={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=gr(t);if(e.length===16)BA(n,e);else{const r=(0,ye.u32)(e);let i=r[0],s=r[1];for(let o=0,a=1;o<6;o++)for(let c=2;c<r.length;c+=2,a++){const{s0:l,s1:u,s2:d,s3:f}=un(n,i,s,r[c],r[c+1]);i=l,s=u^Ku(a),r[c]=d,r[c+1]=f}r[0]=i,r[1]=s}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=Ac(t),r=e.length/8-1;if(r===1)DA(n,e);else{const i=(0,ye.u32)(e);let s=i[0],o=i[1];for(let a=0,c=6*r;a<6;a++)for(let l=2*r;l>=1;l-=2,c--){o^=Ku(c);const{s0:u,s1:d,s2:f,s3:h}=_c(n,s,o,i[l],i[l+1]);s=u,o=d,i[l]=f,i[l+1]=h}i[0]=s,i[1]=o}n.fill(0)}},xv=new Uint8Array(8).fill(166);gt.aeskw=(0,ye.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,ze.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,ye.concatBytes)(xv,e);return ju.encrypt(t,n),n},decrypt(e){if((0,ze.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,ye.copyBytes)(e);if(ju.decrypt(t,n),!(0,ye.equalBytes)(n.subarray(0,8),xv))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}})));const kv=2790873510;gt.aeskwp=(0,ye.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,ze.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,ye.u32)(r);return i[0]=kv,i[1]=Ku(e.length),ju.encrypt(t,r),r},decrypt(e){if((0,ze.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,ye.copyBytes)(e),r=(0,ye.u32)(n);ju.decrypt(t,n);const i=Ku(r[1])>>>0,s=8*Math.ceil(i/8);if(r[0]!==kv||n.length-8!==s)throw new Error("integrity check failed");for(let o=i;o<s;o++)if(n[8+o]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}}))),gt.unsafe={expandKeyLE:gr,expandKeyDecLE:Ac,encrypt:un,decrypt:_c,encryptBlock:BA,decryptBlock:DA,ctrCounter:NA,ctr32:Po},Object.defineProperty(zo,"__esModule",{value:!0}),zo.aes256cbc=zo.aes256gcm=void 0;var UA=gt;zo.aes256gcm=function(t,e,n){return(0,UA.gcm)(t,e,n)};zo.aes256cbc=function(t,e,n){return(0,UA.cbc)(t,e)};var Vu={},$A={},Io={};Object.defineProperty(Io,"__esModule",{value:!0}),Io.sigma=void 0,Io.rotl=function(t,e){return t<<e|t>>>32-e},Io.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=(0,Wn.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,Jr.number)(i),(0,Jr.number)(o),(0,Jr.bool)(s),(0,Jr.bool)(n),(a,c,l,u,d=0)=>{(0,Jr.bytes)(a),(0,Jr.bytes)(c),(0,Jr.bytes)(l);const f=l.length;if(u===void 0&&(u=new Uint8Array(f)),(0,Jr.bytes)(u),(0,Jr.number)(d),d<0||d>=Tv)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let g,p,y=a.length;if(y===32)h.push(g=(0,Wn.copyBytes)(a)),p=HA;else{if(y!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${y}`);g=new Uint8Array(32),g.set(a),g.set(a,16),p=Y8,h.push(g)}eh(c)||h.push(c=(0,Wn.copyBytes)(c));const m=(0,Wn.u32)(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(p,m,(0,Wn.u32)(c.subarray(0,16)),m),c=c.subarray(16)}const b=16-i;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const P=new Uint8Array(12);P.set(c,s?0:12-c.length),c=P,h.push(c)}const w=(0,Wn.u32)(c);return(function(P,O,H,G,q,j,L,V){const $=q.length,D=new Uint8Array(Pl),N=(0,Wn.u32)(D),S=eh(q)&&eh(j),k=S?(0,Wn.u32)(q):Pv,B=S?(0,Wn.u32)(j):Pv;for(let v=0;v<$;L++){if(P(O,H,G,N,L,V),L>=Tv)throw new Error("arx: counter overflow");const E=Math.min(Pl,$-v);if(S&&E===Pl){const x=v/4;if(v%4!=0)throw new Error("arx: invalid block position");for(let C,A=0;A<Z8;A++)C=x+A,B[C]=k[C]^N[A];v+=Pl}else{for(let x,C=0;C<E;C++)x=v+C,j[x]=q[x]^D[C];v+=E}}})(t,p,m,w,l,u,d,o),(0,Wn.clean)(...h),u}};const Jr=Wt,Wn=Kn,FA=t=>Uint8Array.from(t.split("").map((e=>e.charCodeAt(0)))),Q8=FA("expand 16-byte k"),J8=FA("expand 32-byte k"),Y8=(0,Wn.u32)(Q8),HA=(0,Wn.u32)(J8);function eh(t){return t.byteOffset%4==0}Io.sigma=HA.slice();const Pl=64,Z8=16,Tv=2**32-1,Pv=new Uint32Array;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.poly1305=void 0,Ya.wrapConstructorWithKey=KA;const Il=Wt,Ba=Kn,Ut=(t,e)=>255&t[e++]|(255&t[e++])<<8;class X8{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,Ba.toBytes)(e),(0,Il.bytes)(e,32);const n=Ut(e,0),r=Ut(e,2),i=Ut(e,4),s=Ut(e,6),o=Ut(e,8),a=Ut(e,10),c=Ut(e,12),l=Ut(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ut(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],f=o[5],h=o[6],g=o[7],p=o[8],y=o[9],m=Ut(e,n+0),b=Ut(e,n+2),w=Ut(e,n+4),P=Ut(e,n+6),O=Ut(e,n+8),H=Ut(e,n+10),G=Ut(e,n+12),q=Ut(e,n+14);let j=s[0]+(8191&m),L=s[1]+(8191&(m>>>13|b<<3)),V=s[2]+(8191&(b>>>10|w<<6)),$=s[3]+(8191&(w>>>7|P<<9)),D=s[4]+(8191&(P>>>4|O<<12)),N=s[5]+(O>>>1&8191),S=s[6]+(8191&(O>>>14|H<<2)),k=s[7]+(8191&(H>>>11|G<<5)),B=s[8]+(8191&(G>>>8|q<<8)),v=s[9]+(q>>>5|i),E=0,x=E+j*a+L*(5*y)+V*(5*p)+$*(5*g)+D*(5*h);E=x>>>13,x&=8191,x+=N*(5*f)+S*(5*d)+k*(5*u)+B*(5*l)+v*(5*c),E+=x>>>13,x&=8191;let C=E+j*c+L*a+V*(5*y)+$*(5*p)+D*(5*g);E=C>>>13,C&=8191,C+=N*(5*h)+S*(5*f)+k*(5*d)+B*(5*u)+v*(5*l),E+=C>>>13,C&=8191;let A=E+j*l+L*c+V*a+$*(5*y)+D*(5*p);E=A>>>13,A&=8191,A+=N*(5*g)+S*(5*h)+k*(5*f)+B*(5*d)+v*(5*u),E+=A>>>13,A&=8191;let _=E+j*u+L*l+V*c+$*a+D*(5*y);E=_>>>13,_&=8191,_+=N*(5*p)+S*(5*g)+k*(5*h)+B*(5*f)+v*(5*d),E+=_>>>13,_&=8191;let T=E+j*d+L*u+V*l+$*c+D*a;E=T>>>13,T&=8191,T+=N*(5*y)+S*(5*p)+k*(5*g)+B*(5*h)+v*(5*f),E+=T>>>13,T&=8191;let R=E+j*f+L*d+V*u+$*l+D*c;E=R>>>13,R&=8191,R+=N*a+S*(5*y)+k*(5*p)+B*(5*g)+v*(5*h),E+=R>>>13,R&=8191;let U=E+j*h+L*f+V*d+$*u+D*l;E=U>>>13,U&=8191,U+=N*c+S*a+k*(5*y)+B*(5*p)+v*(5*g),E+=U>>>13,U&=8191;let I=E+j*g+L*h+V*f+$*d+D*u;E=I>>>13,I&=8191,I+=N*l+S*c+k*a+B*(5*y)+v*(5*p),E+=I>>>13,I&=8191;let K=E+j*p+L*g+V*h+$*f+D*d;E=K>>>13,K&=8191,K+=N*u+S*l+k*c+B*a+v*(5*y),E+=K>>>13,K&=8191;let W=E+j*y+L*p+V*g+$*h+D*f;E=W>>>13,W&=8191,W+=N*d+S*u+k*l+B*c+v*a,E+=W>>>13,W&=8191,E=(E<<2)+E|0,E=E+x|0,x=8191&E,E>>>=13,C+=E,s[0]=x,s[1]=C,s[2]=A,s[3]=_,s[4]=T,s[5]=R,s[6]=U,s[7]=I,s[8]=K,s[9]=W}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(1^i)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+n[0];e[0]=65535&o;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=65535&o;(0,Ba.clean)(r)}update(e){(0,Il.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,Ba.toBytes)(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(e,s)}return this}destroy(){(0,Ba.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,Il.exists)(this),(0,Il.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function KA(t){const e=(r,i)=>t(i).update((0,Ba.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}Ya.poly1305=KA((t=>new X8(t))),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=o;const e=Io,n=Wt,r=Ya,i=Kn;function s(d,f,h,g,p,y=20){let m=d[0],b=d[1],w=d[2],P=d[3],O=f[0],H=f[1],G=f[2],q=f[3],j=f[4],L=f[5],V=f[6],$=f[7],D=p,N=h[0],S=h[1],k=h[2],B=m,v=b,E=w,x=P,C=O,A=H,_=G,T=q,R=j,U=L,I=V,K=$,W=D,Z=N,se=S,M=k;for(let Y=0;Y<y;Y+=2)B=B+C|0,W=(0,e.rotl)(W^B,16),R=R+W|0,C=(0,e.rotl)(C^R,12),B=B+C|0,W=(0,e.rotl)(W^B,8),R=R+W|0,C=(0,e.rotl)(C^R,7),v=v+A|0,Z=(0,e.rotl)(Z^v,16),U=U+Z|0,A=(0,e.rotl)(A^U,12),v=v+A|0,Z=(0,e.rotl)(Z^v,8),U=U+Z|0,A=(0,e.rotl)(A^U,7),E=E+_|0,se=(0,e.rotl)(se^E,16),I=I+se|0,_=(0,e.rotl)(_^I,12),E=E+_|0,se=(0,e.rotl)(se^E,8),I=I+se|0,_=(0,e.rotl)(_^I,7),x=x+T|0,M=(0,e.rotl)(M^x,16),K=K+M|0,T=(0,e.rotl)(T^K,12),x=x+T|0,M=(0,e.rotl)(M^x,8),K=K+M|0,T=(0,e.rotl)(T^K,7),B=B+A|0,M=(0,e.rotl)(M^B,16),I=I+M|0,A=(0,e.rotl)(A^I,12),B=B+A|0,M=(0,e.rotl)(M^B,8),I=I+M|0,A=(0,e.rotl)(A^I,7),v=v+_|0,W=(0,e.rotl)(W^v,16),K=K+W|0,_=(0,e.rotl)(_^K,12),v=v+_|0,W=(0,e.rotl)(W^v,8),K=K+W|0,_=(0,e.rotl)(_^K,7),E=E+T|0,Z=(0,e.rotl)(Z^E,16),R=R+Z|0,T=(0,e.rotl)(T^R,12),E=E+T|0,Z=(0,e.rotl)(Z^E,8),R=R+Z|0,T=(0,e.rotl)(T^R,7),x=x+C|0,se=(0,e.rotl)(se^x,16),U=U+se|0,C=(0,e.rotl)(C^U,12),x=x+C|0,se=(0,e.rotl)(se^x,8),U=U+se|0,C=(0,e.rotl)(C^U,7);let F=0;g[F++]=m+B|0,g[F++]=b+v|0,g[F++]=w+E|0,g[F++]=P+x|0,g[F++]=O+C|0,g[F++]=H+A|0,g[F++]=G+_|0,g[F++]=q+T|0,g[F++]=j+R|0,g[F++]=L+U|0,g[F++]=V+I|0,g[F++]=$+K|0,g[F++]=D+W|0,g[F++]=N+Z|0,g[F++]=S+se|0,g[F++]=k+M|0}function o(d,f,h,g){let p=d[0],y=d[1],m=d[2],b=d[3],w=f[0],P=f[1],O=f[2],H=f[3],G=f[4],q=f[5],j=f[6],L=f[7],V=h[0],$=h[1],D=h[2],N=h[3];for(let k=0;k<20;k+=2)p=p+w|0,V=(0,e.rotl)(V^p,16),G=G+V|0,w=(0,e.rotl)(w^G,12),p=p+w|0,V=(0,e.rotl)(V^p,8),G=G+V|0,w=(0,e.rotl)(w^G,7),y=y+P|0,$=(0,e.rotl)($^y,16),q=q+$|0,P=(0,e.rotl)(P^q,12),y=y+P|0,$=(0,e.rotl)($^y,8),q=q+$|0,P=(0,e.rotl)(P^q,7),m=m+O|0,D=(0,e.rotl)(D^m,16),j=j+D|0,O=(0,e.rotl)(O^j,12),m=m+O|0,D=(0,e.rotl)(D^m,8),j=j+D|0,O=(0,e.rotl)(O^j,7),b=b+H|0,N=(0,e.rotl)(N^b,16),L=L+N|0,H=(0,e.rotl)(H^L,12),b=b+H|0,N=(0,e.rotl)(N^b,8),L=L+N|0,H=(0,e.rotl)(H^L,7),p=p+P|0,N=(0,e.rotl)(N^p,16),j=j+N|0,P=(0,e.rotl)(P^j,12),p=p+P|0,N=(0,e.rotl)(N^p,8),j=j+N|0,P=(0,e.rotl)(P^j,7),y=y+O|0,V=(0,e.rotl)(V^y,16),L=L+V|0,O=(0,e.rotl)(O^L,12),y=y+O|0,V=(0,e.rotl)(V^y,8),L=L+V|0,O=(0,e.rotl)(O^L,7),m=m+H|0,$=(0,e.rotl)($^m,16),G=G+$|0,H=(0,e.rotl)(H^G,12),m=m+H|0,$=(0,e.rotl)($^m,8),G=G+$|0,H=(0,e.rotl)(H^G,7),b=b+w|0,D=(0,e.rotl)(D^b,16),q=q+D|0,w=(0,e.rotl)(w^q,12),b=b+w|0,D=(0,e.rotl)(D^b,8),q=q+D|0,w=(0,e.rotl)(w^q,7);let S=0;g[S++]=p,g[S++]=y,g[S++]=m,g[S++]=b,g[S++]=V,g[S++]=$,g[S++]=D,g[S++]=N}t.chacha20orig=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),c=(d,f)=>{d.update(f);const h=f.length%16;h&&d.update(a.subarray(h))},l=new Uint8Array(32);function u(d,f,h,g,p){const y=d(f,h,l),m=r.poly1305.create(y);p&&c(m,p),c(m,g);const b=new Uint8Array(16),w=(0,i.createView)(b);(0,i.setBigUint64)(w,0,BigInt(p?p.length:0),!0),(0,i.setBigUint64)(w,8,BigInt(g.length),!0),m.update(b);const P=m.digest();return(0,i.clean)(y,b),P}t._poly1305_aead=d=>(f,h,g)=>((0,n.bytes)(f,32),(0,n.bytes)(h),{encrypt(y,m){const b=y.length,w=b+16;m?(0,n.bytes)(m,w):m=new Uint8Array(w),d(f,h,y,m,1);const P=u(d,f,h,m.subarray(0,-16),g);return m.set(P,b),(0,i.clean)(P),m},decrypt(y,m){const b=y.length,w=b-16;if(b<16)throw new Error("encrypted data must be at least 16 bytes");m?(0,n.bytes)(m,w):m=new Uint8Array(w);const P=y.subarray(0,-16),O=y.subarray(-16),H=u(d,f,h,P,g);if(!(0,i.equalBytes)(O,H))throw new Error("invalid tag");return d(f,h,P,m,1),(0,i.clean)(H),m}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))})($A),Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.xchacha20=void 0;var ho,Iv,xa,eN=$A;Vu.xchacha20=function(t,e,n){return(0,eN.xchacha20poly1305)(t,e,n)},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=Kn,n=Ug,r=zo,i=Vu,s=bc,o=Ot;t.symEncrypt=function(u,d,f){return a(c,u,d,f)};function a(u,d,f,h){var g=(0,s.symmetricAlgorithm)();if(g==="aes-256-gcm")return u(r.aes256gcm,d,f,(0,s.symmetricNonceLength)(),o.AEAD_TAG_LENGTH,h);if(g==="xchacha20")return u(i.xchacha20,d,f,o.XCHACHA20_NONCE_LENGTH,o.AEAD_TAG_LENGTH,h);if(g==="aes-256-cbc")return u(r.aes256cbc,d,f,16,0);throw new Error("Not implemented")}function c(u,d,f,h,g,p){var y=(0,n.randomBytes)(h),m=u(d,y,p).encrypt(f);if(g===0)return(0,e.concatBytes)(y,m);var b=m.length-g,w=m.subarray(0,b),P=m.subarray(b);return(0,e.concatBytes)(y,P,w)}function l(u,d,f,h,g,p){var y=f.subarray(0,h),m=u(d,Uint8Array.from(y),p),b=f.subarray(h);if(g===0)return m.decrypt(b);var w=b.subarray(0,g),P=b.subarray(g);return m.decrypt((0,e.concatBytes)(P,w))}t.symDecrypt=function(u,d,f){return a(l,u,d,f)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt})(bv),ho=zd,Iv=er&&er.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),xa=er&&er.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||Iv(e,t,n)},Object.defineProperty(ho,"__esModule",{value:!0}),xa(V2,ho),xa(CA,ho),xa(Ep,ho),xa(bv,ho);var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.PublicKey=void 0;var Rv=Kn,Rl=zd,tN=(function(){function t(e){this.data=(0,Rl.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,Rl.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return pe.from((0,Rl.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return pe.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,Rv.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,Rl.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,Rv.equalBytes)(this.data,e.data)},t})();Sc.PublicKey=tN,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.PrivateKey=void 0;var Ov=Kn,po=zd,nN=Sc,rN=(function(){function t(e){if(e===void 0)this.data=(0,po.getValidSecret)();else{if(!(0,po.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new nN.PublicKey((0,po.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,po.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return pe.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,Ov.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,po.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,po.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,Ov.equalBytes)(this.data,e.data)},t})();Uu.PrivateKey=rN,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=Uu;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=Sc;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})})($f),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,c){var l=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),d=l.encapsulate(u,(0,n.isHkdfKeyCompressed)()),f=(0,n.isEphemeralKeyCompressed)()?l.publicKey.compressed:l.publicKey.uncompressed,h=(0,i.symEncrypt)(d,c);return pe.from((0,e.concatBytes)(f,h))},t.decrypt=function(a,c){var l=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),d=new r.PublicKey(c.subarray(0,u)),f=c.subarray(u),h=d.decapsulate(l,(0,n.isHkdfKeyCompressed)());return pe.from((0,i.symDecrypt)(h,f))};var e=Kn,n=bc,r=$f,i=zd,s=bc;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return s.ECIES_CONFIG}});var o=$f;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}})(bo);const jA=mn("KeyExchange:Layer"),VA=mn("SocketService:Layer"),zA=mn("Ecies:Layer"),GA=mn("RemoteCommunication:Layer");jA.color="##95c44e",VA.color="#f638d7",zA.color="#465b9c",GA.color="#47a2be";const ae={KeyExchange:jA,SocketService:VA,Ecies:zA,RemoteCommunication:GA};let ka,Ol=[],th=[];const Ai=(t,e)=>de(void 0,void 0,void 0,(function*(){ka=e,th.push(t),(function(n){return de(this,void 0,void 0,(function*(){if(!ka||!n)return;(function(){const o=th;th=Ol,Ol=o})();const r=ka.endsWith("/")?`${ka}evt`:`${ka}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[o,a]of Object.entries(n.params))i[o]=a;const s=JSON.stringify(i);ae.RemoteCommunication(`[sendBufferedEvents] Sending ${Ol.length} analytics events to ${r}`);try{const o=yield p2(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:s}),a=yield o.text();ae.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),Ol.length=0}catch{}}))})(t).catch((()=>{}))}));class nh{constructor(e){this.enabled=!0,e?.debug&&mn.enable("Ecies:Layer"),this.ecies=e?.privateKey?bo.PrivateKey.fromHex(e.privateKey):new bo.PrivateKey,ae.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),ae.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),ae.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new bo.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{ae.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=pe.from(e),s=bo.encrypt(n,i);r=pe.from(s).toString("base64")}catch(i){throw ae.Ecies("[ECIES: encrypt()] error encrypt:",i),ae.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),ae.Ecies("[ECIES: encrypt()] data: ",e),ae.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{ae.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=pe.from(e.toString(),"base64");n=bo.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw ae.Ecies("[ECIES: decrypt()] error decrypt",r),ae.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),ae.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){ae.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var fs={version:"0.33.1"};const ca="https://metamask-sdk.api.cx.metamask.io/",iN=["websocket"],la=6048e5,sN=3e3,Gt={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},oN=[Gt.METAMASK_CONNECTSIGN,Gt.METAMASK_CONNECTWITH,Gt.METAMASK_OPEN,Gt.METAMASK_BATCH,Gt.PERSONAL_SIGN,Gt.WALLET_REQUESTPERMISSIONS,Gt.WALLET_REVOKEPERMISSIONS,Gt.WALLET_WATCHASSET,Gt.ETH_SENDTRANSACTION,Gt.ETH_SIGNTYPEDDATA,Gt.ETH_SIGNTYPEDDATA_V3,Gt.ETH_SIGNTYPEDDATA_V4,Gt.ETH_SIGNTRANSACTION,Gt.ETH_SIGN,Gt.PERSONAL_EC_RECOVER];function Yc(t){return oN.includes(t)}function qA(t){const{context:e}=t;ae.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var Vt,ve,zu,Xe,ht,St,go;(go=Vt||(Vt={})).DISCONNECTED="disconnected",go.WAITING="waiting",go.TIMEOUT="timeout",go.LINKED="linked",go.PAUSED="paused",go.TERMINATED="terminated",(function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"})(ve||(ve={})),(zu||(zu={})).KEY_EXCHANGE="key_exchange",(function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"})(Xe||(Xe={}));class aN extends Fd.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:s}){super(),this.keysExchanged=!1,this.step=Xe.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i?.privateKey&&n&&(ae.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new nh(Object.assign(Object.assign({},i),{debug:s?.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=s?.keyExchangeLayer===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(zu.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(ae.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void ae.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&ae.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(ve.KEY_INFO,r.type),r.type===Xe.KEY_HANDSHAKE_SYN?(this.checkStep([Xe.KEY_HANDSHAKE_NONE,Xe.KEY_HANDSHAKE_ACK]),ae.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Xe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch((i=>{ae.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)})),this.setStep(Xe.KEY_HANDSHAKE_ACK)):r.type===Xe.KEY_HANDSHAKE_SYNACK?(this.checkStep([Xe.KEY_HANDSHAKE_SYNACK,Xe.KEY_HANDSHAKE_ACK,Xe.KEY_HANDSHAKE_NONE]),ae.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Xe.KEY_HANDSHAKE_ACK}).catch((i=>{ae.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)})),this.keysExchanged=!0,this.setStep(Xe.KEY_HANDSHAKE_ACK),this.emit(ve.KEYS_EXCHANGED)):r.type===Xe.KEY_HANDSHAKE_ACK&&(ae.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Xe.KEY_HANDSHAKE_ACK,Xe.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Xe.KEY_HANDSHAKE_ACK),this.emit(ve.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new nh(e)}clean(){ae.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Xe.KEY_HANDSHAKE_NONE),this.emit(ve.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,s=i>=2;r?ae.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(ae.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==Xe.KEY_HANDSHAKE_NONE&&this.step!==Xe.KEY_HANDSHAKE_SYNACK)||n?(ae.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Xe.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Xe.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch((o=>{ae.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",o)}))):ae.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?ae.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):s?this.communicationLayer.sendMessage({type:Xe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch((o=>{ae.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",o)})):(this.communicationLayer.sendMessage({type:Xe.KEY_HANDSHAKE_START}).catch((o=>{ae.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",o)})),this.clean()))}setStep(e){this.step=e,this.emit(ve.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new nh({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){ae.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(ht||(ht={})),(function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"})(St||(St={}));const eu=(t,e,n)=>de(void 0,void 0,void 0,(function*(){var r,i,s,o,a,c;const{remote:l,state:u}=t,{channelId:d,isOriginator:f}=u;if(e==="error_terminated")return ae.SocketService(`handleJoinChannelResults: Channel ${d} terminated`),void t.emit(ve.TERMINATE);if(!n)return void ae.SocketService(`handleJoinChannelResults: No result for channel ${d}`);const{persistence:h,walletKey:g,rejected:p}=n;if(ae.SocketService(`handleJoinChannelResults: Channel ${d} persistence=${h} walletKey=${g} rejected=${p}`),p)return ae.SocketService(`handleJoinChannelResults: Channel ${d} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(ve.REJECTED,{channelId:d}),void t.remote.emitServiceStatusEvent();if(g&&!(!((r=l.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(g),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(ve.AUTHORIZED);const{communicationLayer:y,storageManager:m}=l.state,b=Object.assign(Object.assign({},l.state.channelConfig),{channelId:(s=l.state.channelId)!==null&&s!==void 0?s:"",validUntil:Date.now()+la,localKey:y?.getKeyInfo().ecies.private,otherKey:g});t.sendMessage({type:Xe.KEY_HANDSHAKE_ACK}).catch((w=>{})),(o=t.state.socket)===null||o===void 0||o.emit(ht.PING,{id:d,clientType:f?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield m?.persistChannelConfig(b),l.emitServiceStatusEvent(),l.setConnectionStatus(Vt.LINKED)}h&&(t.emit(ve.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(ve.AUTHORIZED),Ai(Object.assign(Object.assign({id:d??"",event:f?St.CONNECTED:St.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:fs.version,walletVersion:(c=t.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch((y=>{})))})),qo=t=>new Promise((e=>{setTimeout(e,t)})),Nv=(t,e,...n)=>de(void 0,[t,e,...n],void 0,(function*(r,i,s=200){let o;const a=Date.now();let c=!1;for(;!c;){if(c=Date.now()-a>3e5,o=i[r],o.elapsedTime!==void 0)return o;yield qo(s)}throw new Error(`RPC ${r} timed out`)})),Cp=t=>de(void 0,void 0,void 0,(function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:s,isReconnecting:o}=e;if(o)return ae.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return ae.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,ae.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(ae.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield qo(200),n.connected)return ae.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(ht.PING,{id:r,clientType:s?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(ve.SOCKET_RECONNECT);try{if(yield new Promise(((c,l)=>{n.emit(ve.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:s?"dapp":"wallet"},((u,d)=>de(void 0,void 0,void 0,(function*(){try{yield eu(t,u,d),c()}catch(f){l(f)}}))))})),yield qo(100),n.connected)return ae.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(c){ae.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,c)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield qo(200))}return ae.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}}));function WA(t,e){return de(this,void 0,void 0,(function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return ae.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===ht.TERMINATE&&(t.state.manualDisconnect=!0),new Promise(((s,o)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(ve.MESSAGE,i,((c,l)=>{var u;c&&(ae.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),o(c)),ae.SocketService("[encryptAndSendMessage] response",l),s((u=l?.success)!==null&&u!==void 0&&u)}))}))}))}var Ro;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(Ro||(Ro={}));const QA=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map((t=>t.toLowerCase())),cN=[{event:ve.CLIENTS_CONNECTED,handler:function(t,e){return n=>de(this,void 0,void 0,(function*(){var r,i,s,o,a,c,l,u,d,f,h;const g=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(ae.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${g} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(ve.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(ae.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(c=t.state.keyExchange)===null||c===void 0||c.start({isOriginator:(l=t.state.isOriginator)!==null&&l!==void 0&&l})),t.state.resumed=!1;else if(t.state.clientsPaused)ae.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const p=!g;ae.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${p} -- backward compatibility`),ae.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(d=t.state.keyExchange)===null||d===void 0?void 0:d.areKeysExchanged()} -- force=${p} -- backward compatibility`),(f=t.state.keyExchange)===null||f===void 0||f.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h,force:p})}t.state.clientsConnected=!0,t.state.clientsPaused=!1}))}},{event:ve.CHANNEL_CREATED,handler:function(t,e){return n=>{ae.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(ve.CHANNEL_CREATED,n)}}},{event:ve.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,ae.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?ae.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(ve.CLIENTS_DISCONNECTED,e))}}},{event:ve.CONFIG,handler:function(t,e){return n=>de(this,void 0,void 0,(function*(){var r,i,s;ae.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:o,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(ae.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:Xe.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:ht.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),o!==!0||t.remote.state.channelConfig.relayPersistence||(ae.SocketService(`Setting relay persistence ${o}`),t.remote.state.channelConfig.relayPersistence=o,t.remote.state.relayPersistence=!0,t.remote.emit(ve.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(ve.AUTHORIZED),yield(s=t.remote.state.storageManager)===null||s===void 0?void 0:s.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(ve.CHANNEL_PERSISTENCE))}))}},{event:ve.MESSAGE,handler:function(t,e){return n=>{var r,i,s,o,a,c,l,u,d,f,h,g,p,y,m,b,w,P;const{ackId:O,message:H,error:G}=n,q=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(ae.SocketService(`[SocketService handleMessage()]  relayPersistence=${q}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),G)throw ae.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${G}`),new Error(G);const j=typeof H=="string";if(!j&&H?.type===Xe.KEY_HANDSHAKE_START)return q?void 0:(ae.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,H),void((s=t.state.keyExchange)===null||s===void 0||s.start({isOriginator:(o=t.state.isOriginator)!==null&&o!==void 0&&o,force:!0})));if(!j&&(!((a=H?.type)===null||a===void 0)&&a.startsWith("key_handshake")))return q?void 0:(ae.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,H),void t.emit(zu.KEY_EXCHANGE,{message:H,context:t.state.context}));if(j&&!(!((c=t.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let $=!1;try{ae.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(l=t.state.keyExchange)===null||l===void 0||l.decryptMessage(H),$=!0}catch(D){ae.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,D)}if(!$)return t.state.isOriginator?(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(f=t.state.isOriginator)!==null&&f!==void 0&&f}):t.sendMessage({type:Xe.KEY_HANDSHAKE_START}).catch((D=>{})),void ae.SocketService(`Message ignored because invalid key exchange status. step=${(h=t.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo().step}`,(g=t.state.keyExchange)===null||g===void 0?void 0:g.getKeyInfo(),H);ae.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!j&&H?.type)return void t.emit(ve.MESSAGE,H);if(!j)return void t.emit(ve.MESSAGE,H);const L=(p=t.state.keyExchange)===null||p===void 0?void 0:p.decryptMessage(H),V=JSON.parse(L??"{}");if(O&&O?.length>0&&(ae.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${O} channelId=${e}`),(y=t.state.socket)===null||y===void 0||y.emit(ve.MESSAGE_ACK,{ackId:O,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=V?.type===ht.PAUSE,t.state.isOriginator&&V.data){const $=V.data,D=t.state.rpcMethodTracker[$.id];if(D){const N=Date.now()-D.timestamp;ae.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${$.id} method=${D.method} responseTime=${N}`,V),t.remote.state.analytics&&QA.includes(D.method.toLowerCase())&&Ai(Object.assign(Object.assign({id:(m=t.remote.state.channelId)!==null&&m!==void 0?m:"",event:St.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:fs.version},t.remote.state.originatorInfo),{walletVersion:(b=t.remote.state.walletInfo)===null||b===void 0?void 0:b.version,params:{method:D.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch((k=>{})),Yc(D.method)&&At.analytics.track($.error?$.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:D.method});const S=Object.assign(Object.assign({},D),{result:$.result,error:$.error?{code:(w=$.error)===null||w===void 0?void 0:w.code,message:(P=$.error)===null||P===void 0?void 0:P.message}:void 0,elapsedTime:N});t.state.rpcMethodTracker[$.id]=S,t.emit(ve.RPC_UPDATE,S)}}t.emit(ve.MESSAGE,{message:V})}}},{event:ve.REJECTED,handler:function(t,e){return n=>de(this,void 0,void 0,(function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(ae.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),Ai(Object.assign(Object.assign({id:e,event:St.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:fs.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch((i=>{})),At.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(ve.REJECTED,{channelId:e}),t.remote.setConnectionStatus(Vt.DISCONNECTED)):ae.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)}))}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{ae.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(ve.CLIENTS_WAITING,n)}}}],lN=[{event:ve.KEY_INFO,handler:function(t){return e=>{ae.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(ve.KEY_INFO,e)}}},{event:ve.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;ae.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const o=t.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch((a=>{}))}t.emit(ve.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const s={keyInfo:t.getKeyInfo()};t.emit(ve.SERVICE_STATUS,s)}}}];function Mv(t,e){ae.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n?.io.on("error",(i=>{ae.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)})),n?.io.on("reconnect",(i=>{ae.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),Cp(t).catch((s=>{}))})),n?.io.on("reconnect_error",(i=>{ae.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)})),n?.io.on("reconnect_failed",(()=>{ae.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)}))),n?.on("disconnect",(i=>(ae.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),(function(s){return o=>{ae.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${s.state.manualDisconnect}`,o),s.state.manualDisconnect||(s.emit(ve.SOCKET_DISCONNECTED),Cp(s).catch((a=>{})))}})(t)(i))))),cN.forEach((({event:i,handler:s})=>{n?.on(`${i}-${e}`,s(t,e))})),lN.forEach((({event:i,handler:s})=>{r?.on(i,s(t))})),t.state.setupChannelListeners=!0}class uN extends Fd.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:s,remote:o,logging:a}=e;this.state.resumed=n,this.state.context=s,this.state.isOriginator=o.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=a?.serviceLayer===!0,this.remote=o,a?.serviceLayer===!0&&mn.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==ca&&a?.plaintext===!0,ae.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,s={autoConnect:!1,transports:iN,withCredentials:!0},o=this.state.communicationServerUrl;ae.SocketService(`[SocketService: initSocket()] Socket IO url: ${o}`),this.state.socket=Vo(o,s),(function(c){if(typeof window<"u"&&typeof document<"u"&&(ae.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){const l=()=>{ae.SocketService("Document has focus --- reconnecting socket"),Cp(c).catch((u=>{}))};window.addEventListener("focus",l),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",l),c.state.focusListenerAdded=!1}}})(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new aN(a)}resetKeys(){return ae.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r,i;if(ae.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const s=Yi();e.state.channelId=s,Mv(e,s),yield new Promise(((a,c)=>{var l;(l=e.state.socket)===null||l===void 0||l.emit(ve.JOIN_CHANNEL,{channelId:s,context:`${e.state.context}createChannel`,clientType:"dapp"},((u,d)=>de(this,void 0,void 0,(function*(){try{yield eu(e,u,d),a()}catch(f){c(f)}}))))}));const o=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:s,pubKey:o?.ecies.public||"",privKey:o?.ecies.private||""}}))})(this)}))}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return(function(i){return de(this,arguments,void 0,(function*({options:s,instance:o}){const{channelId:a,authorized:c,withKeyExchange:l}=s,{state:u,remote:d}=o,{isOriginator:f=!1,socket:h,keyExchange:g}=u,{channelConfig:p}=d.state;if(h?.connected)throw new Error("socket already connected");if(f&&p?.relayPersistence){const{localKey:y,otherKey:m}=p;y&&m&&g?.setRelayPersistence({localKey:y,otherKey:m})}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:l,isOriginator:f,channelId:a}),h?.connect(),Mv(o,a),!f&&c&&(g?.setKeysExchanged(!0),Object.assign(d.state,{ready:!0,authorized:!0})),new Promise((y=>{var m;const b=(m=g?.getKeyInfo())===null||m===void 0?void 0:m.ecies.public;h?.emit(ve.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:f?"dapp":"wallet",publicKey:c&&!f?b:void 0},((w,P)=>de(this,void 0,void 0,(function*(){yield eu(o,w,P),y()}))))}))}))})({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(ve.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Xe.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return de(this,void 0,void 0,(function*(){return(function(n,r){return de(this,void 0,void 0,(function*(){var i,s,o;if(!n.state.channelId)throw ae.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(ae.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(s=r?.type)===null||s===void 0?void 0:s.startsWith("key_handshake"))return(function(c,l){var u;ae.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,l),(u=c.state.socket)===null||u===void 0||u.emit(ve.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:l})})(n,r),!0;(function(c,l){var u;if(!(!((u=c.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!c.remote.state.relayPersistence)throw ae.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,l),new Error("Keys not exchanged BBB")})(n,r),(function(c,l){var u;const d=(u=l?.method)!==null&&u!==void 0?u:"",f=l?.id;c.state.isOriginator&&f&&(c.state.rpcMethodTracker[f]={id:f,timestamp:Date.now(),method:d},c.emit(ve.RPC_UPDATE,c.state.rpcMethodTracker[f]))})(n,r);const a=yield WA(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&QA.includes(r.method.toLowerCase())&&Ai({id:(o=n.remote.state.channelId)!==null&&o!==void 0?o:"",event:St.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch((c=>{})),n.remote.state.isOriginator&&r.method&&Yc(r.method)&&At.analytics.track("sdk_action_requested",{action:r.method}),(function(c,l){return de(this,void 0,void 0,(function*(){var u;const d=l?.id,f=(u=l?.method)!==null&&u!==void 0?u:"";if(c.state.isOriginator&&d)try{const h=Nv(d,c.state.rpcMethodTracker,200).then((y=>({type:Ro.RPC_CHECK,result:y}))),g=de(this,void 0,void 0,(function*(){const y=yield(b=>de(void 0,[b],void 0,(function*({rpcId:w,instance:P}){for(;P.state.lastRpcId===w||P.state.lastRpcId===void 0;)yield qo(200);return P.state.lastRpcId})))({instance:c,rpcId:d}),m=yield Nv(y,c.state.rpcMethodTracker,200);return{type:Ro.SKIPPED_RPC,result:m}})),p=yield Promise.race([h,g]);if(p.type===Ro.RPC_CHECK){const y=p.result;ae.SocketService(`[SocketService:handleRpcReplies()] id=${l.id} ${f} ( ${y.elapsedTime} ms)`,y.result)}else{if(p.type!==Ro.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${d}`);{const y=Object.assign(Object.assign({},c.state.rpcMethodTracker[d]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(ve.RPC_UPDATE,y);const m={data:Object.assign(Object.assign({},y),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(ve.MESSAGE,{message:m})}}}catch(h){throw h}}))})(n,r).catch((c=>{})),a}))})(this,e)}))}ping(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r;ae.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(ht.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})}))})(this)}pause(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r;ae.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:ht.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()}))})(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return(function(e){return de(this,void 0,void 0,(function*(){const{state:n,remote:r}=e,{socket:i,channelId:s,context:o,keyExchange:a,isOriginator:c}=n,{isOriginator:l}=r.state;if(ae.SocketService(`[SocketService: resume()] channelId=${s} context=${o} connected=${i?.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a?.areKeysExchanged()}`),!s)throw ae.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i?.connected?(ae.SocketService("[SocketService: resume()] already connected."),i.emit(ht.PING,{id:s,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a?.areKeysExchanged()||(c?yield e.sendMessage({type:ht.READY}):a?.start({isOriginator:!1}))):(i?.connect(),ae.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i?.connected}`),i?.emit(ve.JOIN_CHANNEL,{channelId:s,context:`${o}_resume`,clientType:l?"dapp":"wallet"},((u,d)=>de(this,void 0,void 0,(function*(){try{yield eu(e,u,d)}catch{}}))))),n.manualDisconnect=!1,n.resumed=!0}))})(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return(function(n,r){var i,s,o,a,c;ae.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r?.terminate&&((s=(i=n.state).removeFocusListener)===null||s===void 0||s.call(i),n.state.channelId=r.channelId,(o=n.state.socket)===null||o===void 0||o.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()})(this,e)}}var Qs,Yt,Lv;function dN(t){return()=>de(this,void 0,void 0,(function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield de(this,void 0,void 0,(function*(){for(;!i.walletInfo;)yield qo(500)}));const s="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(ae.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${s}`),s!==1)return;const o=i.platformType===Yt.MobileWeb||i.platformType===Yt.ReactNative||i.platformType===Yt.MetaMaskMobileWebview;ae.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${o} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),o&&(i.authorized=!0,t.emit(ve.AUTHORIZED))}))}function fN(t){return e=>{const{state:n}=t;ae.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(ve.CHANNEL_CREATED,e)}}function hN(t,e){return()=>{var n,r,i,s;const{state:o}=t;ae.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${(r=(n=o.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),o.analytics&&Ai(Object.assign(Object.assign({id:(i=o.channelId)!==null&&i!==void 0?i:"",event:o.reconnection?St.RECONNECT:o.isOriginator?St.REQUEST:St.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:(s=o.walletInfo)===null||s===void 0?void 0:s.version,commLayerVersion:fs.version}),o.communicationServerUrl).catch((a=>{})),o.isOriginator&&!o.reconnection&&At.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,t.emit(ve.CLIENTS_CONNECTED)}}function pN(t){return e=>{const{state:n}=t;ae.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(ve.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(Vt.DISCONNECTED)}}function gN(t){return e=>{var n;const{state:r}=t;if(ae.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(Vt.WAITING),t.emit(ve.CLIENTS_WAITING,e),r.originatorConnectStarted){ae.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,s=setTimeout((()=>{ae.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(Vt.TIMEOUT),clearTimeout(s)}),i)}}}function mN(t,e){return n=>{var r,i,s,o,a,c,l,u;const{state:d}=t;if(ae.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${d.context} on commLayer.'keys_exchanged' channel=${d.channelId}`,n),(i=(r=d.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const f=Object.assign(Object.assign({},d.channelConfig),{channelId:(s=d.channelId)!==null&&s!==void 0?s:"",validUntil:((o=d.channelConfig)===null||o===void 0?void 0:o.validUntil)||la,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=d.storageManager)===null||a===void 0||a.persistChannelConfig(f).catch((h=>{})),t.setConnectionStatus(Vt.LINKED)}(function(f,h){var g,p,y,m,b,w,P,O;const{state:H}=f;ae.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${H.channelId}`,h);const G=Object.assign(Object.assign({},H.channelConfig),{channelId:(g=H.channelId)!==null&&g!==void 0?g:"",validUntil:(y=(p=H.channelConfig)===null||p===void 0?void 0:p.validUntil)!==null&&y!==void 0?y:0,relayPersistence:H.relayPersistence,localKey:(b=(m=H.communicationLayer)===null||m===void 0?void 0:m.state.keyExchange)===null||b===void 0?void 0:b.getKeyInfo().ecies.private,otherKey:(P=(w=H.communicationLayer)===null||w===void 0?void 0:w.state.keyExchange)===null||P===void 0?void 0:P.getKeyInfo().ecies.otherPubKey,lastActive:h.getTime()});(O=H.storageManager)===null||O===void 0||O.persistChannelConfig(G)})(t,new Date),d.analytics&&d.channelId&&Ai(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?St.CONNECTED:St.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:e,commLayerVersion:fs.version,walletVersion:(c=d.walletInfo)===null||c===void 0?void 0:c.version}),d.communicationServerUrl).catch((f=>{})),d.isOriginator=n.isOriginator,n.isOriginator||((l=d.communicationLayer)===null||l===void 0||l.sendMessage({type:ht.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&((u=d.communicationLayer)===null||u===void 0||u.sendMessage({type:ht.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}function yN(t){return e=>{let n=e;e.message&&(n=n.message),(function(r,i){const{state:s}=i;if(ae.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${s.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,s.isOriginator||r.type!==ht.ORIGINATOR_INFO)if(s.isOriginator&&r.type===ht.WALLET_INFO)(function(o,a){const{state:c}=o;c.walletInfo=a.walletInfo,c.paused=!1})(i,r);else{if(s.isOriginator&&r.type===ht.WALLET_INIT)(function(o,a){return de(this,void 0,void 0,(function*(){var c,l,u;const{state:d}=o;if(d.isOriginator){const f=a.data||{};if(typeof f=="object"&&"accounts"in f&&"chainId"in f&&"walletKey"in f)try{const{channelConfig:h}=o.state;if(ae.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(h,null,2)),h){const g=f.accounts,p=f.chainId,y=f.walletKey;let m,b=!1;"deeplinkProtocol"in f&&(b=!!f.deeplinkProtocol,o.state.deeplinkProtocolAvailable=b),"walletVersion"in f&&(m=f.walletVersion),yield(c=o.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},h),{otherKey:y,walletVersion:m,deeplinkProtocolAvailable:b,relayPersistence:!0})),yield(l=o.state.storageManager)===null||l===void 0?void 0:l.persistAccounts(g),yield(u=o.state.storageManager)===null||u===void 0?void 0:u.persistChainId(p)}o.emit(ve.WALLET_INIT,{accounts:f.accounts,chainId:f.chainId})}catch{}}}))})(i,r).catch((o=>{ae.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)}));else if(r.type===ht.TERMINATE)(function(o){return de(this,void 0,void 0,(function*(){const{state:a}=o;a.isOriginator&&(yield JA({options:{terminate:!0,sendMessage:!1},instance:o}),o.emit(ve.TERMINATE))}))})(i).catch((o=>{ae.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)}));else if(r.type===ht.PAUSE)(function(o){const{state:a}=o;a.paused=!0,o.setConnectionStatus(Vt.PAUSED)})(i);else if(r.type===ht.READY&&s.isOriginator)(function(o){const{state:a}=o;o.setConnectionStatus(Vt.LINKED);const c=a.paused;a.paused=!1,o.emit(ve.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),c&&(a.authorized=!0,o.emit(ve.AUTHORIZED))})(i);else{if(r.type===ht.OTP&&s.isOriginator)return void(function(o,a){var c;const{state:l}=o;o.emit(ve.OTP,a.otpAnswer),"6.6".localeCompare(((c=l.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&o.emit(ve.SDK_RPC_CALL,{method:Gt.ETH_REQUESTACCOUNTS,params:[]})})(i,r);r.type===ht.AUTHORIZED&&s.isOriginator&&(function(o){const{state:a}=o;a.authorized=!0,o.emit(ve.AUTHORIZED)})(i)}i.emit(ve.MESSAGE,r)}else(function(o,a){var c;const{state:l}=o;(c=l.communicationLayer)===null||c===void 0||c.sendMessage({type:ht.WALLET_INFO,walletInfo:l.walletInfo}),l.originatorInfo=a.originatorInfo||a.originator,o.emit(ve.CLIENTS_READY,{isOriginator:l.isOriginator,originatorInfo:l.originatorInfo}),l.paused=!1})(i,r)})(n,t)}}function vN(t){return()=>{const{state:e}=t;ae.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,qA(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function wN(t){return()=>{const{state:e}=t;ae.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function bN(t){return()=>de(this,void 0,void 0,(function*(){var e,n,r,i,s,o,a;const{state:c}=t;ae.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(ve.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(ve.AUTHORIZED),t.emit(ve.CLIENTS_READY),t.emit(ve.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=c.channelId)!==null&&i!==void 0?i:"",validUntil:(o=(s=c.channelConfig)===null||s===void 0?void 0:s.validUntil)!==null&&o!==void 0?o:la,relayPersistence:!0}),yield(a=c.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(c.channelConfig)}catch{}}))}function Bv({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=ca,instance:s}){var o,a,c,l,u,d,f,h,g,p,y;const{state:m}=s;if(ae.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(m,null,2)),t!==Qs.SOCKET)throw new Error("Invalid communication protocol");m.communicationLayer=new uN({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:m.transports,communicationServerUrl:i,context:m.context,ecies:r,logging:m.logging,remote:s});let b=typeof document<"u"&&document.URL||"",w=typeof document<"u"&&document.title||"";!((o=m.dappMetadata)===null||o===void 0)&&o.url&&(b=m.dappMetadata.url),!((a=m.dappMetadata)===null||a===void 0)&&a.name&&(w=m.dappMetadata.name);const P=(d=(l=(c=m.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:(u=m.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&d!==void 0?d:"N/A",O=typeof window<"u"&&window.location!==void 0&&(f=window.location.hostname)!==null&&f!==void 0?f:P,H={url:b,title:w,source:(h=m.dappMetadata)===null||h===void 0?void 0:h.source,dappId:O,anonId:m.anonId,icon:((g=m.dappMetadata)===null||g===void 0?void 0:g.iconUrl)||((p=m.dappMetadata)===null||p===void 0?void 0:p.base64Icon),platform:m.platformType,apiVersion:fs.version,connector:(y=m.dappMetadata)===null||y===void 0?void 0:y.connector};m.originatorInfo=H;const G={[ve.AUTHORIZED]:dN(s),[ve.MESSAGE]:yN(s),[ve.CHANNEL_PERSISTENCE]:bN(s),[ve.CLIENTS_CONNECTED]:hN(s,t),[ve.KEYS_EXCHANGED]:mN(s,t),[ve.SOCKET_DISCONNECTED]:wN(s),[ve.SOCKET_RECONNECT]:vN(s),[ve.CLIENTS_DISCONNECTED]:pN(s),[ve.KEY_INFO]:()=>{},[ve.CHANNEL_CREATED]:fN(s),[ve.CLIENTS_WAITING]:gN(s),[ve.RPC_UPDATE]:q=>{s.emit(ve.RPC_UPDATE,q)}};for(const[q,j]of Object.entries(G))try{m.communicationLayer.on(q,j)}catch{}}function JA(t){return de(this,arguments,void 0,(function*({options:e,instance:n}){const{state:r}=n;return ae.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise(((i,s)=>{var o,a,c,l,u,d;e?.terminate?(n.state.ready&&Ai({id:(o=n.state.channelId)!==null&&o!==void 0?o:"",event:St.TERMINATED},n.state.communicationServerUrl).catch((f=>{})),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,e.sendMessage?!((l=r.communicationLayer)===null||l===void 0)&&l.getKeyInfo().keysExchanged&&n.state.communicationLayer&&WA(n.state.communicationLayer,{type:ht.TERMINATE}).then((()=>{i(!0)})).catch((f=>{s(f)})):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=Yi(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(Vt.TERMINATED)):((d=r.communicationLayer)===null||d===void 0||d.disconnect(e),n.setConnectionStatus(Vt.DISCONNECTED),i(!0))}))}))}(Qs||(Qs={})).SOCKET="socket",(function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"})(Yt||(Yt={}));class EN extends Fd.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:ca,context:"",persist:!1,clientsConnected:!1,sessionDuration:la,originatorConnectStarted:!1,debug:!1,_connectionStatus:Vt.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:s,reconnect:o,walletInfo:a,dappMetadata:c,protocolVersion:l,transports:u,context:d,relayPersistence:f,ecies:h,analytics:g=!1,storage:p,sdkVersion:y,communicationServerUrl:m=ca,logging:b,autoConnect:w={timeout:sN}}=e;this.state.anonId=n,this.state.otherPublicKey=s,this.state.dappMetadata=c,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=g,this.state.protocolVersion=l??1,this.state.isOriginator=!s,this.state.relayPersistence=f,this.state.communicationServerUrl=m,this.state.context=d,this.state.terminated=!1,this.state.sdkVersion=y,this.setMaxListeners(50),this.setConnectionStatus(Vt.DISCONNECTED),p?.duration&&(this.state.sessionDuration=la),this.state.storageOptions=p,this.state.autoConnectOptions=w,this.state.debug=b?.remoteLayer===!0,b?.remoteLayer===!0&&mn.enable("RemoteCommunication:Layer"),b?.serviceLayer===!0&&mn.enable("SocketService:Layer"),b?.eciesLayer===!0&&mn.enable("ECIES:Layer"),b?.keyExchangeLayer===!0&&mn.enable("KeyExchange:Layer"),this.state.logging=b,p?.storageManager&&(this.state.storageManager=p.storageManager),ae.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${f} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${s} reconnect=${o}`),this.state.isOriginator||Bv({communicationLayerPreference:i,otherPublicKey:s,reconnect:o,ecies:h,communicationServerUrl:m,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return de(this,void 0,void 0,(function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Vt.LINKED),yield this.connectToChannel({channelId:n.channelId})))}Bv({communicationLayerPreference:Qs.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})}))}originatorSessionConnect(){return de(this,void 0,void 0,(function*(){return yield(function(e){return de(this,void 0,void 0,(function*(){var n;const{state:r}=e;if(!r.storageManager)return void ae.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(ae.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return ae.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i?.channelId,r.reconnection=!0,i;ae.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1}))})(this)}))}generateChannelIdConnect(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r,i,s,o,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(s=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||s===void 0?void 0:s.ecies.private,pubKey:(a=(o=e.communicationLayer)===null||o===void 0?void 0:o.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};ae.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const c=yield e.communicationLayer.createChannel();ae.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);const l=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=c.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}}))})(this.state)}))}clean(){return qA(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return(function(i){return de(this,arguments,void 0,(function*({channelId:s,withKeyExchange:o,authorized:a,state:c}){var l,u,d;if(!ap(s))throw ae.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${s}`),new Error(`Invalid channel ${s}`);if(ae.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${s} withKeyExchange=${o}`),(l=c.communicationLayer)===null||l===void 0?void 0:l.isConnected())return void ae.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=s,yield(u=c.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:s,authorized:a,withKeyExchange:o});const f=Object.assign(Object.assign({},c.channelConfig),{channelId:s,validUntil:Date.now()+c.sessionDuration});c.channelConfig=f,(d=c.storageManager)===null||d===void 0||d.persistChannelConfig(f)}))})({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return de(this,void 0,void 0,(function*(){const n=this.state.isOriginator&&e.method&&Yc(e.method);n&&At.analytics.track("sdk_action_requested",{action:e.method});try{return yield(function(r,i){return de(this,void 0,void 0,(function*(){var s,o;const{state:a}=r;ae.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(s=a.communicationLayer)===null||s===void 0?void 0:s.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((o=a.communicationLayer)===null||o===void 0)&&o.isConnected())&&a.clientsConnected||(ae.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise((c=>{r.once(ve.CLIENTS_READY,c)})),ae.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield(function(l,u){return de(this,void 0,void 0,(function*(){return new Promise((d=>{var f;const{state:h}=l;ae.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context} ready=${h.ready} authorized=${h.authorized} method=${u.method}`),!h.isOriginator||h.authorized||h.relayPersistence?(f=h.communicationLayer)===null||f===void 0||f.sendMessage(u).then((g=>{d(g)})).catch((g=>{d(!1)})):l.once(ve.AUTHORIZED,(()=>{var g;ae.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(g=h.communicationLayer)===null||g===void 0||g.sendMessage(u).then((p=>{d(p)})).catch((p=>{d(!1)}))}))}))}))})(r,i)}catch(c){throw c}}))})(this,e)}catch(r){throw n&&At.analytics.track("sdk_action_failed",{action:e.method}),r}}))}testStorage(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();ae.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)}))})(this.state)}))}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return de(this,void 0,void 0,(function*(){var e;ae.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()}))}testLogger(){ae.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),ae.SocketService(`testLogger() channel=${this.state.channelId}`),ae.Ecies(`testLogger() channel=${this.state.channelId}`),ae.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;ae.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(ve.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(ve.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return de(this,void 0,void 0,(function*(){var e;ae.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(Vt.PAUSED)}))}getVersion(){return fs.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n;const{state:r}=e;ae.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(Vt.LINKED)}))})(this)}))}encrypt(e){var n,r,i;const s=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),o=s?.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,o)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return(function(n){return de(this,arguments,void 0,(function*({channelId:r,state:i}){var s,o,a;if(!ap(r))throw ae.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void ae.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:c}=(o=(s=i.communicationLayer)===null||s===void 0?void 0:s.state)!==null&&o!==void 0?o:{};c?.connected||(ae.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),c?.connect()),Ai(Object.assign(Object.assign({id:r,event:St.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:fs.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch((l=>{})),yield new Promise(((l,u)=>{c?.emit(ve.REJECTED,{channelId:r},((d,f)=>{ae.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${c?.id}`,{error:d,response:f}),d?u(d):l(f)}))}))}))})({channelId:e,state:this.state})}disconnect(e){return de(this,void 0,void 0,(function*(){return JA({options:e,instance:this})}))}}(function(t){t.RENEW="renew",t.LINK="link"})(Lv||(Lv={}));var AN="ERC721",_N="ERC1155",vt={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function SN(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[AN,_N].includes(n.params?.type||"")&&(t.warn(vt.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(vt.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(vt.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var YA=4294967295,Dv=Math.floor(Math.random()*YA);function CN(){return(t,e,n,r)=>{const i=t.id,s=Dv=(Dv+1)%YA;t.id=s,e.id=s,n((o=>{t.id=i,e.id=i,o()}))}}var qg=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Xi=(t,e,n)=>(qg(t,e,"read from private field"),n?n.call(t):e.get(t)),fr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Nl=(t,e,n,r)=>(qg(t,e,"write to private field"),e.set(t,n),n),on=(t,e,n)=>(qg(t,e,"access private method"),n),Wi={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},Uv={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function $v(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var Gu=(t,e)=>Object.hasOwnProperty.call(t,e);class xN extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function mi(t){return typeof t=="object"&&t!=null}function Gr(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function kN(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Gr(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*Fv(t,e,n,r){(function(i){return mi(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const s=kN(i,e,n,r);s&&(yield s)}}function*Wg(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&mi(e.schema)&&mi(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const f=Wg(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const h of f)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):s&&(u=h[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):mi(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}class Er{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=(c=>c),entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,this.validator=i?(c,l)=>Fv(i(c,l),l,this,c):()=>[],this.refiner=s?(c,l)=>Fv(s(c,l),l,this,c):()=>[]}assert(e,n){return ZA(e,this,n)}create(e,n){return XA(e,this,n)}is(e){return ma(e,this)}mask(e,n){return(function(r,i,s){const o=Cc(r,i,{coerce:!0,mask:!0,message:s});if(o[0])throw o[0];return o[1]})(e,this,n)}validate(e,n={}){return Cc(e,this,n)}}function ZA(t,e,n){const r=Cc(t,e,{message:n});if(r[0])throw r[0]}function XA(t,e,n){const r=Cc(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function ma(t,e){return!Cc(t,e)[0]}function Cc(t,e,n={}){const r=Wg(t,e,n),i=(function(s){const{done:o,value:a}=s.next();return o?void 0:a})(r);return i[0]?[new xN(i[0],(function*(){for(const o of r)o[0]&&(yield o[0])})),void 0]:[void 0,i[1]]}function hs(t,e){return new Er({type:t,schema:null,validator:e})}function Hv(t){let e;return new Er({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function e_(t){return new Er({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Gr(e)}`})}function t_(t){const e=Gr(t),n=typeof t;return new Er({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${Gr(r)}`})}function n_(){return hs("number",(t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Gr(t)}`))}function r_(t){const e=t?Object.keys(t):[],n=hs("never",(()=>!1));return new Er({type:"object",schema:t||null,*entries(r){if(t&&mi(r)){const i=new Set(Object.keys(r));for(const s of e)i.delete(s),yield[s,r[s],t[s]];for(const s of i)yield[s,r[s],n]}},validator:r=>mi(r)||`Expected an object, but received: ${Gr(r)}`,coercer:r=>mi(r)?{...r}:r})}function Kv(t){return new Er({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function i_(t,e){return new Er({type:"record",schema:null,*entries(n){if(mi(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>mi(n)||`Expected an object, but received: ${Gr(n)}`})}function ps(){return hs("string",(t=>typeof t=="string"||`Expected a string, but received: ${Gr(t)}`))}function Gd(t){const e=t.map((n=>n.type)).join(" | ");return new Er({type:"union",schema:null,coercer(n){for(const r of t){const[i,s]=r.validate(n,{coerce:!0});if(!i)return s}return n},validator(n,r){const i=[];for(const s of t){const[...o]=Wg(n,s,r),[a]=o;if(!a[0])return[];for(const[c]of o)c&&i.push(c)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Gr(n)}`,...i]}})}function TN(t){return(function(e){return(function(n){return typeof n=="object"&&n!==null&&"message"in n})(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)})(t).replace(/\.$/u,"")}function PN(t,e){return n=t,typeof n?.prototype?.constructor?.name=="string"?new t({message:e}):t({message:e});var n}var IN=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};function s_(){throw new Error("setTimeout has not been defined")}function o_(){throw new Error("clearTimeout has not been defined")}var Di=s_,Ui=o_;function a_(t){if(Di===setTimeout)return setTimeout(t,0);if((Di===s_||!Di)&&setTimeout)return Di=setTimeout,setTimeout(t,0);try{return Di(t,0)}catch{try{return Di.call(null,t,0)}catch{return Di.call(this,t,0)}}}typeof yn.setTimeout=="function"&&(Di=setTimeout),typeof yn.clearTimeout=="function"&&(Ui=clearTimeout);var $s,hi=[],Wo=!1,tu=-1;function RN(){Wo&&$s&&(Wo=!1,$s.length?hi=$s.concat(hi):tu=-1,hi.length&&c_())}function c_(){if(!Wo){var t=a_(RN);Wo=!0;for(var e=hi.length;e;){for($s=hi,hi=[];++tu<e;)$s&&$s[tu].run();tu=-1,e=hi.length}$s=null,Wo=!1,(function(n){if(Ui===clearTimeout)return clearTimeout(n);if((Ui===o_||!Ui)&&clearTimeout)return Ui=clearTimeout,clearTimeout(n);try{return Ui(n)}catch{try{return Ui.call(null,n)}catch{return Ui.call(this,n)}}})(t)}}function l_(t,e){this.fun=t,this.array=e}l_.prototype.run=function(){this.fun.apply(null,this.array)};function to(){}var ON=to,NN=to,MN=to,LN=to,BN=to,DN=to,UN=to,Eo=yn.performance||{},$N=Eo.now||Eo.mozNow||Eo.msNow||Eo.oNow||Eo.webkitNow||function(){return new Date().getTime()},FN=new Date,Ge={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];hi.push(new l_(t,e)),hi.length!==1||Wo||a_(c_)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ON,addListener:NN,once:MN,off:LN,removeListener:BN,removeAllListeners:DN,emit:UN,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*$N.call(Eo),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-FN)/1e3}},xc=t=>r_(t);function jv({path:t,branch:e}){const n=t[t.length-1];return Gu(e[e.length-2],n)}function qu(t){return new Er({...t,type:`optional ${t.type}`,validator:(e,n)=>!jv(n)||t.validator(e,n),refiner:(e,n)=>!jv(n)||t.refiner(e,n)})}var Ml,Vv,zv,Wu=Gd([t_(null),hs("boolean",(t=>typeof t=="boolean")),hs("finite number",(t=>ma(t,n_())&&Number.isFinite(t))),ps(),e_(Hv((()=>Wu))),i_(ps(),Hv((()=>Wu)))]),kc=(Ml=Wu,Vv=hs("any",(()=>!0)),zv=t=>((function(e,n,r="Assertion failed",i=IN){try{ZA(e,n)}catch(s){throw PN(i,`${r}: ${TN(s)}.`)}})(t,Wu),JSON.parse(JSON.stringify(t,((e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n})))),new Er({...Ml,coercer:(t,e)=>ma(t,Vv)?Ml.coercer(zv(t,e),e):Ml.coercer(t,e)}));function xp(t){try{return(function(e){XA(e,kc)})(t),!0}catch{return!1}}var Za=t_("2.0"),nu=(function(t){return new Er({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})})(Gd([n_(),ps()])),kp=xc({code:hs("integer",(t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${Gr(t)}`)),message:ps(),data:qu(kc),stack:qu(ps())}),u_=Gd([i_(ps(),kc),e_(kc)]),HN=xc({id:nu,jsonrpc:Za,method:ps(),params:qu(u_)}),KN=xc({jsonrpc:Za,method:ps(),params:qu(u_)});function Gv(t){return ma(t,HN)}function qv(t){return ma(t,kp)}r_({id:nu,jsonrpc:Za,result:Kv(hs("unknown",(()=>!0))),error:Kv(kp)}),Gd([xc({id:nu,jsonrpc:Za,result:kc}),xc({id:nu,jsonrpc:Za,error:kp})]);var Wv=Wi.internal,jN="Unspecified error message. This is a bug, please report it.",VN={code:Wv,message:d_(Wv)},zN="Unspecified server error.";function d_(t,e=jN){if((function(n){return Number.isInteger(n)})(t)){const n=t.toString();if(Gu(Uv,n))return Uv[n].message;if((function(r){return r>=-32099&&r<=-32e3})(t))return zN}return e}function Qv(t,{fallbackError:e=VN,shouldIncludeStack:n=!0}={}){if(!qv(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=(function(i,s){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if(qv(i))return i;const o=f_(i);return{...s,data:{cause:o}}})(t,e);return n||delete r.stack,r}function f_(t){return Array.isArray(t)?t.map((e=>xp(e)?e:$v(e)?Jv(e):null)):$v(t)?Jv(t):xp(t)?t:null}function Jv(t){return Object.getOwnPropertyNames(t).reduce(((e,n)=>{const r=t[n];return xp(r)&&(e[n]=r),e}),{})}var h_=Da;Da.default=Da,Da.stable=Yv,Da.stableStringify=Yv;var Qu="[...]",p_="[Circular]",Js=[],Fs=[];function g_(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Da(t,e,n,r){var i;r===void 0&&(r=g_()),Tp(t,"",0,[],void 0,0,r);try{i=Fs.length===0?JSON.stringify(t,e,n):JSON.stringify(t,m_(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Js.length!==0;){var s=Js.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function Qo(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),Js.push([r,n,e,i])):Fs.push([e,n,t]):(r[n]=t,Js.push([r,n,e]))}function Tp(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void Qo(p_,t,e,i);if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void Qo(Qu,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Tp(t[a],a,a,r,t,s,o);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];Tp(t[l],l,a,r,t,s,o)}}r.pop()}}function GN(t,e){return t<e?-1:t>e?1:0}function Yv(t,e,n,r){r===void 0&&(r=g_());var i,s=Pp(t,"",0,[],void 0,0,r)||t;try{i=Fs.length===0?JSON.stringify(s,e,n):JSON.stringify(s,m_(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Js.length!==0;){var o=Js.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Pp(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void Qo(p_,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void Qo(Qu,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Pp(t[a],a,a,r,t,s,o);else{var c={},l=Object.keys(t).sort(GN);for(a=0;a<l.length;a++){var u=l[a];Pp(t[u],u,a,r,t,s,o),c[u]=t[u]}if(i===void 0)return c;Js.push([i,e,t]),i[e]=c}r.pop()}}function m_(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(Fs.length>0)for(var r=0;r<Fs.length;r++){var i=Fs[r];if(i[1]===e&&i[0]===n){n=i[2],Fs.splice(r,1);break}}return t.call(this,e,n)}}var qN=Vd(h_),ti=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,(function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}})(this.data)&&(t.data.cause=f_(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return qN(this.serialize(),WN,2)}};function WN(t,e){if(e!=="[Circular]")return e}var Xa=t=>QN(Wi.invalidRequest,t);function QN(t,e){const[n,r]=(function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:s,data:o}=i;if(s&&typeof s!="string")throw new Error("Must specify string message.");return[s??void 0,o]}}return[]})(e);return new ti(t,n??d_(t),r)}var y_={};function $i(){}function Ze(){Ze.init.call(this)}function v_(t){return t._maxListeners===void 0?Ze.defaultMaxListeners:t._maxListeners}function Zv(t,e,n,r){var i,s,o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]):(s=t._events=new $i,t._eventsCount=0),o){if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=v_(t))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,(function(c){typeof console.warn=="function"?console.warn(c):console.log(c)})(a)}}else o=s[e]=n,++t._eventsCount;return t}function Xv(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function ew(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function Ta(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}$i.prototype=Object.create(null),Ze.EventEmitter=Ze,Ze.usingDomains=!1,Ze.prototype.domain=void 0,Ze.prototype._events=void 0,Ze.prototype._maxListeners=void 0,Ze.defaultMaxListeners=10,Ze.init=function(){this.domain=null,Ze.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new $i,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ze.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Ze.prototype.getMaxListeners=function(){return v_(this)},Ze.prototype.emit=function(t){var e,n,r,i,s,o,a,c=t==="error";if(o=this._events)c=c&&o.error==null;else if(!c)return!1;if(a=this.domain,c){if(e=arguments[1],!a){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=o[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(d,f,h){if(f)d.call(h);else for(var g=d.length,p=Ta(d,g),y=0;y<g;++y)p[y].call(h)})(n,u,this);break;case 2:(function(d,f,h,g){if(f)d.call(h,g);else for(var p=d.length,y=Ta(d,p),m=0;m<p;++m)y[m].call(h,g)})(n,u,this,arguments[1]);break;case 3:(function(d,f,h,g,p){if(f)d.call(h,g,p);else for(var y=d.length,m=Ta(d,y),b=0;b<y;++b)m[b].call(h,g,p)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(d,f,h,g,p,y){if(f)d.call(h,g,p,y);else for(var m=d.length,b=Ta(d,m),w=0;w<m;++w)b[w].call(h,g,p,y)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];(function(d,f,h,g){if(f)d.apply(h,g);else for(var p=d.length,y=Ta(d,p),m=0;m<p;++m)y[m].apply(h,g)})(n,u,this,i)}return!0},Ze.prototype.addListener=function(t,e){return Zv(this,t,e,!1)},Ze.prototype.on=Ze.prototype.addListener,Ze.prototype.prependListener=function(t,e){return Zv(this,t,e,!0)},Ze.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,Xv(this,t,e)),this},Ze.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Xv(this,t,e)),this},Ze.prototype.removeListener=function(t,e){var n,r,i,s,o;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new $i:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new $i,this;delete r[t]}else(function(a,c){for(var l=c,u=l+1,d=a.length;u<d;l+=1,u+=1)a[l]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,o||e)}return this},Ze.prototype.off=function(t,e){return this.removeListener(t,e)},Ze.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new $i,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new $i:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),s=0;s<i.length;++s)(r=i[s])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new $i,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},Ze.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:(function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s})(e):[],n},Ze.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ew.call(t,e)},Ze.prototype.listenerCount=ew,Ze.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Qg=Qc(Object.freeze({__proto__:null,EventEmitter:Ze,default:Ze}));Object.defineProperty(y_,"__esModule",{value:!0});const JN=Qg;function tw(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}let YN=class extends JN.EventEmitter{emit(t,...e){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let s;if(e.length>0&&([s]=e),s instanceof Error)throw s;const o=new Error("Unhandled error."+(s?` (${s.message})`:""));throw o.context=s,o}const i=r[t];if(i===void 0)return!1;if(typeof i=="function")tw(i,this,e);else{const s=i.length,o=(function(a){const c=a.length,l=new Array(c);for(let u=0;u<c;u+=1)l[u]=a[u];return l})(i);for(let a=0;a<s;a+=1)tw(o[a],this,e)}return!0}};var Ju,Qi,Oo,Ua,ru,iu,Ip,su,Rp,rh,nw,ou,Op,ih,rw,ec,Yu,sh,iw,w_=y_.default=YN,or=class au extends w_{constructor({notificationHandler:e}={}){super(),fr(this,Ua),fr(this,iu),fr(this,su),fr(this,Ju,!1),fr(this,Qi,void 0),fr(this,Oo,void 0),Nl(this,Qi,[]),Nl(this,Oo,e)}destroy(){Xi(this,Qi).forEach((e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()})),Nl(this,Qi,[]),Nl(this,Ju,!0)}push(e){on(this,Ua,ru).call(this),Xi(this,Qi).push(e)}handle(e,n){if(on(this,Ua,ru).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?on(this,iu,Ip).call(this,e,n):on(this,iu,Ip).call(this,e):n?on(this,su,Rp).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return on(this,Ua,ru).call(this),async(e,n,r,i)=>{var s,o;try{const[a,c,l]=await on(s=au,ou,Op).call(s,e,n,Xi(this,Qi));return c?(await on(o=au,ec,Yu).call(o,l),i(a)):r((async u=>{var d;try{await on(d=au,ec,Yu).call(d,l)}catch(f){return u(f)}return u()}))}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise(((n,r)=>{on(this,su,Rp).call(this,e,((i,s)=>{i&&s===void 0?r(i):n(s)})).catch(r)}))}};Ju=new WeakMap,Qi=new WeakMap,Oo=new WeakMap,Ua=new WeakSet,ru=function(){if(Xi(this,Ju))throw new Error("This engine is destroyed and can no longer be used.")},iu=new WeakSet,Ip=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new ti(Wi.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter((r=>r!==void 0));return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},su=new WeakSet,Rp=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const o=new ti(Wi.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(o,{id:null,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new ti(Wi.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return Xi(this,Oo)&&!Gv(t)?e(null):e(o,{id:t.id??null,jsonrpc:"2.0",error:o})}if(Xi(this,Oo)&&ma(t,KN)&&!Gv(t)){try{await Xi(this,Oo).call(this,t)}catch(o){return e(o)}return e(null)}let r=null;const i={...t},s={id:i.id,jsonrpc:i.jsonrpc};try{await on(n=or,rh,nw).call(n,i,s,Xi(this,Qi))}catch(o){r=o}return r&&(delete s.result,s.error||(s.error=Qv(r))),e(r,s)},rh=new WeakSet,nw=async function(t,e,n){var r,i,s;const[o,a,c]=await on(r=or,ou,Op).call(r,t,e,n);if(on(i=or,sh,iw).call(i,t,e,a),await on(s=or,ec,Yu).call(s,c),o)throw o},ou=new WeakSet,Op=async function(t,e,n){var r;const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await on(r=or,ih,rw).call(r,t,e,a,i),o)break;return[s,o,i.reverse()]},ih=new WeakSet,rw=async function(t,e,n,r){return new Promise((i=>{const s=a=>{const c=a||e.error;c&&(e.error=Qv(c)),i([c,!0])},o=a=>{e.error?s(e.error):(a&&(typeof a!="function"&&s(new ti(Wi.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${oh(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,o,s)}catch(a){s(a)}}))},ec=new WeakSet,Yu=async function(t){for(const e of t)await new Promise(((n,r)=>{e((i=>i?r(i):n()))}))},sh=new WeakSet,iw=function(t,e,n){if(!Gu(e,"result")&&!Gu(e,"error"))throw new ti(Wi.internal,`JsonRpcEngine: Response has no error or result for request:
${oh(t)}`,{request:t});if(!n)throw new ti(Wi.internal,`JsonRpcEngine: Nothing ended request:
${oh(t)}`,{request:t})},fr(or,rh),fr(or,ou),fr(or,ih),fr(or,ec),fr(or,sh);var ZN=or;function oh(t){return JSON.stringify(t,null,2)}var b_=Object.freeze(["eth_subscription"]),XN=(t=console)=>[CN(),eM(t),SN(t)];function eM(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=Xa({message:"The request 'method' must be a non-empty string.",data:e})),r((i=>{const{error:s}=n;return s&&t.error(`MetaMask - RPC Error: ${s.message}`,s),i()}))}}var cu=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},E_=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),A_=()=>{};async function sw(t,e){try{const n=await(async function(){return{name:tM(window),icon:await nM(window)}})();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},A_)}catch(n){e.error({message:vt.errors.sendSiteMetadata(),originalError:n})}}function tM(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function nM(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await rM(r.href))return r.href;return null}async function rM(t){return new Promise(((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}}))}var __=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Lr=(t,e,n)=>(__(t,e,"read from private field"),n?n.call(t):e.get(t)),Np=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ni=(t,e,n,r)=>(__(t,e,"write to private field"),e.set(t,n),n);function ow(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}class iM extends Ze{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")ow(s,this,n);else{const o=s.length,a=(function(c){const l=c.length,u=new Array(l);for(let d=0;d<l;d+=1)u[d]=c[d];return u})(s);for(let c=0;c<o;c+=1)ow(a[c],this,n)}return!0}}var Fi,xs,sM=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n},oM=Vd(sM),S_=class C_ extends iM{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),Np(this,Fi,void 0),Np(this,xs,void 0),this._log=e,this.setMaxListeners(n),this._state={...C_._defaultState},ni(this,xs,null),ni(this,Fi,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new ZN;r.forEach((s=>i.push(s))),this._rpcEngine=i}get chainId(){return Lr(this,Fi)}get selectedAddress(){return Lr(this,xs)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw Xa({message:vt.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw Xa({message:vt.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw Xa({message:vt.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise(((s,o)=>{this._rpcRequest(i,cu(s,o))}))}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:s}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:s}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,s)=>{this._handleAccountsChanged(s.result??[],e.method==="eth_accounts"),n(i,s)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(vt.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new ti(1013,n??vt.errors.disconnected()),this._log.debug(r)):(r=new ti(1011,n??vt.errors.permanentlyDisconnected()),this._log.error(r),ni(this,Fi,null),this._state.accounts=null,ni(this,xs,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){E_(e)?(this._handleConnect(e),e!==Lr(this,Fi)&&(ni(this,Fi,e),this._state.initialized&&this.emit("chainChanged",Lr(this,Fi)))):this._log.error(vt.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!oM(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Lr(this,xs)!==r[0]&&ni(this,xs,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};Fi=new WeakMap,xs=new WeakMap,S_._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var Jg,aM=S_,Mp={exports:{}},x_=Qg.EventEmitter,Yg=Qc(A8);Jg=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var k_=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},cM=/%[sdj%]/g;function qd(t){if(!Tc(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Hr(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(cM,(function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}})),o=r[n];n<i;o=r[++n])Zc(o)||!no(o)?s+=" "+o:s+=" "+Hr(o);return s}function Zg(t,e){if(Dr(yn.process))return function(){return Zg(t,e).apply(this,arguments)};if(Ge.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(Ge.throwDeprecation)throw new Error(e);Ge.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var ah,Ll={};function T_(t){return Dr(ah)&&(ah=Ge.env.NODE_DEBUG||""),t=t.toUpperCase(),!Ll[t]&&(new RegExp("\\b"+t+"\\b","i").test(ah)?Ll[t]=function(){var e=qd.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:Ll[t]=function(){}),Ll[t]}function Hr(t,e){var n={seen:[],stylize:uM};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Wd(e)?n.showHidden=e:e&&n0(n,e),Dr(n.showHidden)&&(n.showHidden=!1),Dr(n.depth)&&(n.depth=2),Dr(n.colors)&&(n.colors=!1),Dr(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=lM),Zu(n,t,n.depth)}function lM(t,e){var n=Hr.styles[e];return n?"\x1B["+Hr.colors[n][0]+"m"+t+"\x1B["+Hr.colors[n][1]+"m":t}function uM(t,e){return t}function Zu(t,e,n){if(t.customInspect&&e&&rc(e.inspect)&&e.inspect!==Hr&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return Tc(r)||(r=Zu(t,r,n)),r}var i=(function(f,h){if(Dr(h))return f.stylize("undefined","undefined");if(Tc(h)){var g="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return f.stylize(g,"string")}if(e0(h))return f.stylize(""+h,"number");if(Wd(h))return f.stylize(""+h,"boolean");if(Zc(h))return f.stylize("null","null")})(t,e);if(i)return i;var s=Object.keys(e),o=(function(f){var h={};return f.forEach((function(g,p){h[g]=!0})),h})(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),nc(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return ch(e);if(s.length===0){if(rc(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(tc(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Xu(e))return t.stylize(Date.prototype.toString.call(e),"date");if(nc(e))return ch(e)}var c,l="",u=!1,d=["{","}"];return Xg(e)&&(u=!0,d=["[","]"]),rc(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),tc(e)&&(l=" "+RegExp.prototype.toString.call(e)),Xu(e)&&(l=" "+Date.prototype.toUTCString.call(e)),nc(e)&&(l=" "+ch(e)),s.length!==0||u&&e.length!=0?n<0?tc(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=u?(function(f,h,g,p,y){for(var m=[],b=0,w=h.length;b<w;++b)M_(h,String(b))?m.push(lh(f,h,g,p,String(b),!0)):m.push("");return y.forEach((function(P){P.match(/^\d+$/)||m.push(lh(f,h,g,p,P,!0))})),m})(t,e,n,o,s):s.map((function(f){return lh(t,e,n,o,f,u)})),t.seen.pop(),(function(f,h,g){var p=f.reduce((function(y,m){return m.indexOf(`
`),y+m.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return p>60?g[0]+(h===""?"":h+`
 `)+" "+f.join(`,
  `)+" "+g[1]:g[0]+h+" "+f.join(", ")+" "+g[1]})(c,l,d)):d[0]+l+d[1]}function ch(t){return"["+Error.prototype.toString.call(t)+"]"}function lh(t,e,n,r,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),M_(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=Zc(n)?Zu(t,c.value,null):Zu(t,c.value,n-1)).indexOf(`
`)>-1&&(a=s?a.split(`
`).map((function(l){return"  "+l})).join(`
`).substr(2):`
`+a.split(`
`).map((function(l){return"   "+l})).join(`
`)):a=t.stylize("[Circular]","special")),Dr(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function Xg(t){return Array.isArray(t)}function Wd(t){return typeof t=="boolean"}function Zc(t){return t===null}function P_(t){return t==null}function e0(t){return typeof t=="number"}function Tc(t){return typeof t=="string"}function I_(t){return typeof t=="symbol"}function Dr(t){return t===void 0}function tc(t){return no(t)&&t0(t)==="[object RegExp]"}function no(t){return typeof t=="object"&&t!==null}function Xu(t){return no(t)&&t0(t)==="[object Date]"}function nc(t){return no(t)&&(t0(t)==="[object Error]"||t instanceof Error)}function rc(t){return typeof t=="function"}function R_(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function O_(t){return pe.isBuffer(t)}function t0(t){return Object.prototype.toString.call(t)}function uh(t){return t<10?"0"+t.toString(10):t.toString(10)}Hr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Hr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var dM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N_(){var t,e;console.log("%s - %s",(t=new Date,e=[uh(t.getHours()),uh(t.getMinutes()),uh(t.getSeconds())].join(":"),[t.getDate(),dM[t.getMonth()],e].join(" ")),qd.apply(null,arguments))}function n0(t,e){if(!e||!no(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function M_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var ks=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function r0(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(ks&&t[ks]){var e;if(typeof(e=t[ks])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,ks,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise((function(a,c){n=a,r=c})),s=[],o=0;o<arguments.length;o++)s.push(arguments[o]);s.push((function(a,c){a?r(a):n(c)}));try{t.apply(this,s)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),ks&&Object.defineProperty(e,ks,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,k_(t))}function fM(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function L_(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,n).then((function(a){Ge.nextTick(o.bind(null,null,a))}),(function(a){Ge.nextTick(fM.bind(null,a,o))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,k_(t)),e}r0.custom=ks;var dh,aw,hM={inherits:Jg,_extend:n0,log:N_,isBuffer:O_,isPrimitive:R_,isFunction:rc,isError:nc,isDate:Xu,isObject:no,isRegExp:tc,isUndefined:Dr,isSymbol:I_,isString:Tc,isNumber:e0,isNullOrUndefined:P_,isNull:Zc,isBoolean:Wd,isArray:Xg,inspect:Hr,deprecate:Zg,format:qd,debuglog:T_,promisify:r0,callbackify:L_},B_=Qc(Object.freeze({__proto__:null,_extend:n0,callbackify:L_,debuglog:T_,default:hM,deprecate:Zg,format:qd,inherits:Jg,inspect:Hr,isArray:Xg,isBoolean:Wd,isBuffer:O_,isDate:Xu,isError:nc,isFunction:rc,isNull:Zc,isNullOrUndefined:P_,isNumber:e0,isObject:no,isPrimitive:R_,isRegExp:tc,isString:Tc,isSymbol:I_,isUndefined:Dr,log:N_,promisify:r0}));function pM(){if(aw)return dh;function t(c,l){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);l&&(d=d.filter((function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable}))),u.push.apply(u,d)}return u}function e(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?t(Object(u),!0).forEach((function(d){n(c,d,u[d])})):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach((function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(u,d))}))}return c}function n(c,l,u){return(l=i(l))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c}function r(c,l,u){return l&&(function(d,f){for(var h=0;h<f.length;h++){var g=f[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,i(g.key),g)}})(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function i(c){var l=(function(u,d){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var h=f.call(u,d);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)})(c,"string");return typeof l=="symbol"?l:String(l)}aw=1;var s=Yg.Buffer,o=B_.inspect,a=o&&o.custom||"inspect";return dh=(function(){function c(){(function(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var u=this.head,d=""+u.data;u=u.next;)d+=l+u.data;return d}},{key:"concat",value:function(l){if(this.length===0)return s.alloc(0);for(var u,d,f,h=s.allocUnsafe(l>>>0),g=this.head,p=0;g;)u=g.data,d=h,f=p,s.prototype.copy.call(u,d,f),p+=g.data.length,g=g.next;return h}},{key:"consume",value:function(l,u){var d;return l<this.head.data.length?(d=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):d=l===this.head.data.length?this.shift():u?this._getString(l):this._getBuffer(l),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var u=this.head,d=1,f=u.data;for(l-=f.length;u=u.next;){var h=u.data,g=l>h.length?h.length:l;if(g===h.length?f+=h:f+=h.slice(0,l),(l-=g)===0){g===h.length?(++d,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=h.slice(g));break}++d}return this.length-=d,f}},{key:"_getBuffer",value:function(l){var u=s.allocUnsafe(l),d=this.head,f=1;for(d.data.copy(u),l-=d.data.length;d=d.next;){var h=d.data,g=l>h.length?h.length:l;if(h.copy(u,u.length-l,0,g),(l-=g)===0){g===h.length?(++f,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=h.slice(g));break}++f}return this.length-=f,u}},{key:a,value:function(l,u){return o(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),c})(),dh}function cw(t,e){Lp(t,e),lu(t)}function lu(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Lp(t,e){t.emit("error",e)}var D_={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ge.nextTick(Lp,this,t)):Ge.nextTick(Lp,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(s){!e&&s?n._writableState?n._writableState.errorEmitted?Ge.nextTick(lu,n):(n._writableState.errorEmitted=!0,Ge.nextTick(cw,n,s)):Ge.nextTick(cw,n,s):e?(Ge.nextTick(lu,n),e(s)):Ge.nextTick(lu,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}},ro={},U_={};function zn(t,e,n){n||(n=Error);var r=(function(i){var s,o;function a(c,l,u){return i.call(this,(function(d,f,h){return typeof e=="string"?e:e(d,f,h)})(c,l,u))||this}return o=i,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a})(n);r.prototype.name=n.name,r.prototype.code=t,U_[t]=r}function lw(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(r){return String(r)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}zn("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),zn("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,i,s;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",(function(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c})(t," argument"))s="The ".concat(t," ").concat(r," ").concat(lw(e,"type"));else{var o=(function(a,c,l){return typeof l!="number"&&(l=0),!(l+c.length>a.length)&&a.indexOf(c,l)!==-1})(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(lw(e,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),zn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),zn("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),zn("ERR_STREAM_PREMATURE_CLOSE","Premature close"),zn("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),zn("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),zn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),zn("ERR_STREAM_WRITE_AFTER_END","write after end"),zn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),zn("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),zn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ro.codes=U_;var gM=ro.codes.ERR_INVALID_OPT_VALUE,fh,uw,hh,dw,$_={getHighWaterMark:function(t,e,n,r){var i=(function(s,o,a){return s.highWaterMark!=null?s.highWaterMark:o?s[a]:null})(e,r,n);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new gM(r?n:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}},mM=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Xc=Qc(Object.freeze({__proto__:null,default:mM})),yM=function(t,e){if(ph("noDeprecation"))return t;var n=!1;return function(){if(!n){if(ph("throwDeprecation"))throw new Error(e);ph("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}};function ph(t){try{if(!er.localStorage)return!1}catch{return!1}var e=er.localStorage[t];return e!=null&&String(e).toLowerCase()==="true"}function F_(){if(uw)return fh;function t($){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(N,S,k){var B=N.entry;for(N.entry=null;B;){var v=B.callback;S.pendingcb--,v(k),B=B.next}S.corkedRequestsFree.next=N})(D,$)}}var e;uw=1,fh=O,O.WritableState=P;var n={deprecate:yM},r=x_,i=Yg.Buffer,s=(er!==void 0?er:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,a=D_,c=$_.getHighWaterMark,l=ro.codes,u=l.ERR_INVALID_ARG_TYPE,d=l.ERR_METHOD_NOT_IMPLEMENTED,f=l.ERR_MULTIPLE_CALLBACK,h=l.ERR_STREAM_CANNOT_PIPE,g=l.ERR_STREAM_DESTROYED,p=l.ERR_STREAM_NULL_VALUES,y=l.ERR_STREAM_WRITE_AFTER_END,m=l.ERR_UNKNOWN_ENCODING,b=a.errorOrDestroy;function w(){}function P($,D,N){e=e||ua(),$=$||{},typeof N!="boolean"&&(N=D instanceof e),this.objectMode=!!$.objectMode,N&&(this.objectMode=this.objectMode||!!$.writableObjectMode),this.highWaterMark=c(this,$,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var S=$.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(k){(function(B,v){var E=B._writableState,x=E.sync,C=E.writecb;if(typeof C!="function")throw new f;if((function(_){_.writing=!1,_.writecb=null,_.length-=_.writelen,_.writelen=0})(E),v)(function(_,T,R,U,I){--T.pendingcb,R?(Ge.nextTick(I,U),Ge.nextTick(V,_,T),_._writableState.errorEmitted=!0,b(_,U)):(I(U),_._writableState.errorEmitted=!0,b(_,U),V(_,T))})(B,E,x,v,C);else{var A=j(E)||B.destroyed;A||E.corked||E.bufferProcessing||!E.bufferedRequest||q(B,E),x?Ge.nextTick(G,B,E,A,C):G(B,E,A,C)}})(D,k)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function O($){var D=this instanceof(e=e||ua());if(!D&&!o.call(O,this))return new O($);this._writableState=new P($,this,D),this.writable=!0,$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final)),r.call(this)}function H($,D,N,S,k,B,v){D.writelen=S,D.writecb=v,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new g("write")):N?$._writev(k,D.onwrite):$._write(k,B,D.onwrite),D.sync=!1}function G($,D,N,S){N||(function(k,B){B.length===0&&B.needDrain&&(B.needDrain=!1,k.emit("drain"))})($,D),D.pendingcb--,S(),V($,D)}function q($,D){D.bufferProcessing=!0;var N=D.bufferedRequest;if($._writev&&N&&N.next){var S=D.bufferedRequestCount,k=new Array(S),B=D.corkedRequestsFree;B.entry=N;for(var v=0,E=!0;N;)k[v]=N,N.isBuf||(E=!1),N=N.next,v+=1;k.allBuffers=E,H($,D,!0,D.length,k,"",B.finish),D.pendingcb++,D.lastBufferedRequest=null,B.next?(D.corkedRequestsFree=B.next,B.next=null):D.corkedRequestsFree=new t(D),D.bufferedRequestCount=0}else{for(;N;){var x=N.chunk,C=N.encoding,A=N.callback;if(H($,D,!1,D.objectMode?1:x.length,x,C,A),N=N.next,D.bufferedRequestCount--,D.writing)break}N===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=N,D.bufferProcessing=!1}function j($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function L($,D){$._final((function(N){D.pendingcb--,N&&b($,N),D.prefinished=!0,$.emit("prefinish"),V($,D)}))}function V($,D){var N=j(D);if(N&&((function(k,B){B.prefinished||B.finalCalled||(typeof k._final!="function"||B.destroyed?(B.prefinished=!0,k.emit("prefinish")):(B.pendingcb++,B.finalCalled=!0,Ge.nextTick(L,k,B)))})($,D),D.pendingcb===0&&(D.finished=!0,$.emit("finish"),D.autoDestroy))){var S=$._readableState;(!S||S.autoDestroy&&S.endEmitted)&&$.destroy()}return N}return Xc(O,r),P.prototype.getBuffer=function(){for(var $=this.bufferedRequest,D=[];$;)D.push($),$=$.next;return D},(function(){try{Object.defineProperty(P.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function($){return!!o.call(this,$)||this===O&&$&&$._writableState instanceof P}})):o=function($){return $ instanceof this},O.prototype.pipe=function(){b(this,new h)},O.prototype.write=function($,D,N){var S,k=this._writableState,B=!1,v=!k.objectMode&&(S=$,i.isBuffer(S)||S instanceof s);return v&&!i.isBuffer($)&&($=(function(E){return i.from(E)})($)),typeof D=="function"&&(N=D,D=null),v?D="buffer":D||(D=k.defaultEncoding),typeof N!="function"&&(N=w),k.ending?(function(E,x){var C=new y;b(E,C),Ge.nextTick(x,C)})(this,N):(v||(function(E,x,C,A){var _;return C===null?_=new p:typeof C=="string"||x.objectMode||(_=new u("chunk",["string","Buffer"],C)),!_||(b(E,_),Ge.nextTick(A,_),!1)})(this,k,$,N))&&(k.pendingcb++,B=(function(E,x,C,A,_,T){if(!C){var R=(function(W,Z,se){return W.objectMode||W.decodeStrings===!1||typeof Z!="string"||(Z=i.from(Z,se)),Z})(x,A,_);A!==R&&(C=!0,_="buffer",A=R)}var U=x.objectMode?1:A.length;x.length+=U;var I=x.length<x.highWaterMark;if(I||(x.needDrain=!0),x.writing||x.corked){var K=x.lastBufferedRequest;x.lastBufferedRequest={chunk:A,encoding:_,isBuf:C,callback:T,next:null},K?K.next=x.lastBufferedRequest:x.bufferedRequest=x.lastBufferedRequest,x.bufferedRequestCount+=1}else H(E,x,!1,U,A,_,T);return I})(this,k,v,$,D,N)),B},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,$.writing||$.corked||$.bufferProcessing||!$.bufferedRequest||q(this,$))},O.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=$.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($+"").toLowerCase())>-1))throw new m($);return this._writableState.defaultEncoding=$,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function($,D,N){N(new d("_write()"))},O.prototype._writev=null,O.prototype.end=function($,D,N){var S=this._writableState;return typeof $=="function"?(N=$,$=null,D=null):typeof D=="function"&&(N=D,D=null),$!=null&&this.write($,D),S.corked&&(S.corked=1,this.uncork()),S.ending||(function(k,B,v){B.ending=!0,V(k,B),v&&(B.finished?Ge.nextTick(v):k.once("finish",v)),B.ended=!0,k.writable=!1})(this,S,N),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function($){this._writableState&&(this._writableState.destroyed=$)}}),O.prototype.destroy=a.destroy,O.prototype._undestroy=a.undestroy,O.prototype._destroy=function($,D){D($)},fh}function ua(){if(dw)return hh;dw=1;var t=Object.keys||function(l){var u=[];for(var d in l)u.push(d);return u};hh=o;var e=H_(),n=F_();Xc(o,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||Ge.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),hh}var vM=pe.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function uu(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),(function(e){if(e&&!vM(e))throw new Error("Unknown encoding: "+e)})(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=bM;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=EM;break;default:return void(this.write=wM)}this.charBuffer=new pe(6),this.charReceived=0,this.charLength=0}function wM(t){return t.toString(this.encoding)}function bM(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function EM(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}uu.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},uu.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},uu.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var fw=Qc(Object.freeze({__proto__:null,StringDecoder:uu})),hw=ro.codes.ERR_STREAM_PREMATURE_CLOSE;function AM(){}var gh,pw,gw,mw,mh,yw,i0=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=(function(g){var p=!1;return function(){if(!p){p=!0;for(var y=arguments.length,m=new Array(y),b=0;b<y;b++)m[b]=arguments[b];g.apply(this,m)}}})(r||AM);var i=n.readable||n.readable!==!1&&e.readable,s=n.writable||n.writable!==!1&&e.writable,o=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){s=!1,a=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,s||r.call(e)},d=function(g){r.call(e,g)},f=function(){var g;return i&&!l?(e._readableState&&e._readableState.ended||(g=new hw),r.call(e,g)):s&&!a?(e._writableState&&e._writableState.ended||(g=new hw),r.call(e,g)):void 0},h=function(){e.req.on("finish",c)};return(function(g){return g.setHeader&&typeof g.abort=="function"})(e)?(e.on("complete",c),e.on("abort",f),e.req?h():e.on("request",h)):s&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",c),n.error!==!1&&e.on("error",d),e.on("close",f),function(){e.removeListener("complete",c),e.removeListener("abort",f),e.removeListener("request",h),e.req&&e.req.removeListener("finish",c),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",c),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",f)}};function _M(){if(pw)return gh;var t;function e(p,y,m){return(y=(function(b){var w=(function(P,O){if(typeof P!="object"||P===null)return P;var H=P[Symbol.toPrimitive];if(H!==void 0){var G=H.call(P,O);if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(P)})(b,"string");return typeof w=="symbol"?w:String(w)})(y))in p?Object.defineProperty(p,y,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[y]=m,p}pw=1;var n=i0,r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(p,y){return{value:p,done:y}}function d(p){var y=p[r];if(y!==null){var m=p[l].read();m!==null&&(p[a]=null,p[r]=null,p[i]=null,y(u(m,!1)))}}function f(p){Ge.nextTick(d,p)}var h=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var p=this,y=this[s];if(y!==null)return Promise.reject(y);if(this[o])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise((function(P,O){Ge.nextTick((function(){p[s]?O(p[s]):P(u(void 0,!0))}))}));var m,b=this[a];if(b)m=new Promise((function(P,O){return function(H,G){P.then((function(){O[o]?H(u(void 0,!0)):O[c](H,G)}),G)}})(b,this));else{var w=this[l].read();if(w!==null)return Promise.resolve(u(w,!1));m=new Promise(this[c])}return this[a]=m,m}},Symbol.asyncIterator,(function(){return this})),e(t,"return",(function(){var p=this;return new Promise((function(y,m){p[l].destroy(null,(function(b){b?m(b):y(u(void 0,!0))}))}))})),t),h);return gh=function(p){var y,m=Object.create(g,(e(y={},l,{value:p,writable:!0}),e(y,r,{value:null,writable:!0}),e(y,i,{value:null,writable:!0}),e(y,s,{value:null,writable:!0}),e(y,o,{value:p._readableState.endEmitted,writable:!0}),e(y,c,{value:function(b,w){var P=m[l].read();P?(m[a]=null,m[r]=null,m[i]=null,b(u(P,!1))):(m[r]=b,m[i]=w)},writable:!0}),y));return m[a]=null,n(p,(function(b){if(b&&b.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=m[i];return w!==null&&(m[a]=null,m[r]=null,m[i]=null,w(b)),void(m[s]=b)}var P=m[r];P!==null&&(m[a]=null,m[r]=null,m[i]=null,P(u(void 0,!0))),m[o]=!0})),p.on("readable",f.bind(null,m)),m},gh}function H_(){if(yw)return mh;var t;yw=1,mh=O,O.ReadableState=P,Qg.EventEmitter;var e=function(A,_){return A.listeners(_).length},n=x_,r=Yg.Buffer,i=(er!==void 0?er:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,o=B_;s=o&&o.debuglog?o.debuglog("stream"):function(){};var a,c,l,u=pM(),d=D_,f=$_.getHighWaterMark,h=ro.codes,g=h.ERR_INVALID_ARG_TYPE,p=h.ERR_STREAM_PUSH_AFTER_EOF,y=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Xc(O,n);var b=d.errorOrDestroy,w=["error","close","destroy","pause","resume"];function P(A,_,T){t=t||ua(),A=A||{},typeof T!="boolean"&&(T=_ instanceof t),this.objectMode=!!A.objectMode,T&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=f(this,A,"readableHighWaterMark",T),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(a||(a=fw.StringDecoder),this.decoder=new a(A.encoding),this.encoding=A.encoding)}function O(A){if(t=t||ua(),!(this instanceof O))return new O(A);var _=this instanceof t;this._readableState=new P(A,this,_),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),n.call(this)}function H(A,_,T,R,U){s("readableAddChunk",_);var I,K=A._readableState;if(_===null)K.reading=!1,(function(W,Z){if(s("onEofChunk"),!Z.ended){if(Z.decoder){var se=Z.decoder.end();se&&se.length&&(Z.buffer.push(se),Z.length+=Z.objectMode?1:se.length)}Z.ended=!0,Z.sync?L(W):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,V(W)))}})(A,K);else if(U||(I=(function(W,Z){var se;M=Z,r.isBuffer(M)||M instanceof i||typeof Z=="string"||Z===void 0||W.objectMode||(se=new g("chunk",["string","Buffer","Uint8Array"],Z));var M;return se})(K,_)),I)b(A,I);else if(K.objectMode||_&&_.length>0)if(typeof _=="string"||K.objectMode||Object.getPrototypeOf(_)===r.prototype||(_=(function(W){return r.from(W)})(_)),R)K.endEmitted?b(A,new m):G(A,K,_,!0);else if(K.ended)b(A,new p);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!T?(_=K.decoder.write(_),K.objectMode||_.length!==0?G(A,K,_,!1):$(A,K)):G(A,K,_,!1)}else R||(K.reading=!1,$(A,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function G(A,_,T,R){_.flowing&&_.length===0&&!_.sync?(_.awaitDrain=0,A.emit("data",T)):(_.length+=_.objectMode?1:T.length,R?_.buffer.unshift(T):_.buffer.push(T),_.needReadable&&L(A)),$(A,_)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),O.prototype.destroy=d.destroy,O.prototype._undestroy=d.undestroy,O.prototype._destroy=function(A,_){_(A)},O.prototype.push=function(A,_){var T,R=this._readableState;return R.objectMode?T=!0:typeof A=="string"&&((_=_||R.defaultEncoding)!==R.encoding&&(A=r.from(A,_),_=""),T=!0),H(this,A,_,!1,T)},O.prototype.unshift=function(A){return H(this,A,null,!0,!1)},O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(A){a||(a=fw.StringDecoder);var _=new a(A);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;for(var T=this._readableState.buffer.head,R="";T!==null;)R+=_.write(T.data),T=T.next;return this._readableState.buffer.clear(),R!==""&&this._readableState.buffer.push(R),this._readableState.length=R.length,this};var q=1073741824;function j(A,_){return A<=0||_.length===0&&_.ended?0:_.objectMode?1:A!=A?_.flowing&&_.length?_.buffer.head.data.length:_.length:(A>_.highWaterMark&&(_.highWaterMark=(function(T){return T>=q?T=q:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T})(A)),A<=_.length?A:_.ended?_.length:(_.needReadable=!0,0))}function L(A){var _=A._readableState;s("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(s("emitReadable",_.flowing),_.emittedReadable=!0,Ge.nextTick(V,A))}function V(A){var _=A._readableState;s("emitReadable_",_.destroyed,_.length,_.ended),_.destroyed||!_.length&&!_.ended||(A.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,B(A)}function $(A,_){_.readingMore||(_.readingMore=!0,Ge.nextTick(D,A,_))}function D(A,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){var T=_.length;if(s("maybeReadMore read 0"),A.read(0),T===_.length)break}_.readingMore=!1}function N(A){var _=A._readableState;_.readableListening=A.listenerCount("readable")>0,_.resumeScheduled&&!_.paused?_.flowing=!0:A.listenerCount("data")>0&&A.resume()}function S(A){s("readable nexttick read 0"),A.read(0)}function k(A,_){s("resume",_.reading),_.reading||A.read(0),_.resumeScheduled=!1,A.emit("resume"),B(A),_.flowing&&!_.reading&&A.read(0)}function B(A){var _=A._readableState;for(s("flow",_.flowing);_.flowing&&A.read()!==null;);}function v(A,_){return _.length===0?null:(_.objectMode?T=_.buffer.shift():!A||A>=_.length?(T=_.decoder?_.buffer.join(""):_.buffer.length===1?_.buffer.first():_.buffer.concat(_.length),_.buffer.clear()):T=_.buffer.consume(A,_.decoder),T);var T}function E(A){var _=A._readableState;s("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,Ge.nextTick(x,_,A))}function x(A,_){if(s("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,_.readable=!1,_.emit("end"),A.autoDestroy)){var T=_._writableState;(!T||T.autoDestroy&&T.finished)&&_.destroy()}}function C(A,_){for(var T=0,R=A.length;T<R;T++)if(A[T]===_)return T;return-1}return O.prototype.read=function(A){s("read",A),A=parseInt(A,10);var _=this._readableState,T=A;if(A!==0&&(_.emittedReadable=!1),A===0&&_.needReadable&&((_.highWaterMark!==0?_.length>=_.highWaterMark:_.length>0)||_.ended))return s("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?E(this):L(this),null;if((A=j(A,_))===0&&_.ended)return _.length===0&&E(this),null;var R,U=_.needReadable;return s("need readable",U),(_.length===0||_.length-A<_.highWaterMark)&&s("length less than watermark",U=!0),_.ended||_.reading?s("reading or ended",U=!1):U&&(s("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(A=j(T,_))),(R=A>0?v(A,_):null)===null?(_.needReadable=_.length<=_.highWaterMark,A=0):(_.length-=A,_.awaitDrain=0),_.length===0&&(_.ended||(_.needReadable=!0),T!==A&&_.ended&&E(this)),R!==null&&this.emit("data",R),R},O.prototype._read=function(A){b(this,new y("_read()"))},O.prototype.pipe=function(A,_){var T=this,R=this._readableState;switch(R.pipesCount){case 0:R.pipes=A;break;case 1:R.pipes=[R.pipes,A];break;default:R.pipes.push(A)}R.pipesCount+=1,s("pipe count=%d opts=%j",R.pipesCount,_);var U=(!_||_.end!==!1)&&A!==Ge.stdout&&A!==Ge.stderr?K:ne;function I(J,Q){s("onunpipe"),J===T&&Q&&Q.hasUnpiped===!1&&(Q.hasUnpiped=!0,s("cleanup"),A.removeListener("close",F),A.removeListener("finish",Y),A.removeListener("drain",W),A.removeListener("error",M),A.removeListener("unpipe",I),T.removeListener("end",K),T.removeListener("end",ne),T.removeListener("data",se),Z=!0,!R.awaitDrain||A._writableState&&!A._writableState.needDrain||W())}function K(){s("onend"),A.end()}R.endEmitted?Ge.nextTick(U):T.once("end",U),A.on("unpipe",I);var W=(function(J){return function(){var Q=J._readableState;s("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,Q.awaitDrain===0&&e(J,"data")&&(Q.flowing=!0,B(J))}})(T);A.on("drain",W);var Z=!1;function se(J){s("ondata");var Q=A.write(J);s("dest.write",Q),Q===!1&&((R.pipesCount===1&&R.pipes===A||R.pipesCount>1&&C(R.pipes,A)!==-1)&&!Z&&(s("false write response, pause",R.awaitDrain),R.awaitDrain++),T.pause())}function M(J){s("onerror",J),ne(),A.removeListener("error",M),e(A,"error")===0&&b(A,J)}function F(){A.removeListener("finish",Y),ne()}function Y(){s("onfinish"),A.removeListener("close",F),ne()}function ne(){s("unpipe"),T.unpipe(A)}return T.on("data",se),(function(J,Q,ie){if(typeof J.prependListener=="function")return J.prependListener(Q,ie);J._events&&J._events[Q]?Array.isArray(J._events[Q])?J._events[Q].unshift(ie):J._events[Q]=[ie,J._events[Q]]:J.on(Q,ie)})(A,"error",M),A.once("close",F),A.once("finish",Y),A.emit("pipe",T),R.flowing||(s("pipe resume"),T.resume()),A},O.prototype.unpipe=function(A){var _=this._readableState,T={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return A&&A!==_.pipes||(A||(A=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,A&&A.emit("unpipe",this,T)),this;if(!A){var R=_.pipes,U=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var I=0;I<U;I++)R[I].emit("unpipe",this,{hasUnpiped:!1});return this}var K=C(_.pipes,A);return K===-1||(_.pipes.splice(K,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),A.emit("unpipe",this,T)),this},O.prototype.on=function(A,_){var T=n.prototype.on.call(this,A,_),R=this._readableState;return A==="data"?(R.readableListening=this.listenerCount("readable")>0,R.flowing!==!1&&this.resume()):A==="readable"&&(R.endEmitted||R.readableListening||(R.readableListening=R.needReadable=!0,R.flowing=!1,R.emittedReadable=!1,s("on readable",R.length,R.reading),R.length?L(this):R.reading||Ge.nextTick(S,this))),T},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(A,_){var T=n.prototype.removeListener.call(this,A,_);return A==="readable"&&Ge.nextTick(N,this),T},O.prototype.removeAllListeners=function(A){var _=n.prototype.removeAllListeners.apply(this,arguments);return A!=="readable"&&A!==void 0||Ge.nextTick(N,this),_},O.prototype.resume=function(){var A=this._readableState;return A.flowing||(s("resume"),A.flowing=!A.readableListening,(function(_,T){T.resumeScheduled||(T.resumeScheduled=!0,Ge.nextTick(k,_,T))})(this,A)),A.paused=!1,this},O.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function(A){var _=this,T=this._readableState,R=!1;for(var U in A.on("end",(function(){if(s("wrapped end"),T.decoder&&!T.ended){var K=T.decoder.end();K&&K.length&&_.push(K)}_.push(null)})),A.on("data",(function(K){s("wrapped data"),T.decoder&&(K=T.decoder.write(K)),T.objectMode&&K==null||(T.objectMode||K&&K.length)&&(_.push(K)||(R=!0,A.pause()))})),A)this[U]===void 0&&typeof A[U]=="function"&&(this[U]=(function(K){return function(){return A[K].apply(A,arguments)}})(U));for(var I=0;I<w.length;I++)A.on(w[I],this.emit.bind(this,w[I]));return this._read=function(K){s("wrapped _read",K),R&&(R=!1,A.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=_M()),c(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),O._fromList=v,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(O.from=function(A,_){return l===void 0&&(l=mw?gw:(mw=1,gw=function(){throw new Error("Readable.from is not available in the browser")})),l(O,A,_)}),mh}var K_=ri,Qd=ro.codes,SM=Qd.ERR_METHOD_NOT_IMPLEMENTED,CM=Qd.ERR_MULTIPLE_CALLBACK,xM=Qd.ERR_TRANSFORM_ALREADY_TRANSFORMING,kM=Qd.ERR_TRANSFORM_WITH_LENGTH_0,du=ua();function TM(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new CM);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ri(t){if(!(this instanceof ri))return new ri(t);du.call(this,t),this._transformState={afterTransform:TM.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",PM)}function PM(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?vw(this,null,null):this._flush((function(e,n){vw(t,e,n)}))}function vw(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new kM;if(t._transformState.transforming)throw new xM;return t.push(null)}Xc(ri,du),ri.prototype.push=function(t,e){return this._transformState.needTransform=!1,du.prototype.push.call(this,t,e)},ri.prototype._transform=function(t,e,n){n(new SM("_transform()"))},ri.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},ri.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},ri.prototype._destroy=function(t,e){du.prototype._destroy.call(this,t,(function(n){e(n)}))};var yh,IM=Pc,j_=K_;function Pc(t){if(!(this instanceof Pc))return new Pc(t);j_.call(this,t)}Xc(Pc,j_),Pc.prototype._transform=function(t,e,n){n(null,t)};var V_=ro.codes,RM=V_.ERR_MISSING_ARGS,OM=V_.ERR_STREAM_DESTROYED;function ww(t){if(t)throw t}function bw(t){t()}function NM(t,e){return t.pipe(e)}var MM=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=(function(o){return o.length?typeof o[o.length-1]!="function"?ww:o.pop():ww})(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new RM("streams");var s=e.map((function(o,a){var c=a<e.length-1;return(function(l,u,d,f){f=(function(p){var y=!1;return function(){y||(y=!0,p.apply(void 0,arguments))}})(f);var h=!1;l.on("close",(function(){h=!0})),yh===void 0&&(yh=i0),yh(l,{readable:u,writable:d},(function(p){if(p)return f(p);h=!0,f()}));var g=!1;return function(p){if(!h&&!g)return g=!0,(function(y){return y.setHeader&&typeof y.abort=="function"})(l)?l.abort():typeof l.destroy=="function"?l.destroy():void f(p||new OM("pipe"))}})(o,c,a>0,(function(l){r||(r=l),l&&s.forEach(bw),c||(s.forEach(bw),i(r))}))}));return e.reduce(NM)};(function(t,e){(e=Mp.exports=H_()).Stream=e,e.Readable=e,e.Writable=F_(),e.Duplex=ua(),e.Transform=K_,e.PassThrough=IM,e.finished=i0,e.pipeline=MM})(0,Mp.exports);var da=Mp.exports;function LM(t={}){const e={},n=new da.Duplex({objectMode:!0,read:()=>{},write:function(s,o,a){let c=null;try{s.id?(function(l){const{id:u}=l;if(u===null)return;const d=e[u];if(!d)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(d.res,l),setTimeout(d.end)})(s):(function(l){t?.retryOnMessage&&l.method===t.retryOnMessage&&Object.values(e).forEach((({req:u,retryCount:d=0})=>{if(!u.id)return;if(d>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const f=e[u.id];f&&(f.retryCount=d+1),i(u)})),r.emit("notification",l)})(s)}catch(l){c=l}a(c)}}),r=new w_;return{events:r,middleware:(s,o,a,c)=>{e[s.id]={req:s,res:o,next:a,end:c},i(s)},stream:n};function i(s){n.push(s)}}var ed={},Bp={exports:{}},BM=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(i){r[i]=e[i]})),r;function r(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),a=i[i.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach((function(c){o[c]=a[c]})),o}},Ew=BM;function Bl(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Aw(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}Bp.exports=Ew(Bl),Bp.exports.strict=Ew(Aw),Bl.proto=Bl((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Bl(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Aw(this)},configurable:!0})}));var DM=Bp.exports,td={};Object.defineProperty(td,"__esModule",{value:!0}),td.Substream=void 0;const UM=da;class $M extends UM.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}td.Substream=$M;var FM=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ed,"__esModule",{value:!0}),ed.ObjectMultiplex=void 0;const vh=da,HM=FM(DM),KM=td,_w=Symbol("IGNORE_SUBSTREAM");let jM=class extends vh.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new KM.Substream({parent:this,name:t});return this._substreams[t]=e,(function(n,r){const i=(0,HM.default)(r);(0,vh.finished)(n,{readable:!1},i),(0,vh.finished)(n,{writable:!1},i)})(this,(n=>e.destroy(n||void 0))),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=_w}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[r];return s?(s!==_w&&s.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};ed.ObjectMultiplex=jM;var VM=Vd(ed.ObjectMultiplex);const xr=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";xr.writable=t=>xr(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",xr.readable=t=>xr(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",xr.duplex=t=>xr.writable(t)&&xr.readable(t),xr.transform=t=>xr.duplex(t)&&typeof t._transform=="function";var kr,zM=xr,GM=class extends aM{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!zM.duplex(t))throw new Error(vt.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const s=new VM;da.pipeline(t,s,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=LM({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),da.pipeline(this._jsonRpcConnection.stream,s.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",(o=>{const{method:a,params:c}=o;a==="metamask_accountsChanged"?this._handleAccountsChanged(c):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):a==="metamask_chainChanged"?this._handleChainChanged(c):b_.includes(a)?this.emit("message",{type:a,data:c}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(vt.errors.permanentlyDisconnected()))}))}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e?.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){E_(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(vt.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},qM=class extends GM{constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:XN(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},Np(this,kr,void 0),this._initializeStateAsync(),ni(this,kr,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",(s=>{const{method:o}=s;b_.includes(o)&&(this.emit("data",s),this.emit("notification",s.params.result))})),i)if(document.readyState==="complete")sw(this._rpcEngine,this._log);else{const s=()=>{sw(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",s)};window.addEventListener("DOMContentLoaded",s)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(vt.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(vt.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Lr(this,kr)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(vt.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),Lr(this,kr)&&!t&&ni(this,kr,null)}_warnOfDeprecation(t){this._sentWarnings?.events[t]===!1&&(this._log.warn(vt.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(vt.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},cu(t,e))}catch(n){e(n)}}))}send(t,e){return this._sentWarnings.send||(this._log.warn(vt.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise(((n,r)=>{try{this._rpcRequest({method:t,params:e},cu(n,r,!1))}catch(i){r(i)}}))}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,A_),e=!0;break;case"net_version":e=Lr(this,kr)??null;break;default:throw new Error(vt.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise((t=>{this.on("_initialized",(()=>t()))})),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw Xa({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise(((e,n)=>{this._rpcRequest(t,cu(e,n))}))}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(vt.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==Lr(this,kr)&&(ni(this,kr,e),this._state.initialized&&this.emit("networkChanged",Lr(this,kr)))}};kr=new WeakMap;const ce=mn("MM_SDK");let Sw;ce.color="#FFAC1C";var z_={},os={};Object.defineProperty(os,"__esModule",{value:!0}),os.EthereumProviderError=os.EthereumRpcError=void 0;const WM=h_;class G_ extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return WM.default(this.serialize(),QM,2)}}os.EthereumRpcError=G_;function QM(t,e){if(e!=="[Circular]")return e}os.EthereumProviderError=class extends G_{constructor(t,e,n){if(!(function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999})(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var s0={},Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.errorValues=Ji.errorCodes=void 0,Ji.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Ji.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Ji,n=os,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:r,message:o(r)};function o(d,f=i){if(Number.isInteger(d)){const h=d.toString();if(u(e.errorValues,h))return e.errorValues[h].message;if(c(d))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return f}function a(d){if(!Number.isInteger(d))return!1;const f=d.toString();return!!e.errorValues[f]||!!c(d)}function c(d){return d>=-32099&&d<=-32e3}function l(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function u(d,f){return Object.prototype.hasOwnProperty.call(d,f)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=o,t.isValidCode=a,t.serializeError=function(d,{fallbackError:f=s,shouldIncludeStack:h=!1}={}){var g,p;if(!f||!Number.isInteger(f.code)||typeof f.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof n.EthereumRpcError)return d.serialize();const y={};if(d&&typeof d=="object"&&!Array.isArray(d)&&u(d,"code")&&a(d.code)){const b=d;y.code=b.code,b.message&&typeof b.message=="string"?(y.message=b.message,u(b,"data")&&(y.data=b.data)):(y.message=o(y.code),y.data={originalError:l(d)})}else{y.code=f.code;const b=(g=d)===null||g===void 0?void 0:g.message;y.message=b&&typeof b=="string"?b:f.message,y.data={originalError:l(d)}}const m=(p=d)===null||p===void 0?void 0:p.stack;return h&&d&&m&&typeof m=="string"&&(y.stack=m),y}})(s0);var nd={};Object.defineProperty(nd,"__esModule",{value:!0}),nd.ethErrors=void 0;const o0=os,q_=s0,zt=Ji;function Gn(t,e){const[n,r]=W_(e);return new o0.EthereumRpcError(t,n||q_.getMessageFromCode(t),r)}function Pa(t,e){const[n,r]=W_(e);return new o0.EthereumProviderError(t,n||q_.getMessageFromCode(t),r)}function W_(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}nd.ethErrors={rpc:{parse:t=>Gn(zt.errorCodes.rpc.parse,t),invalidRequest:t=>Gn(zt.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Gn(zt.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Gn(zt.errorCodes.rpc.methodNotFound,t),internal:t=>Gn(zt.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Gn(e,t)},invalidInput:t=>Gn(zt.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Gn(zt.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Gn(zt.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Gn(zt.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Gn(zt.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Gn(zt.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Pa(zt.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Pa(zt.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Pa(zt.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Pa(zt.errorCodes.provider.disconnected,t),chainDisconnected:t=>Pa(zt.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new o0.EthereumProviderError(e,n,r)}}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=os;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=s0;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=nd;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Ji;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(z_);var Q_={exports:{}};Q_.exports=(function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,s){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var o in r)n.d(s,o,(function(a){return r[a]}).bind(null,o));return s},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)})({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=(function(){function s(){}return s.getFirstMatch=function(o,a){var c=a.match(o);return c&&c.length>0&&c[1]||""},s.getSecondMatch=function(o,a){var c=a.match(o);return c&&c.length>1&&c[2]||""},s.matchAndReturnConst=function(o,a,c){if(o.test(a))return c},s.getWindowsVersionName=function(o){switch(o){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(o){var a=o.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(o){var a=o.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},s.getVersionPrecision=function(o){return o.split(".").length},s.compareVersions=function(o,a,c){c===void 0&&(c=!1);var l=s.getVersionPrecision(o),u=s.getVersionPrecision(a),d=Math.max(l,u),f=0,h=s.map([o,a],(function(g){var p=d-s.getVersionPrecision(g),y=g+new Array(p+1).join(".0");return s.map(y.split("."),(function(m){return new Array(20-m.length).join("0")+m})).reverse()}));for(c&&(f=d-Math.min(l,u)),d-=1;d>=f;){if(h[0][d]>h[1][d])return 1;if(h[0][d]===h[1][d]){if(d===f)return 0;d-=1}else if(h[0][d]<h[1][d])return-1}},s.map=function(o,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(o,a);for(c=0;c<o.length;c+=1)l.push(a(o[c]));return l},s.find=function(o,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(o,a);for(c=0,l=o.length;c<l;c+=1){var u=o[c];if(a(u,c))return u}},s.assign=function(o){for(var a,c,l=o,u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[o].concat(d));var h=function(){var g=d[a];typeof g=="object"&&g!==null&&Object.keys(g).forEach((function(p){l[p]=g[p]}))};for(a=0,c=d.length;a<c;a+=1)h();return o},s.getBrowserAlias=function(o){return r.BROWSER_ALIASES_MAP[o]},s.getBrowserTypeByAlias=function(o){return r.BROWSER_MAP[o]||""},s})();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},s=n(18);function o(c,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}var a=(function(){function c(){}var l,u,d;return c.getParser=function(f,h){if(h===void 0&&(h=!1),typeof f!="string")throw new Error("UserAgent should be a string");return new i.default(f,h)},c.parse=function(f){return new i.default(f).getResult()},l=c,d=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(u=null)&&o(l.prototype,u),d&&o(l,d),c})();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=c(n(92)),i=c(n(93)),s=c(n(94)),o=c(n(95)),a=c(n(17));function c(u){return u&&u.__esModule?u:{default:u}}var l=(function(){function u(f,h){if(h===void 0&&(h=!1),f==null||f==="")throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},h!==!0&&this.parse()}var d=u.prototype;return d.getUA=function(){return this._ua},d.test=function(f){return f.test(this._ua)},d.parseBrowser=function(){var f=this;this.parsedResult.browser={};var h=a.default.find(r.default,(function(g){if(typeof g.test=="function")return g.test(f);if(g.test instanceof Array)return g.test.some((function(p){return f.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var f=this;this.parsedResult.os={};var h=a.default.find(i.default,(function(g){if(typeof g.test=="function")return g.test(f);if(g.test instanceof Array)return g.test.some((function(p){return f.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(f){var h=this.getOS().name;return f?String(h).toLowerCase()||"":h||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(f){f===void 0&&(f=!1);var h=this.getPlatform().type;return f?String(h).toLowerCase()||"":h||""},d.parsePlatform=function(){var f=this;this.parsedResult.platform={};var h=a.default.find(s.default,(function(g){if(typeof g.test=="function")return g.test(f);if(g.test instanceof Array)return g.test.some((function(p){return f.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var f=this;this.parsedResult.engine={};var h=a.default.find(o.default,(function(g){if(typeof g.test=="function")return g.test(f);if(g.test instanceof Array)return g.test.some((function(p){return f.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return a.default.assign({},this.parsedResult)},d.satisfies=function(f){var h=this,g={},p=0,y={},m=0;if(Object.keys(f).forEach((function(j){var L=f[j];typeof L=="string"?(y[j]=L,m+=1):typeof L=="object"&&(g[j]=L,p+=1)})),p>0){var b=Object.keys(g),w=a.default.find(b,(function(j){return h.isOS(j)}));if(w){var P=this.satisfies(g[w]);if(P!==void 0)return P}var O=a.default.find(b,(function(j){return h.isPlatform(j)}));if(O){var H=this.satisfies(g[O]);if(H!==void 0)return H}}if(m>0){var G=Object.keys(y),q=a.default.find(G,(function(j){return h.isBrowser(j,!0)}));if(q!==void 0)return this.compareVersion(y[q])}},d.isBrowser=function(f,h){h===void 0&&(h=!1);var g=this.getBrowserName().toLowerCase(),p=f.toLowerCase(),y=a.default.getBrowserTypeByAlias(p);return h&&y&&(p=y.toLowerCase()),p===g},d.compareVersion=function(f){var h=[0],g=f,p=!1,y=this.getBrowserVersion();if(typeof y=="string")return f[0]===">"||f[0]==="<"?(g=f.substr(1),f[1]==="="?(p=!0,g=f.substr(2)):h=[],f[0]===">"?h.push(1):h.push(-1)):f[0]==="="?g=f.substr(1):f[0]==="~"&&(p=!0,g=f.substr(1)),h.indexOf(a.default.compareVersions(y,g,p))>-1},d.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},d.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},d.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},d.is=function(f,h){return h===void 0&&(h=!1),this.isBrowser(f,h)||this.isOS(f)||this.isPlatform(f)},d.some=function(f){var h=this;return f===void 0&&(f=[]),f.some((function(g){return h.is(g)}))},u})();e.default=l,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(c,a),version:i.default.getSecondMatch(c,a)}}}];e.default=o,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/Roku\/DVP/],describe:function(a){var c=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:s.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=i.default.getWindowsVersionName(c);return{name:s.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:s.OS_MAP.iOS},l=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=i.default.getMacOSVersionName(c),u={name:s.OS_MAP.MacOS,version:c};return l&&(u.versionName=l),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=i.default.getAndroidVersionName(c),u={name:s.OS_MAP.Android,version:c};return l&&(u.versionName=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:s.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:s.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.PlayStation4,version:c}}}];e.default=o,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:s.ENGINE_MAP.Blink};var c=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:s.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:s.ENGINE_MAP.Trident},l=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:s.ENGINE_MAP.Presto},l=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:s.ENGINE_MAP.Gecko},l=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:s.ENGINE_MAP.WebKit},l=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];e.default=o,t.exports=e.default}});var J_=Vd(Q_.exports);const Cn={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class vr{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:s}){const o=new JM({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(o,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=s,e&&typeof window<"u")try{c=o,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){ce("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}var c;if(i&&typeof window<"u")try{(function(l,u=console){let d=!1,f=!1;if(!window.web3){const h="__isMetaMaskShim__";let g={currentProvider:l};Object.defineProperty(g,h,{value:!0,enumerable:!0,configurable:!1,writable:!1}),g=new Proxy(g,{get:(p,y,...m)=>(y!=="currentProvider"||d?y==="currentProvider"||y===h||f||(f=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),l.request({method:"metamask_logWeb3ShimUsage"}).catch((b=>{u.debug("MetaMask: Failed to log web3 shim usage.",b)}))):(d=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(p,y,...m)),set:(...p)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...p))}),Object.defineProperty(window,"web3",{value:g,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(l){ce("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",(l=>{this.sdkInstance.emit(Cn.DisplayURI,l)})),this.provider.on("_initialized",(()=>{const l={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Cn.Initialized,l),ce("[Ethereum: constructor()] provider initialized",l)}))}static init(e){var n;return ce("[Ethereum: init()] Initializing Ethereum service"),this.instance=new vr(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class Ic{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return(function(i,s,o,a){const{state:c}=i;ce(`[PlatfformManager: openDeeplink()] universalLink --> ${s}`),ce(`[PlatfformManager: openDeeplink()] deepLink --> ${o}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?o:s,a);if(ce(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?o:s}`),c.useDeeplink)typeof window<"u"&&(window.location.href=o);else if(typeof document<"u"){const l=document.createElement("a");l.href=s,l.target="_self",l.rel="noreferrer noopener",l.click()}}catch(l){console.log("[PlatfformManager: openDeeplink()] can't open link",l)}})(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&window?.navigator&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return(function(){const e=vr.getProvider()||window?.ethereum;return ce(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e?.isMetaMask} isConnected=${e?.isConnected()}`),e?.isMetaMask&&e?.isConnected()})()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=J_.parse(window.navigator.userAgent);return((e=r?.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r?.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===Yt.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!window?.navigator||yn!==void 0&&((e=yn?.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||navigator?.product==="ReactNative"}isNotBrowser(){return Ic.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return Ic.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return(function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?Yt.ReactNative:e.isNotBrowser()?Yt.NonBrowser:e.isMetaMaskMobileWebView()?Yt.MetaMaskMobileWebview:e.isMobile()?Yt.MobileWeb:Yt.DesktopWeb})(this)}}const Y_=t=>de(void 0,void 0,void 0,(function*(){if(Ic.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then((function(){return C4}));return new n(t)}const e={persistChannelConfig:()=>de(void 0,void 0,void 0,(function*(){})),getPersistedChannelConfig:()=>de(void 0,void 0,void 0,(function*(){})),persistAccounts:()=>de(void 0,void 0,void 0,(function*(){})),getCachedAccounts:()=>de(void 0,void 0,void 0,(function*(){return[]})),persistChainId:()=>de(void 0,void 0,void 0,(function*(){})),getCachedChainId:()=>de(void 0,void 0,void 0,(function*(){})),terminate:()=>de(void 0,void 0,void 0,(function*(){}))};return Promise.resolve(e)}));class JM extends qM{constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},ce(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return de(this,void 0,void 0,(function*(){return ce(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()}))}_setConnected(){ce("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(ce("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;ce(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",z_.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return de(this,void 0,void 0,(function*(){return(function(e){var n,r;return de(this,void 0,void 0,(function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let s;if(i.providerStateRequested)ce("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let o;i.providerStateRequested=!0;let a=null,c=!1,l=!1;const u=yield Y_({enabled:!0});if(u){const d=yield u.getPersistedChannelConfig({});c=(n=d?.relayPersistence)!==null&&n!==void 0&&n,o=yield u.getCachedChainId();const f=yield u.getCachedAccounts();f.length>0&&(a=f[0])}if(ce(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:o,cachedSelectedAddress:a}),c)if(o&&a)s={accounts:[a],chainId:o,isUnlocked:!1},l=!0;else try{s=yield e.request({method:"metamask_getProviderState"})}catch(d){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",d),void(i.providerStateRequested=!1)}if(((r=s?.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())s.accounts=[e.getSelectedAddress()];else{ce("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const d=yield e.request({method:"eth_requestAccounts",params:[]});s.accounts=d}e._initializeState(s),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:s?.chainId}))}}))})(this)}))}_initializeState(e){return ce("[SDKProvider: _initializeState()]",e),(function(n,r,i){return ce("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)})(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,(function({instance:r,chainId:i,networkVersion:s,superHandleChainChanged:o}){ce(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${s}`);let a=s;s||(ce("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==Sw&&(At.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),Sw=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),o({chainId:i,networkVersion:a})})({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var Rc,io={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(Rc||(Rc={}));const Cw="direct",Oc="https://metamask.app.link/connect",Nc="metamask://connect",xw={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},YM=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,Ie={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},Mc={[Ie.ETH_REQUESTACCOUNTS]:!0,[Ie.ETH_SENDTRANSACTION]:!0,[Ie.ETH_SIGNTRANSACTION]:!0,[Ie.ETH_SIGN]:!0,[Ie.PERSONAL_SIGN]:!0,[Ie.ETH_ACCOUNTS]:!1,[Ie.ETH_CHAINID]:!1,[Ie.PERSONAL_SIGN]:!0,[Ie.ETH_SIGNTYPEDDATA]:!0,[Ie.ETH_SIGNTYPEDDATA_V3]:!0,[Ie.ETH_SIGNTYPEDDATA_V4]:!0,[Ie.WALLET_REQUESTPERMISSIONS]:!0,[Ie.WALLET_GETPERMISSIONS]:!0,[Ie.WALLET_WATCHASSET]:!0,[Ie.WALLET_ADDETHEREUMCHAIN]:!0,[Ie.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[Ie.METAMASK_CONNECTSIGN]:!0,[Ie.METAMASK_CONNECTWITH]:!0,[Ie.PERSONAL_EC_RECOVER]:!0,[Ie.METAMASK_BATCH]:!0,[Ie.METAMASK_OPEN]:!0},ZM=Object.keys(Mc).filter((t=>Mc[t]===!0)).map((t=>t.toLowerCase())),Z_=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map((t=>t.toLowerCase())),wh=".sdk-comm",rd="providerType",Dp=".MMSDK_cached_address",Up=".MMSDK_cached_chainId",Cr={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},XM=1e6;var Kr;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(Kr||(Kr={}));const e4=typeof window<"u"&&window.localStorage;function t4({instance:t,msg:e}){return de(this,void 0,void 0,(function*(){if(t._initialized||(ce("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),ce(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:(function(r){let i;if(pe!==void 0)i=pe.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const s=new TextEncoder().encode(r);i=Array.from(s).map((o=>o.toString(16).padStart(2,"0"))).join("")}else{if(typeof yn!="object"||!("Buffer"in yn))throw new Error("Unable to convert string to hex: No available method.");i=yn.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`})(e);return t.activeProvider.request({method:Ie.METAMASK_CONNECTWITH,params:[{method:Ie.PERSONAL_SIGN,params:[n]}]})}))}function kw(t){var e,n;return de(this,void 0,void 0,(function*(){ce("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});ce(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(rd,"extension"),t.extensionActive=!0,t.emit(Cn.ProviderUpdate,Kr.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:St.SDK_USE_EXTENSION}))}))}function id(t){let e;if(pe!==void 0)e=pe.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,((n,r)=>String.fromCharCode(parseInt(r,16)))));else{if(typeof yn!="object"||!("Buffer"in yn))throw new Error("Unable to base64 encode: No available method.");e=yn.Buffer.from(t,"utf8").toString("base64")}return e}function n4(t,e,n,r){var i,s,o,a,c,l,u,d,f,h,g,p,y,m,b,w,P,O,H,G;return de(this,void 0,void 0,(function*(){const q=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),j=(s=t.state.remote)===null||s===void 0?void 0:s.isConnected(),L=(o=t.state.remote)===null||o===void 0?void 0:o.isPaused(),V=vr.getProvider(),$=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),D=(c=t.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:N}=t.state,{method:S,data:k,triggeredInstaller:B}=(C=>{var A,_,T,R;let U;pe.isBuffer(C)?(U=C.toJSON(),U._isBuffer=!0):U=C;const I=(A=U?.data)===null||A===void 0?void 0:A.method;let K=!1;return typeof((_=U?.data)===null||_===void 0?void 0:_.params)=="object"&&((R=(T=U?.data)===null||T===void 0?void 0:T.params)===null||R===void 0?void 0:R.__triggeredInstaller)===!0&&(K=!0,U.data.params=U.data.params.wrappedParams),{method:I,data:U,triggeredInstaller:K}})(e);if(ce(`[RCPMS: write()] method='${S}' isRemoteReady=${q} channelId=${$} isSocketConnected=${j} isRemotePaused=${L} providerConnected=${V.isConnected()}`,e),!$)return S!==Ie.METAMASK_GETPROVIDERSTATE&&ce(`[RCPMS: write()] ${S} --> channelId is undefined`),r(new Error("disconnected"));ce(`[RCPMS: write()] remote.isPaused()=${(l=t.state.remote)===null||l===void 0?void 0:l.isPaused()} authorized=${D} ready=${q} socketConnected=${j}`,e);const v=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),E=(f=(d=t.state.platformManager)===null||d===void 0?void 0:d.isMobileWeb())!==null&&f!==void 0&&f,x=(g=(h=t.state.remote)===null||h===void 0?void 0:h.hasDeeplinkProtocol())!==null&&g!==void 0&&g&&E&&D;try{if(!B){const _=JSON.stringify(k?.data);if(_.length>XM)return r(new Error(`Message size ${_.length} exceeds maximum allowed size of 1000000 bytes`));(p=t.state.remote)===null||p===void 0||p.sendMessage(k?.data).then((()=>{ce(`[RCPMS: _write()] ${S} sent successfully`)})).catch((T=>{ce("[RCPMS: _write()] error sending message",T)}))}if(!v)return ce(`[RCPMS: _write()] unsecure platform for method ${S} -- return callback`),r();if(B)return ce("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const C=(b=(m=(y=t.state.remote)===null||y===void 0?void 0:y.getKeyInfo())===null||m===void 0?void 0:m.ecies.public)!==null&&b!==void 0?b:"";let A=encodeURI(`channelId=${$}&pubkey=${C}&comm=socket&t=d&v=2`);if(x){const _=JSON.stringify(k?.data),T=(w=t.state.remote)===null||w===void 0?void 0:w.encrypt(_);if(!T)return ce("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));A+=`&scheme=${N}&rpc=${id(T)}`}if(!(!((P=t.state.platformManager)===null||P===void 0)&&P.isMetaMaskInstalled()))return ce("[RCPMS: _write()] prevent deeplink until installation is completed."),r();Mc[S]?(ce(`[RCPMS: _write()] redirect link for '${S}' socketConnected=${j} connect?${A}`),(O=t.state.platformManager)===null||O===void 0||O.openDeeplink(`${Oc}?${A}`,`${Nc}?${A}`,"_self")):!((H=t.state.remote)===null||H===void 0)&&H.isPaused()?(ce(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${S}`),(G=t.state.platformManager)===null||G===void 0||G.openDeeplink(`${Oc}?redirect=true&${A}`,`${Nc}?redirect=true&${A}`,"_self")):ce(`[RCPMS: _write()] method ${S} doesn't need redirect.`)}catch(C){return ce("[RCPMS: _write()] error sending message",C),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()}))}class r4 extends da.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(ve.MESSAGE,this._onMessage)}_write(e,n,r){return de(this,void 0,void 0,(function*(){return n4(this,e,0,r)}))}_read(){}_onMessage(e){return(function(n,r){try{if(ce("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof r?.data!="object")return;if(!r?.name)return void ce("[RCPMS: onMessage()] ignore message without name",r);if(r?.name!==Rc.PROVIDER)return void ce(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(pe.isBuffer(r)){const i=pe.from(r);n.push(i)}else n.push(r)}catch(i){ce(`[RCPMS: onMessage()] ignore message error err=${i}`)}})(this,e)}start(){}}let Tw=1;const X_=t=>new Promise((e=>{setTimeout((()=>{e(!0)}),t)})),i4=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:s,sdk:o,remoteConnection:a,debug:c})=>de(void 0,void 0,void 0,(function*(){var l,u;const d=(({name:L,remoteConnection:V})=>{if(!V||!V?.getConnector())throw new Error("Missing remote connection parameter");return new r4({name:L,remote:V?.getConnector(),deeplinkProtocol:V?.state.deeplinkProtocol,platformManager:V?.getPlatformManager()})})({name:Rc.INPAGE,target:Rc.CONTENT_SCRIPT,remoteConnection:a}),f=i.getPlatformType(),h=o.options.dappMetadata,g=`Sdk/Javascript SdkVersion/${io.version} Platform/${f} dApp/${(l=h.url)!==null&&l!==void 0?l:h.name} dAppTitle/${h.name}`;let p=null,y=null;const m=(u=o.options.storage)===null||u===void 0?void 0:u.storageManager;if(m){try{const L=yield m.getCachedAccounts();L.length>0&&(p=L[0])}catch(L){console.error(`[initializeMobileProvider] failed to get cached addresses: ${L}`)}try{const L=yield m.getCachedChainId();L&&(y=L)}catch(L){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${L}`)}}ce(`[initializeMobileProvider] cachedAccountAddress: ${p}, cachedChainId: ${y}`);const b=!(!n||f===Yt.NonBrowser||f===Yt.ReactNative),w=vr.init({shouldSetOnWindow:b,connectionStream:d,shouldShimWeb3:r,sdkInstance:o});let P=!1;const O=L=>{P=L},H=()=>P,G=(L,V,$,D)=>de(void 0,void 0,void 0,(function*(){var N,S,k,B,v,E,x,C,A;const _=vr.getProvider();if(P){_.emit("display_uri",a?.state.qrcodeLink||""),a?.showActiveModal();let M=H();for(;M;){const F=H(),Y=a?.isAuthorized();M=F&&!Y,ce(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${F} authorized: ${Y}`),yield X_(1e3)}return ce("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),$(...V)}const T=i.isMetaMaskInstalled(),R=a?.isConnected();let U=null,I=null,K=null;if(U=(N=_.getSelectedAddress())!==null&&N!==void 0?N:p,K=_.getChainId()||y,U&&m&&U!==p&&m.persistAccounts([U]).catch((M=>{console.error(`[initializeMobileProvider] failed to persist account: ${M}`)})),K&&(y=K,m&&m.persistChainId(K).catch((M=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${M}`)}))),ce("[initializeMobileProvider: sendRequest()]",{selectedAddress:U,chainId:K}),D&&ce(`[initializeMobileProvider: sendRequest()] method=${L} ongoing=${P} selectedAddress=${U} isInstalled=${T} checkInstallationOnAllCalls=${t} socketConnected=${R}`),U&&L.toLowerCase()===Ie.ETH_ACCOUNTS.toLowerCase())return[U];if(K&&L.toLowerCase()===Ie.ETH_CHAINID.toLowerCase())return K;const W=[Ie.ETH_REQUESTACCOUNTS,Ie.WALLET_REQUESTPERMISSIONS,Ie.METAMASK_CONNECTSIGN,Ie.METAMASK_CONNECTWITH],Z=!Mc[L],se=(S=o.options.readonlyRPCMap)===null||S===void 0?void 0:S[K];if(se&&Z)try{const M=(k=V?.[0])===null||k===void 0?void 0:k.params,F=yield(({rpcEndpoint:Y,method:ne,sdkInfo:J,params:Q})=>de(void 0,void 0,void 0,(function*(){const ie=JSON.stringify({jsonrpc:"2.0",method:ne,params:Q,id:(Tw+=1,Tw)}),re={Accept:"application/json","Content-Type":"application/json"};let oe;Y.includes("infura")&&(re["Metamask-Sdk-Info"]=J);try{oe=yield p2(Y,{method:"POST",headers:re,body:ie})}catch(te){throw te instanceof Error?new Error(`Failed to fetch from RPC: ${te.message}`):new Error(`Failed to fetch from RPC: ${te}`)}if(!oe.ok)throw new Error(`Server responded with a status of ${oe.status}`);return(yield oe.json()).result})))({rpcEndpoint:se,sdkInfo:g,method:L,params:M||[]});return D&&ce(`initializeProvider::ReadOnlyRPCResponse ${F}`),F}catch(M){console.warn(`[initializeMobileProvider: sendRequest()] method=${L} readOnlyRPCRequest failed:`,M)}if((!T||T&&!R)&&L!==Ie.METAMASK_GETPROVIDERSTATE){const M=((B=V?.[0])===null||B===void 0?void 0:B.params)||[];if(W.indexOf(L)!==-1||t){O(!0);const F=L===Ie.METAMASK_CONNECTWITH,Y=`${Date.now()}`;try{yield s.start({wait:!1,connectWith:F?{method:L,id:Y,params:M}:void 0}),yield new Promise(((ne,J)=>{a?.isAuthorized()&&(ce("[initializeMobileProvider: sendRequest()] already authorized"),ne(!0)),a?.getConnector().once(ve.AUTHORIZED,(()=>{ne(!0)})),o.once(ve.PROVIDER_UPDATE,(Q=>{ce(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${Q}`),Q===Kr.EXTENSION?J(ve.PROVIDER_UPDATE):J(new Error("Connection Terminated"))}))}))}catch(ne){if(Kr.EXTENSION===ne){if(ce(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${L} on the active provider`),L.toLowerCase()===Ie.METAMASK_CONNECTSIGN.toLowerCase()){const J=yield(v=o.getProvider())===null||v===void 0?void 0:v.request({method:Ie.ETH_REQUESTACCOUNTS,params:[]});if(!J.length)throw new Error("SDK state invalid -- undefined accounts");const Q=yield(E=o.getProvider())===null||E===void 0?void 0:E.request({method:Ie.PERSONAL_SIGN,params:[M[0],J[0]]});return o.emit(Cn.ConnectWithResponse,Q),Q}if(L.toLowerCase()===Ie.METAMASK_CONNECTWITH.toLowerCase()){const[J]=M,Q=yield(({method:ie,sdk:re,params:oe})=>de(void 0,void 0,void 0,(function*(){var te,fe,le,ge;if(!re.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");ce("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",ie,oe);const Ae=yield(te=re.getProvider())===null||te===void 0?void 0:te.request({method:Ie.ETH_REQUESTACCOUNTS,params:[]});if(!Ae.length)throw new Error("SDK state invalid -- undefined accounts");if(ie?.toLowerCase()===Ie.PERSONAL_SIGN.toLowerCase()){const Pe={method:ie,params:[oe[0],Ae[0]]};return yield(fe=re.getProvider())===null||fe===void 0?void 0:fe.request(Pe)}if(ie?.toLowerCase()===Ie.ETH_SENDTRANSACTION.toLowerCase()){const Pe={method:ie,params:[Object.assign(Object.assign({},oe[0]),{from:Ae[0]})]};return yield(le=re.getProvider())===null||le===void 0?void 0:le.request(Pe)}return Z_.includes(ie.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${ie} -- not handled by the extension -- call separately`),Ae):yield(ge=re.getProvider())===null||ge===void 0?void 0:ge.request({method:ie,params:oe})})))({method:J.method,sdk:o,params:J.params});return o.emit(Cn.ConnectWithResponse,Q),Q}return ce(`[initializeMobileProvider: sendRequest()] sending '${L}' on active provider`,M),yield(x=o.getProvider())===null||x===void 0?void 0:x.request({method:L,params:M})}throw ne===ve.REJECTED?(a?.closeModal(),(C=o.getProvider())===null||C===void 0||C.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(ce(`[initializeMobileProvider: sendRequest()] failed to start installer: ${ne}`),ne)}finally{O(!1)}if(L===Ie.ETH_REQUESTACCOUNTS)return I=yield new Promise((ne=>{const J=setInterval((()=>{const{accounts:Q}=_.getState();Q&&(clearInterval(J),ne(Q))}),100)})),ce(`[initializeMobileProvider: sendRequest()] selectedAddress: ${U} --- SKIP rpc call`),I;if(L===Ie.METAMASK_CONNECTWITH)try{let ne=0;const J=5,Q=({resolve:te,reject:fe})=>{ne+=1;const le=a?.getConnector().getRPCMethodTracker(),ge=le?.[Y];return ce(`TRACKER: update method ${Y}`,ge),ge?.result?(ce("[initializeMobileProvider: sendRequest()] found result",ge.result),o.emit(Cn.ConnectWithResponse,ge.result),void te(ge.result)):ge?.error?(ce("[initializeMobileProvider: sendRequest()] found error",ge.error),void fe(ge.error)):ne>=J?(ce("[initializeMobileProvider: sendRequest()] max message count reached without result"),void fe(new Error("Max message count reached without result"))):void ce("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let ie,re;const oe=yield new Promise(((te,fe)=>{const le=a?.getConnector().getRPCMethodTracker();ce(`TRACKER: method ${Y}`,le),le?.[Y].result?(ce("[initializeMobileProvider: sendRequest()] found result",le?.[Y].result),te(le?.[Y].result)):le?.[Y].error&&(ce("[initializeMobileProvider: sendRequest()] found error",le?.[Y].error),fe(le?.[Y].error)),re=()=>Q({resolve:te,reject:fe}),ie=a?.getConnector().on(ve.RPC_UPDATE,re)}));return re&&ie?.off(ve.RPC_UPDATE,re),ce("TRACKER: result",oe),oe}catch(ne){throw ce("[initializeMobileProvider: sendRequest()] error:",ne),ne}return V[0]&&typeof V[0]=="object"&&(V[0].params={__triggeredInstaller:!0,wrappedParams:V[0].params}),$(...V)}if(i.isSecure()&&Mc[L])return $(...V);if(o.isExtensionActive())return ce(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${L}' to it`,V,M),yield(A=o.getProvider())===null||A===void 0?void 0:A.request({method:L,params:M});throw ce(`[initializeMobileProvider: sendRequest()] method=${L} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const M=yield $(...V);if(ce(`[initializeMobileProvider: sendRequest()] method=${L} rpcResponse`,M),L===Ie.WALLET_REQUESTPERMISSIONS){const F=M.reduce(((Y,ne)=>{var J;if(ne.parentCapability==="eth_accounts"){const Q=(J=ne.caveats.find((ie=>ie.type==="restrictReturnedAccounts")))===null||J===void 0?void 0:J.value;Q&&Y.push(...Q)}return Y}),[]);ce("[initializeMobileProvider: sendRequest()] accountsToPersist:",F),F.length>0&&(_.handleAccountsChanged(F,!1),m?.persistAccounts(F))}return M}catch(M){throw console.error("[initializeMobileProvider: sendRequest()] error:",M),M}})),{request:q}=w;w.request=(...L)=>de(void 0,void 0,void 0,(function*(){return G(L?.[0].method,L,q,c)}));const{send:j}=w;return w.send=(...L)=>de(void 0,void 0,void 0,(function*(){return G(L?.[0],L,j,c)})),ce("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),d.start(),w}));function s4(t){var e,n,r,i;return de(this,void 0,void 0,(function*(){const{options:s}=t,o={communicationLayerPreference:(e=s.communicationLayerPreference)!==null&&e!==void 0?e:Qs.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:s.checkInstallationOnAllCalls,injectProvider:(n=s.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=s.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=s.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield i4(o);t.activeProvider=a,(function(c){var l,u,d,f;(u=(l=c.remoteConnection)===null||l===void 0?void 0:l.getConnector())===null||u===void 0||u.on(Cn.ConnectionStatus,(h=>{c.emit(Cn.ConnectionStatus,h)})),(f=(d=c.remoteConnection)===null||d===void 0?void 0:d.getConnector())===null||f===void 0||f.on(Cn.ServiceStatus,(h=>{c.emit(Cn.ServiceStatus,h)}))})(t)}))}const o4="sdk";class a4{constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=ca,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:o4,event:e,sdkVersion:io.version},this.originatorInfo),{params:n});ce(`[Analytics: send()] event: ${e}`,r),Ai(r,this.serverURL).catch((i=>{ce(`[Analytics: send()] error: ${i}`)}))}}const c4=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},l4=163400;function Pw(t){var e,n,r;const{dappMetadata:i}=t,s=(function({url:u,name:d}){var f;const h=u+d,g=id(h);if(!localStorage)return"";let p=(f=localStorage.getItem(g))!==null&&f!==void 0?f:"";if(!p){p=Yi();try{localStorage.setItem(g,p)}catch{return""}}return p})({url:(e=i?.url)!==null&&e!==void 0?e:"no_url",name:(n=i?.name)!==null&&n!==void 0?n:"no_name"}),o=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=o===Yt.DesktopWeb,c=o===Yt.MetaMaskMobileWebview;let l="N/A";return a?l="extension":c&&(l="mobile"),{id:s,from:l}}const Dl=(t,e,n)=>{if(Yc(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||e?.error;r&&r.code===4001?At.analytics.track("sdk_action_rejected",{action:t}):At.analytics.track("sdk_action_failed",{action:t})}else At.analytics.track("sdk_action_succeeded",{action:t})},eS=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var s,o;return de(this,void 0,void 0,(function*(){ce("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:c}=i,l=ZM.includes(a.toLowerCase()),{id:u,from:d}=Pw(e);if(l&&((s=e.analytics)===null||s===void 0||s.send({event:St.SDK_RPC_REQUEST,params:{method:a,from:d,id:u}})),Yc(a)&&At.analytics.track("sdk_action_requested",{action:a}),a===Ie.METAMASK_BATCH&&Array.isArray(c))return(({target:g,args:p,trackEvent:y,sdkInstance:m})=>de(void 0,void 0,void 0,(function*(){var b,w;if(p.method!=="metamask_batch")throw new Error("Invalid usage");const P=[],O=(b=p?.params)!==null&&b!==void 0?b:[];for(const q of O){const j=yield g?.request({method:q.method,params:q.params});P.push(j)}const{id:H,from:G}=Pw(m);y&&((w=m.analytics)===null||w===void 0||w.send({event:St.SDK_RPC_REQUEST_DONE,params:{method:p.method,from:G,id:H}}));for(const q of P)Dl(p.method,q,null);return P})))({target:n,args:i,trackEvent:l,sdkInstance:e});if(a.toLowerCase()===Ie.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:g,params:p})=>de(void 0,void 0,void 0,(function*(){let y,m=null;try{const b=yield g.request({method:Ie.ETH_REQUESTACCOUNTS,params:[]});if(!b.length)throw new Error("SDK state invalid -- undefined accounts");return y=yield g.request({method:Ie.PERSONAL_SIGN,params:[p[0],b[0]]}),y}catch(b){throw m=b,b}finally{Dl(Ie.PERSONAL_SIGN,y,m)}})))({target:n,params:c});if(a.toLowerCase()===Ie.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:g,params:p})=>de(void 0,void 0,void 0,(function*(){const[y]=p,m=y.method,b=y.params;let w,P=null;try{const O=yield g.request({method:Ie.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(O)||!O.length)throw new Error("SDK state invalid -- undefined accounts");return m?.toLowerCase()===Ie.PERSONAL_SIGN.toLowerCase()?(w=yield g.request({method:m,params:[b[0],O[0]]}),w):m?.toLowerCase()===Ie.ETH_SENDTRANSACTION.toLowerCase()?(w=yield g.request({method:m,params:[Object.assign(Object.assign({},b[0]),{from:O[0]})]}),w):Z_.includes(m.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${m} -- not handled by the extension -- call separately`),w=O,w):(w=yield g.request({method:m,params:b}),w)}catch(O){throw P=O,O}finally{Dl(m,w,P)}})))({target:n,params:c});let f,h=null;try{return f=yield n.request(i),f}catch(g){throw h=g,g}finally{l&&((o=e.analytics)===null||o===void 0||o.send({event:St.SDK_RPC_REQUEST_DONE,params:{method:a,from:d,id:u}})),Dl(a,f,h)}}))}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var sd;function u4({mustBeMetaMask:t,sdkInstance:e}){return de(this,void 0,void 0,(function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise(((r,i)=>{const s=setTimeout((()=>{i(new Error("eip6963RequestProvider timed out"))}),500);window.addEventListener(sd.Announce,(o=>{const a=o,{detail:{info:c,provider:l}={}}=a,{name:u,rdns:d,uuid:f}=c??{};YM.test(f)&&u.startsWith(xw.NAME)&&xw.RDNS.includes(d)&&(clearTimeout(s),r(l))})),window.dispatchEvent(new Event(sd.Request))}));return eS({provider:n,sdkInstance:e})}catch{throw new Error("Provider not found")}}))}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(sd||(sd={}));const d4=t=>de(void 0,void 0,void 0,(function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r})),f4=t=>de(void 0,void 0,void 0,(function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{ce("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}}));function h4(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(d){d(u)}))).then(o,a)}c((r=r.apply(t,[])).next())}))}function p4(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return(function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(d){u=[6,d],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([c,l])}}}var Iw="INSTALLED",Rw="NOT_INSTALLED",Ow="REGISTERED",Nw="REGISTERING",Mw="RELOADING",Lw={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},Ul="REGISTRATION_IN_PROGRESS",Bw="FORWARDER_ID",g4=(function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,s=n.forwarderMode,o=s===void 0?t.FORWARDER_MODE.INJECT:s;this.forwarderOrigin=i,this.forwarderMode=o,this.state=t.isMetaMaskInstalled()?Iw:Rw;var a=t._detectBrowser();this.downloadUrl=a?Lw[a]:Lw.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),o===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(Ul)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return h4(this,0,void 0,(function(){return p4(this,(function(n){switch(n.label){case 0:switch(this.state){case Mw:return[3,1];case Rw:return[3,2];case Iw:return[3,3];case Nw:return[3,5];case Ow:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=Mw,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=Nw,[4,t._register()];case 4:return n.sent(),this.state=Ow,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}}))}))},t.prototype.startOnboarding=function(){sessionStorage.setItem(Ul,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(Ul)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(Ul,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",Bw),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(Bw))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=J_.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t})();function m4(t,{wait:e=!1}){return de(this,void 0,void 0,(function*(){return ce(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield X_(1e3)),yield t.checkInstallation()}))}class y4{constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return(function(){return de(this,void 0,void 0,(function*(){ce("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new g4().startOnboarding()}))})()}redirectToProperInstall(){return de(this,void 0,void 0,(function*(){return(function(e){var n,r;return de(this,void 0,void 0,(function*(){const{state:i}=e,s=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(ce(`[MetamaskInstaller: redirectToProperInstall()] platform=${s}`),s===Yt.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(o){throw i.isInstalling=!1,o}return!0}))})(this)}))}checkInstallation(){return de(this,void 0,void 0,(function*(){return(function(e){var n;return de(this,void 0,void 0,(function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return ce(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())}))})(this)}))}start({wait:e=!1,connectWith:n}){return de(this,void 0,void 0,(function*(){this.state.connectWith=n,ce(`[MetaMaskInstaller: start()] wait=${e}`,n),yield m4(this,{wait:e})}))}}class tS{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return de(this,void 0,void 0,(function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then((function(){return Y4}));console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}}))}renderInstallModal(e){var n;return de(this,void 0,void 0,(function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",(i=>{var s;return(s=e.onAnalyticsEvent)===null||s===void 0?void 0:s.call(e,i.detail)})),e.parentElement.appendChild(r)}))}renderSelectModal(e){var n;return de(this,void 0,void 0,(function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout((()=>this.updateQRCode(e.link)),100)}))}renderPendingModal(e){var n;return de(this,void 0,void 0,(function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",(({detail:{otpValue:i}})=>e.updateOTPValue(i))),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)}))}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout((()=>{n()}),800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const s=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");s&&(s.link=e)}}unmount(){Object.entries(this.containers).forEach((([e,n])=>{var r;(r=n?.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0}))}}const v4=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:s,onAnalyticsEvent:o})=>{let a=null,c=null;ce("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),ce(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),ce(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),ce(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),ce(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const l=u=>{var d;ce("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,c),c?.parentNode&&((d=c.parentNode)===null||d===void 0||d.removeChild(c)),c=null,a=null,u===!0&&r?.()};return{mount:u=>{if(ce("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(a==null||a.updateQRCode(u));a=new tS({debug:e,sdkVersion:io.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?a.renderSelectModal({parentElement:c,connectWithExtension:()=>{l(),i?.()},onClose:l,link:t,preferDesktop:s!=null&&s}).catch((d=>{console.error(d)})):a.renderInstallModal({parentElement:c,preferDesktop:s!=null&&s,link:t,metaMaskInstaller:n,onClose:l,onAnalyticsEvent:o}).catch((d=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",d)}))},unmount:l}},w4=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{ce("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n?.parentNode&&n.parentNode.removeChild(n),n=null,r=null},s=a=>{ce("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},o=({displayOTP:a}={displayOTP:!0})=>{ce("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new tS({debug:e,sdkVersion:io.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:s,displayOTP:a}).catch((c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)})))};return o(),{mount:o,unmount:i,updateOTPValue:s}};function nS(t,e){var n,r,i,s;t.connector||(ce("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new EN({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:io.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(ce("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(s=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||s===void 0||s.call(i,(()=>!1),1e4)))}function $p(t){t.listeners.forEach((({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)})),t.listeners=[]}function b4(t,e,n){return de(this,void 0,void 0,(function*(){const r=setTimeout((()=>{At.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return new Promise(((i,s)=>{if(!t.connector)return void s(new Error("No connector available"));ce("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const o=`${t.useDeeplink?Nc:Oc}?${n}`;(function(a,c,l){var u,d,f,h;a.installModal=(d=(u=c.modals).install)===null||d===void 0?void 0:d.call(u,{link:l,preferDesktop:a.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:()=>{ce("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch((g=>{console.warn("[MMSDK] failed to terminate connection",g)}))},debug:a.developerMode,connectWithExtension:()=>{var g;return(g=c.connectWithExtensionProvider)===null||g===void 0||g.call(c),!1},onAnalyticsEvent:({event:g,params:p})=>{var y,m,b;const w=Object.assign(Object.assign({},p),{sdkVersion:c.sdk.getVersion(),dappId:(y=c.dappMetadata)===null||y===void 0?void 0:y.name,source:c._source,url:(m=c.dappMetadata)===null||m===void 0?void 0:m.url});(b=a.analytics)===null||b===void 0||b.send({event:g,params:w})}}),(h=(f=a.installModal)===null||f===void 0?void 0:f.mount)===null||h===void 0||h.call(f,l)})(t,e,o),e.sdk.once(ve.PROVIDER_UPDATE,(a=>de(this,void 0,void 0,(function*(){if(ce("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===Kr.TERMINATE){const c={code:4001,message:"User rejected the request."};return clearTimeout(r),void s(c)}s(a)})))),t.connector.once(ve.AUTHORIZED,(()=>{clearTimeout(r),i()})),t.connector.once(ve.REJECTED,(()=>{clearTimeout(r),s(ve.REJECTED)})),t.connector.once(ve.CLIENTS_READY,(()=>de(this,void 0,void 0,(function*(){ce("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))))}))}))}function rS(t,e){function n(r,i){var s;(s=t.connector)===null||s===void 0||s.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&($p(t),n(ve.WALLET_INIT,(({accounts:r,chainId:i})=>de(this,void 0,void 0,(function*(){ce(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const s=vr.getProvider();s._setConnected();const o={accounts:r,chainId:i,isUnlocked:!1};s._initializeState(o),s.emit("chainChanged",i),s.emit("accountsChanged",r)})))),n(ve.AUTHORIZED,(()=>de(this,void 0,void 0,(function*(){var r,i,s,o;try{ce("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=vr.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!1),t.otpAnswer=void 0,t.authorized=!0,ce("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})))),n(ve.TERMINATE,(()=>{var r,i,s,o,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,vr.getProvider().handleDisconnect({terminate:!0}),$p(t),ce("[RemoteConnection: setupListeners()] All listeners cleaned up")})))}function E4(t,e,{initialCheck:n,connectWith:r}={}){var i,s,o,a,c,l,u,d,f,h,g,p,y,m,b,w,P,O,H;return de(this,void 0,void 0,(function*(){try{if(nS(t,e),!t.connector)throw new Error("no connector defined");rS(t);const G=vr.getProvider();t.authorized=!1,G.emit("connecting");const q=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();ce(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,q);let j=(s=q?.channelId)!==null&&s!==void 0?s:"",L=(a=(o=t.connector.getKeyInfo())===null||o===void 0?void 0:o.ecies.public)!==null&&a!==void 0?a:"",V=(l=(c=t.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&l!==void 0?l:"";if(n&&!q)return Promise.resolve();if(!q&&!n){const R=yield t.connector.generateChannelIdConnect();j=(u=R.channelId)!==null&&u!==void 0?u:"",L=(d=R.pubKey)!==null&&d!==void 0?d:"",V=(f=R.privKey)!==null&&f!==void 0?f:"";const U=Date.now();(h=t.connector.state.storageManager)===null||h===void 0||h.persistChannelConfig({channelId:j,localKey:V,lastActive:U,validUntil:U+la})}if(n&&q?.channelId)return!((g=t.connector)===null||g===void 0)&&g.isConnected()||(ce(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,q),yield(p=t.connector)===null||p===void 0?void 0:p.connectToChannel({channelId:j})),Promise.resolve();q&&!(!((y=t.connector)===null||y===void 0)&&y.isConnected())&&(ce("[RemoteConnection: startConnection()] reconnecting to channel",q),yield(m=t.connector)===null||m===void 0?void 0:m.connectToChannel({channelId:j}));const $=!((b=t.platformManager)===null||b===void 0)&&b.isSecure()?"":"&t=q",D=io.version,{iconUrl:N,name:S,url:k,scheme:B}=e.dappMetadata||{},v=(w=t.platformManager)===null||w===void 0?void 0:w.getPlatformType();let E="N/A";typeof window<"u"&&window.location&&window.location.hostname?E=window.location.hostname:S!==void 0?E=S:k!==void 0&&(E=k);const x={url:k??"",title:S??"",icon:N,scheme:B??"",apiVersion:D,dappId:E||k||"N/A",anonId:e.anonId,platform:v??"",source:(P=e._source)!==null&&P!==void 0?P:""},C=id(JSON.stringify(x));let A=`channelId=${j}&v=2&comm=${(O=t.communicationLayerPreference)!==null&&O!==void 0?O:""}&pubkey=${L}${$}&originatorInfo=${C}`;if(r){A+=`&rpc=${id(JSON.stringify(r))}`;const R=t.connector.getRPCMethodTracker();R&&(R[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const _=encodeURI(A),T=`${t.useDeeplink?Nc:Oc}?${A}`;if(t.qrcodeLink=T,t.developerMode&&ce(`[RemoteConnection: startConnection()] qrcodeLink=${_}`),G.emit("display_uri",T),At.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(H=t.platformManager)===null||H===void 0?void 0:H.isSecure()){const R=setTimeout((()=>{At.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return yield(function(U,I){var K,W;return de(this,void 0,void 0,(function*(){const Z=`${Oc}?${I}`,se=`${Nc}?${I}`;(W=(K=U.platformManager)===null||K===void 0?void 0:K.openDeeplink)===null||W===void 0||W.call(K,Z,se,"_self")}))})(t,_),new Promise(((U,I)=>{var K,W,Z;if(!((K=t.connector)===null||K===void 0)&&K.isAuthorized())return clearTimeout(R),void U();(W=t.connector)===null||W===void 0||W.once(ve.AUTHORIZED,(()=>{clearTimeout(R),U()})),(Z=t.connector)===null||Z===void 0||Z.once(ve.REJECTED,(()=>{clearTimeout(R),I(ve.REJECTED)}))}))}return b4(t,e,_)}catch(G){throw console.error("[startConnection] error",G),G}}))}class A4{constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=s,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=v4),e.modals.otp||(e.modals.otp=w4)}startConnection(e){return de(this,void 0,void 0,(function*(){return E4(this.state,this.options,e)}))}initRemoteCommunication({sdkInstance:e}){var n,r,i;return de(this,void 0,void 0,(function*(){const s=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const o={privateKey:s?.localKey};this.options.ecies=o}nS(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),rS(this.state,this.options)}))}showActiveModal(){return(function(e){var n,r,i,s;e.authorized?ce("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((s=(i=e.installModal).mount)===null||s===void 0||s.call(i,e.qrcodeLink||""))})(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;ce("[RemoteConnection: disconnect()]",e),e?.terminate&&(vr.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),(function(s){ce("[RemoteConnection: cleanupConnector()] cleaning up connector"),s.connector&&($p(s),s.connector.disconnect({terminate:!0}).catch((o=>{ce("[RemoteConnection: cleanupConnector()] error disconnecting connector",o)})))})(this.state)}}function _4(t){var e,n,r,i,s,o,a,c,l,u,d;return de(this,void 0,void 0,(function*(){const{options:f}=t;if(f.logging=(e=f.logging)!==null&&e!==void 0?e:{},f.communicationLayerPreference=(n=f.communicationLayerPreference)!==null&&n!==void 0?n:Qs.SOCKET,f.enableDebug!==void 0&&(mn.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),f.enableAnalytics=(r=f.enableAnalytics)===null||r===void 0||r,f.injectProvider=(i=f.injectProvider)===null||i===void 0||i,f.shouldShimWeb3=(s=f.shouldShimWeb3)===null||s===void 0||s,f.extensionOnly=(o=f.extensionOnly)===null||o===void 0||o,f.useDeeplink=(a=f.useDeeplink)===null||a===void 0||a,f.storage=(c=f.storage)!==null&&c!==void 0?c:{enabled:!0},f.headless){mn("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const b=()=>{},w={install:()=>({mount:b,unmount:b})},P={installer:b};f.modals=w,f.ui=P}const h=((l=f.logging)===null||l===void 0?void 0:l.developerMode)===!0;t.debug=((u=f.logging)===null||u===void 0?void 0:u.sdk)||h,ce("[MetaMaskSDK: performSDKInitialization()] options",t.options);const g=Object.assign({},f.logging);h&&(g.sdk=!0,g.eciesLayer=!0,g.keyExchangeLayer=!0,g.remoteLayer=!0,g.serviceLayer=!0,g.plaintext=!0),yield(function(b){var w;return de(this,void 0,void 0,(function*(){const{options:P}=b;b.platformManager=new Ic({useDeepLink:(w=P.useDeeplink)!==null&&w!==void 0&&w,preferredOpenLink:P.openDeeplink,debug:b.debug})}))})(t),yield(function(b){var w,P,O,H,G;return de(this,void 0,void 0,(function*(){const{options:q}=b,j=(w=b.platformManager)===null||w===void 0?void 0:w.getPlatformType();b.analytics=new a4({serverUrl:(P=q.communicationServerUrl)!==null&&P!==void 0?P:ca,enabled:q.enableAnalytics,originatorInfo:{url:(O=q.dappMetadata.url)!==null&&O!==void 0?O:"",title:(H=q.dappMetadata.name)!==null&&H!==void 0?H:"",dappId:b.getDappId(),platform:j??"",source:(G=q._source)!==null&&G!==void 0?G:"",anonId:""}})}))})(t),yield(function(b){var w,P,O;return de(this,void 0,void 0,(function*(){if(!b.options.enableAnalytics||!(!((w=b.platformManager)===null||w===void 0)&&w.isBrowser())&&!(!((P=b.platformManager)===null||P===void 0)&&P.isReactNative()))return;const H=b.getVersion(),G=b.getDappId(),q=yield b.getAnonId(),j=(O=b.platformManager)===null||O===void 0?void 0:O.getPlatformType(),L=b.options._source;At.analytics.setGlobalProperty("sdk_version",H),At.analytics.setGlobalProperty("dapp_id",G),At.analytics.setGlobalProperty("anon_id",q),At.analytics.setGlobalProperty("platform",j),At.analytics.setGlobalProperty("integration_type",L),At.analytics.enable(),At.analytics.track("sdk_initialized",{})}))})(t),yield(function(b){var w;return de(this,void 0,void 0,(function*(){const{options:P}=b;((w=P.storage)===null||w===void 0?void 0:w.enabled)!==!0||P.storage.storageManager||(P.storage.storageManager=yield Y_(P.storage))}))})(t),yield(function(b){return de(this,void 0,void 0,(function*(){const{options:w}=b,P=/^(http|https):\/\/[^\s]*$/;if(w.dappMetadata){w.dappMetadata.iconUrl&&!P.test(w.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),w.dappMetadata.iconUrl=void 0),w.dappMetadata.base64Icon&&w.dappMetadata.base64Icon.length>l4&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),w.dappMetadata.base64Icon=void 0),w.dappMetadata.url&&!P.test(w.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const O=c4();if(O&&!w.dappMetadata.iconUrl&&!w.dappMetadata.base64Icon){const H=`${window.location.protocol}//${window.location.host}${O}`;w.dappMetadata.iconUrl=H}}b.dappMetadata=w.dappMetadata}))})(t),yield d4(t),yield f4(t);const{metamaskBrowserExtension:p,preferExtension:y,shouldReturn:m}=yield(function(b){var w,P,O,H;return de(this,void 0,void 0,(function*(){const{options:G}=b;let q,j=!1,L=!1;if(typeof window<"u"&&window.ethereum&&!(!((w=b.platformManager)===null||w===void 0)&&w.isMetaMaskMobileWebView())){j=localStorage.getItem(rd)==="extension";try{q=yield u4({mustBeMetaMask:!0,sdkInstance:b}),window.extension=q,q.on(Cr.CHAIN_CHANGED,(V=>{ce(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${V}`),b.sdkProvider&&b.getMobileProvider().emit(Cr.CHAIN_CHANGED,V)})),q.on(Cr.ACCOUNTS_CHANGED,(V=>de(this,void 0,void 0,(function*(){var $;ce(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${V}`);const D=!!b.sdkProvider,N=!!b.extensionActive;if(D&&b.getMobileProvider().emit(Cr.ACCOUNTS_CHANGED,V),N&&V?.length===0&&(yield($=b.getProvider())===null||$===void 0?void 0:$.request({method:Ie.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield b.terminate()}catch(S){ce("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",S)}})))),q.on(Cr.DISCONNECT,(V=>{ce(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${V}`),b.sdkProvider&&b.getMobileProvider().emit(Cr.DISCONNECT,V)})),q.on(Cr.CONNECT,(V=>{ce(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${V}`),b.sdkProvider&&b.getMobileProvider().emit(Cr.CONNECT,V)})),q.on(Cr.CONNECTED,(V=>{ce("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",V),b.sdkProvider&&b.getMobileProvider().emit(Cr.CONNECTED,V)}))}catch{window.extension=void 0}}else!((P=b.platformManager)===null||P===void 0)&&P.isMetaMaskMobileWebView()&&((O=b.analytics)===null||O===void 0||O.send({event:St.SDK_USE_INAPP_BROWSER}),b.activeProvider=eS({provider:window.ethereum,sdkInstance:b}),b._initialized=!0,L=!0);return q&&G.extensionOnly&&(ce("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(H=b.analytics)===null||H===void 0||H.send({event:St.SDK_USE_EXTENSION}),b.activeProvider=q,b.extensionActive=!0,b.extension=q,b._initialized=!0,L=!0),{preferExtension:j,shouldReturn:L,metamaskBrowserExtension:q}}))})(t);if(m)ce("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield(function(b,w){var P,O,H,G,q;return de(this,void 0,void 0,(function*(){const{options:j}=b,L=Object.assign({},j.logging);b.remoteConnection=new A4({anonId:yield b.getAnonId(),preferDesktop:(P=j.preferDesktop)!==null&&P!==void 0&&P,communicationLayerPreference:(O=j.communicationLayerPreference)!==null&&O!==void 0?O:Qs.SOCKET,analytics:b.analytics,dappMetadata:j.dappMetadata,_source:j._source,enableAnalytics:(H=j.enableAnalytics)===null||H===void 0||H,timer:j.timer,sdk:b,platformManager:b.platformManager,transports:j.transports,communicationServerUrl:j.communicationServerUrl,storage:(G=j.storage)!==null&&G!==void 0?G:{enabled:!0},getMetaMaskInstaller:()=>{if(!b.installer)throw new Error("Invalid SDK status -- installer not initialized");return b.installer},logging:L,connectWithExtensionProvider:w===void 0?void 0:()=>kw(b),modals:Object.assign(Object.assign({},j.modals),{onPendingModalDisconnect:b.terminate.bind(b)})}),yield b.remoteConnection.initRemoteCommunication({sdkInstance:b}),b.installer=new y4({remote:b.remoteConnection,preferDesktop:(q=j.preferDesktop)!==null&&q!==void 0&&q,platformManager:b.platformManager,debug:b.debug})}))})(t,p),yield s4(t),yield(function(b,w){var P,O;return de(this,void 0,void 0,(function*(){const{options:H}=b;w?(ce("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(P=b.analytics)===null||P===void 0||P.send({event:St.SDK_EXTENSION_UTILIZED}),kw(b).catch((G=>{console.warn("Can't connect with MetaMask extension...",G),localStorage.removeItem(rd)}))):H.checkInstallationImmediately&&(!((O=b.platformManager)===null||O===void 0)&&O.isDesktopWeb()?(ce("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),b.connect().catch((G=>{ce(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${G}`)}))):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),b._initialized=!0}))})(t,y);try{yield(d=t.remoteConnection)===null||d===void 0?void 0:d.startConnection({initialCheck:!0})}catch(b){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",b)}t.emit(Cn.ProviderUpdate,Kr.INITIALIZED)}}))}class S4 extends aO{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:Cw,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",mn.disable();const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||s)&&mn.enable("MM_SDK"),ce("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=Cw),this.init().then((()=>{ce("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)})).catch((o=>{console.error("[MetaMaskSDK: constructor()] error during initialization",o)}))}init(){return de(this,void 0,void 0,(function*(){return(function(e){var n;return de(this,void 0,void 0,(function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return ce("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return ce("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return ce("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=_4(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise}))})(this)}))}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){if(e._initialized||(ce("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),ce(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:Ie.ETH_REQUESTACCOUNTS,params:[]})}))})(this)}))}connectAndSign({msg:e}){return de(this,void 0,void 0,(function*(){return t4({instance:this,msg:e})}))}connectWith(e){return de(this,void 0,void 0,(function*(){return(function({instance:n,rpc:r}){return de(this,void 0,void 0,(function*(){if(n._initialized||(ce("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),ce(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:Ie.METAMASK_CONNECTWITH,params:[r]})}))})({instance:this,rpc:e})}))}resume(){return(function(e){var n,r,i;return de(this,void 0,void 0,(function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return ce("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());ce("[MetaMaskSDK: resume()] channel is ready")}))})(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return(function(e){var n,r,i;return de(this,void 0,void 0,(function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(e4&&(window.localStorage.removeItem(rd),window.localStorage.removeItem(Up),window.localStorage.removeItem(Dp)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:Ie.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(s){ce("[MetaMaskSDK: terminate()] error revoking permissions",s)}return e.options.extensionOnly?(e.emit(Cn.ProviderUpdate,Kr.TERMINATE),void ce("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(Cn.ProviderUpdate,Kr.TERMINATE))}e.emit(Cn.ProviderUpdate,Kr.TERMINATE),ce(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}}))})(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return io.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return de(this,void 0,void 0,(function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():Yi(),this._anonId=r,r}))}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=Yi();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),Yi()}}getReactNativeAnonId(){return de(this,void 0,void 0,(function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=Yi();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),Yi()}}))}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var C4=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return de(this,void 0,void 0,(function*(){const e=JSON.stringify(t);ce(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(wh,e)}))}getPersistedChannelConfig(){return de(this,void 0,void 0,(function*(){let t;try{if(ce(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(wh),ce("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return ce("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}}))}persistAccounts(t){return de(this,void 0,void 0,(function*(){ce(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(Dp,e)}))}getCachedAccounts(){return de(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(Dp);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}}))}persistChainId(t){return de(this,void 0,void 0,(function*(){ce(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(Up,t)}))}getCachedChainId(){return de(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(Up);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}}))}terminate(){return de(this,void 0,void 0,(function*(){ce(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(wh)}))}}});const x4="hydrated",k4=!1,T4=!0;var P4=Object.defineProperty,a0=new WeakMap,ts=t=>a0.get(t),c0=(t,e)=>a0.set(e.$lazyInstance$=t,e),Dw=(t,e)=>e in t,Vs=(t,e)=>(0,console.error)(t,e),bh=new Map,fu=new Map,iS="slot-fb{display:contents}slot-fb[hidden]{display:none}",Jd=typeof window<"u"?window:{},Ur=Jd.document||{head:{}},Ft={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},sS=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Fp=!1,Uw=[],oS=[],I4=(t,e)=>n=>{t.push(n),Fp||(Fp=!0,4&Ft.$flags$?l0(Hp):Ft.raf(Hp))},$w=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Vs(n)}t.length=0},Hp=()=>{$w(Uw),$w(oS),(Fp=Uw.length>0)&&Ft.raf(Hp)},l0=t=>(e=>Promise.resolve(e))().then(t),R4=I4(oS),Fw={},u0=t=>(t=typeof t)=="object"||t==="function";function aS(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)P4(t,n,{get:e[n],enumerable:!0})})({},{err:()=>cS,map:()=>O4,ok:()=>Kp,unwrap:()=>N4,unwrapErr:()=>M4});var Kp=t=>({isOk:!0,isErr:!1,value:t}),cS=t=>({isOk:!1,isErr:!0,value:t});function O4(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then((r=>Kp(r))):Kp(n)}if(t.isErr){const n=t.value;return cS(n)}throw"should never get here"}var d0,N4=t=>{if(t.isOk)return t.value;throw t.value},M4=t=>{if(t.isErr)return t.value;throw t.value},ue=(t,e,...n)=>{let r=null,i=!1,s=!1;const o=[],a=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!u0(r))&&(r=String(r)),i&&s?o[o.length-1].$text$+=r:o.push(i?od(null,r):r),s=i)};if(a(n),e){const l=e.className||e.class;l&&(e.class=typeof l!="object"?l:Object.keys(l).filter((u=>l[u])).join(" "))}if(typeof t=="function")return t(e===null?{}:e,o,B4);const c=od(t,null);return c.$attrs$=e,o.length>0&&(c.$children$=o),c},od=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),L4={},B4={forEach:(t,e)=>t.map(Hw).forEach(e),map:(t,e)=>t.map(Hw).map(e).map(D4)},Hw=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),D4=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),ue(t.vtag,n,...t.vchildren||[])}const e=od(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Yd=t=>ts(t).$hostElement$,as=(t,e,n)=>{const r=Yd(t);return{emit:i=>lS(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},lS=(t,e,n)=>{const r=Ft.ce(e,n);return t.dispatchEvent(r),r},Kw=new WeakMap,U4=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((s,o,a)=>{var c;const l=uS(o),u=fu.get(l);if(s=s.nodeType===11?s:Ur,u)if(typeof u=="string"){s=s.head||s;let d,f=Kw.get(s);if(f||Kw.set(s,f=new Set),!f.has(l)){{d=Ur.createElement("style"),d.innerHTML=u;const h=(c=Ft.$nonce$)!=null?c:aS(Ur);if(h!=null&&d.setAttribute("nonce",h),!(1&o.$flags$))if(s.nodeName==="HEAD"){const g=s.querySelectorAll("link[rel=preconnect]"),p=g.length>0?g[g.length-1].nextSibling:s.querySelector("style");s.insertBefore(d,p)}else if("host"in s)if(sS){const g=new CSSStyleSheet;g.replaceSync(u),s.adoptedStyleSheets=[g,...s.adoptedStyleSheets]}else{const g=s.querySelector("style");g?g.innerHTML=u+g.innerHTML:s.prepend(d)}else s.append(d);1&o.$flags$&&s.nodeName!=="HEAD"&&s.insertBefore(d,null)}4&o.$flags$&&(d.innerHTML+=iS),f&&f.add(l)}}else s.adoptedStyleSheets.includes(u)||(s.adoptedStyleSheets=[...s.adoptedStyleSheets,u]);return l})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},uS=(t,e)=>"sc-"+t.$tagName$,jw=(t,e,n,r,i,s)=>{if(n!==r){let o=Dw(t,e),a=e.toLowerCase();if(e==="class"){const c=t.classList,l=Vw(n),u=Vw(r);c.remove(...l.filter((d=>d&&!u.includes(d)))),c.add(...u.filter((d=>d&&!l.includes(d))))}else if(e==="style"){for(const c in n)r&&r[c]!=null||(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)n&&r[c]===n[c]||(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(o||e[0]!=="o"||e[1]!=="n"){const c=u0(r);if((o||c&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r??"";e==="list"?o=!1:n!=null&&t[e]==l||(typeof t.__lookupSetter__(e)=="function"?t[e]=l:t.setAttribute(e,l))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!o||4&s||i)&&!c&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):Dw(Jd,a)?a.slice(2):a[2]+e.slice(3),n||r){const c=e.endsWith(dS);e=e.replace(F4,""),n&&Ft.rel(t,e,n,c),r&&Ft.ael(t,e,r,c)}}},$4=/\s/,Vw=t=>t?t.split($4):[],dS="Capture",F4=new RegExp(dS+"$"),fS=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||Fw,s=e.$attrs$||Fw;for(const o of zw(Object.keys(i)))o in s||jw(r,o,i[o],void 0,n,e.$flags$);for(const o of zw(Object.keys(s)))jw(r,o,i[o],s[o],n,e.$flags$)};function zw(t){return t.includes("ref")?[...t.filter((e=>e!=="ref")),"ref"]:t}var Zn=!1,f0=(t,e,n,r)=>{const i=e.$children$[n];let s,o,a=0;if(i.$text$!==null)s=i.$elm$=Ur.createTextNode(i.$text$);else{if(Zn||(Zn=i.$tag$==="svg"),s=i.$elm$=Ur.createElementNS(Zn?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),Zn&&i.$tag$==="foreignObject"&&(Zn=!1),fS(null,i,Zn),s.getRootNode().querySelector("body"),i.$children$)for(a=0;a<i.$children$.length;++a)o=f0(t,i,a),o&&s.appendChild(o);i.$tag$==="svg"?Zn=!1:s.tagName==="foreignObject"&&(Zn=!0)}return s["s-hn"]=d0,s},Gw=(t,e,n,r,i,s)=>{let o,a=t;for(a.shadowRoot&&a.tagName===d0&&(a=a.shadowRoot);i<=s;++i)r[i]&&(o=f0(null,n,i),o&&(r[i].$elm$=o,hu(a,o,e)))},qw=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const s=i.$elm$;s&&s.remove()}}},$l=(t,e,n=!1)=>t.$tag$===e.$tag$,$a=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,s=e.$children$,o=e.$tag$,a=e.$text$;a===null?(fS(t,e,Zn=o==="svg"||o!=="foreignObject"&&Zn),i!==null&&s!==null?((c,l,u,d,f=!1)=>{let h,g=0,p=0,y=l.length-1,m=l[0],b=l[y],w=d.length-1,P=d[0],O=d[w];for(;g<=y&&p<=w;)m==null?m=l[++g]:b==null?b=l[--y]:P==null?P=d[++p]:O==null?O=d[--w]:$l(m,P,f)?($a(m,P,f),m=l[++g],P=d[++p]):$l(b,O,f)?($a(b,O,f),b=l[--y],O=d[--w]):$l(m,O,f)?($a(m,O,f),hu(c,m.$elm$,b.$elm$.nextSibling),m=l[++g],O=d[--w]):$l(b,P,f)?($a(b,P,f),hu(c,b.$elm$,m.$elm$),b=l[--y],P=d[++p]):(h=f0(l&&l[p],u,p),P=d[++p],h&&hu(m.$elm$.parentNode,h,m.$elm$));g>y?Gw(c,d[w+1]==null?null:d[w+1].$elm$,u,d,p,w):p>w&&qw(l,g,y)})(r,i,e,s,n):s!==null?(t.$text$!==null&&(r.textContent=""),Gw(r,null,e,s,0,s.length-1)):!n&&T4&&i!==null&&qw(i,0,i.length-1),Zn&&o==="svg"&&(Zn=!1)):t.$text$!==a&&(r.data=a)},hu=(t,e,n)=>t?.insertBefore(e,n),H4=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,s=t.$vnode$||od(null,null),o=(a=e)&&a.$tag$===L4?e:ue(null,null,e);var a;if(d0=r.tagName,n&&o.$attrs$)for(const c of Object.keys(o.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(o.$attrs$[c]=r[c]);o.$tag$=null,o.$flags$|=4,t.$vnode$=o,o.$elm$=s.$elm$=r.shadowRoot||r,r["s-sc"],1&i.$flags$,$a(s,o,n)},hS=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((n=>t.$onRenderResolve$=n)))},h0=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(hS(t,t.$ancestorComponent$),R4((()=>K4(t,e))))),K4=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return j4(void 0,(()=>z4(t,r,e)))},j4=(t,e)=>V4(t)?t.then(e).catch((n=>{console.error(n),e()})):e(),V4=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",z4=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const s=i["s-rc"];n&&U4(t),t.$cmpMeta$.$tagName$,G4(t,e,i,n),s&&(s.map((o=>o())),i["s-rc"]=void 0);{const o=(r=i["s-p"])!=null?r:[],a=()=>q4(t);o.length===0?a():(Promise.all(o).then(a),t.$flags$|=4,o.length=0)}},G4=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,H4(t,e,r)}catch(i){Vs(i,t.$hostElement$)}return null},q4=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,gS(e),p0(r,"componentDidLoad"),t.$onReadyResolve$(e),i||pS()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&l0((()=>h0(t,!1))),t.$flags$&=-517},pS=t=>{gS(Ur.documentElement),l0((()=>lS(Jd,"appload",{detail:{namespace:"sdk-install-modal-web"}})))},p0=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){Vs(r)}},gS=t=>{var e;return t.classList.add((e=x4)!=null?e:"hydrated")},W4=(t,e,n,r)=>{const i=ts(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.$hostElement$,o=i.$instanceValues$.get(e),a=i.$flags$,c=i.$lazyInstance$;var l,u;l=n,u=r.$members$[e][0],n=l==null||u0(l)?l:4&u?l!=="false"&&(l===""||!!l):1&u?String(l):l;const d=Number.isNaN(o)&&Number.isNaN(n);if((!(8&a)||o===void 0)&&n!==o&&!d&&(i.$instanceValues$.set(e,n),c)){if(r.$watchers$&&128&a){const f=r.$watchers$[e];f&&f.map((h=>{try{c[h](n,o,e)}catch(g){Vs(g,s)}}))}(18&a)==2&&h0(i,!1)}},mS=(t,e,n)=>{var r,i;const s=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((r=e.$members$)!=null?r:{});if(o.map((([a,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(s,a,{get(){return l=a,ts(this).$instanceValues$.get(l);var l},set(l){W4(this,a,l,e)},configurable:!0,enumerable:!0})})),1&n){const a=new Map;s.attributeChangedCallback=function(c,l,u){Ft.jmp((()=>{var d;const f=a.get(c);if(this.hasOwnProperty(f))u=this[f],delete this[f];else{if(s.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==u)return;if(f==null){const h=ts(this),g=h?.$flags$;if(g&&!(8&g)&&128&g&&u!==l){const p=h.$lazyInstance$,y=(d=e.$watchers$)==null?void 0:d[c];y?.forEach((m=>{p[m]!=null&&p[m].call(p,u,l,c)}))}return}}this[f]=(u!==null||typeof this[f]!="boolean")&&u}))},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...o.filter((([c,l])=>15&l[0])).map((([c,l])=>{const u=l[1]||c;return a.set(u,c),u}))]))}}return t},Q4=async(t,e,n,r)=>{let i;if((32&e.$flags$)==0){if(e.$flags$|=32,n.$lazyBundleId$){const a=((c,l,u)=>{const d=c.$tagName$.replace(/-/g,"_"),f=c.$lazyBundleId$;if(!f)return;const h=bh.get(f);if(h)return h[d];{const g=p=>(bh.set(f,p),p[d]);if(f==="mm-install-modal_3")return Promise.resolve().then((function(){return u5})).then(g,Vs)}return YR(()=>import(`./${f}.entry.js`),[]).then((g=>(bh.set(f,g),g[d])),Vs)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,mS(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(c){Vs(c)}e.$flags$&=-9,e.$flags$|=128,jp(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then((()=>e.$flags$|=128))}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const c=uS(n);fu.has(c)||(n.$tagName$,((l,u,d)=>{let f=fu.get(l);sS&&d?(f=f||new CSSStyleSheet,typeof f=="string"?f=u:f.replaceSync(u)):f=u,fu.set(l,f)})(c,a,!!(1&n.$flags$)))}}const s=e.$ancestorComponent$,o=()=>h0(e,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},jp=t=>{p0(t,"connectedCallback")},Ww=t=>{p0(t,"disconnectedCallback")},J4=(t,e={})=>{var n;const r=[],i=e.exclude||[],s=Jd.customElements,o=Ur.head,a=o.querySelector("meta[charset]"),c=Ur.createElement("style"),l=[];let u,d=!0;Object.assign(Ft,e),Ft.$resourcesUrl$=new URL(e.resourcesUrl||"./",Ur.baseURI).href;let f=!1;if(t.map((h=>{h[1].map((g=>{var p;const y={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};4&y.$flags$&&(f=!0),y.$members$=g[2],y.$watchers$=(p=g[4])!=null?p:{};const m=y.$tagName$,b=class extends HTMLElement{constructor(w){if(super(w),this.hasRegisteredEventListeners=!1,((P,O)=>{const H={$flags$:0,$hostElement$:P,$cmpMeta$:O,$instanceValues$:new Map};H.$onReadyPromise$=new Promise((G=>H.$onReadyResolve$=G)),P["s-p"]=[],P["s-rc"]=[],a0.set(P,H)})(w=this,y),1&y.$flags$)if(w.shadowRoot){if(w.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${y.$tagName$}! Mode is set to ${w.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else w.attachShadow({mode:"open"})}connectedCallback(){ts(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),d?l.push(this):Ft.jmp((()=>(w=>{if((1&Ft.$flags$)==0){const P=ts(w),O=P.$cmpMeta$;if(O.$tagName$,1&P.$flags$)P?.$lazyInstance$?jp(P.$lazyInstance$):P?.$onReadyPromise$&&P.$onReadyPromise$.then((()=>jp(P.$lazyInstance$)));else{P.$flags$|=1;{let H=w;for(;H=H.parentNode||H.host;)if(H["s-p"]){hS(P,P.$ancestorComponent$=H);break}}O.$members$&&Object.entries(O.$members$).map((([H,[G]])=>{if(31&G&&w.hasOwnProperty(H)){const q=w[H];delete w[H],w[H]=q}})),Q4(w,P,O)}}})(this)))}disconnectedCallback(){Ft.jmp((()=>(async w=>{if((1&Ft.$flags$)==0){const P=ts(w);P?.$lazyInstance$?Ww(P.$lazyInstance$):P?.$onReadyPromise$&&P.$onReadyPromise$.then((()=>Ww(P.$lazyInstance$)))}})(this)))}componentOnReady(){return ts(this).$onReadyPromise$}};y.$lazyBundleId$=h[0],i.includes(m)||s.get(m)||(r.push(m),s.define(m,mS(b,y,1)))}))})),r.length>0&&(f&&(c.textContent+=iS),c.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",c.innerHTML.length)){c.setAttribute("data-styles","");const h=(n=Ft.$nonce$)!=null?n:aS(Ur);h!=null&&c.setAttribute("nonce",h),o.insertBefore(c,a?a.nextSibling:o.firstChild)}d=!1,l.length?l.map((h=>h.connectedCallback())):Ft.jmp((()=>u=setTimeout(pS,30)))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var Y4=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,J4([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>Ft.$nonce$=t});const Z4={fontFamily:"Roboto, sans-serif"},g0=({className:t},e)=>ue("div",{style:Z4,class:t},e),Eh=({Icon:t,text:e})=>ue("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},ue("div",{class:"flexItem1"},ue(t,null)),ue("div",{class:"flexItem11"},ue("span",{style:{lineHeight:"2",color:"black"}},e))),X4=()=>ue("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),ue("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),e5=()=>ue("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),t5=()=>ue("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),n5=()=>ue("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),ue("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),ue("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function m0({version:t}){return ue("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const y0=()=>ue("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue("rect",{width:"16",height:"16",fill:"white"}),ue("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),v0=()=>ue("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},ue("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function _s(t,e){return t.toString(2).padStart(e,"0")}function Qw(t,e){const n=t%e;return n>=0?n:e+n}function Dn(t,e){return new Array(t).fill(e)}function Jw(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function Yw(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function Zw(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map((n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r}))},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map((n=>{if((function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)})(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]}))}}}class Ln{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let s;for(const o of n){const a=o.split("").map((c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)}));if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new Ln({height:r,width:s},i)}constructor(e,n){const{height:r,width:i}=Ln.size(e);this.data=n||Array.from({length:r},(()=>Dn(i,void 0))),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=Qw(e.x,this.width),e.y=Qw(e.y,this.height),e}rect(e,n,r){const{x:i,y:s}=this.xy(e),{height:o,width:a}=Ln.size(n,this.size({x:i,y:s}));for(let c=0;c<o;c++)for(let l=0;l<a;l++)this.data[s+c][i+l]=typeof r=="function"?r({x:l,y:c},this.data[s+c][i+l]):r;return this}rectRead(e,n,r){return this.rect(e,n,((i,s)=>(r(i,s),s)))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,s=Dn(e,n),o=Array.from({length:e},(()=>Dn(i,n)));return new Ln({height:r,width:i},[...o,...this.data.map((a=>[...s,...a,...s])),...o])}embed(e,n){return this.rect(e,n.size(),(({x:r,y:i})=>n.data[i][r]))}rectSlice(e,n=this.size()){const r=new Ln(Ln.size(n,this.size(this.xy(e))));return this.rect(e,n,(({x:i,y:s},o)=>r.data[s][i]=o)),r}inverse(){const{height:e,width:n}=this;return new Ln({height:n,width:e}).rect({x:0,y:0},1/0,(({x:r,y:i})=>this.data[r][i]))}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new Ln({height:e*n,width:e*r}).rect({x:0,y:0},1/0,(({x:i,y:s})=>this.data[Math.floor(s/e)][Math.floor(i/e)]))}clone(){return new Ln(this.size()).rect({x:0,y:0},this.size(),(({x:e,y:n})=>this.data[n][e]))}assertDrawn(){this.rectRead(0,1/0,((e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)}))}toString(){return this.data.map((e=>e.map((n=>n===void 0?"?":n?"X":" ")).join(""))).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<n;o++){const a=r[s][o],c=s+1>=e||r[s+1][o];a||c?!a&&c?i+="":a&&!c?i+="":a&&c&&(i+=" "):i+=""}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map((i=>i.map((s=>s?r:n)).join(""))).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,(({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)})),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,((a,c)=>r.push(+(c===!0))));const i=126,s=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...Dn(381,0),44,0,0,0,0,...n,0,7],o=Math.floor(r.length/i);for(let a=0;a<o;a++)s.push(127,128,...r.slice(i*a,i*(a+1)).map((c=>+c)));return s.push(r.length%i+1,128,...r.slice(o*i).map((a=>+a))),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let s=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){const c=this.data[o][a]?0:255;i[s++]=c,i[s++]=c,i[s++]=c,e||(i[s++]=255)}return{height:n,width:r,data:i}}}const Xw=["low","medium","quartile","high"],eb=["numeric","alphanumeric","byte","kanji","eci"],r5=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],i5={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},s5={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},en={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=en.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const s=[6];for(let o=1;o<r;o++)s.push(e-(r-o)*i);return s.push(e),s},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=en.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^en.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:Zw("0123456789"),alphanumerc:Zw("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][en.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=r5[t-1],r=i5[e][t-1],i=s5[e][t-1],s=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:s,capacity:8*(n-r*i),total:(r+s)*i+i-o}}},Vp=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],Ce={tables:(t=>{const e=Dn(256,0),n=Dn(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>Ce.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return Ce.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:Ce.tables.exp[(Ce.tables.log[t]+Ce.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>Ce.tables.exp[Ce.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return Ce.tables.exp[255-Ce.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=Dn(t+1,0);return n[0]=e,Ce.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[Ce.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=Dn(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=Ce.add(n[r+i],Ce.mul(t[r],e[i]));return Ce.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=Dn(t.length,0);for(let r=0;r<t.length;r++)n[r]=Ce.mul(t[r],e);return Ce.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=Dn(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=Ce.mul(t[i],n);return Ce.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=Dn(r.length,0),s=r.length-n.length,o=r.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<r.length;a++)i[a]=Ce.add(n[a-s],r[a]);return Ce.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(n[r+s]=Ce.add(n[r+s],Ce.mul(e[s],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=Ce.mulPoly(e,[1,Ce.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return Ce.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=Ce.add(Ce.mul(e,n),t[r]);return n},euclidian(t,e,n){Ce.degree(t)<Ce.degree(e)&&([t,e]=[e,t]);let r=t,i=e,s=[0],o=[1];for(;2*Ce.degree(i)>=n;){let l=r,u=s;if(r=i,s=o,r[0]===0)throw new Error("rLast[0] === 0");i=l;let d=[0];const f=Ce.inv(r[0]);for(;Ce.degree(i)>=Ce.degree(r)&&i[0]!==0;){const h=Ce.degree(i)-Ce.degree(r),g=Ce.mul(i[0],f);d=Ce.addPoly(d,Ce.monomial(h,g)),i=Ce.addPoly(i,Ce.mulPolyMonomial(r,h,g))}if(d=Ce.mulPoly(d,s),o=Ce.addPoly(d,u),Ce.degree(i)>=Ce.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=Ce.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=Ce.inv(a);return[Ce.mulPolyScalar(o,c),Ce.mulPolyScalar(i,c)]}};function o5(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:s,total:o}=en.capacity(t,e),a=(c=n,{encode(l){const u=Ce.divisorPoly(c),d=Array.from(l);return d.push(...u.slice(0,-1).fill(0)),Uint8Array.from(Ce.remainderPoly(d,u))},decode(l){const u=l.slice(),d=Ce.polynomial(Array.from(l));let f=Dn(c,0),h=!1;for(let w=0;w<c;w++){const P=Ce.evalPoly(d,Ce.exp(w));f[f.length-1-w]=P,P!==0&&(h=!0)}if(!h)return u;f=Ce.polynomial(f);const g=Ce.monomial(c,1),[p,y]=Ce.euclidian(g,f,c),m=Dn(Ce.degree(p),0);let b=0;for(let w=1;w<256&&b<m.length;w++)Ce.evalPoly(p,w)===0&&(m[b++]=Ce.inv(w));if(b!==m.length)throw new Error("RS.decode: wrong errors number");for(let w=0;w<m.length;w++){const P=u.length-1-Ce.log(m[w]);if(P<0)throw new Error("RS.decode: wrong error location");const O=Ce.inv(m[w]);let H=1;for(let G=0;G<m.length;G++)w!==G&&(H=Ce.mul(H,Ce.add(1,Ce.mul(m[G],O))));u[P]=Ce.add(u[P],Ce.mul(Ce.evalPoly(y,O),Ce.inv(H)))}return u}});var c;return{encode(l){const u=[],d=[];for(let p=0;p<i;p++){const y=s+(p<r?0:1);u.push(l.subarray(0,y)),d.push(a.encode(l.subarray(0,y))),l=l.subarray(y)}const f=Jw(...u),h=Jw(...d),g=new Uint8Array(f.length+h.length);return g.set(f),g.set(h,f.length),g},decode(l){if(l.length!==o)throw new Error(`interleave.decode: len(data)=${l.length}, total=${o}`);const u=[];for(let h=0;h<i;h++){const g=h<r;u.push(new Uint8Array(n+s+(g?0:1)))}let d=0;for(let h=0;h<s;h++)for(let g=0;g<i;g++)u[g][h]=l[d++];for(let h=r;h<i;h++)u[h][s]=l[d++];for(let h=s;h<s+n;h++)for(let g=0;g<i;g++){const p=g<r;u[g][h+(p?0:1)]=l[d++]}const f=[];for(const h of u)f.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(f)}}}function tb(t,e,n,r){let i="",s=n.length;if(r==="numeric"){const d=en.alphabet.numeric.decode(n.split("")),f=d.length;for(let h=0;h<f-2;h+=3)i+=_s(100*d[h]+10*d[h+1]+d[h+2],10);f%3==1?i+=_s(d[f-1],4):f%3==2&&(i+=_s(10*d[f-2]+d[f-1],7))}else if(r==="alphanumeric"){const d=en.alphabet.alphanumerc.decode(n.split("")),f=d.length;for(let h=0;h<f-1;h+=2)i+=_s(45*d[h]+d[h+1],11);f%2==1&&(i+=_s(d[f-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const d=(function(f){if(typeof f!="string")throw new Error("utf8ToBytes expected string, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))})(n);s=d.length,i=Array.from(d).map((f=>_s(f,8))).join("")}}const{capacity:o}=en.capacity(t,e),a=_s(s,en.lengthBits(t,r));let c=en.modeBits[r]+a+i;if(c.length>o)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,o-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let d=0;c.length!==o;d++)c+=l[d%16];const u=Uint8Array.from(c.match(/(.{8})/g).map((d=>+`0b${d}`)));return o5(t,e).encode(u)}function nb(t,e,n,r,i=!1){const s=(function(c,l,u,d=!1){const f=en.size.encode(c);let h=new Ln(f+2);const g=new Ln(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);h=h.embed(0,g).embed({x:-g.width,y:0},g).embed({x:0,y:-g.height},g),h=h.rectSlice(1,f);const p=new Ln(1).rect(0,1,!0).border(1,!1).border(1,!0),y=en.alignmentPatterns(c);for(const m of y)for(const b of y)h.data[m][b]===void 0&&h.embed({x:b-2,y:m-2},p);h=h.hLine({x:0,y:6},1/0,(({x:m},b)=>b===void 0?m%2==0:b)).vLine({x:6,y:0},1/0,(({y:m},b)=>b===void 0?m%2==0:b));{const m=en.formatBits(l,u),b=w=>!d&&(m>>w&1)==1;for(let w=0;w<6;w++)h.data[w][8]=b(w);for(let w=6;w<8;w++)h.data[w+1][8]=b(w);for(let w=8;w<15;w++)h.data[f-15+w][8]=b(w);for(let w=0;w<8;w++)h.data[8][f-w-1]=b(w);for(let w=8;w<9;w++)h.data[8][15-w-1+1]=b(w);for(let w=9;w<15;w++)h.data[8][15-w-1]=b(w);h.data[f-8][8]=!d}if(c>=7){const m=en.versionBits(c);for(let b=0;b<18;b+=1){const w=!d&&(m>>b&1)==1,P=Math.floor(b/3),O=b%3+f-8-3;h.data[P][O]=w,h.data[O][P]=w}}return h})(t,e,r,i);let o=0;const a=8*n.length;if((function(c,l,u){const d=c.height,f=Vp[l];let h=-1,g=d-1;for(let p=d-1;p>0;p-=2){for(p==6&&(p=5);;g+=h){for(let y=0;y<2;y+=1){const m=p-y;c.data[g][m]===void 0&&u(m,g,f(m,g))}if(g+h<0||g+h>=d)break}h=-h}})(s,r,((c,l,u)=>{let d=!1;o<a&&(d=(n[o>>>3]>>(7-o&7)&1)!=0,o++),s.data[l][c]=d!==u})),o!==a)throw new Error("QR: bytes left after draw");return s}function a5(t){const e=t.inverse(),n=h=>{let g=0;for(let p,y=0,m=1;y<h.length;y++)p===h[y]&&(m++,y!==h.length-1)||(m>=5&&(g+=m-5+3),p=h[y],m=1);return g};let r=0;t.data.forEach((h=>r+=n(h))),e.data.forEach((h=>r+=n(h)));let i=0,s=t.data;const o=t.width-1,a=t.height-1;for(let h=0;h<o;h++)for(let g=0;g<a;g++){const p=h+1,y=g+1;s[h][g]===s[p][g]&&s[p][g]===s[h][y]&&s[p][g]===s[p][y]&&(i+=3)}const c=h=>{const g=[!0,!1,!0,!0,!0,!1,!0],p=[!1,!1,!1,!1],y=[...g,...p],m=[...p,...g];let b=0;for(let w=0;w<h.length;w++)Yw(h,y,w)&&(b+=40),Yw(h,m,w)&&(b+=40);return b};let l=0;for(const h of t.data)l+=c(h);for(const h of e.data)l+=c(h);let u=0;t.rectRead(0,1/0,((h,g)=>u+=g?1:0));const d=u/(t.height*t.width)*100,f=10*Math.floor(Math.abs(d-50)/5);return r+i+l+f}function yS(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!Xw.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${Xw}`)})(r);const i=n.encoding!==void 0?n.encoding:(function(u){let d="numeric";for(let f of u)if(!en.alphabet.numeric.has(f)&&(d="alphanumeric",!en.alphabet.alphanumerc.has(f)))return"byte";return d})(t);(function(u){if(!eb.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${eb}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&(function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!Vp[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)})(n.mask);let s,o=n.version,a=new Error("Unknown error");if(o!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(o),s=tb(o,r,t,i);else for(let u=1;u<=40;u++)try{s=tb(u,r,t,i),o=u;break}catch(d){a=d}if(!o||!s)throw a;let c=(function(u,d,f,h){if(h===void 0){const g=(function(){let p,y=1/0;return{add(m,b){m>=y||(p=b,y=m)},get:()=>p,score:()=>y}})();for(let p=0;p<Vp.length;p++)g.add(a5(nb(u,d,f,p,!0)),p);h=g.get()}if(h===void 0)throw new Error("Cannot find mask");return nb(u,d,f,h)})(o,r,s,n.mask);c.assertDrawn();const l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+typeof l);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG();if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}const Ah={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class w0{constructor(e){var n;this.translations=Ah,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e?.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some((n=>n.toLowerCase().startsWith("en"))))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(` Failed to load ${n} translations, falling back to English:`,r),this.translations=Ah}else this.translations=Ah}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const s of r){if(typeof i!="object")return"";i=i[s]}return typeof i=="string"?i:""}}var ic;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(ic||(ic={}));const vS=class{constructor(t){c0(this,t),this.close=as(this,"close"),this.startDesktopOnboarding=as(this,"startDesktopOnboarding"),this.trackAnalytics=as(this,"trackAnalytics"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new w0}componentDidLoad(){this.trackAnalytics.emit({event:ic.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:ic.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:ic.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=yS(this.link,"svg",{ecc:"medium",scale:2});return ue(g0,{className:"install-model"},ue("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),ue("div",{class:"modal"},ue("div",{class:"closeButtonContainer"},ue("div",{class:"right"},ue("span",{class:"closeButton",onClick:()=>this.onClose(!0)},ue(y0,null)))),ue("div",{class:"logoContainer"},ue(v0,null)),ue("div",null,ue("div",{class:"tabcontainer"},ue("div",{class:"flexContainer"},ue("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),ue("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),ue("div",{style:{display:e===1?"none":"block"}},ue("div",{class:"flexContainer"},ue("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&ue("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),ue("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",ue("br",null),ue("span",{class:"blue"},ue("b",null,t("META_MASK_MOBILE_APP"))))))),ue("div",{style:{display:e===2?"none":"block"}},ue("div",{class:"item"},ue(Eh,{Icon:e5,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),ue("div",{class:"item"},ue(Eh,{Icon:X4,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),ue("div",{class:"item"},ue(Eh,{Icon:t5,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),ue("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},ue(n5,null),ue("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),ue(m0,{version:this.sdkVersion})))}get el(){return Yd(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};vS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const wS=class{constructor(t){c0(this,t),this.close=as(this,"close"),this.disconnect=as(this,"disconnect"),this.updateOTPValue=as(this,"updateOTPValue"),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new w0}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return ue(g0,{className:"pending-modal"},ue("div",{class:"backdrop",onClick:()=>this.onClose()}),ue("div",{class:"modal"},ue("div",{class:"closeButtonContainer"},ue("div",{class:"right"},ue("span",{class:"closeButton",onClick:()=>this.onClose()},ue(y0,null)))),ue("div",{class:"logoContainer"},ue(v0,null)),ue("div",null,ue("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},ue("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),ue("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&ue("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),ue("div",{style:{marginTop:"20px"}},ue("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),ue(m0,{version:n})))}get el(){return Yd(this)}};wS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const c5=()=>ue("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),l5=()=>ue("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue("rect",{width:"400",height:"300",fill:"white"}),ue("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),ue("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),ue("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),ue("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),ue("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),ue("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),ue("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),ue("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),ue("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),ue("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),ue("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),ue("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),ue("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),ue("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),ue("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),ue("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),ue("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),ue("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),ue("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),ue("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),ue("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),ue("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),bS=class{constructor(t){c0(this,t),this.close=as(this,"close"),this.connectWithExtension=as(this,"connectWithExtension"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new w0,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=yS(this.link,"svg",{ecc:"medium",scale:2});return ue(g0,{className:"select-modal"},ue("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),ue("div",{class:"modal"},ue("div",{class:"closeButtonContainer"},ue("div",{class:"right"},ue("span",{class:"closeButton",onClick:()=>this.onClose(!0)},ue(y0,null)))),ue("div",{class:"logoContainer"},ue(v0,null)),ue("div",null,ue("div",{class:"tabcontainer"},ue("div",{class:"flexContainer"},ue("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),ue("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),ue("div",{style:{display:n===1?"none":"block"}},ue("div",{class:"flexContainer"},ue("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},ue("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),ue("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),ue("br",null),ue("span",{class:"blue"},ue("b",null,t("META_MASK_MOBILE_APP"))))))),ue("div",{style:{display:n===2?"none":"block"}},ue("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},ue(l5,null)),ue("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),ue("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},ue(c5,null),ue("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),ue(m0,{version:e})))}get el(){return Yd(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};bS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var u5=Object.freeze({__proto__:null,mm_install_modal:vS,mm_pending_modal:wS,mm_select_modal:bS});const ad=_e(null),ES=_e(null);let _h=null,Ia=null;function d5(){if(typeof window>"u")return null;const t=window.ethereum;return t?Array.isArray(t.providers)?t.providers.find(e=>e?.isMetaMask)||null:t.isMetaMask?t:null:null}function AS(){if(Ia=d5(),Ia||(Ia=new S4({dappMetadata:{name:"NFT Ticketing",url:window.location.origin},checkInstallationImmediately:!1}).getProvider()),!Ia)throw new Error("MetaMask tidak terdeteksi.");return Ia}async function _S(){const t=AS(),e=await t.request({method:"eth_requestAccounts"});_h=new Un(t);const n=await _h.getNetwork();return ad.value=e?.[0]||null,ES.value=Number(n.chainId),t.on?.("accountsChanged",r=>{ad.value=r?.[0]||null}),t.on?.("chainChanged",()=>window.location.reload()),{provider:_h}}async function Lc(t="amoy"){const e=AS(),r=String(t||"polygon").toLowerCase()==="amoy"?{chainId:"0x13882",add:{chainId:"0x13882",chainName:"Polygon Amoy",rpcUrls:["https://rpc-amoy.polygon.technology"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://amoy.polygonscan.com"]}}:{chainId:"0x89",add:{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-bor-rpc.publicnode.com"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://polygonscan.com"]}};if((await e.request({method:"eth_chainId"}))?.toLowerCase()===r.chainId.toLowerCase())return!0;try{return await e.request({method:"wallet_switchEthereumChain",params:[{chainId:r.chainId}]}),!0}catch(s){if(s?.code===4902)return await e.request({method:"wallet_addEthereumChain",params:[r.add]}),!0;throw s}}async function f5(){return Lc("polygon")}async function h5(){return Lc("amoy")}function b0(){return{connect:_S,ensureChain:Lc,switchToPolygonMainnet:f5,switchToPolygonAmoy:h5,account:ad,chainId:ES}}const Ao=["function owner() view returns (address)","function feeRecipient() view returns (address)","function events(uint256 id) view returns (address promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint256 sold,bool active,uint64 eventTime,string metadataURI)","function isPromoter(address account) view returns (bool)","function nextEventId() view returns (uint256)","function promoterBalances(uint256 eventId) view returns (uint256)","function feeBalances(uint256 eventId) view returns (uint256)","function createEvent(uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI) external returns (uint256)","function updateEvent(uint256 eventId,uint256 newPriceWei,uint256 additionalSupply,bool active,uint64 newEventTime,string newMetadataURI) external","function buyTicket(uint256 eventId,uint256 quantity) external payable","function setPromoter(address account,bool active) external","function withdrawPromoter(uint256 eventId) external","function withdrawFees(uint256 eventId) external","event EventCreated(uint256 indexed eventId,address indexed promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI)","event TicketPurchased(uint256 indexed eventId,address indexed buyer,uint256 quantity,uint256 totalPaidWei,uint256 feeWei,uint256 promoterShareWei)","event PromoterWithdraw(uint256 indexed eventId,address indexed promoter,uint256 amount)","event FeeWithdraw(uint256 indexed eventId,address indexed admin,uint256 amount)"],p5="/assets/Feast_Foto-HCI28yjP.jpg",g5="/assets/SO7-qaqPkmSy.jpeg",m5="/assets/Band-Gigi-2018-1lYc4x5D.jpg",y5={class:"container"},v5={class:"hero"},w5={class:"hero-title"},b5={key:0,class:"alert error"},E5={class:"cards"},A5={class:"img-wrap"},_5={class:"title"},S5={key:0,class:"adm-tools"},C5=["onClick"],x5=["onClick","title"],k5=["onClick"],T5={class:"meta"},P5={class:"v"},I5={class:"v"},R5={class:"desc"},O5=["onClick"],N5={class:"modal-card"},M5={class:"scroll"},L5={class:"file"},B5={key:1,class:"mt-2"},D5=["src"],U5={class:"mb-4"},$5={class:"relative"},F5=["value"],H5={class:"mt-1 text-xs text-gray-300 flex items-center gap-2"},K5={key:0},j5={key:1},V5={key:2},z5={class:"opacity-70 ml-1"},G5={class:"chk"},q5={class:"actions-bar"},W5=["disabled"],Q5={class:"modal-card"},J5={class:"scroll"},Y5={class:"chk"},Z5={class:"actions-bar"},X5={__name:"HomeView",setup(t){const e=Zs(),n=Sd(),r=_e(!1),i=()=>r.value=!r.value;fn(()=>e.fullPath,()=>r.value=!1);const{account:s,ensureChain:o}=b0(),a="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",c=_e(null),l=_e(64);function u(){l.value=c.value?.offsetHeight||64}const d=Le(()=>({"--hero-img":"url(/Background.png)","--topbar-h":`${l.value}px`})),h="http://localhost:3001".replace(/\/+$/,"").replace(/\/api$/i,""),g=()=>(s.value||localStorage.getItem("walletAddress")||"").toString();function p(he){const X=g();return X?he+(he.includes("?")?"&":"?")+"wallet="+encodeURIComponent(X):he}async function y(he){const X=await m("/api/price/idr-to-wei",{method:"POST",body:JSON.stringify({amount_idr:he})});if(!X||!X.price_wei)throw new Error("Gagal konversi");return X.idr_per_pol&&(W.value=Number(X.idr_per_pol)),BigInt(X.price_wei)}async function m(he,X={}){const we=he.startsWith("/api")?he:`/api${he.startsWith("/")?he:`/${he}`}`,qe=String(X?.method||"GET").toUpperCase();let Ct=`${h}${we}`;qe==="GET"&&(Ct=p(Ct));const vn=await fetch(Ct,{...X,headers:{"content-type":"application/json",...X.headers||{},"x-wallet-address":g()}}),jn=await vn.json().catch(()=>({}));if(!vn.ok)throw new Error(jn?.error||jn?.message||`HTTP ${vn.status}`);return jn}async function b(he){const X=new FormData;X.append("file",he);const we=await fetch(`${h}/api/upload`,{method:"POST",headers:{"x-wallet-address":g()},body:X}),qe=await we.json().catch(()=>({}));if(!we.ok)throw new Error(qe?.error||qe?.message||`HTTP ${we.status}`);if(!qe?.url||!/^https?:\/\//i.test(qe.url))throw new Error("Upload gagal: URL tidak valid");return qe.url}const w=_e("customer"),P=Le(()=>w.value==="admin"),O=Le(()=>w.value==="promotor"),H=Le(()=>P.value||O.value?"CREATE A NEW EVENT":"UPCOMING CONCERT"),G=Le(()=>(g()||"").toLowerCase());function q(he){return P.value?!0:O.value?(he.promotor_wallet||"").toLowerCase()===G.value:!1}async function j(){if(!s.value&&window?.ethereum)try{const he=await window.ethereum.request({method:"eth_accounts"});he?.[0]&&(s.value=he[0])}catch{s.value=""}}async function L(){if(!g()){w.value="customer";return}try{const X=await m("/api/me");w.value=X?.role||"customer"}catch{w.value="customer"}}const V=_e(!1),$=_e(""),D=_e([]);async function N(){V.value=!0,$.value="";try{const he=P.value?"?all=1":"",X=await m(`/api/events${he}`);D.value=Array.isArray(X?.items)?X.items:[]}catch(he){$.value=String(he.message||he)}finally{V.value=!1}}function S(he){s.value=he?.[0]||"",L(),N()}gs(async()=>{await j(),window?.ethereum?.on&&window.ethereum.on("accountsChanged",S),await L(),await N(),await yu(),u(),window.addEventListener("resize",u)}),yd(()=>{window?.ethereum?.removeListener&&window.ethereum.removeListener("accountsChanged",S),window.removeEventListener("resize",u)}),fn(s,async()=>{await L(),await N(),await yu(),u()});const k=_e(""),B=Le(()=>{const he=k.value.trim().toLowerCase();return he?D.value.filter(X=>[X.title,X.venue,X.description].some(we=>String(we||"").toLowerCase().includes(he))):D.value});function v(he){n.push({name:"event",params:{id:he.id}})}const E=_e(!1),x=_e(!1),C=Jo({title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),A=_e(null),_=_e(""),T=_e(!1),R=_e(null),U=_e(""),I=_e(""),K=_e(""),W=_e(null),Z=_e(!1),se=_e("");function M(he){return he?String(he).replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function F(he){let X=he.target.value||"";if(X=X.replace(/[^\d]/g,""),!X){C.price_idr=0,K.value="";return}const we=Number(X);C.price_idr=we,K.value=M(we)}fn(()=>C.price_idr,he=>{K.value=he?M(he):""});function Y(he){const X=he?.target?.files?.[0];A.value=X||null,_.value&&URL.revokeObjectURL(_.value),_.value=X?URL.createObjectURL(X):""}function ne(he){const X=he.target.files?.[0];if(!X){R.value=null,U.value&&URL.revokeObjectURL(U.value),U.value="",I.value="";return}R.value=X,U.value&&URL.revokeObjectURL(U.value),U.value=URL.createObjectURL(X)}async function J(){try{Z.value=!0,se.value="";const he=await m("/api/price/pol"),X=Number(he?.price_idr||0);if(!X)throw new Error("Harga tidak valid");W.value=X}catch(he){console.error(he),se.value="Gagal mengambil harga POL/IDR"}finally{Z.value=!1}}fn(E,he=>{he&&J()});const Q=Le(()=>{if(!W.value)return null;const he=Number(C.price_idr||0);if(!he)return null;const X=he/W.value;return isFinite(X)?X:null});function ie(he){if(!he)return"";const X=new Date(he);if(Number.isNaN(X.getTime()))throw new Error("Tanggal tidak valid");return X.toISOString()}async function re(){try{if(!C.title||!C.date_iso||!C.venue)throw new Error("Title/Date/Venue wajib diisi");const he=Number(C.price_idr);if(!he||he<=0)throw new Error("Harga tiket (IDR) wajib > 0");if(A.value&&!C.image_url){T.value=!0;const Ar=await b(A.value);C.image_url=Ar}if(R.value&&!I.value){T.value=!0;const Ar=await b(R.value);I.value=Ar}const X=I.value||C.image_url||"";await o("amoy");const qe=await new Un(window.ethereum).getSigner(),Ct=new pr(a,Ao,qe),vn=await y(he),jn=BigInt(Math.floor(Number(C.total_tickets)||0));if(jn<=0n)throw new Error("Total tiket harus > 0");const It=new Date(C.date_iso);if(Number.isNaN(It.getTime()))throw new Error("Tanggal event tidak valid");const Dt=BigInt(Math.floor(It.getTime()/1e3));try{await Ct.createEvent.staticCall(vn,jn,Dt,X)}catch(Ar){console.error("callStatic createEvent REVERT:",Ar),alert(Ar?.reason||Ar?.error?.message||Ar?.message||"Create event gagal (revert dari smart contract)");return}const ir=await(await Ct.createEvent(vn,jn,Dt,X)).wait();if(!ir.status)throw new Error("Transaksi createEvent gagal di blockchain");let so=null;for(const Ar of ir.logs)try{const A0=Ct.interface.parseLog(Ar);if(A0?.name==="EventCreated"){so=Number(A0.args.eventId.toString());break}}catch{}if(so==null)throw new Error("Tidak bisa menemukan eventId dari log EventCreated");const CS={title:C.title,date_iso:ie(C.date_iso),venue:C.venue,description:C.description||"",image_url:C.image_url||null,price_idr:he,total_tickets:Number(C.total_tickets)||0,listed:!!C.listed,chain_event_id:so};await m("/api/events",{method:"POST",body:JSON.stringify(CS)}),Object.assign(C,{title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),K.value="",A.value=null,_.value&&URL.revokeObjectURL(_.value),_.value="",R.value=null,U.value&&URL.revokeObjectURL(U.value),U.value="",I.value="",E.value=!1,await N(),alert(`Event berhasil dibuat. ID on-chain: ${so}`)}catch(he){console.error(he),alert(`Create event gagal: ${he?.message||he}`)}finally{T.value=!1}}const oe=_e(null),te=Jo({title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0});function fe(he){oe.value=he.id,te.title=he.title||"";try{const X=new Date(he.date_iso),we=qe=>String(qe).padStart(2,"0");te.date_iso=`${X.getFullYear()}-${we(X.getMonth()+1)}-${we(X.getDate())}T${we(X.getHours())}:${we(X.getMinutes())}`}catch{te.date_iso=""}te.venue=he.venue||"",te.description=he.description||"",te.image_url=he.image_url||"",te.price_idr=Number(he.price_idr||0),te.total_tickets=Number(he.total_tickets||0),te.listed=!!he.listed,x.value=!0}function le(){x.value=!1,oe.value=null}async function ge(){try{const he={title:te.title,date_iso:ie(te.date_iso),venue:te.venue,description:te.description,image_url:te.image_url||null,price_idr:Number(te.price_idr)||0,total_tickets:Number(te.total_tickets)||0,listed:!!te.listed};await m(`/api/events/${oe.value}`,{method:"PUT",body:JSON.stringify(he)}),x.value=!1,oe.value=null,await N(),alert("Event updated.")}catch(he){alert(`Update failed: ${he.message}`)}}async function Ae(he){if(confirm("Delete this event?"))try{await m(`/api/events/${he}`,{method:"DELETE"}),await N(),alert("Deleted.")}catch(X){alert(`Delete failed: ${X.message}`)}}async function Pe(he){try{await m(`/api/events/${he.id}/list`,{method:"PATCH",body:JSON.stringify({listed:!he.listed})}),await N()}catch(X){alert(`List/Delist failed: ${X.message}`)}}function Ve(he){const X=(he?.title||"").toLowerCase();return he?.image_url||(X.includes("feast")?p5:X.includes("sheila")?g5:m5)}return(he,X)=>(be(),Ee("div",{class:"home-page",style:rs(d.value)},[z("header",{ref_key:"topbarEl",ref:c,class:"topbar"},[X[26]||(X[26]=z("div",{class:"brand"},[z("img",{src:Fc,alt:"Tickety"})],-1)),z("form",{class:"search search--top",onSubmit:X[1]||(X[1]=ji(()=>{},["prevent"]))},[rn(z("input",{class:"search-input","onUpdate:modelValue":X[0]||(X[0]=we=>k.value=we),type:"search",placeholder:"Search concerts, venues"},null,512),[[Tn,k.value]]),X[24]||(X[24]=z("button",{class:"search-btn",type:"submit"},"",-1))],32),z("button",{class:"hamburger",onClick:ji(i,["stop"]),"aria-label":"Toggle Sidebar"},[...X[25]||(X[25]=[z("span",null,null,-1),z("span",null,null,-1),z("span",null,null,-1)])])],512),st(Hc,{modelValue:r.value,"onUpdate:modelValue":X[2]||(X[2]=we=>r.value=we)},null,8,["modelValue"]),z("main",y5,[z("section",v5,[X[27]||(X[27]=z("div",{class:"hero-bg","aria-hidden":"true"},null,-1)),z("h2",w5,Te(H.value),1)]),$.value?(be(),Ee("div",b5,Te($.value),1)):Je("",!0),z("section",E5,[(be(!0),Ee(Jt,null,Uc(B.value,we=>(be(),Ee("article",{key:we.id,class:"card"},[z("div",A5,[z("div",{class:"img",style:rs({backgroundImage:`url(${Ve(we)})`})},null,4),X[28]||(X[28]=z("div",{class:"img-overlay"},null,-1)),z("div",_5,Te(we.title),1),q(we)?(be(),Ee("div",S5,[z("button",{class:"adm-btn",onClick:qe=>fe(we),title:"Edit"},"",8,C5),z("button",{class:"adm-btn",onClick:qe=>Pe(we),title:we.listed?"Delist":"List"},Te(we.listed?"":""),9,x5),z("button",{class:"adm-btn danger",onClick:qe=>Ae(we.id),title:"Delete"},"",8,k5)])):Je("",!0)]),z("div",T5,[z("div",null,[X[29]||(X[29]=z("span",{class:"k"},"Location:",-1)),X[30]||(X[30]=Qe()),z("span",P5,Te(we.venue),1)]),z("div",null,[X[31]||(X[31]=z("span",{class:"k"},"Date:",-1)),X[32]||(X[32]=Qe()),z("span",I5,Te(new Date(we.date_iso).toLocaleString("id-ID")),1)])]),z("p",R5,Te(we.description||"(Blank Text)"),1),z("button",{class:"buy",onClick:qe=>v(we)},"BUY TICKET",8,O5)]))),128))])]),P.value||O.value?(be(),Ee("button",{key:0,class:"fab",title:"Add event","aria-label":"Create new event",onClick:X[3]||(X[3]=we=>E.value=!0)},[...X[33]||(X[33]=[Qe(" ",-1),z("span",{class:"sr-only"},"Create new event",-1)])])):Je("",!0),E.value?(be(),Ee("div",{key:1,class:"modal",onClick:X[12]||(X[12]=ji(we=>E.value=!1,["self"]))},[z("div",N5,[z("button",{class:"modal-x","aria-label":"Close",onClick:X[4]||(X[4]=we=>E.value=!1)},""),X[46]||(X[46]=z("h3",null,"Create New Event",-1)),z("form",{class:"form",onSubmit:ji(re,["prevent"])},[z("div",M5,[z("label",null,[X[34]||(X[34]=Qe("Title ",-1)),rn(z("input",{"onUpdate:modelValue":X[5]||(X[5]=we=>C.title=we)},null,512),[[Tn,C.title]])]),z("label",null,[X[35]||(X[35]=Qe("Date (UTC) ",-1)),rn(z("input",{type:"datetime-local",step:"60","onUpdate:modelValue":X[6]||(X[6]=we=>C.date_iso=we)},null,512),[[Tn,C.date_iso]])]),z("label",null,[X[36]||(X[36]=Qe("Venue ",-1)),rn(z("input",{"onUpdate:modelValue":X[7]||(X[7]=we=>C.venue=we)},null,512),[[Tn,C.venue]])]),z("label",L5,[X[37]||(X[37]=z("span",null,"Image",-1)),z("input",{type:"file",accept:"image/*",onChange:Y},null,32)]),_.value||C.image_url?(be(),Ee("div",{key:0,class:"img-preview",style:rs({backgroundImage:`url(${_.value||C.image_url})`})},null,4)):Je("",!0),X[44]||(X[44]=z("label",{class:"block text-sm font-medium mb-1"},"NFT Image (optional)",-1)),z("input",{type:"file",accept:"image/*",onChange:ne},null,32),X[45]||(X[45]=z("p",{class:"mt-1 text-xs text-gray-400"},"Jika tidak diisi, NFT akan memakai gambar banner event.",-1)),U.value?(be(),Ee("div",B5,[X[38]||(X[38]=z("span",{class:"text-xs text-gray-300"},"Preview NFT:",-1)),z("img",{src:U.value,alt:"NFT preview",class:"mt-1 h-24 rounded object-cover"},null,8,D5)])):Je("",!0),z("div",U5,[X[40]||(X[40]=z("label",{class:"block text-sm font-medium mb-1"},"Price (IDR)",-1)),z("div",$5,[X[39]||(X[39]=z("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-sm text-gray-400"},"Rp",-1)),z("input",{type:"text",value:K.value,onInput:F,inputmode:"numeric",class:"w-full rounded border px-3 py-2 pl-10",placeholder:"contoh: 150.000"},null,40,F5)]),z("div",H5,[Z.value?(be(),Ee("span",K5,"Mengambil harga POL/IDR...")):se.value?(be(),Ee("span",j5,[Qe(Te(se.value)+" ",1),z("button",{type:"button",class:"underline ml-1",onClick:J},"coba lagi")])):Q.value!==null?(be(),Ee("span",V5,[Qe("  "+Te(Q.value.toFixed(4))+" POL ",1),z("span",z5," (1 POL  "+Te(W.value?.toLocaleString("id-ID"))+" IDR) ",1),z("button",{type:"button",class:"text-[10px] px-2 py-1 border rounded ml-2 opacity-70 hover:opacity-100",onClick:J}," Refresh ")])):Je("",!0)])]),z("label",null,[X[41]||(X[41]=Qe("Total Tickets ",-1)),rn(z("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":X[8]||(X[8]=we=>C.total_tickets=we)},null,512),[[Tn,C.total_tickets,void 0,{number:!0}]])]),z("label",G5,[rn(z("input",{type:"checkbox","onUpdate:modelValue":X[9]||(X[9]=we=>C.listed=we)},null,512),[[Z0,C.listed]]),X[42]||(X[42]=Qe(" Listed",-1))]),z("label",null,[X[43]||(X[43]=Qe("Description ",-1)),rn(z("textarea",{rows:"3","onUpdate:modelValue":X[10]||(X[10]=we=>C.description=we)},null,512),[[Tn,C.description]])])]),z("div",q5,[z("button",{type:"button",class:"btn ghost",onClick:X[11]||(X[11]=we=>E.value=!1)},"Cancel"),z("button",{type:"submit",class:"btn primary",disabled:T.value},Te(T.value?"Uploading":"Create"),9,W5)])],32)])])):Je("",!0),x.value?(be(),Ee("div",{key:2,class:"modal",onClick:X[23]||(X[23]=ji(we=>le(),["self"]))},[z("div",Q5,[z("button",{class:"modal-x","aria-label":"Close",onClick:X[13]||(X[13]=we=>le())},""),X[56]||(X[56]=z("h3",null,"Edit Event",-1)),z("form",{class:"form",onSubmit:ji(ge,["prevent"])},[z("div",J5,[z("label",null,[X[47]||(X[47]=Qe("Title ",-1)),rn(z("input",{"onUpdate:modelValue":X[14]||(X[14]=we=>te.title=we)},null,512),[[Tn,te.title]])]),z("label",null,[X[48]||(X[48]=Qe("Date (UTC) ",-1)),rn(z("input",{type:"datetime-local",step:"60","onUpdate:modelValue":X[15]||(X[15]=we=>te.date_iso=we)},null,512),[[Tn,te.date_iso]])]),z("label",null,[X[49]||(X[49]=Qe("Venue ",-1)),rn(z("input",{"onUpdate:modelValue":X[16]||(X[16]=we=>te.venue=we)},null,512),[[Tn,te.venue]])]),z("label",null,[X[50]||(X[50]=Qe("Image URL ",-1)),rn(z("input",{"onUpdate:modelValue":X[17]||(X[17]=we=>te.image_url=we),placeholder:"https://..."},null,512),[[Tn,te.image_url]])]),z("label",null,[X[51]||(X[51]=Qe("Price (IDR) ",-1)),rn(z("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":X[18]||(X[18]=we=>te.price_idr=we)},null,512),[[Tn,te.price_idr,void 0,{number:!0}]])]),z("label",null,[X[52]||(X[52]=Qe("Total Tickets ",-1)),rn(z("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":X[19]||(X[19]=we=>te.total_tickets=we)},null,512),[[Tn,te.total_tickets,void 0,{number:!0}]])]),z("label",Y5,[rn(z("input",{type:"checkbox","onUpdate:modelValue":X[20]||(X[20]=we=>te.listed=we)},null,512),[[Z0,te.listed]]),X[53]||(X[53]=Qe(" Listed",-1))]),z("label",null,[X[54]||(X[54]=Qe("Description ",-1)),rn(z("textarea",{rows:"3","onUpdate:modelValue":X[21]||(X[21]=we=>te.description=we)},null,512),[[Tn,te.description]])])]),z("div",Z5,[z("button",{type:"button",class:"btn ghost",onClick:X[22]||(X[22]=we=>le())},"Cancel"),X[55]||(X[55]=z("button",{type:"submit",class:"btn primary"},"Save",-1))])],32)])])):Je("",!0)],4))}},e6=ms(X5,[["__scopeId","data-v-159edb3b"]]),rb="/assets/MetaMask-eUUnB-vT.png",t6={class:"login-page"},n6={class:"login-container"},r6={key:0,class:"hint"},i6={key:2,class:"wallet-info"},s6={class:"wallet-label"},o6=["src"],a6={class:"wallet-address"},c6=["disabled"],l6=["src"],u6=["disabled"],d6={key:0},f6={key:1},h6={key:5,class:"metamask-warning"},p6={__name:"LoginPage",setup(t){const e=Sd(),n=_e(!1),r=_e(!1),i=_e(""),s=_e(""),o=_e(!0),a=_e("");fn(ad,g=>{a.value=g||""});function c(g,p){i.value=g,s.value=p,setTimeout(()=>{i.value="",s.value=""},5e3)}function l(g){return g?`${g.slice(0,6)}...${g.slice(-4)}`:""}const u="http://localhost:3001".replace(/\/+$/,"");async function d(g,p){if(typeof g!="string")throw new Error("Path harus string");const y=[];g.startsWith("/api")&&u&&y.push(`${u}${g}`),y.push(g);const m={method:p?.method||"GET",headers:p?.headers||{},body:p?.body,credentials:p?.credentials||"omit"},b=12e3;let w;for(const P of y){const O=new AbortController,H=setTimeout(()=>O.abort(),b);try{const G=await fetch(P,{...m,signal:O.signal});clearTimeout(H);const q=await G.text().catch(()=>"");let j={};if(q&&q.trim())try{j=JSON.parse(q)}catch{j={message:q}}if(!G.ok){const L=(j?.message||`${G.status} ${G.statusText||""}`).trim();throw new Error(`Request gagal (${L}) ke ${P}`)}return j}catch(G){if(clearTimeout(H),w=G,!(G?.name==="AbortError"||G instanceof TypeError))break}}throw new Error(String(w?.message||w||"Failed to fetch"))}async function f(){n.value=!0;try{await _S(),await Lc("amoy"),c("Wallet berhasil terhubung!","success")}catch(g){const p=String(g?.message||g);p.toLowerCase().includes("tidak terdeteksi")&&(o.value=!1),console.error(g),c(p,"error")}finally{n.value=!1}}async function h(){if(!a.value){c("Silakan hubungkan wallet terlebih dahulu!","error");return}let g;try{g=Ye(a.value)}catch{c("Alamat wallet tidak valid.","error");return}r.value=!0;try{await Lc("amoy");const p=g.toLowerCase(),{nonce:y}=await d(`/api/nonce?address=${encodeURIComponent(p)}`),m=await window.ethereum.request({method:"eth_chainId"}),b=parseInt(m,16),w=window.location.host,P=window.location.origin,O=new Date().toISOString(),G=`${w} wants you to sign in with your Ethereum account:
${g}

Sign in to AsiqTIX

URI: ${P}
Version: 1
Chain ID: ${b}
Nonce: ${y}
Issued At: ${O}`,q=await window.ethereum.request({method:"personal_sign",params:[G,g]}),j=await d("/api/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:G,signature:q})});localStorage.setItem("walletAddress",g),j?.token&&localStorage.setItem("auth_token",j.token),c(" Autentikasi berhasil!","success"),e.push({name:"home"})}catch(p){console.error(p),c(String(p?.message||p),"error")}finally{r.value=!1}}return(g,p)=>(be(),Ee("div",t6,[z("div",n6,[p[3]||(p[3]=z("img",{src:Fc,alt:"Logo",class:"logo"},null,-1)),p[4]||(p[4]=z("h1",null,"Selamat Datang!",-1)),o.value?Je("",!0):(be(),Ee("p",r6," Pastikan Anda telah memasang ekstensi MetaMask pada browser Anda atau aplikasi MetaMask pada perangkat seluler Anda. ")),p[5]||(p[5]=z("p",{class:"subtitle"},"Hubungkan wallet MetaMask untuk mendaftar",-1)),i.value?(be(),Ee("div",{key:1,class:fa(["status-message",s.value])},Te(i.value),3)):Je("",!0),a.value?(be(),Ee("div",i6,[z("div",s6,[z("img",{src:Zt(rb),class:"mm-ico",alt:"MetaMask"},null,8,o6),p[0]||(p[0]=z("span",null,"Wallet Terhubung",-1))]),z("div",a6,Te(l(a.value)),1)])):Je("",!0),a.value?(be(),Ee("button",{key:4,onClick:h,disabled:r.value,class:"btn-login"},[r.value?(be(),Ee("span",d6," Mendaftarkan...")):(be(),Ee("span",f6,"Masuk"))],8,u6)):(be(),Ee("button",{key:3,onClick:f,disabled:n.value,class:"btn-metamask"},[n.value?(be(),Ee(Jt,{key:0},[Qe("  Menghubungkan... ")],64)):(be(),Ee(Jt,{key:1},[z("img",{src:Zt(rb),class:"mm-ico mm-ico--btn",alt:"MetaMask"},null,8,l6),p[1]||(p[1]=z("span",{class:"btn-label"},"Hubungkan MetaMask",-1))],64))],8,c6)),o.value?Je("",!0):(be(),Ee("div",h6,[...p[2]||(p[2]=[z("p",null," MetaMask tidak terdeteksi!",-1),z("a",{href:"https://metamask.io/download/",target:"_blank",class:"install-link"}," Install MetaMask ",-1)])]))])]))}},g6=ms(p6,[["__scopeId","data-v-5538996a"]]),m6=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="980.000000pt" height="980.000000pt" viewBox="0 0 980.000000 980.000000"
 preserveAspectRatio="xMidYMid meet">

<g transform="translate(0.000000,980.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M4615 8269 c-609 -52 -1208 -276 -1705 -637 -636 -464 -1104 -1158
-1290 -1916 -191 -777 -102 -1601 250 -2306 405 -813 1101 -1424 1950 -1712
562 -190 1172 -228 1760 -108 1651 337 2814 1872 2691 3550 -60 817 -404 1571
-977 2144 -535 535 -1200 864 -1954 967 -170 23 -554 33 -725 18z m575 -509
c562 -59 1089 -278 1535 -639 101 -82 331 -313 409 -411 346 -434 561 -951
622 -1490 16 -145 18 -462 4 -600 -40 -386 -167 -783 -356 -1114 -56 -97 -191
-303 -205 -312 -5 -3 -38 19 -72 48 -483 422 -1111 696 -1772 773 -166 20
-530 23 -685 6 -731 -80 -1368 -367 -1907 -858 l-79 -71 -49 61 c-27 34 -83
111 -123 171 -233 349 -375 704 -449 1124 -26 149 -28 173 -27 457 0 328 10
423 74 684 179 727 641 1360 1284 1758 353 218 759 359 1176 408 130 15 492
18 620 5z"/>
<path d="M4780 6609 c-322 -57 -603 -266 -747 -554 -37 -73 -78 -199 -92 -279
-16 -85 -13 -282 3 -368 77 -391 360 -691 754 -800 64 -18 106 -22 247 -22
148 -1 181 2 255 22 521 142 846 643 755 1163 -68 393 -355 709 -737 815 -75
21 -121 26 -238 29 -80 2 -170 0 -200 -6z"/>
</g>
</svg>
`,y6={class:"profile-page"},v6={class:"content"},w6={class:"grid"},b6={class:"profile-card"},E6={class:"avatar"},A6=["innerHTML"],_6={class:"profile-meta"},S6={class:"addr"},C6={class:"wallet-mini"},x6={class:"acc"},k6=["disabled"],T6={class:"history-card"},P6={key:0,class:"alert error",style:{margin:"10px 0"}},I6={key:1,class:"alert",style:{margin:"10px 0"}},R6={key:2},O6={class:"table"},N6={"data-col":"Concert(s)"},M6={"data-col":"Payment Date"},L6={"data-col":"Price"},B6={"data-col":"Status"},D6={"data-col":"Action"},U6=["disabled","onClick"],$6={class:"see-all"},F6={__name:"ProfilePage",setup(t){const e=Zs(),n=Sd(),r=_e(!1),i=()=>r.value=!r.value;fn(()=>e.fullPath,()=>r.value=!1);const{account:s}=b0(),o=Le(()=>s.value||"");async function a(){if(!s.value&&window?.ethereum)try{const v=await window.ethereum.request({method:"eth_accounts"});v?.[0]&&(s.value=v[0])}catch{s.value=""}}function c(v){s.value=v?.[0]||"",s.value?(L(),g(),q()):(V(),d.value=0n,b.value=[])}const l=_e("0x0"),u=_e("ETH"),d=_e(0n),f=v=>v===137||v===80002?"POL":"ETH";async function h(){if(window?.ethereum)try{const v=await window.ethereum.request({method:"eth_chainId"});l.value=v,u.value=f(Number(v))}catch{l.value="0x0",u.value="ETH"}}async function g(){if(!window?.ethereum||!s.value){d.value=0n;return}try{const v=await window.ethereum.request({method:"eth_getBalance",params:[s.value,"latest"]});d.value=BigInt(v)}catch{d.value=0n}}function p(){h(),g()}const y="http://localhost:3001".replace(/\/+$/,"");async function m(v,E){const x=v.startsWith("http")?v:`${y}${v}`,C={"x-wallet-address":o.value.toLowerCase()},A=await fetch(x,{...E,headers:C}),_=await A.text().catch(()=>"");let T=null;try{T=_?JSON.parse(_):null}catch{T={message:_}}if(!A.ok)throw new Error(T?.error||T?.message||"Request failed");return T}const b=_e([]),w=_e(!1),P=_e(""),O=v=>{try{return new Date(v).toISOString().slice(0,10)}catch{return""}},H=v=>"Rp "+Math.abs(Number(v)||0).toLocaleString("id-ID");function G(v){return{id:v.id,eventId:v.ref_id||null,event:v.event_title||null,date:O(v.created_at||Date.now()),price:H(v.amount),status:(v.status||"confirmed").replace(/^./,E=>E.toUpperCase())}}async function q(){if(P.value="",!o.value){b.value=[];return}try{w.value=!0;const v=await m("/transactions");let x=(Array.isArray(v)?v:[]).filter(A=>(A.kind||"").toLowerCase()==="purchase").map(G);const C=[...new Set(x.filter(A=>A.eventId&&!A.event).map(A=>A.eventId))];if(C.length){const A=await Promise.allSettled(C.map(T=>m(`/api/events/${T}`))),_={};A.forEach((T,R)=>{T.status==="fulfilled"&&T.value&&(_[C[R]]=T.value?.title||"(Unlisted)")}),x.forEach(T=>{!T.event&&T.eventId&&_[T.eventId]&&(T.event=_[T.eventId])})}x.sort((A,_)=>new Date(_.date)-new Date(A.date)),b.value=x.slice(0,3)}catch(v){P.value=String(v?.message||v),b.value=[]}finally{w.value=!1}}let j=null;function L(){V(),o.value&&(j=Vo(y,{transports:["websocket"],auth:{address:o.value.toLowerCase()}}),j.on("tx:new",v=>{if((v?.wallet||"").toLowerCase()===o.value.toLowerCase()&&(g(),(v.kind||"").toLowerCase()==="purchase")){const E=G(v);!E.event&&E.eventId&&m(`/events/${E.eventId}`).then(x=>{E.event=x?.title||E.event||"(Unlisted)"}).catch(()=>{}),b.value.findIndex(x=>x.id===E.id)===-1&&b.value.unshift(E)}}))}function V(){j?.disconnect?.(),j=null}const $=_e(""),D=_e(""),N=v=>v?`${v.slice(0,6)}${v.slice(-4)}`:"";function S(){o.value&&(navigator.clipboard.writeText(o.value),alert("Wallet address copied."))}const k=Le(()=>m6);let B=null;return gs(async()=>{await a(),await h(),await g(),await q(),o.value&&L(),window?.ethereum?.on&&(window.ethereum.on("accountsChanged",c),window.ethereum.on("chainChanged",p)),B=window.setInterval(g,15e3)}),yd(()=>{window?.ethereum?.removeListener&&(window.ethereum.removeListener("accountsChanged",c),window.ethereum.removeListener("chainChanged",p)),B&&clearInterval(B),V()}),fn(s,async()=>{await h(),await g(),await q(),o.value&&L()}),(v,E)=>{const x=kC("router-link");return be(),Ee("div",y6,[z("header",{class:"header"},[E[2]||(E[2]=z("h1",{class:"sr-only"},"Profile",-1)),z("button",{class:"hamburger",type:"button","aria-label":"Toggle sidebar",onClick:i},[...E[1]||(E[1]=[z("span",null,null,-1),z("span",null,null,-1),z("span",null,null,-1)])])]),st(Hc,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=C=>r.value=C)},null,8,["modelValue"]),z("div",v6,[z("div",w6,[z("aside",b6,[z("div",E6,[z("div",{class:"avatar-svg",innerHTML:k.value},null,8,A6)]),z("div",_6,[z("h3",null,Te($.value),1),z("p",S6,Te(D.value),1)]),z("div",C6,[E[3]||(E[3]=z("h3",null,"Wallet",-1)),z("p",x6,Te(N(o.value)||"-"),1),z("button",{class:"copy",disabled:!o.value,onClick:S},"COPY",8,k6)])]),z("section",T6,[E[6]||(E[6]=z("h2",null,"Purchase History",-1)),P.value?(be(),Ee("div",P6,Te(P.value),1)):w.value?(be(),Ee("div",I6,"Loading")):(be(),Ee("div",R6,[E[5]||(E[5]=z("div",{class:"thead"},[z("div",null,"Concert(s)"),z("div",null,"Payment Date"),z("div",null,"Price"),z("div",null,"Status"),z("div",null,"Action")],-1)),z("div",O6,[(be(!0),Ee(Jt,null,Uc(b.value,C=>(be(),Ee("div",{class:"trow",key:C.id},[z("div",N6,Te(C.event||"(Unknown Event)"),1),z("div",M6,Te(C.date),1),z("div",L6,Te(C.price),1),z("div",B6,Te(C.status),1),z("div",D6,[z("button",{class:"detail-btn",disabled:!C.eventId,onClick:A=>C.eventId&&Zt(n).push(`/events/${C.eventId}`)},"DETAIL",8,U6)])]))),128))]),z("div",$6,[st(x,{to:"/history"},{default:Ts(()=>[...E[4]||(E[4]=[Qe(" Lihat semua riwayat tiket  ",-1)])]),_:1})])]))])])])])}}},H6={class:"wrap"},K6={class:"card"},j6={class:"actions"},V6={__name:"LogoutConfirm",setup(t){function e(){localStorage.removeItem("auth_token"),localStorage.removeItem("walletAddress"),localStorage.removeItem("walletRole"),localStorage.removeItem("asiqtix-user")}function n(){e(),window.location.href="/"}function r(){window.history.length>1?window.history.back():window.location.href="/"}return gs(()=>{window.confirm("Apakah Anda yakin ingin keluar?")?n():r()}),(i,s)=>(be(),Ee("div",H6,[z("div",K6,[s[1]||(s[1]=z("h2",null,"Keluar dari akun?",-1)),s[2]||(s[2]=z("p",null,"Anda akan menghapus sesi login dari perangkat ini.",-1)),z("div",j6,[z("button",{class:"btn danger",onClick:s[0]||(s[0]=(...o)=>i.performLogout&&i.performLogout(...o))},"OK, Keluar"),z("button",{class:"btn ghost",onClick:r},"Batal")])])]))}},z6=ms(V6,[["__scopeId","data-v-422e7c0e"]]),G6={class:"container"},q6={class:"panel"},W6={class:"balance"},Q6={class:"balance-value"},J6={class:"addr muted",style:{"margin-top":"6px"}},Y6=["title"],Z6={class:"btns",style:{"margin-top":"10px"}},X6=["disabled"],eL={key:0,class:"alert error"},tL={key:1,class:"alert"},nL={key:2,class:"tx-list",role:"list"},rL={class:"tx-main"},iL={class:"tx-kind"},sL={class:"tx-amount"},oL={class:"tx-meta"},aL={class:"tx-date"},cL=["href"],lL={key:0,class:"tx-item"},uL="POL",ib="https://app.metamask.io/buy/build-quote",dL={__name:"WalletPage",setup(t){const e=Zs(),n=_e(!1),r=()=>n.value=!n.value;fn(()=>e.fullPath,()=>n.value=!1);const i=typeof window<"u"&&!!window.ethereum,s=_e(""),o=_e(""),a=_e(0),c=_e(null),l=Le(()=>s.value||""),u=k=>k?`${k.slice(0,6)}${k.slice(-4)}`:"";function d(k){const B=BigInt(k||"0x0"),v=10n**18n,E=B/v,C=(B%v).toString().padStart(18,"0").slice(0,6);return parseFloat(`${E}.${C}`)}async function f(){if(!i)return!1;if(o.value==="0x13882")return!0;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x13882"}]}),o.value="0x13882",!0}catch(k){if(k?.code===4902)try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x13882",chainName:"Polygon Amoy",rpcUrls:["https://rpc-amoy.polygon.technology"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://amoy.polygonscan.com"]}]}),o.value="0x13882",!0}catch{}return!1}}const h="http://localhost:3001".replace(/\/+$/,""),g=_e([]),p=_e(!1),y=_e(""),m=Le(()=>(g.value||[]).map(k=>{const B=(k.kind||"").toLowerCase();let v=B.toUpperCase();B==="topup"?v="TOP UP":B==="purchase"?v="PURCHASE":B==="withdraw"?v="WITHDRAW":B==="refund"&&(v="REFUND");let E="OUT",x=0;return B==="purchase"?(x=typeof k.amount_pol=="number"&&!Number.isNaN(k.amount_pol)?k.amount_pol:0,E="OUT"):(x=Math.abs(Number(k.amount)||0),E="IN"),{...k,label:v,direction:E,amountPol:x}}));async function b(k,B){const v=k.startsWith("http")?k:`${h}${k}`,E={...B?.headers||{},"x-wallet-address":l.value.toLowerCase()};B?.body&&!(B.body instanceof FormData)&&(E["Content-Type"]="application/json");const x=await fetch(v,{...B,headers:E}),C=await x.text().catch(()=>"");let A=null;try{A=C?JSON.parse(C):null}catch{A={message:C}}if(!x.ok)throw new Error(A?.error||A?.message||"Request failed");return A}async function w(){if(y.value="",!l.value){g.value=[];return}try{p.value=!0;const k=await b("/transactions"),B=Array.isArray(k)?k:[];g.value=B,await P(B)}catch(k){y.value=String(k?.message||k)}finally{p.value=!1}}async function P(k){if(!i||!s.value)return;const B=[...new Set((k||[]).filter(v=>(v.kind||"").toLowerCase()==="purchase"&&v.tx_hash).map(v=>v.tx_hash))];for(const v of B)try{const x=(await window.ethereum.request({method:"eth_getTransactionByHash",params:[v]}))?.value;if(!x)continue;const C=d(x);k.forEach(A=>{A.tx_hash===v&&(A.amount_pol=C)})}catch(E){console.warn("[wallet] gagal ambil tx dari chain",v,E)}}let O=null;function H(){G(),l.value&&(O=Vo(h,{transports:["websocket"],auth:{address:l.value.toLowerCase()}}),O.on("tx:new",async k=>{!k||!k.id||(k.wallet||"").toLowerCase()===l.value.toLowerCase()&&g.value.findIndex(B=>B.id===k.id)===-1&&(g.value.unshift(k),(k.kind||"").toLowerCase()==="purchase"&&await P([k]))}))}function G(){O?.disconnect?.(),O=null}async function q(k){try{await b("/topup",{method:"POST",body:JSON.stringify({amount:Number(k.toFixed(6))})}),O||await w()}catch(B){console.warn("recordTopupDelta failed:",B)}}async function j(){if(!i||!s.value){a.value=0,c.value=null;return}try{const k=await window.ethereum.request({method:"eth_getBalance",params:[s.value,"latest"]}),B=d(k);if(a.value=B,c.value===null)c.value=B;else{const v=B-c.value;v>1e-6?(await q(v),c.value=B):v<-1e-6&&(c.value=B)}}catch{a.value=0}}async function L(){if(i)try{const[k]=await window.ethereum.request({method:"eth_accounts"});s.value=k||"",o.value=await window.ethereum.request({method:"eth_chainId"}).catch(()=>""),s.value&&await f(),await j(),s.value&&(await w(),H())}catch{s.value="",o.value=""}}function V(){s.value&&(navigator.clipboard.writeText(s.value),alert("Copied."))}function $(k){s.value=k?.[0]||"",c.value=null,j(),s.value?(w(),H()):(g.value=[],G())}function D(k){o.value=k||"",c.value=null,j()}function N(){const k=window.open(ib,"_blank","noopener,noreferrer");if(!k||k.closed||typeof k.closed>"u"){const B=document.createElement("a");B.href=ib,B.target="_blank",B.rel="noopener noreferrer",B.style.display="none",document.body.appendChild(B),B.click(),B.remove()}}let S=null;return gs(async()=>{await L(),i&&(window.ethereum.on?.("accountsChanged",$),window.ethereum.on?.("chainChanged",D)),S=window.setInterval(j,15e3)}),vd(()=>{i&&(window.ethereum.removeListener?.("accountsChanged",$),window.ethereum.removeListener?.("chainChanged",D)),S&&clearInterval(S),G()}),(k,B)=>(be(),Ee("div",{class:fa(["wallet-page",{"has-sb":n.value}])},[z("header",{class:"topbar"},[B[2]||(B[2]=z("div",{class:"brand"},[z("img",{src:Fc,alt:"Tickety"})],-1)),B[3]||(B[3]=z("h1",{class:"title"},"Wallet",-1)),z("button",{class:"hamburger",type:"button","aria-label":"Toggle sidebar",onClick:r},[...B[1]||(B[1]=[z("span",null,null,-1),z("span",null,null,-1),z("span",null,null,-1)])])]),st(Hc,{modelValue:n.value,"onUpdate:modelValue":B[0]||(B[0]=v=>n.value=v)},null,8,["modelValue"]),z("div",G6,[z("section",q6,[z("section",W6,[z("div",null,[z("div",Q6,Te(a.value.toLocaleString("en-US",{maximumFractionDigits:6}))+" "+Te(uL),1),B[4]||(B[4]=z("div",{class:"muted",style:{"margin-top":"4px"}},"Network: Polygon (PoS)",-1)),z("div",J6,[z("span",{title:l.value},Te(u(l.value)||"-"),9,Y6)]),z("div",Z6,[z("button",{class:"btn",onClick:N},"TOP UP"),z("button",{class:"btn ghost",disabled:!l.value,onClick:V},"COPY ADDRESS",8,X6)])])]),B[7]||(B[7]=z("hr",{class:"sep"},null,-1)),z("section",null,[B[6]||(B[6]=z("h3",{class:"h-sub"},"Transaction",-1)),y.value?(be(),Ee("div",eL,Te(y.value),1)):p.value?(be(),Ee("div",tL,"Loading")):(be(),Ee("ul",nL,[(be(!0),Ee(Jt,null,Uc(m.value,v=>(be(),Ee("li",{key:v.id,class:"tx-item"},[z("div",rL,[z("span",iL,Te(v.label),1),z("span",sL,Te(v.direction==="OUT"?"-":"+")+" "+Te(v.amountPol.toFixed(6))+" POL ",1)]),z("div",oL,[z("span",aL,Te(new Date(v.created_at).toLocaleString("id-ID")),1),v.tx_hash?(be(),Ee("a",{key:0,href:`https://amoy.polygonscan.com/tx/${v.tx_hash}`,target:"_blank",rel:"noopener noreferrer",class:"tx-link"}," Lihat di PolygonScan ",8,cL)):Je("",!0)])]))),128)),m.value.length?Je("",!0):(be(),Ee("li",lL,[...B[5]||(B[5]=[z("span",{class:"tx-amount"},"",-1),z("span",{class:"tx-date"},null,-1)])]))]))])])])],2))}},fL=ms(dL,[["__scopeId","data-v-4010c432"]]),hL=["disabled"],pL={key:0},gL={key:1},mL={__name:"Tiket_Download",props:{eventId:{type:[String,Number],default:null},ticketCode:{type:String,default:""},fallbackTitle:{type:String,default:"Tiket AsiqTIX"},fallbackDate:{type:[String,Number,Date],default:""},fallbackLocation:{type:String,default:""},fallbackBannerUrl:{type:String,default:""}},setup(t){const e=t,n=_e(!1),i=`${"http://localhost:3001".replace(/\/+$/,"")}/api`;function s(l){if(!l)return"-";try{const u=typeof l=="string"||typeof l=="number"?new Date(l):l;if(!Number.isFinite(u.getTime()))return"-";const d=u.toLocaleDateString("id-ID",{weekday:"long"}).toUpperCase(),f=u.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit"}),h=u.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\./g,":");return`${d}, ${f} - ${h}`}catch{return"-"}}function o(l,u,d,f,h,g){let p=g;typeof p=="number"?p={tl:p,tr:p,br:p,bl:p}:p={tl:p.tl||0,tr:p.tr||0,br:p.br||0,bl:p.bl||0},l.beginPath(),l.moveTo(u+p.tl,d),l.lineTo(u+f-p.tr,d),l.quadraticCurveTo(u+f,d,u+f,d+p.tr),l.lineTo(u+f,d+h-p.br),l.quadraticCurveTo(u+f,d+h,u+f-p.br,d+h),l.lineTo(u+p.bl,d+h),l.quadraticCurveTo(u,d+h,u,d+h-p.bl),l.lineTo(u,d+p.tl),l.quadraticCurveTo(u,d,u+p.tl,d),l.closePath()}async function a(){if(!n.value){n.value=!0;try{let l=null;if(e.eventId)try{const y=await fetch(`${i}/events/${e.eventId}`),m=await y.json().catch(()=>null);y.ok&&(l=m)}catch(y){console.warn("[TicketDownloadButton] gagal load event meta",y)}const u=l?.title||e.fallbackTitle||"Tiket AsiqTIX",d=l?.venue||l?.location||e.fallbackLocation||"-",f=l?.date_iso||null,h=l?.image_url||l?.poster_url||l?.banner_url||e.fallbackBannerUrl||"",g=s(f||e.fallbackDate),p=e.ticketCode||l?.id||e.eventId||"-";await c({title:u,location:d,timeText:g,ticketId:p,bannerUrl:h})}catch(l){console.error("[TicketDownloadButton] gagal generate tiket",l),alert("Gagal membuat file tiket. Silakan coba lagi.")}finally{n.value=!1}}}async function c({title:l,location:u,timeText:d,ticketId:f,bannerUrl:h}){const y=document.createElement("canvas");y.width=1200,y.height=560;const m=y.getContext("2d");if(!m)throw new Error("Canvas 2D context tidak tersedia");const b="#f7f0d6",w="#1f2347",P="#fdfdfd";m.fillStyle=b,m.fillRect(0,0,1200,560);const O=30,H=30,G=1140,q=500;o(m,O,H,G,q,50),m.fillStyle=w,m.fill();const L=40,V=q-L*2,$=O+L,D=H+L,N=$+V+40,S=D+10,k=42;if(h){const _=new Image;_.crossOrigin="anonymous",_.src=h,await new Promise(T=>{_.onload=()=>T(!0),_.onerror=()=>T(!1)}),m.save(),o(m,$,D,V,V,30),m.clip(),m.drawImage(_,$,D,V,V),m.restore()}else m.save(),o(m,$,D,V,V,30),m.clip(),m.fillStyle="#333a60",m.fillRect($,D,V,V),m.fillStyle="#cbd2ff",m.font='24px system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI"',m.fillText("NO POSTER",$+40,D+V/2),m.restore();m.fillStyle=P;const B=`"${l}"`;m.font='28px "Segoe UI", system-ui, -apple-system, sans-serif',m.fillText(B,N,S+k*.7),m.font='22px "Segoe UI", system-ui, -apple-system, sans-serif';const v=S+k*2,E=v+k*1.1,x=E+k*1.1;m.fillText("ID",N,v),m.fillText(String(f),N+140,v),m.fillText("TEMPAT",N,E),m.fillText(u,N+140,E),m.fillText("WAKTU",N,x),m.fillText(d||"-",N+140,x);const C=String(l).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),A=document.createElement("a");A.download=`ticket-${C||"asiqtix"}-${f}.png`,A.href=y.toDataURL("image/png"),document.body.appendChild(A),A.click(),document.body.removeChild(A)}return(l,u)=>(be(),Ee("button",{type:"button",class:"btn ticket-download-btn",disabled:n.value,onClick:a},[n.value?(be(),Ee("span",pL,"Mengunduh")):(be(),Ee("span",gL,"DOWNLOAD TICKET"))],8,hL))}},yL={},vL={class:"history-page"},wL={class:"wrap"},bL={key:0,class:"alert"},EL={key:1,class:"alert error"},AL={key:2,class:"list",role:"list"},_L={class:"header-line"},SL={class:"event"},CL={class:"meta"},xL={key:0,class:"item"},Ra="0x13882",kL="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",TL={__name:"HistoryPage",setup(t){const e=Zs(),n=_e(!1),r=()=>n.value=!n.value;fn(()=>e.fullPath,()=>n.value=!1);const i=_e([]),s=_e(!0),o=_e(""),a=typeof window<"u"&&!!window.ethereum,c="http://localhost:3001".replace(/\/+$/,""),l="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15".trim().toLowerCase(),u=Number(yL?.VITE_TICKET_START_BLOCK||0)||0,d=_e(""),f=_e("");async function h(){if(a)try{const[L]=await window.ethereum.request({method:"eth_accounts"});d.value=L||"",f.value=await window.ethereum.request({method:"eth_chainId"}).catch(()=>""),d.value&&await g()}catch{}}async function g(){if(!a)return!1;if(f.value?.toLowerCase()===Ra)return!0;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:Ra}]}),f.value=Ra,!0}catch(L){if(L?.code===4902)try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:Ra,chainName:"Polygon Amoy",rpcUrls:["https://rpc-amoy.polygon.technology"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://amoy.polygonscan.com"]}]}),f.value=Ra,!0}catch{}return!1}}function p(L){const V=String(L||"").toLowerCase().replace(/^0x/,"");return"0x"+"0".repeat(24)+V}function y(L){try{return BigInt(L).toString(10)}catch{return"0"}}function m(L){return"0x"+Math.max(0,Number(L||0)).toString(16)}function b(L){try{return new Date(L).toLocaleDateString("id-ID")}catch{return""}}function w(L){return"Rp "+Math.abs(Number(L)||0).toLocaleString("id-ID")}async function P(L,V){const $=L.startsWith("http")?L:`${c}${L}`,D={};d.value&&(D["x-wallet-address"]=d.value.toLowerCase());const N=await fetch($,{...V,headers:D,credentials:"include"}),S=await N.text().catch(()=>"");let k;try{k=S?JSON.parse(S):null}catch{k={message:S}}if(!N.ok)throw new Error(k?.error||k?.message||"Request failed");return k}async function O(){const L=await P("/api/transactions");return(Array.isArray(L)?L:[]).filter($=>($?.kind||"").toLowerCase()==="purchase").map($=>{const D=$.created_at,N=($.ticket_id||$.ticket_no||$.ref_id||$.id||"").toString();return{_sortAt:+new Date(D),id:$.id,title:"Ticket purchase",date:b(D),booking:N.slice(0,16),price:w($.amount),status:$.status||"Successful",eventId:$.ref_id||null,ticketId:N,dateIso:D,location:$.location||""}})}async function H(){if(!a||!d.value||!l)return[];if(!u)return console.warn("[history] START_BLOCK tidak diset, skip load tiket on-chain"),[];try{const L=m(u),V="latest",$=p(d.value),D=await window.ethereum.request({method:"eth_getLogs",params:[{address:l,fromBlock:L,toBlock:V,topics:[kL,null,$]}]}),N=[];for(const S of D){const k=await window.ethereum.request({method:"eth_getBlockByNumber",params:[S.blockNumber,!1]}).catch(()=>null),B=y(S.topics?.[3]||"0x0"),v=k?.timestamp?Number(BigInt(k.timestamp)*1000n):Date.now(),E=String(B);N.push({_sortAt:v,id:`${S.transactionHash}-${E}`,title:`NFT Ticket #${E}`,date:b(v),booking:(S.transactionHash||"").slice(0,16),price:"",status:"Successful",eventId:null,ticketId:E,dateIso:new Date(v).toISOString(),location:""})}return N.sort((S,k)=>k._sortAt-S._sortAt),N}catch(L){return console.warn("[history] gagal load tiket on-chain, di-skip",L),[]}}async function G(){s.value=!0,o.value="",i.value=[];try{if(!a){o.value="MetaMask tidak terdeteksi di browser.";return}if(!d.value){o.value="Silakan koneksikan MetaMask terlebih dahulu.";return}const L=await O().catch(D=>{throw console.error("[history] ledger error",D),D});let V=[];try{V=await H()}catch(D){console.warn("[history] on-chain history gagal, di-skip",D)}const $=[...L,...V].sort((D,N)=>N._sortAt-D._sortAt);i.value=$}catch(L){console.error("[history] gagal load",L),o.value=String(L?.message||L)||"Gagal memuat riwayat pembelian tiket."}finally{s.value=!1}}function q(L){d.value=L?.[0]||"",G()}function j(L){f.value=L||"",G()}return gs(async()=>{await h(),await G(),a&&(window.ethereum.on?.("accountsChanged",q),window.ethereum.on?.("chainChanged",j))}),vd(()=>{a&&(window.ethereum.removeListener?.("accountsChanged",q),window.ethereum.removeListener?.("chainChanged",j))}),(L,V)=>(be(),Ee("div",vL,[z("header",{class:"topbar"},[V[2]||(V[2]=z("div",{class:"brand"},[z("img",{src:Fc,alt:"AsiqTIX"})],-1)),V[3]||(V[3]=z("h1",{class:"title"},"History",-1)),z("button",{class:"hamburger","aria-label":"Toggle menu",onClick:r},[...V[1]||(V[1]=[z("span",null,null,-1),z("span",null,null,-1),z("span",null,null,-1)])])]),st(Hc,{modelValue:n.value,"onUpdate:modelValue":V[0]||(V[0]=$=>n.value=$),extraClass:"sb-topright"},null,8,["modelValue"]),z("main",wL,[V[9]||(V[9]=z("h2",{class:"section-title"},"Riwayat Tiket",-1)),s.value?(be(),Ee("div",bL,"Loading")):o.value?(be(),Ee("div",EL,Te(o.value),1)):(be(),Ee("ul",AL,[(be(!0),Ee(Jt,null,Uc(i.value,$=>(be(),Ee("li",{key:$.id,class:"item"},[z("div",_L,[z("h3",SL,Te($.title),1),st(mL,{"event-id":$.eventId,"ticket-code":$.ticketId||$.booking,"fallback-title":$.title,"fallback-date":$.dateIso||$.date,"fallback-location":$.location},null,8,["event-id","ticket-code","fallback-title","fallback-date","fallback-location"])]),z("div",CL,[z("p",null,[V[4]||(V[4]=z("strong",null,"Date:",-1)),Qe(" "+Te($.date),1)]),z("p",null,[V[5]||(V[5]=z("strong",null,"ID:",-1)),Qe(" "+Te($.booking),1)]),z("p",null,[V[6]||(V[6]=z("strong",null,"Price:",-1)),Qe(" "+Te($.price),1)]),z("p",null,[V[7]||(V[7]=z("strong",null,"Status:",-1)),Qe(" "+Te($.status),1)])])]))),128)),i.value.length?Je("",!0):(be(),Ee("li",xL,[...V[8]||(V[8]=[a1('<div class="header-line"><h3 class="event"></h3><button class="btn" disabled>DOWNLOAD TICKET</button></div><div class="meta"><p><strong>Date:</strong> </p><p><strong>ID:</strong> </p><p><strong>Price:</strong> </p><p><strong>Status:</strong> </p></div>',2)])]))]))])]))}},PL={key:0,class:"modal-backdrop"},IL={class:"modal"},RL={class:"receipt"},OL={class:"receipt-body"},NL={class:"row"},ML={class:"value"},LL={class:"row"},BL={class:"value"},DL={class:"row"},UL={class:"value"},$L={class:"row"},FL={class:"value"},HL={class:"row"},KL={class:"value"},jL={class:"row total"},VL={class:"value"},zL={key:0,class:"row hash"},GL={class:"value mono"},qL={class:"receipt-footer"},WL={__name:"Purchase_Success_Dialog",props:{open:{type:Boolean,default:!1},eventTitle:{type:String,default:""},venue:{type:String,default:""},dateText:{type:String,default:""},quantity:{type:Number,default:1},pricePerTicketPol:{type:Number,default:0},totalPol:{type:Number,default:0},txHash:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;function i(){r("close")}function s(){if(!n.txHash)return;const o=`https://amoy.polygonscan.com/tx/${n.txHash}`;window.open(o,"_blank","noopener")}return(o,a)=>t.open?(be(),Ee("div",PL,[z("div",IL,[z("div",RL,[a[9]||(a[9]=z("header",{class:"receipt-header"},[z("h2",null,"Tiket Berhasil Dibeli"),z("p",null,"Terima kasih! Berikut struk pembelian Anda.")],-1)),z("div",OL,[z("div",NL,[a[0]||(a[0]=z("span",{class:"label"},"Event",-1)),z("span",ML,Te(t.eventTitle||"-"),1)]),z("div",LL,[a[1]||(a[1]=z("span",{class:"label"},"Lokasi",-1)),z("span",BL,Te(t.venue||"-"),1)]),z("div",DL,[a[2]||(a[2]=z("span",{class:"label"},"Tanggal",-1)),z("span",UL,Te(t.dateText||"-"),1)]),a[7]||(a[7]=z("hr",{class:"divider"},null,-1)),z("div",$L,[a[3]||(a[3]=z("span",{class:"label"},"Qty",-1)),z("span",FL,Te(t.quantity),1)]),z("div",HL,[a[4]||(a[4]=z("span",{class:"label"},"Harga / Tiket",-1)),z("span",KL,Te(t.pricePerTicketPol.toFixed(4))+" POL",1)]),z("div",jL,[a[5]||(a[5]=z("span",{class:"label"},"Total",-1)),z("span",VL,Te(t.totalPol.toFixed(4))+" POL",1)]),a[8]||(a[8]=z("hr",{class:"divider"},null,-1)),t.txHash?(be(),Ee("div",zL,[a[6]||(a[6]=z("span",{class:"label"},"Tx Hash",-1)),z("span",GL,Te(t.txHash.slice(0,10))+""+Te(t.txHash.slice(-8)),1)])):Je("",!0)]),z("footer",qL,[z("button",{class:"btn ghost",type:"button",onClick:i}," Tutup "),t.txHash?(be(),Ee("button",{key:0,class:"btn primary",type:"button",onClick:s}," Lihat di Polygonscan ")):Je("",!0)])])])])):Je("",!0)}},QL=ms(WL,[["__scopeId","data-v-a7e5c061"]]),JL={key:0,class:"modal-backdrop"},YL={class:"modal"},ZL={class:"card"},XL={class:"msg"},eB={__name:"Purchase_Error_Dialog",props:{open:{type:Boolean,default:!1},message:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,i=()=>r("close");return(s,o)=>n.open?(be(),Ee("div",JL,[z("div",YL,[z("div",ZL,[o[0]||(o[0]=z("h2",null,"Pembelian Gagal",-1)),z("p",XL,Te(t.message||"Terjadi kesalahan saat memproses transaksi."),1),z("div",{class:"actions"},[z("button",{class:"btn",type:"button",onClick:i},"Tutup")])])])])):Je("",!0)}},tB=ms(eB,[["__scopeId","data-v-ce2e238f"]]),nB={class:"event-page"},rB={class:"topbar"},iB={key:0,class:"alert error"},sB={key:1,class:"loading"},oB={class:"hero-inner"},aB={class:"poster"},cB={class:"info"},lB={class:"event-title"},uB={class:"meta"},dB={class:"row"},fB={class:"v"},hB={class:"row"},pB={class:"v"},gB={class:"desc"},mB={class:"pricebox"},yB={class:"price"},vB={key:0,class:"stock"},wB={key:0},bB={key:1,class:"sold-out"},EB=["disabled"],AB={key:0},_B={key:1},SB={key:2},CB={key:1,class:"buy-msg"},xB={key:2,class:"promoter-tools"},kB={class:"promoter-balance"},TB={key:0,class:"hint"},PB={key:1,class:"buy-msg"},IB={key:2,class:"buy-msg"},RB=["href"],OB=["disabled"],NB={key:0},MB={key:1},LB={key:2},BB={key:3},DB={key:3,class:"promoter-tools",style:{"margin-top":"1.5rem"}},UB={class:"promoter-balance"},$B={key:0,class:"buy-msg"},FB=["disabled"],HB={key:0},KB={key:1},jB={key:2},VB={__name:"EventDetailView",setup(t){const e=Zs(),n=Sd(),{ensureChain:r}=b0(),i="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",s=_e(!1),o=()=>s.value=!s.value;fn(()=>e.fullPath,()=>s.value=!1);const c="http://localhost:3001".replace(/\/+$/,"").replace(/\/api$/i,""),l=()=>(localStorage.getItem("walletAddress")||"").toString();async function u(J,Q={}){const ie=J.startsWith("/api")?J:`/api${J.startsWith("/")?J:`/${J}`}`,re=await fetch(`${c}${ie}`,{...Q,headers:{"content-type":"application/json",...Q.headers||{},"x-wallet-address":l()}}),oe=await re.json().catch(()=>({}));if(!re.ok)throw new Error(oe?.error||oe?.message||`HTTP ${re.status}`);return oe}const d=_e(null),f=_e(!0),h=_e(""),g=_e(!1),p=_e(""),y=_e(!1),m=_e(!1),b=_e(null),w=_e(""),P=_e("customer"),O=Le(()=>P.value==="admin"),H=Le(()=>(l()||"").toLowerCase()),G=Le(()=>{if(!d.value)return!1;const J=(d.value.promoter_wallet||"").toLowerCase();return J&&H.value&&J===H.value}),q=_e(0n),j=Le(()=>{try{return co(q.value||0n)}catch{return"0.0"}}),L=Le(()=>q.value>0n),V=_e(!1),$=_e(""),D=_e(""),N=Le(()=>{if(!d.value?.date_iso)return!1;const J=new Date(d.value.date_iso);return Number.isNaN(J.getTime())?!1:J.getTime()<=Date.now()}),S=Le(()=>O.value||G.value),k=Le(()=>S.value&&N.value&&L.value);async function B(){if(!d.value)return;if(!l()){p.value="Wallet belum terhubung.";return}const J=Number(d.value.chain_event_id||0);if(!J){p.value="Event ini belum di-link ke kontrak (chain_event_id kosong).";return}try{g.value=!0,p.value="",await r("amoy");const ie=await new Un(window.ethereum).getSigner(),re=new pr(i,Ao,ie),oe=1n,te=await re.events(J),fe=te.priceWei;if(fe<=0n)throw new Error("Harga tiket on-chain tidak valid");if(!te.active)throw new Error("Event ini tidak aktif lagi");const le=fe*oe;console.log("[DEBUG BUY] chainEventId",J),console.log("[DEBUG BUY] on-chain event:",{promoter:te.promoter,priceWei:te.priceWei.toString(),maxSupply:te.maxSupply.toString(),sold:te.sold.toString(),active:te.active}),console.log("[DEBUG BUY] quantity",oe.toString()),console.log("[DEBUG BUY] totalPriceWei (value yg dikirim)",le.toString());const ge=await re.buyTicket(J,oe,{value:le});if(!(await ge.wait()).status)throw new Error("Transaksi di blockchain gagal");await u("/purchase",{method:"POST",body:JSON.stringify({amount:Number(d.value.price_idr||0)||0,ref_id:d.value.id,description:"On-chain purchase",tx_hash:ge.hash})}),d.value.sold_tickets=Number(d.value.sold_tickets??0)+Number(oe);const Pe=Number(co(fe)),Ve=Number(co(le));b.value={eventTitle:d.value.title,venue:d.value.venue,dateText:W.value,quantity:Number(oe),pricePerTicketPol:Pe,totalPol:Ve,txHash:ge.hash},p.value="Tiket berhasil dibeli! NFT tiket tersimpan di wallet kamu.",y.value=!0}catch(Q){console.error("[BUY ERROR RAW]",Q);const ie=Q?.info?.error||Q?.error||Q,re=Q?.reason||Q?.shortMessage||ie?.data?.message||ie?.message||Q?.message||"Unknown error";p.value=`Gagal membeli tiket: ${re}`,w.value=p.value,m.value=!0}finally{g.value=!1}}async function v(){if(!l()){P.value="customer";return}try{const J=await u("/api/me");P.value=J?.role||"customer"}catch{P.value="customer"}}async function E(){if(q.value=0n,$.value="",!!l()&&d.value?.chain_event_id)try{await r("amoy");const Q=await new Un(window.ethereum).getSigner(),ie=new pr(i,Ao,Q),re=Number(d.value.chain_event_id||0);if(!re)return;const oe=await ie.promoterBalances(re),te=typeof oe=="bigint"?oe:BigInt(oe.toString());q.value=te}catch(J){console.error("[promoterBalance] gagal load",J),$.value="Gagal memuat saldo promotor."}}async function x(){if($.value="",!S.value){$.value="Anda tidak berhak menarik dana event ini.";return}if(!d.value?.chain_event_id){$.value="Event ini belum di-link ke kontrak.";return}try{V.value=!0,await r("amoy");const Q=await new Un(window.ethereum).getSigner(),ie=new pr(i,Ao,Q),re=Number(d.value.chain_event_id||0);if(!re){$.value="Event belum punya ID on-chain.";return}const oe=q.value||0n,te=Number(co(oe));try{await ie.withdrawPromoter.staticCall(re)}catch(ge){console.error("[withdrawPromoter staticCall]",ge);const Ae=ge?.info?.error||ge?.error||ge;let Pe=ge?.reason||ge?.shortMessage||Ae?.data?.message||Ae?.message||ge?.message||"Unknown error";Pe.includes("EVENT_NOT_FINISHED")?$.value="Event belum selesai di blockchain. Dana baru bisa ditarik setelah waktu event terlewati.":Pe.includes("NO_BALANCE")?$.value="Tidak ada saldo yang bisa ditarik untuk event ini.":Pe.includes("NOT_EVENT_PROMOTER")?$.value="Wallet ini bukan promotor event ini (atau Anda bukan owner kontrak).":Pe.includes("EVENT_NOT_FOUND")?$.value="Event dengan ID tersebut tidak ditemukan di kontrak.":$.value=`Gagal menarik dana: ${Pe}`;return}const fe=await ie.withdrawPromoter(re);if(!(await fe.wait()).status)throw new Error("Transaksi withdraw gagal di blockchain");D.value=fe.hash;try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:te,ref_id:d.value.id,description:`Withdraw hasil penjualan event ${d.value.title||d.value.id}`,tx_hash:fe.hash})})}catch(ge){console.error("[withdraw-log] gagal simpan ke backend",ge)}$.value="Penarikan dana berhasil dikirim ke wallet.",await E()}catch(J){console.error("[withdrawPromoter]",J);const Q=J?.info?.error||J?.error||J;let ie=J?.reason||J?.shortMessage||Q?.data?.message||Q?.message||J?.message||"Unknown error";$.value=`Gagal menarik dana: ${ie}`}finally{V.value=!1}}const C=_e(0n),A=Le(()=>{try{return co(C.value||0n)}catch{return"0.0"}}),_=_e(!1),T=_e(""),R=Le(()=>C.value>0n),U=Le(()=>O.value&&R.value);async function I(){if(C.value=0n,T.value="",!!l()&&d.value?.chain_event_id)try{await r("amoy");const Q=await new Un(window.ethereum).getSigner(),ie=new pr(i,Ao,Q),re=Number(d.value.chain_event_id||0);if(!re)return;const oe=await ie.feeBalances(re),te=typeof oe=="bigint"?oe:BigInt(oe.toString());C.value=te}catch(J){console.error("[adminFeeBalance] gagal load",J),T.value="Gagal memuat saldo admin."}}async function K(){if(T.value="",!!U.value)try{_.value=!0,await r("amoy");const Q=await new Un(window.ethereum).getSigner(),ie=new pr(i,Ao,Q),re=Number(d.value.chain_event_id||0),oe=await ie.feeBalances(re),te=typeof oe=="bigint"?oe:BigInt(oe.toString()),fe=Number(co(te||0n)),le=await ie.withdrawFees(re);if(!(await le.wait()).status)throw new Error("Transaksi gagal di blockchain");try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:fe,ref_id:d.value.id,description:`Withdraw fee admin event ${d.value.title||d.value.id}`,tx_hash:le.hash})})}catch(Ae){console.error("[withdraw-log admin] gagal simpan ke backend",Ae)}T.value="Fee admin berhasil ditarik ke wallet.",await I()}catch(J){console.error("[withdrawAdminFee] error",J);let Q=String(J?.reason||J?.message||J||"");Q.includes("NO_FEE")&&(Q="Tidak ada fee yang bisa ditarik."),Q.includes("NOT_ADMIN")&&(Q="Wallet ini bukan admin/feeRecipient di kontrak."),T.value=Q}finally{_.value=!1}}const W=Le(()=>{const J=d.value?.date_iso?new Date(d.value.date_iso):null;if(!J)return"-";const Q=J.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit"}),ie=J.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${Q}, ${ie.replaceAll(".",":")}`.replace(/:/g,".")}),Z=Le(()=>{const J=Number(d.value?.price_idr||0);return J?`Rp ${J.toLocaleString("id-ID")}`:"-"}),se=Le(()=>{if(!d.value)return null;const J=Number(d.value.total_tickets??0),Q=Number(d.value.sold_tickets??0),ie=J-Q;return!Number.isFinite(ie)||ie<0?0:ie}),M=Le(()=>Number(d.value?.total_tickets??0)>0&&se.value===0),F=Le(()=>"url(/Background.png)"),Y=Le(()=>`url(${d.value?.image_url||"/poster_fallback.jpg"})`);function ne(){n.push({name:"home"})}return gs(async()=>{try{f.value=!0;const J=String(e.params.id||"");d.value=await u(`/api/events/${J}`),await Promise.all([v(),E(),I()])}catch(J){h.value=String(J.message||J)}finally{f.value=!1}}),(J,Q)=>(be(),Ee("div",nB,[z("header",rB,[z("button",{class:"back",onClick:ne}," Back"),Q[4]||(Q[4]=z("div",{class:"brand"},[z("img",{src:Fc,alt:"Tickety"})],-1)),Q[5]||(Q[5]=z("h1",{class:"title"},"Event",-1)),z("button",{class:"hamburger",type:"button","aria-label":"Toggle menu",onClick:ji(o,["stop"])},[...Q[3]||(Q[3]=[z("span",null,null,-1),z("span",null,null,-1),z("span",null,null,-1)])])]),st(Hc,{modelValue:s.value,"onUpdate:modelValue":Q[0]||(Q[0]=ie=>s.value=ie),extraClass:"sb-topright"},null,8,["modelValue"]),z("main",null,[h.value?(be(),Ee("div",iB,Te(h.value),1)):f.value?(be(),Ee("div",sB,"Loading")):(be(),Ee("section",{key:2,class:"hero",style:rs({"--hero":F.value})},[z("div",oB,[z("div",aB,[z("div",{class:"poster-img",style:rs({backgroundImage:Y.value})},null,4),Q[6]||(Q[6]=z("div",{class:"poster-grad"},null,-1))]),z("div",cB,[z("h2",lB,Te(d.value.title),1),z("div",uB,[z("div",dB,[Q[7]||(Q[7]=z("span",{class:"k"},"Location:",-1)),z("span",fB,Te(d.value.venue),1)]),z("div",hB,[Q[8]||(Q[8]=z("span",{class:"k"},"Date:",-1)),z("span",pB,Te(W.value),1)])]),z("p",gB,Te(d.value.description||"No description."),1)]),z("aside",mB,[Q[13]||(Q[13]=z("div",{class:"label"},"Price",-1)),z("div",yB,Te(Z.value),1),d.value.total_tickets>0?(be(),Ee("div",vB,[M.value?(be(),Ee("span",bB,"Sold out")):(be(),Ee("span",wB,"Tickets left: "+Te(se.value),1))])):Je("",!0),z("button",{class:"cta",disabled:M.value||g.value,onClick:B},[M.value?(be(),Ee("span",AB,"SOLD OUT")):g.value?(be(),Ee("span",_B,"PROCESSING")):(be(),Ee("span",SB,"BUY TICKET"))],8,EB),p.value?(be(),Ee("p",CB,Te(p.value),1)):Je("",!0),S.value?(be(),Ee("div",xB,[Q[9]||(Q[9]=z("h3",null,"Promoter Tools",-1)),Q[10]||(Q[10]=z("p",null,"Saldo dapat ditarik:",-1)),z("p",kB,[z("strong",null,Te(j.value)+" POL",1)]),N.value?Je("",!0):(be(),Ee("p",TB," Dana baru bisa ditarik setelah waktu event terlewati. ")),$.value?(be(),Ee("p",PB,Te($.value),1)):Je("",!0),D.value?(be(),Ee("p",IB,[z("a",{href:`https://amoy.polygonscan.com/tx/${D.value}`,target:"_blank",rel:"noopener noreferrer"}," Lihat transaksi di PolygonScan Amoy ",8,RB)])):Je("",!0),z("button",{class:"cta secondary",disabled:V.value||!k.value,onClick:x},[V.value?(be(),Ee("span",NB,"WITHDRAWING")):L.value?N.value?(be(),Ee("span",BB,"WITHDRAW TO WALLET")):(be(),Ee("span",LB,"WAIT EVENT FINISH")):(be(),Ee("span",MB,"NO FUNDS"))],8,OB)])):Je("",!0),O.value?(be(),Ee("div",DB,[Q[11]||(Q[11]=z("h3",null,"Admin Fee",-1)),Q[12]||(Q[12]=z("p",null,"Saldo fee admin yang bisa ditarik:",-1)),z("p",UB,[z("strong",null,Te(A.value)+" POL",1)]),T.value?(be(),Ee("p",$B,Te(T.value),1)):Je("",!0),z("button",{class:"cta secondary",disabled:_.value||!U.value,onClick:K},[_.value?(be(),Ee("span",HB,"WITHDRAWING")):R.value?(be(),Ee("span",jB,"WITHDRAW ADMIN FEE")):(be(),Ee("span",KB,"NO FEE"))],8,FB)])):Je("",!0)])])],4))]),y.value&&b.value?(be(),Mh(QL,{key:0,open:y.value,"event-title":b.value.eventTitle,venue:b.value.venue,"date-text":b.value.dateText,quantity:b.value.quantity,"price-per-ticket-pol":b.value.pricePerTicketPol,"total-pol":b.value.totalPol,"tx-hash":b.value.txHash,onClose:Q[1]||(Q[1]=ie=>y.value=!1)},null,8,["open","event-title","venue","date-text","quantity","price-per-ticket-pol","total-pol","tx-hash"])):Je("",!0),m.value?(be(),Mh(tB,{key:1,open:m.value,message:w.value||p.value,onClose:Q[2]||(Q[2]=ie=>m.value=!1)},null,8,["open","message"])):Je("",!0)]))}},zB=ms(VB,[["__scopeId","data-v-25b3e33b"]]),SS=Qk({history:xk("/"),routes:[{path:"/",name:"login",component:g6},{path:"/home",name:"home",component:e6,meta:{requiresWallet:!0}},{path:"/events/:id",name:"event",component:zB},{path:"/profile",name:"profile",component:F6,meta:{requiresAuth:!0}},{path:"/logout",name:"logout",component:z6},{path:"/wallet",name:"wallet",component:fL},{path:"/history",name:"history",component:TL},{path:"/:pathMatch(.*)*",redirect:{name:"login"}}]});SS.beforeEach(t=>{if(!t.meta.requiresWallet)return!0;const e=!!localStorage.getItem("auth_token"),n=!!localStorage.getItem("walletAddress");return e||n?!0:{name:"login"}});const E0=zx(u3);E0.use(Qx());E0.use(SS);E0.mount("#app");
